{"version":3,"sources":["webpack:///./node_modules/zrender/lib/core/timsort.js","webpack:///./node_modules/zrender/lib/contain/polygon.js","webpack:///./node_modules/zrender/lib/canvas/Layer.js","webpack:///./node_modules/zrender/lib/canvas/Painter.js","webpack:///./node_modules/zrender/lib/animation/easing.js","webpack:///./node_modules/zrender/lib/animation/Clip.js","webpack:///./node_modules/zrender/lib/animation/Animator.js","webpack:///./node_modules/zrender/lib/graphic/Image.js","webpack:///./node_modules/zrender/lib/tool/convertPath.js","webpack:///./node_modules/zrender/lib/tool/dividePath.js","webpack:///./node_modules/zrender/lib/tool/morphPath.js","webpack:///./node_modules/zrender/lib/core/matrix.js","webpack:///./node_modules/zrender/lib/graphic/Displayable.js","webpack:///./node_modules/zrender/lib/core/PathProxy.js","webpack:///./node_modules/zrender/node_modules/tslib/tslib.es6.js","webpack:///./node_modules/zrender/lib/core/env.js","webpack:///./node_modules/zrender/lib/config.js","webpack:///./node_modules/zrender/lib/graphic/Group.js","webpack:///./node_modules/zrender/lib/tool/parseSVG.js","webpack:///./node_modules/zrender/lib/tool/transformPath.js","webpack:///./node_modules/zrender/lib/tool/path.js","webpack:///./node_modules/zrender/lib/canvas/helper.js","webpack:///./node_modules/zrender/lib/graphic/IncrementalDisplayable.js","webpack:///./node_modules/zrender/lib/core/vector.js","webpack:///./node_modules/zrender/lib/tool/color.js","webpack:///./node_modules/zrender/lib/graphic/Gradient.js","webpack:///./node_modules/zrender/lib/graphic/shape/Ring.js","webpack:///./node_modules/zrender/lib/core/WeakMap.js","webpack:///./node_modules/zrender/lib/graphic/LinearGradient.js","webpack:///./node_modules/zrender/lib/core/curve.js","webpack:///./node_modules/zrender/lib/tool/parseXML.js","webpack:///./node_modules/zrender/lib/graphic/helper/roundSector.js","webpack:///./node_modules/zrender/lib/graphic/shape/Sector.js","webpack:///./node_modules/zrender/lib/graphic/constants.js","webpack:///./node_modules/zrender/lib/graphic/helper/poly.js","webpack:///./node_modules/zrender/lib/graphic/helper/smoothBezier.js","webpack:///./node_modules/zrender/lib/canvas/graphic.js","webpack:///./node_modules/zrender/lib/graphic/helper/image.js","webpack:///./node_modules/zrender/lib/core/event.js","webpack:///./node_modules/zrender/lib/core/fourPointsTransform.js","webpack:///./node_modules/zrender/lib/core/dom.js","webpack:///./node_modules/zrender/lib/contain/quadratic.js","webpack:///./node_modules/zrender/lib/mixin/Draggable.js","webpack:///./node_modules/zrender/lib/core/GestureMgr.js","webpack:///./node_modules/zrender/lib/Handler.js","webpack:///./node_modules/zrender/lib/Storage.js","webpack:///./node_modules/zrender/lib/animation/Animation.js","webpack:///./node_modules/zrender/lib/dom/HandlerProxy.js","webpack:///./node_modules/zrender/lib/zrender.js","webpack:///./node_modules/zrender/lib/core/util.js","webpack:///./node_modules/zrender/lib/core/Eventful.js","webpack:///./node_modules/zrender/lib/core/platform.js","webpack:///./node_modules/zrender/lib/graphic/Text.js","webpack:///./node_modules/zrender/lib/svg/helper.js","webpack:///./node_modules/zrender/lib/contain/util.js","webpack:///./node_modules/zrender/lib/core/Transformable.js","webpack:///./node_modules/zrender/lib/contain/windingLine.js","webpack:///./node_modules/zrender/lib/graphic/shape/Polygon.js","webpack:///./node_modules/zrender/lib/canvas/dashStyle.js","webpack:///./node_modules/zrender/lib/graphic/shape/Arc.js","webpack:///./node_modules/zrender/lib/contain/line.js","webpack:///./node_modules/zrender/lib/core/BoundingRect.js","webpack:///./node_modules/zrender/lib/animation/requestAnimationFrame.js","webpack:///./node_modules/zrender/lib/graphic/helper/subPixelOptimize.js","webpack:///./node_modules/zrender/lib/graphic/shape/BezierCurve.js","webpack:///./node_modules/zrender/lib/graphic/shape/Ellipse.js","webpack:///./node_modules/zrender/lib/animation/cubicEasing.js","webpack:///./node_modules/zrender/lib/graphic/shape/Rect.js","webpack:///./node_modules/zrender/lib/graphic/helper/roundRect.js","webpack:///./node_modules/zrender/lib/core/OrientedBoundingRect.js","webpack:///./node_modules/zrender/lib/graphic/shape/Line.js","webpack:///./node_modules/zrender/lib/contain/cubic.js","webpack:///./node_modules/zrender/lib/contain/arc.js","webpack:///./node_modules/zrender/lib/contain/path.js","webpack:///./node_modules/zrender/lib/graphic/Path.js","webpack:///./node_modules/zrender/lib/graphic/helper/parseText.js","webpack:///./node_modules/zrender/lib/graphic/shape/Polyline.js","webpack:///./node_modules/zrender/lib/graphic/CompoundPath.js","webpack:///./node_modules/zrender/lib/core/LRU.js","webpack:///./node_modules/zrender/lib/Element.js","webpack:///./node_modules/zrender/lib/graphic/shape/Circle.js","webpack:///./node_modules/zrender/lib/svg/SVGPathRebuilder.js","webpack:///./node_modules/zrender/lib/svg/mapStyleToAttrs.js","webpack:///./node_modules/zrender/lib/svg/core.js","webpack:///./node_modules/zrender/lib/svg/cssAnimation.js","webpack:///./node_modules/zrender/lib/svg/graphic.js","webpack:///./node_modules/zrender/lib/svg/domapi.js","webpack:///./node_modules/zrender/lib/svg/patch.js","webpack:///./node_modules/zrender/lib/svg/Painter.js","webpack:///./node_modules/zrender/lib/core/Point.js","webpack:///./node_modules/zrender/lib/graphic/TSpan.js","webpack:///./node_modules/zrender/lib/graphic/RadialGradient.js","webpack:///./node_modules/zrender/lib/core/bbox.js","webpack:///./node_modules/zrender/lib/contain/text.js"],"names":["makeAscendingRun","array","lo","hi","compare","runHi","t","reverseRun","binaryInsertionSort","start","mid","pivot","left","right","n","gallopLeft","value","length","hint","lastOffset","maxOffset","offset","tmp","m","gallopRight","TimSort","runStart","runLength","minGallop","stackSize","mergeAt","i","start1","length1","start2","length2","k","cursor1","cursor2","dest","count1","count2","exit","_minGallop","Error","mergeLow","customCursor","customDest","mergeHigh","mergeRuns","forceMergeRuns","pushRun","_runStart","_runLength","sort","remaining","ts","minRun","r","minRunLength","force","isAroundEqual","a","b","Math","abs","contain","points","x","y","w","p","p2","p0","createDom","id","painter","dpr","newDom","platform","createCanvas","width","getWidth","height","getHeight","newDomStyle","style","position","top","setAttribute","_super","Layer","dom","_this","call","this","motionBlur","lastFrameAlpha","virtual","config","incremental","zlevel","maxRepaintRectCount","__dirty","__firstTimePaint","__used","__drawIndex","__startIndex","__endIndex","__prevStartIndex","__prevEndIndex","util","domStyle","onselectstart","padding","margin","borderWidth","prototype","getElementCount","afterBrush","initContext","ctx","getContext","setUnpainted","createBackBuffer","domBack","ctxBack","scale","createRepaintRects","displayList","prevList","viewWidth","viewHeight","hasIntersections","mergedRepaintRects","full","pendingRect","BoundingRect","addRectToMergePool","rect","isFinite","isZero","boundingRect","copy","push","isMerged","minDeltaArea","Infinity","bestRectToMergeIdx","mergedRect","intersect","pendingRect_1","union","aArea","bArea","deltaArea","el","shouldPaint","shouldBePainted","prevRect","__isRendered","getPrevPaintRect","curRect","getPaintRect","__zr","splice","j","_paintRects","debugGetPaintRects","slice","resize","clear","clearAll","clearColor","repaintRects","haveMotionBLur","self","globalCompositeOperation","drawImage","doClear","clearRect","clearColorGradientOrPattern","__canvasGradient","dirty","__painter","refresh","save","fillStyle","fillRect","restore","globalAlpha","Eventful","CanvasPainter","root","storage","opts","type","_zlevelList","_prevDisplayList","_layers","_layerConfig","_needsManuallyCompositing","singleCanvas","nodeName","toUpperCase","_opts","devicePixelRatio","_singleCanvas","innerHTML","zlevelList","layers","rootCanvas","_width","_height","mainLayer","__builtin__","_domRoot","domRoot","document","createElement","cssText","join","createRoot","appendChild","getType","isSingleCanvas","getViewportRoot","getViewportRootOffset","viewportRoot","offsetLeft","offsetTop","paintAll","list","getDisplayList","_redrawId","random","_paintList","z","layer","_backgroundColor","useDirtyRect","refreshHover","_paintHoverList","len","hoverLayer","_hoverlayer","scope","inHover","__inHover","getLayer","getHoverLayer","paintOne","redrawId","_updateLayerStatus","_a","_doPaintList","finished","needsRefreshHover","_compositeManually","eachLayer","self_1","requestAnimationFrame","eachBuiltinLayer","layerList","zi","_loop_1","this_1","useTimer","Date","now","startTime","firstEl","notClear","console","error","repaint","repaintRect","allClipped","prevEl","_doPaintEl","prevElClipPaths","beginPath","clip","env","wxa","draw","currentLayer","isLast","paintRect","setPrevPaintRect","insertLayer","layersMap","prevLayer","isLayerValid","prevDom","nextSibling","insertBefore","firstChild","cb","context","eachOtherLayer","getLayers","updatePrevLayer","idx","i_1","prevZlevel","incrementalLayerCount","_clearLayer","setBackgroundColor","backgroundColor","configLayer","layerConfig","_zlevel","delLayer","parentNode","removeChild","display","hasOwnProperty","clearLayer","dispose","getRenderedCanvas","imageLayer","pixelRatio","width_1","height_1","renderToCanvas","easingFuncs","linear","quadraticIn","quadraticOut","quadraticInOut","cubicIn","cubicOut","cubicInOut","quarticIn","quarticOut","quarticInOut","quinticIn","quinticOut","quinticInOut","sinusoidalIn","cos","PI","sinusoidalOut","sin","sinusoidalInOut","exponentialIn","pow","exponentialOut","exponentialInOut","circularIn","sqrt","circularOut","circularInOut","elasticIn","s","asin","elasticOut","elasticInOut","backIn","backOut","backInOut","bounceIn","bounceOut","bounceInOut","Clip","_inited","_startTime","_pausedTime","_paused","_life","life","_delay","delay","loop","onframe","ondestroy","onrestart","easing","setEasing","step","globalTime","deltaTime","elapsedTime","percent","min","easingFunc","schedule","remainder","pause","resume","arraySlice","Array","interpolateNumber","p1","interpolate1DArray","out","add1DArray","sign","add2DArray","len2","fillColorStops","val0","val1","len0","len1","shorterArr","shorterLen","last","color","max","fillArray","arrDim","arr0","arr1","arr0Len","arr1Len","isNaN","cloneValue","ret","rgba2String","rgba","floor","isGradientValueType","valType","isArrayValueType","tmpRgba","Track","propName","keyframes","discrete","_invalid","_needsSort","_lastFr","_lastFrP","isFinished","_finished","setFinished","_additiveTrack","needsAnimate","getAdditiveTrack","addKeyframe","time","rawValue","arrayDim","guessArrayDim","colorArray","parsedGradient","colorStops","colorStop","kf","prepare","maxTime","additiveTrack","kfs","kfsLen","lastKf","isDiscrete","isArr","isGradient","lastValue","startValue","additiveValue","target","frameIdx","frame","nextFrame","isAdditive","valueKey","kfsNum","isValueColor","lastFrame","mathMin","interval","targetArr","_additiveValue","interpolate2DArray","val","nextVal_1","isLinearGradient_1","nextColorStop","global","x2","y2","_addToTarget","Animator","allowDiscreteAnimation","additiveTo","_tracks","_trackKeys","_maxTime","_started","_clip","_target","_loop","_additiveAnimators","_allowDiscrete","getMaxTime","getDelay","getLoop","getTarget","changeTarget","when","props","whenWithKeys","propNames","tracks","track","initialValue","_getAdditiveTrack","addtiveTrackKfs","lastFinalKf","isPaused","duration","_force","_doneCallback","_setTracksFinished","doneList","_doneCbs","_abortedCallback","animation","abortedList","_abortedCbs","removeClip","tracksKeys","trackName","additiveAnimators","getTrack","stillHasAdditiveAnimator","onframeList","_onframeCbs","addClip","stop","forwardToLast","during","done","aborted","getClip","getTracks","key","stopTracks","allAborted","saveTo","trackKeys","firstOrLast","__changeFinalValue","finalProps","pop","DEFAULT_IMAGE_STYLE","DEFAULT_IMAGE_ANIMATION_PROPS","sx","sy","sWidth","sHeight","ZRImage","apply","arguments","createStyle","obj","_getSize","dim","size","source","imageSource","image","__image","otherDim","otherDimSize","getAnimationStyleProps","getBoundingRect","_rect","CMD","aroundEqual","pathToBezierCurves","path","currentSubpath","x1","y1","data","bezierArrayGroups","xi","yi","x0","y0","createNewSubpath","addLine","addArc","startAngle","endAngle","cx","cy","rx","ry","delta","tan","dir","c1","s1","c2","s2","x4","y4","hx","hy","cmd","isFirst","L","C","Q","M","A","anticlockwise","angle","R","Z","adpativeBezier","x3","y3","PIXEL_DISTANCE","PIXEL_DISTANCE_SQR","dx","dy","d","dx1","dy1","dx2","dy2","cp1LenSqr","cp2LenSqr","projLen1","projLen2","tmpSegX","tmpSegY","getDividingGrids","dimSize","rowDim","count","rowSize","columnSize","ratio","rowCount","ceil","columnCount","grids","remained","divideSector","sectorShape","outShapes","r0","arcLen","deltaR","isAngleRow","row","column","newShape","clockwise","crossProduct2d","lineLineIntersect","a1x","a1y","a2x","a2y","b1x","b1y","b2x","b2y","mx","my","nx","ny","nmCrossProduct","Point","projPtOnLine","pt","lineA","lineB","sub","normalize","dir2","dot","addToPoly","poly","binaryDividePolygon","polygonShape","pt0","pt1","intersections","intersectionPt","projPt","splitPt0","splitPt1","splitPt0Arr","splitPt1Arr","newPolyA","newPolyB","splitPolygonByLine","binaryDivideRecursive","divider","shape","split","OutShapeCtor","rectShape","isHorizontalRow","rowSizeDim","columnSizeDim","columnDim","divideRect","Rect","Sector","getComputedTransform","polygons","beziers","polygon","pathToPolygons","getUpdatedPathProxy","polygonConvert","polygonCount","totalArea_1","items","area","item","selfCount","Polygon","paths","clone","subPath","setShape","setStyle","z2","alignSubpath","subpath1","subpath2","shorterPath","diff","shorterBezierCount","eachCurveSubDivCount","newSubpath","actualSubDivCount","createSubpath","lastSubpathSubpath","otherSubpath","lastX","lastY","centroid","signedArea","findBestRingOffset","fromSubBeziers","toSubBeziers","fromCp","toCp","bezierCount","bestScore","bestOffset","cursorOffset","score","reverse","newArr","isCombineMorphing","__isCombineMorphing","saveAndModifyMethod","methodName","modifiers","savedMethodName","originalMethod","replace","after","before","res","args","restoreMethod","applyTransformOnBeziers","bezierCurves","mm","subBeziers","prepareMorphPath","fromPath","toPath","fromPathProxy","toPathProxy","array1","array2","lastSubpath1","lastSubpath2","newArray1","newArray2","newSubpath1","newSubpath2","alignBezierCurves","fromBezierCurves","toBezierCurves","fromPathTransform","toPathTransform","transform","morphingData","fromArr","toArr","searchAngleIteration","searchAngleRange","fromNeedsReverse","result","fromSubpathBezier","toSubpathBezier","newFromSubpathBezier","newToSubpathBezier","bestAngle","tmpArr","sa","ca","newX1","newY1","from","to","rotation","findBestMorphingRotation","__morphT","onet","newCp","x0_1","y0_1","moveTo","lineTo","bezierCurveTo","morphPath","animationOpts","oldDone","oldDuring","animateTo","dirtyShape","createPathProxy","hilbert","minX","minY","maxX","maxY","round","sortPaths","pathList","xMin","yMin","xMax","yMax","cps","cp","map","defaultDividePath","param","combineMorph","fromList","fromPathList","addFromPath","childrenRef","Path","separateCount","fromIndividuals","toIndividuals","toSubPathList","dividePath","individualDelay","identityTransform","Transformable","parent","copyTransform","addToSubPathListToZr","zr","addSelfToZr","restoreToPath","removeSelfFromZr","toLen","animating_1","eachDone","indivdualAnimationOpts","child","separateMorph","toPathList","fromLen","setLocalTransform","create","identity","mul","m1","m2","out0","out1","out2","out3","out4","out5","translate","v","rotate","rad","aa","ac","atx","ab","ad","aty","st","ct","vx","vy","invert","det","STYLE_MAGIC_KEY","DEFAULT_COMMON_STYLE","shadowBlur","shadowOffsetX","shadowOffsetY","shadowColor","opacity","blend","DEFAULT_COMMON_ANIMATION_PROPS","PRIMARY_STATES_KEYS","PRIMARY_STATES_KEYS_IN_HOVER_LAYER","Displayable","dispProto","_init","keysArr","useStyle","attrKV","beforeBrush","innerBeforeBrush","innerAfterBrush","considerClipPath","considerAncestors","ignore","invisible","culling","tmpRect","applyTransform","viewRect","isDisplayableCulled","__clipPaths","isZeroArea","parent_1","rectContain","traverse","coord","transformCoordToLocal","_paintRect","elRect","shadowSize","tolerance","dirtyRectTolerance","_prevPaintRect","animateStyle","animate","updateDuringAnimation","targetKey","dirtyStyle","markRedraw","keyOrObj","notRedraw","styleChanged","styleUpdated","__hoverStyle","isStyleObject","_innerSaveToNormal","toState","normalState","_normalState","_mergeStyle","_savePrimaryToNormal","_applyStateObj","stateName","state","keepCurrentStates","transition","animationCfg","targetStyle","needsRestoreToNormal","sourceStyle","changedKeys","targetKeys","_transitionState","statesKeys","_mergeStates","states","mergedStyle","mergedState","initDefaultProps","cursor","rectHover","tmpOutX","tmpOutY","min2","max2","mathMax","mathCos","mathSin","mathAbs","PI2","hasTypedArray","Float32Array","tmpAngles","modPI2","radian","normalizeArcAngles","angles","newStartAngle","newEndAngle","PathProxy","notSaveData","_xi","_yi","_x0","_y0","_len","_saveData","proto","increaseVersion","_version","getVersion","setScale","segmentIgnoreThreshold","_ux","_uy","setDPR","setContext","_ctx","reset","_pathSegLen","_pathLen","_drawPendingPt","addData","exceedUnit","_pendingPtDist","d2","_pendingPtX","_pendingPtY","quadraticCurveTo","arc","arcTo","radius","h","closePath","fill","toStatic","stroke","setData","appendPath","appendSize","appendPathData","c","e","f","g","_expandData","newData","Number","MAX_VALUE","_calculateLength","ux","uy","pathSegLen","pathTotalLen","segCount","l","rebuildPath","displayedLength","pendingPtX","pendingPtY","drawPart","accumLength","pendingPtDist","psi","isEllipse","breakBuild","ellipse","d_1","newProxy","extendStatics","Object","setPrototypeOf","__proto__","__extends","TypeError","String","__","constructor","Browser","firefox","ie","edge","newEdge","weChat","browser","node","worker","svgSupported","touchEventsSupported","pointerEventsSupported","domSupported","transformSupported","transform3dSupported","hasGlobalWindow","window","wx","getSystemInfoSync","navigator","ua","match","test","version","SVGRect","documentElement","WebKitCSSMatrix","detect","userAgent","screen","deviceXDPI","logicalXDPI","DARK_MODE_THRESHOLD","DARK_LABEL_COLOR","LIGHT_LABEL_COLOR","LIGHTER_LABEL_COLOR","Group","isGroup","_children","attr","children","childAt","childOfName","name","childCount","add","_doAdd","addBefore","indexOf","oldChild","newChild","replaceAt","index","old","remove","removeAll","eachChild","stopped","includeChildren","tmpMat","childRect","getLocalTransform","nodeParsers","INHERITABLE_STYLE_ATTRIBUTES_MAP","INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS","SELF_STYLE_ATTRIBUTES_MAP","SELF_STYLE_ATTRIBUTES_MAP_KEYS","SVGParser","_defs","_root","parse","xml","opt","svg","_defsUsePending","named","viewBox","getAttribute","parseFloat","parseAttributes","viewBoxRect","viewBoxTransform","_parseNode","defs","defsUsePending","applyDefs","viewBoxArr","splitNumberSequence","makeViewBoxTransform","ignoreViewBox","elRoot","scaleX","scaleY","ignoreRootClip","setClipPath","xmlNode","parentGroup","namedFrom","isInDefs","isInText","toLowerCase","namedFromForSub","parser_1","nameAttr","newNamed","svgNodeTagLower","parser","paintServerParsers","def","nodeType","_parseText","text","textContent","silent","_textX","_textY","inheritStyle","parentSelfStyle","__selfStyle","textBaseline","zrTextBaseline","parentInheritedStyle","__inheritedStyle","textAlign","zrTextAlign","applyTextAlignment","textStyle","fontSize","font","fontFamily","fontStyle","fontWeight","internalField","circle","line","pointsArr","pointsStr","parsePoints","polyline","img","parseInt","gradient","parsePaintServerUnit","parseGradientColorStops","toLocaleLowerCase","offsetStr","styleVals","parseInlineStyle","stopColor","pointsString","onlyInlineStyle","isTextGroup","disp","inheritedStyle","selfStyle","transformOps_1","mt","transformRegex","str","valueArr","DEGREE_TO_ANGLE","parseTransformAttribute","inheritableStyleResult","selfStyleResult","svgAttrName","attrValue","parseAttributeStyle","getFillStrokeStyle","lineDash","visibility","urlRegex","method","urlMatch","url","numberReg","rawStr","styleRegex","styleRegResult","lastIndex","exec","svgStlAttr","zrInheritableStlAttr","zrSelfStlAttr","parseSVG","mathSqrt","mathAtan2","atan2","transformPath","nPoint","p_1","vMag","vRatio","u","vAngle","acos","processArc","fa","fs","psiDeg","xp","yp","lambda","cxp","cyp","theta","dTheta","commandReg","SVGPath","isPathProxy","createPathOptions","pathProxy","prevCmd","cpx","cpy","subpathX","subpathY","cmdList","cmdText","cmdStr","charAt","pLen","off","ctlPtx","ctlPty","pathData","createPathProxyFromString","innerOpts","buildPath","createFromString","extendFromString","defaultOpts","Sub","mergePath","pathEls","pathEl","pathBundle","clonePath","sourcePath","bakeTransform","toLocal","isSafeNum","num","getCanvasGradient","canvasGradient","createRadialGradient","createLinearGradient","addColorStop","isClipPathChanged","clipPaths","prevClipPaths","parseInt10","getSize","whIdx","wh","cwh","plt","prb","stl","defaultView","getComputedStyle","IncrementalDisplayable","_displayables","_temporaryDisplayables","_cursor","getCursor","clearDisplaybles","clearTemporalDisplayables","addDisplayable","displayable","notPersistent","addDisplayables","displayables","getDisplayables","getTemporalDisplayables","eachPendingDisplayable","update","updateTransform","needLocalTransform","localPos","set","v1","v2","scaleAndAdd","lenSquare","distance","dist","distSquare","lerp","kCSSColorTable","clampCssByte","clampCssFloat","parseCssInt","parseCssFloat","cssHueToRgb","lerpNumber","setRgba","copyRgba","colorCache","lastRemovedArr","putToCache","colorStr","rgbaArr","put","cached","get","iv","strLen","op","ep","fname","substr","params","alpha","hsla2rgba","hsla","lift","level","colorArr","stringify","fastLerp","normalizedValue","colors","leftIndex","rightIndex","leftColor","rightColor","dv","fullOutput","modifyHSL","H","S","G","B","vMin","vMax","deltaG","deltaB","rgba2hsla","modifyAlpha","arrColor","lum","backgroundLum","arr","Gradient","RingShape","Ring","getDefaultShape","wmUniqueIndex","supportDefineProperty","defineProperty","WeakMap","_id","_guard","enumerable","configurable","has","LinearGradient","globalCoord","mathPow","THREE_SQRT","_v0","_v1","_v2","isAroundZero","isNotAroundZero","cubicAt","p3","cubicDerivativeAt","cubicRootAt","roots","t1","disc","K","t2","discSqrt","Y1","Y2","T","ASqrt","t3","cubicExtrema","extrema","cubicSubdivide","p01","p12","p23","p012","p123","p0123","cubicProjectPoint","prev","next","d1","_t","cubicLength","iteration","px","py","quadraticAt","quadraticDerivativeAt","quadraticRootAt","quadraticExtremum","quadraticSubdivide","quadraticProjectPoint","quadraticLength","parseXML","DOMParser","parseFromString","svgNode","mathACos","mathATan2","computeCornerTangents","cr","x01","y01","ox","oy","x11","y11","x10","y10","x00","y00","cx0","cy0","cx1","cy1","dx0","dy0","innerRadius","hasRadius","mod","icrStart","icrEnd","ocrStart","ocrEnd","ocrs","ocre","icrs","icre","ocrMax","icrMax","limitedOcrMax","limitedIcrMax","xre","yre","xirs","yirs","xrs","yrs","xire","yire","hasArc","cornerRadius","concat","normalizeCornerRadius","halfRd","it_1","dx10","dy10","dx32","dy32","crStart","crEnd","ct0","ct1","SectorShape","REDRAW_BIT","STYLE_CHANGED_BIT","SHAPE_CHANGED_BIT","smooth","controlPoints","isLoop","constraint","prevPoint","nextPoint","point","d0","sum","cp0","cp1","shift","smoothBezier","smoothConstraint","cp2","pathProxyForDraw","styleHasStroke","lineWidth","isValidStrokeFillStyle","strokeOrFill","styleHasFill","doFillPath","fillOpacity","originalGlobalAlpha","doStrokePath","strokeOpacity","createCanvasPattern","pattern","canvasPattern","createPattern","repeat","DOMMatrix","setTransform","matrix","translateSelf","rotateSelf","scaleSelf","SHADOW_NUMBER_PROPS","STROKE_PROPS","bindCommonProps","prevStyle","forceSetAll","flushPathDrawn","bindPathAndTextCommonStyle","getStyle","strokeStyle","hasStroke","newLineWidth","strokeNoScale","getLineScale","prop","setContextTransform","batchFill","batchStroke","brushSingle","brush","forceSetTransform","forceSetStyle","clipPath","updateClipStatus","m0","canBatchPath","autoBatch","hasFill","strokePercent","canPathBatch","lastDrawType","inBatch","strokePart","firstDraw","dirtyFlag","hasFillGradient","hasStrokeGradient","hasFillPattern","hasStrokePattern","fillGradient","strokeGradient","fillPattern","strokePattern","__canvasFillGradient","__canvasStrokeGradient","__canvasFillPattern","__canvasStrokePattern","lineDashOffset","getGlobalScale","setLineDash","needsRebuild","pathUpdated","strokeFirst","brushPath","strokeText","fillText","brushText","bindImageStyle","onload","aspect","brushImage","temporalDisplayables","innerScope","len_1","brushIncremental","globalImageCache","findExistImage","newImageOrSrc","cachedImgObj","createOrUpdateImage","hostEl","cbPayload","__zrImageSrc","pendingWrap","isImageReady","pending","loadImage","imageOnLoad","__cachedImgObj","onerror","MOUSE_EVENT_REG","_calcOut","firefoxNotSupportOffsetXY","clientToLocal","calculate","calculateZrXY","layerX","offsetX","zrX","zrY","layerY","offsetY","getBoundingClientRect","ex","clientX","ey","clientY","box","getNativeEvent","event","normalizeEvent","eventType","touch","targetTouches","changedTouches","wheelDelta","rawWheelDelta","deltaX","deltaY","getWheelDeltaMayPolyfill","zrDelta","detail","button","which","undefined","addEventListener","handler","removeEventListener","preventDefault","stopPropagation","cancelBubble","isMiddleOrRightButtonOnMouseUpDown","LN2","log","determinant","rows","rank","rowStart","rowMask","colMask","detCache","cacheKey","fullRank","colStart","subRowMask","subRowStart","colLocalIdx","colTag","buildTransformer","src","mA","vh","srcPointX","srcPointY","pk","transformLocalCoord","elFrom","elTarget","inX","inY","transformCoordWithViewport","inverse","isCanvasEl","saved","transformer","markers","transformerName","oldSrcCoords","srcCoords","destCoords","oldCoordTheSame","ii","preparePointerTransformer","propLR","propTB","marker","idxLR","idxTB","prepareCoordMarkers","containStroke","_l","Param","topTarget","Draggable","on","_dragStart","_drag","_dragEnd","draggingTarget","draggable","__hostTarget","_draggingTarget","dragging","_x","_y","dispatchToElement","drift","dropTarget","findHover","lastDropTarget","_dropTarget","GestureMgr","_track","recognize","_doTrack","_recognize","touches","trackItem","pos","eventName","recognizers","gestureInfo","pointPair","pinch","trackLen","pinchEnd","pinchPre","pinchScale","pinchCenter","pinchX","pinchY","stopEvent","EmptyProxy","setCursor","HoveredResult","handlerNames","Handler","proxy","painterRoot","_hovered","setHandlerProxy","_draggingMgr","mousemove","isOutside","isOutsideBoundary","lastHovered","lastHoveredTarget","hovered","hoveredTarget","mouseout","eventControl","zrEventControl","trigger","dispatch","eventArgs","setCursorStyle","cursorStyle","targetInfo","eventKey","eventPacket","eveType","gestureEvent","zrByTouch","makeEventPacket","exclude","hoverCheckResult","isHover","processGesture","stage","_gestureMgr","gestureMgr","isSilent","ignoreClip","getClipPath","handlerInstance","_downEl","_downPoint","_upEl","invalidZErrorLogged","logInvalidZError","warn","shapeCompareFunc","Storage","_roots","_displayList","_displayListLen","displayableSortFunc","includeIgnore","updateDisplayList","_updateAndAddDisplayable","timsort","beforeUpdate","afterUpdate","userSetClipPath","currentClipPath","parentClipPath","decalEl","getDecalElement","textGuide","getTextGuideLine","textEl","getTextContent","addRoot","delRoot","delAllRoots","getRoots","getTime","mouseHandlerNames","pointerEventNameMap","Animation","_running","_time","_pauseStart","_head","_tail","addAnimator","animator","removeAnimator","notTriggerFrameAndStageUpdate","nextClip","_startLoop","options","globalEventSupported","localNativeListenerNames","pointerdown","pointerup","pointermove","pointerout","mouse","pointer","nm","globalNativeListenerNames","wheelEventSupported","isPointerFromTouch","pointerType","markTouch","isLocalEl","instance","elTmp","isLocal","domBelongToZr","stopImmediatePropagation","currentTarget","localDOMHandlers","mousedown","__mayPointerCapture","downPoint","__togglePointerCapture","mouseup","toElement","relatedTarget","__pointerCapturing","wheel","mousewheel","touchstart","__lastTouchMoment","touchmove","touchend","click","globalDOMHandlers","pointerCaptureReleasing","mountLocalDOMEventListeners","domHandlers","nativeEventName","mountSingleDOMEventListener","touching","touchTimer","clearTimeout","setTimeout","setTouchTimer","mountGlobalDOMEventListeners","mount","normalizeGlobalEvent","capture","listener","mounted","listenerOpts","domTarget","unmountDOMEventListeners","DOMHandlerScope","HandlerDomProxy","_localHandlerScope","_globalHandlerScope","isPointerCapturing","globalHandlerScope","painterCtors","instances","ZRender","_sleepAfterStill","_stillFrameAccum","_needsRefresh","_needsRefreshHover","_darkMode","rendererType","renderer","ssrMode","ssr","ssrOnly","handerProxy","HandlerProxy","_flush","zLevel","totalLum","isDarkMode","getBackgroundColor","setDarkMode","darkMode","refreshImmediately","fromInside","flush","triggerRendered","refreshHoverImmediately","end","setSleepAfterStill","stillFramesCount","wakeUp","clearAnimation","eventHandler","init","registerPainter","Ctor","BUILTIN_OBJECT","reduce","TYPED_ARRAY","objToString","toString","arrayProto","nativeForEach","forEach","nativeFilter","filter","nativeSlice","nativeMap","ctorFunction","protoFunction","idStart","guid","logError","_i","typeStr","isPrimitive","isDom","merge","overwrite","isObject","targetProp","sourceProp","isArray","isBuiltInObject","mergeAll","targetAndSources","extend","assign","defaults","overlay","keys","inherits","clazz","baseClazz","clazzPrototype","F","superClass","mixin","override","getOwnPropertyNames","keyList","isArrayLike","each","memo","find","bind","isFunction","func","curry","isString","isStringSafe","isNumber","isTypedArray","ownerDocument","isGradientObject","isImagePatternObject","isRegExp","eqNaN","retrieve","retrieve2","value0","value1","retrieve3","value2","normalizeCssArray","assert","condition","message","trim","setAsPrimitive","HashMap","thisMap","visit","removeKey","createHashMap","concatArray","newArray","createObject","properties","StyleCtor","disableUserSelect","webkitUserSelect","userSelect","webkitTapHighlightColor","hasOwn","own","noop","RADIAN_TO_DEGREE","eventProcessors","_$eventProcessor","query","_$handlers","_h","eventProcessor","normalizeQuery","wrap","callAtLast","zrEventfulCallAtLast","lastWrap","newList","argLen","hItem","afterTrigger","triggerWithContext","DEFAULT_FONT_SIZE","DEFAULT_FONT_FAMILY","DEFAULT_FONT","_cachedFont","DEFAULT_TEXT_WIDTH_MAP","mapStr","JSON","char","fromCharCode","charCodeAt","getTextWidthMap","platformApi","measureText","canvas","preCalcWidth","Image","setPlatformAPI","newPlatformApis","DEFAULT_RICH_TEXT_COLOR","DEFAULT_TEXT_ANIMATION_PROPS","lineHeight","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","borderColor","borderRadius","ZRText","_defaultStyle","_updateSubTexts","innerTransformable","updateInnerText","_childCursor","normalizeStyle","rich","_updateRichTexts","_updatePlainTexts","setDefaultTextStyle","defaultTextStyle","setTextContent","sourceRich","targetRich","_mergeRich","richNames","richName","_getOrCreateChild","textFont","textPadding","getStyleText","contentBlock","needDrawBg","needDrawBackground","bgColorDrawn","outerHeight","outerWidth","contentWidth","textLines","lines","defaultStyle","baseX","baseY","align","verticalAlign","textX","textY","contentHeight","boxX","boxY","_renderBackground","getTextXForPadding","defaultLineWidth","useDefaultFill","textFill","getFill","textStroke","getStroke","autoStroke","hasShadow","fixedBoundingRect","overflow","calculatedLineHeight","subElStyle","setSeparateFont","setBoundingRect","xLeft","lineTop","xRight","tokens","tokenCount","remainedWidth","lineXLeft","lineXRight","token","_placeToken","parentBgColorDrawn","tokenStyle","styleName","isLineHolder","innerHeight","textWidth","textHeight","topStyle","rectEl","imgEl","rectStyle","textBackgroundColor","textBorderWidth","textBorderColor","isImageBg","isPlainOrGradientBg","textBorderRadius","imgStyle","borderDash","borderDashOffset","strokeContainThreshold","commonStyle","makeFont","hasSeparateFont","parseFontSize","VALID_TEXT_ALIGN","center","VALID_TEXT_VERTICAL_ALIGN","bottom","middle","FONT_PARTS","fontProp","mathRound","normalizeColor","round3","round4","getMatrixStr","TEXT_ALIGN_TO_ANCHOR","adjustTextY","getShadowKey","globalScale","toFixed","isImagePattern","isPattern","svgElement","isSVGPattern","isLinearGradient","isRadialGradient","getIdURL","getPathPrecision","getSRTTransformString","skewX","skewY","encodeBase64","btoa","unescape","Buffer","normalizeRadian","mIdentity","scaleTmp","tmpTransform","originTransform","setPosition","setSkew","setOrigin","originX","originY","parentTransform","_resolveGlobalScaleRatio","globalScaleRatio","relX","relY","invTransform","transformNode","ancestors","shearX","decomposeTransform","transformCoordToGlobal","ax","anchorX","ay","anchorY","TRANSFORMABLE_PROPS","windingLine","x_","PolygonShape","getLineDash","lineType","lineScale_1","rawVal","ArcShape","Arc","getDefaultStyle","unitX","unitY","lt","rb","lb","rt","minTv","maxTv","other","calculateTransform","mtv","ax0","ax1","ay0","ay1","bx0","bx1","by0","by1","overlap","dMin","dMax","d3","plain","tx","ty","msRequestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","subPixelOptimizeLine","outputShape","inputShape","subPixelOptimize","subPixelOptimizeRect","originWidth","originHeight","positiveOrNegative","doubledPosition","BezierCurveShape","cpx1","cpy1","someVectorAt","isTangent","cpx2","cpy2","BezierCurve","pointAt","tangentAt","EllipseShape","Ellipse","regexp","createCubicEasingFunc","cubicEasingStr","cubic","a_1","b_1","c_1","roots_1","RectShape","subPixelOptimizeOutputShape","optimizedShape","r1","r2","r3","r4","total","extent","extent2","OrientedBoundingRect","_corners","_axes","_origin","fromBoundingRect","corners","axes","overlapped","noMtv","_intersectCheckOneSide","axis","_getProjMinMaxOnAxis","dist0","dist1","origin","proj","proj_1","LineShape","Line","curve","windingCubic","nRoots","nExtrema","y0_","y1_","unit","windingQuadratic","y_","windingArc","tmp_1","containPath","isStroke","quadratic","DEFAULT_PATH_STYLE","lineCap","miterLimit","DEFAULT_PATH_ANIMATION_PROPS","pathCopyParams","pathProto","decal","_decalEl","decalElStyle","canBeInsideText","getInsideTextFill","pathFill","fillLum","getInsideTextStroke","shapeCfg","needsUpdateRect","firstInvoke","rectStroke","_rectStroke","lineScale","animateShape","shapeChanged","targetShape","targetShapePrimaryProps","shapeKeys","mergedShape","defaultProps","STYLE_REG","truncateText","containerWidth","ellipsis","prepareTruncateOptions","truncateSingleLine","preparedOpts","maxIterations","minChar","cnCharWidth","ascCharWidth","placeholder","ellipsisWidth","textLine","subLength","estimateLength","charCode","parsePlainText","truncate","truncateLineOverflow","lineOverflow","wrapText","lineCount","truncateMinChar","RichTextToken","RichTextLine","RichTextContentBlock","parseRichText","topWidth","topHeight","wrapInfo","accumWidth","breakAll","matchedIndex","pushTokens","substring","pendingList","calculatedHeight","calculatedWidth","stlPadding","truncateLine","finishLine","outer","paddingH","tokenHeight","styleTokenWidth","tokenWidthNotSpecified","percentWidth","bgImg","remainTruncWidth","block","strLines","linesWidths","isEmptyStr","newLine","tokenPadding","tokenPaddingH","outerWidth_1","tokensLen","breakCharMap","ch","isWordBreakChar","code","isLatin","isBreakAll","lastAccumWidth","currentWord","currentWordWidth","chWidth","inWord","PolylineShape","Polyline","CompoundPath","_updatePathDirty","dirtyPath","Entry","LinkedList","insert","entry","insertEntry","head","tail","LRU","maxSize","_list","_maxSize","_map","removed","_lastRemovedEntry","leastUsedEntry","DEFAULT_ANIMATABLE_MAP","tmpTextPosCalcRes","tmpBoundingRect","Element","animators","currentStates","forceUpdate","_textContent","textConfig","local","textVerticalAlign","textStyleChanged","innerOrigin","layoutRect","calculateTextPosition","textOrigin","relOriginX","relOriginY","textOffset","isInside","inside","innerTextDefaultStyle","_innerTextDefaultStyle","insideFill","insideStroke","outsideFill","outsideStroke","getOutsideFill","getOutsideStroke","isDark","setTextConfig","extra","hide","show","saveCurrentToNormalState","fromStateTransition","__fromStateTransition","targetName","primaryKeys","hasState","getState","ensureState","clearStates","noAnimation","useState","forceUseHoverLayer","toNormalState","stateTransition","stateProxy","useHoverLayer","_toggleHoverLayerFlag","_textGuide","_updateAnimationTargets","useStates","stateObjects","notChange","stateObj","lastStateObj","removeState","replaceState","oldState","newState","forceAdd","newStateExists","toggleState","enable","mergedTextConfig","transitionTarget","hasTransition","propNeedsTransition","_attachComponent","componentEl","_detachComponent","_clipPath","removeClipPath","previousTextContent","removeTextContent","cfg","removeTextConfig","setTextGuideLine","guideLine","removeTextGuideLine","stopAnimation","leftAnimators","animationProps","animateFrom","elProto","createLegacyProperty","privateKey","xKey","yKey","enhanceArray","animatable","animateToShallow","topKey","animateObj","additive","setToFinal","animateAll","existsAnimators","animationKeys","innerKey","targetVal","keyLen","val2","is1DArraySame","revertedSource","reversedTarget","sourceClone","copyValue","finishCount","doneHappened","cfgDone","cfgAborted","doneCb","abortedCb","copyArrShallow","sourceArr","CircleShape","Circle","degree","SVGPathRebuilder","precision","_start","_d","_str","_p","_add","dThetaPositive","isCircle","unifiedTheta","large","xRot","dTheta_1","vals","generateStr","getStr","strokeProps","svgStrokeProps","SVGNS","XLINKNS","createElementNS","createVNode","tag","attrs","vNodeToString","newline","convertElToString","attrsStr","part","createElementOpen","createBrushScope","zrId","shadowCache","patternCache","gradientCache","clipPathCache","cssNodes","cssAnims","cssClassIdx","cssAnimIdx","shadowIdx","gradientIdx","patternIdx","clipPathIdx","createSVGVNode","useViewBox","EASING_MAP","buildPathString","kfShape","svgPathBuilder","setTransformOrigin","ANIMATE_STYLE_MAP","addAnimation","cssAnim","animationName","getEasingFunc","createCSSAnimation","onlyShape","cssAnimations","cssAnimationCfg","cssAnimationName","composedAnim","subScope","animNames","lastAnim","className","createCompoundPathCSSAnimation","groupAnimators","cfgArr","createSingleCSSAnimation","groupAnimator","transformKfs","shapeKfs","finalKfs","saveAnimatorTrackToCssKfs","cssKfs","toCssAttrName","attrName","kfEasing","timingFunction","canAnimateShape","newLen","transformOrigin","percents","allTransformOriginSame","isImageLike","isCanvasLike","toDataURL","setStyleAttrs","updateAttr","pathHasFill","pathHasStroke","strokeScale","strokeWidth","mapStyleToAttrs","isFillStroke","gradientTag","gradientAttrs","stopsAttrs","gradientKey","gradientId","setGradient","patternAttrs","imageWidth_1","imageWidth","imageHeight_1","imageHeight","imageSrc","patternImage","errMsg","setSizeToVNode_1","vNode","svgEl","elm","createdImage","patternVNode","href","svgWidth","svgHeight","patternTransform","patternKey","patternId","setPattern","shadowKey","shadowId","blur_1","stdDeviation","setShadow","noRotateScale","compress","noTranslate","convertPolyShape","strArr","validatePolyShape","desc","normalizedDesc","buitinShapesDef","brushSVGPath","builtinShpDef","svgElType","willUpdate","hasShapeAnimation","pathVersion","elExt","__svgPathBuilder","__svgPathVersion","__svgPathStrokePercent","brushSVGImage","TSpan","separatedFontStr","brushSVGTSpan","clipPathId","clipPathAttrs","createTextNode","newNode","referenceNode","emptyNode","isUndef","isDef","createKeyToOldIdx","beginIdx","endIdx","sameVnode","vnode1","vnode2","isSameKey","createElm","vnode","updateAttrs","addVnodes","parentElm","vnodes","startIdx","removeVnodes","oldVnode","oldAttrs","cur","removeAttribute","setAttributeNS","patchVnode","oldCh","newCh","oldKeyToIdx","idxInOld","elmToMove","oldStartIdx","newStartIdx","oldEndIdx","oldStartVnode","oldEndVnode","newEndIdx","newStartVnode","newEndVnode","updateChildren","svgId","SVGPainter","_oldVNode","viewport","_viewport","svgDom","_svgDom","getSvgDom","renderToVNode","parent_2","patch","renderOneToVNode","bgColor","_bgVNode","mainVNode","_mainVNode","animationCssStr","selectorNodes","animationNodes","bracketBegin","bracketEnd","selectors","animations","getCssString","styleNode","renderToString","cssAnimation","bgVNode","getSvgRoot","currentClipPathGroup","listLen","clipPathsGroupsStack","clipPathsGroupsStackDepth","clipGroupNodeIdx","prevLen","lca","i_2","groupAttrs","viewportStyle","base64","encodeURIComponent","prefix","equal","scalar","distanceSquare","negate","toArray","fromArray","input","DEFAULT_TSPAN_STYLE","RadialGradient","extremity","fromPoints","fromLine","xDim","yDim","fromCubic","fromQuadratic","fromArc","vec2Min","vec2Max","textWidthCache","cacheOfFont","innerGetBoundingRect","getLineHeight","adjustTextX","uniondRect","parsePercent","maxValue","lastIndexOf","textPosition","halfHeight"],"mappings":"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","file":"js/npm.zrender.aaebb577.js","sourcesContent":["var DEFAULT_MIN_MERGE = 32;\nvar DEFAULT_MIN_GALLOPING = 7;\nvar DEFAULT_TMP_STORAGE_LENGTH = 256;\nfunction minRunLength(n) {\n    var r = 0;\n    while (n >= DEFAULT_MIN_MERGE) {\n        r |= n & 1;\n        n >>= 1;\n    }\n    return n + r;\n}\nfunction makeAscendingRun(array, lo, hi, compare) {\n    var runHi = lo + 1;\n    if (runHi === hi) {\n        return 1;\n    }\n    if (compare(array[runHi++], array[lo]) < 0) {\n        while (runHi < hi && compare(array[runHi], array[runHi - 1]) < 0) {\n            runHi++;\n        }\n        reverseRun(array, lo, runHi);\n    }\n    else {\n        while (runHi < hi && compare(array[runHi], array[runHi - 1]) >= 0) {\n            runHi++;\n        }\n    }\n    return runHi - lo;\n}\nfunction reverseRun(array, lo, hi) {\n    hi--;\n    while (lo < hi) {\n        var t = array[lo];\n        array[lo++] = array[hi];\n        array[hi--] = t;\n    }\n}\nfunction binaryInsertionSort(array, lo, hi, start, compare) {\n    if (start === lo) {\n        start++;\n    }\n    for (; start < hi; start++) {\n        var pivot = array[start];\n        var left = lo;\n        var right = start;\n        var mid;\n        while (left < right) {\n            mid = left + right >>> 1;\n            if (compare(pivot, array[mid]) < 0) {\n                right = mid;\n            }\n            else {\n                left = mid + 1;\n            }\n        }\n        var n = start - left;\n        switch (n) {\n            case 3:\n                array[left + 3] = array[left + 2];\n            case 2:\n                array[left + 2] = array[left + 1];\n            case 1:\n                array[left + 1] = array[left];\n                break;\n            default:\n                while (n > 0) {\n                    array[left + n] = array[left + n - 1];\n                    n--;\n                }\n        }\n        array[left] = pivot;\n    }\n}\nfunction gallopLeft(value, array, start, length, hint, compare) {\n    var lastOffset = 0;\n    var maxOffset = 0;\n    var offset = 1;\n    if (compare(value, array[start + hint]) > 0) {\n        maxOffset = length - hint;\n        while (offset < maxOffset && compare(value, array[start + hint + offset]) > 0) {\n            lastOffset = offset;\n            offset = (offset << 1) + 1;\n            if (offset <= 0) {\n                offset = maxOffset;\n            }\n        }\n        if (offset > maxOffset) {\n            offset = maxOffset;\n        }\n        lastOffset += hint;\n        offset += hint;\n    }\n    else {\n        maxOffset = hint + 1;\n        while (offset < maxOffset && compare(value, array[start + hint - offset]) <= 0) {\n            lastOffset = offset;\n            offset = (offset << 1) + 1;\n            if (offset <= 0) {\n                offset = maxOffset;\n            }\n        }\n        if (offset > maxOffset) {\n            offset = maxOffset;\n        }\n        var tmp = lastOffset;\n        lastOffset = hint - offset;\n        offset = hint - tmp;\n    }\n    lastOffset++;\n    while (lastOffset < offset) {\n        var m = lastOffset + (offset - lastOffset >>> 1);\n        if (compare(value, array[start + m]) > 0) {\n            lastOffset = m + 1;\n        }\n        else {\n            offset = m;\n        }\n    }\n    return offset;\n}\nfunction gallopRight(value, array, start, length, hint, compare) {\n    var lastOffset = 0;\n    var maxOffset = 0;\n    var offset = 1;\n    if (compare(value, array[start + hint]) < 0) {\n        maxOffset = hint + 1;\n        while (offset < maxOffset && compare(value, array[start + hint - offset]) < 0) {\n            lastOffset = offset;\n            offset = (offset << 1) + 1;\n            if (offset <= 0) {\n                offset = maxOffset;\n            }\n        }\n        if (offset > maxOffset) {\n            offset = maxOffset;\n        }\n        var tmp = lastOffset;\n        lastOffset = hint - offset;\n        offset = hint - tmp;\n    }\n    else {\n        maxOffset = length - hint;\n        while (offset < maxOffset && compare(value, array[start + hint + offset]) >= 0) {\n            lastOffset = offset;\n            offset = (offset << 1) + 1;\n            if (offset <= 0) {\n                offset = maxOffset;\n            }\n        }\n        if (offset > maxOffset) {\n            offset = maxOffset;\n        }\n        lastOffset += hint;\n        offset += hint;\n    }\n    lastOffset++;\n    while (lastOffset < offset) {\n        var m = lastOffset + (offset - lastOffset >>> 1);\n        if (compare(value, array[start + m]) < 0) {\n            offset = m;\n        }\n        else {\n            lastOffset = m + 1;\n        }\n    }\n    return offset;\n}\nfunction TimSort(array, compare) {\n    var minGallop = DEFAULT_MIN_GALLOPING;\n    var length = 0;\n    var tmpStorageLength = DEFAULT_TMP_STORAGE_LENGTH;\n    var stackLength = 0;\n    var runStart;\n    var runLength;\n    var stackSize = 0;\n    length = array.length;\n    if (length < 2 * DEFAULT_TMP_STORAGE_LENGTH) {\n        tmpStorageLength = length >>> 1;\n    }\n    var tmp = [];\n    stackLength = length < 120 ? 5 : length < 1542 ? 10 : length < 119151 ? 19 : 40;\n    runStart = [];\n    runLength = [];\n    function pushRun(_runStart, _runLength) {\n        runStart[stackSize] = _runStart;\n        runLength[stackSize] = _runLength;\n        stackSize += 1;\n    }\n    function mergeRuns() {\n        while (stackSize > 1) {\n            var n = stackSize - 2;\n            if ((n >= 1 && runLength[n - 1] <= runLength[n] + runLength[n + 1])\n                || (n >= 2 && runLength[n - 2] <= runLength[n] + runLength[n - 1])) {\n                if (runLength[n - 1] < runLength[n + 1]) {\n                    n--;\n                }\n            }\n            else if (runLength[n] > runLength[n + 1]) {\n                break;\n            }\n            mergeAt(n);\n        }\n    }\n    function forceMergeRuns() {\n        while (stackSize > 1) {\n            var n = stackSize - 2;\n            if (n > 0 && runLength[n - 1] < runLength[n + 1]) {\n                n--;\n            }\n            mergeAt(n);\n        }\n    }\n    function mergeAt(i) {\n        var start1 = runStart[i];\n        var length1 = runLength[i];\n        var start2 = runStart[i + 1];\n        var length2 = runLength[i + 1];\n        runLength[i] = length1 + length2;\n        if (i === stackSize - 3) {\n            runStart[i + 1] = runStart[i + 2];\n            runLength[i + 1] = runLength[i + 2];\n        }\n        stackSize--;\n        var k = gallopRight(array[start2], array, start1, length1, 0, compare);\n        start1 += k;\n        length1 -= k;\n        if (length1 === 0) {\n            return;\n        }\n        length2 = gallopLeft(array[start1 + length1 - 1], array, start2, length2, length2 - 1, compare);\n        if (length2 === 0) {\n            return;\n        }\n        if (length1 <= length2) {\n            mergeLow(start1, length1, start2, length2);\n        }\n        else {\n            mergeHigh(start1, length1, start2, length2);\n        }\n    }\n    function mergeLow(start1, length1, start2, length2) {\n        var i = 0;\n        for (i = 0; i < length1; i++) {\n            tmp[i] = array[start1 + i];\n        }\n        var cursor1 = 0;\n        var cursor2 = start2;\n        var dest = start1;\n        array[dest++] = array[cursor2++];\n        if (--length2 === 0) {\n            for (i = 0; i < length1; i++) {\n                array[dest + i] = tmp[cursor1 + i];\n            }\n            return;\n        }\n        if (length1 === 1) {\n            for (i = 0; i < length2; i++) {\n                array[dest + i] = array[cursor2 + i];\n            }\n            array[dest + length2] = tmp[cursor1];\n            return;\n        }\n        var _minGallop = minGallop;\n        var count1;\n        var count2;\n        var exit;\n        while (1) {\n            count1 = 0;\n            count2 = 0;\n            exit = false;\n            do {\n                if (compare(array[cursor2], tmp[cursor1]) < 0) {\n                    array[dest++] = array[cursor2++];\n                    count2++;\n                    count1 = 0;\n                    if (--length2 === 0) {\n                        exit = true;\n                        break;\n                    }\n                }\n                else {\n                    array[dest++] = tmp[cursor1++];\n                    count1++;\n                    count2 = 0;\n                    if (--length1 === 1) {\n                        exit = true;\n                        break;\n                    }\n                }\n            } while ((count1 | count2) < _minGallop);\n            if (exit) {\n                break;\n            }\n            do {\n                count1 = gallopRight(array[cursor2], tmp, cursor1, length1, 0, compare);\n                if (count1 !== 0) {\n                    for (i = 0; i < count1; i++) {\n                        array[dest + i] = tmp[cursor1 + i];\n                    }\n                    dest += count1;\n                    cursor1 += count1;\n                    length1 -= count1;\n                    if (length1 <= 1) {\n                        exit = true;\n                        break;\n                    }\n                }\n                array[dest++] = array[cursor2++];\n                if (--length2 === 0) {\n                    exit = true;\n                    break;\n                }\n                count2 = gallopLeft(tmp[cursor1], array, cursor2, length2, 0, compare);\n                if (count2 !== 0) {\n                    for (i = 0; i < count2; i++) {\n                        array[dest + i] = array[cursor2 + i];\n                    }\n                    dest += count2;\n                    cursor2 += count2;\n                    length2 -= count2;\n                    if (length2 === 0) {\n                        exit = true;\n                        break;\n                    }\n                }\n                array[dest++] = tmp[cursor1++];\n                if (--length1 === 1) {\n                    exit = true;\n                    break;\n                }\n                _minGallop--;\n            } while (count1 >= DEFAULT_MIN_GALLOPING || count2 >= DEFAULT_MIN_GALLOPING);\n            if (exit) {\n                break;\n            }\n            if (_minGallop < 0) {\n                _minGallop = 0;\n            }\n            _minGallop += 2;\n        }\n        minGallop = _minGallop;\n        minGallop < 1 && (minGallop = 1);\n        if (length1 === 1) {\n            for (i = 0; i < length2; i++) {\n                array[dest + i] = array[cursor2 + i];\n            }\n            array[dest + length2] = tmp[cursor1];\n        }\n        else if (length1 === 0) {\n            throw new Error();\n        }\n        else {\n            for (i = 0; i < length1; i++) {\n                array[dest + i] = tmp[cursor1 + i];\n            }\n        }\n    }\n    function mergeHigh(start1, length1, start2, length2) {\n        var i = 0;\n        for (i = 0; i < length2; i++) {\n            tmp[i] = array[start2 + i];\n        }\n        var cursor1 = start1 + length1 - 1;\n        var cursor2 = length2 - 1;\n        var dest = start2 + length2 - 1;\n        var customCursor = 0;\n        var customDest = 0;\n        array[dest--] = array[cursor1--];\n        if (--length1 === 0) {\n            customCursor = dest - (length2 - 1);\n            for (i = 0; i < length2; i++) {\n                array[customCursor + i] = tmp[i];\n            }\n            return;\n        }\n        if (length2 === 1) {\n            dest -= length1;\n            cursor1 -= length1;\n            customDest = dest + 1;\n            customCursor = cursor1 + 1;\n            for (i = length1 - 1; i >= 0; i--) {\n                array[customDest + i] = array[customCursor + i];\n            }\n            array[dest] = tmp[cursor2];\n            return;\n        }\n        var _minGallop = minGallop;\n        while (true) {\n            var count1 = 0;\n            var count2 = 0;\n            var exit = false;\n            do {\n                if (compare(tmp[cursor2], array[cursor1]) < 0) {\n                    array[dest--] = array[cursor1--];\n                    count1++;\n                    count2 = 0;\n                    if (--length1 === 0) {\n                        exit = true;\n                        break;\n                    }\n                }\n                else {\n                    array[dest--] = tmp[cursor2--];\n                    count2++;\n                    count1 = 0;\n                    if (--length2 === 1) {\n                        exit = true;\n                        break;\n                    }\n                }\n            } while ((count1 | count2) < _minGallop);\n            if (exit) {\n                break;\n            }\n            do {\n                count1 = length1 - gallopRight(tmp[cursor2], array, start1, length1, length1 - 1, compare);\n                if (count1 !== 0) {\n                    dest -= count1;\n                    cursor1 -= count1;\n                    length1 -= count1;\n                    customDest = dest + 1;\n                    customCursor = cursor1 + 1;\n                    for (i = count1 - 1; i >= 0; i--) {\n                        array[customDest + i] = array[customCursor + i];\n                    }\n                    if (length1 === 0) {\n                        exit = true;\n                        break;\n                    }\n                }\n                array[dest--] = tmp[cursor2--];\n                if (--length2 === 1) {\n                    exit = true;\n                    break;\n                }\n                count2 = length2 - gallopLeft(array[cursor1], tmp, 0, length2, length2 - 1, compare);\n                if (count2 !== 0) {\n                    dest -= count2;\n                    cursor2 -= count2;\n                    length2 -= count2;\n                    customDest = dest + 1;\n                    customCursor = cursor2 + 1;\n                    for (i = 0; i < count2; i++) {\n                        array[customDest + i] = tmp[customCursor + i];\n                    }\n                    if (length2 <= 1) {\n                        exit = true;\n                        break;\n                    }\n                }\n                array[dest--] = array[cursor1--];\n                if (--length1 === 0) {\n                    exit = true;\n                    break;\n                }\n                _minGallop--;\n            } while (count1 >= DEFAULT_MIN_GALLOPING || count2 >= DEFAULT_MIN_GALLOPING);\n            if (exit) {\n                break;\n            }\n            if (_minGallop < 0) {\n                _minGallop = 0;\n            }\n            _minGallop += 2;\n        }\n        minGallop = _minGallop;\n        if (minGallop < 1) {\n            minGallop = 1;\n        }\n        if (length2 === 1) {\n            dest -= length1;\n            cursor1 -= length1;\n            customDest = dest + 1;\n            customCursor = cursor1 + 1;\n            for (i = length1 - 1; i >= 0; i--) {\n                array[customDest + i] = array[customCursor + i];\n            }\n            array[dest] = tmp[cursor2];\n        }\n        else if (length2 === 0) {\n            throw new Error();\n        }\n        else {\n            customCursor = dest - (length2 - 1);\n            for (i = 0; i < length2; i++) {\n                array[customCursor + i] = tmp[i];\n            }\n        }\n    }\n    return {\n        mergeRuns: mergeRuns,\n        forceMergeRuns: forceMergeRuns,\n        pushRun: pushRun\n    };\n}\nexport default function sort(array, compare, lo, hi) {\n    if (!lo) {\n        lo = 0;\n    }\n    if (!hi) {\n        hi = array.length;\n    }\n    var remaining = hi - lo;\n    if (remaining < 2) {\n        return;\n    }\n    var runLength = 0;\n    if (remaining < DEFAULT_MIN_MERGE) {\n        runLength = makeAscendingRun(array, lo, hi, compare);\n        binaryInsertionSort(array, lo, hi, lo + runLength, compare);\n        return;\n    }\n    var ts = TimSort(array, compare);\n    var minRun = minRunLength(remaining);\n    do {\n        runLength = makeAscendingRun(array, lo, hi, compare);\n        if (runLength < minRun) {\n            var force = remaining;\n            if (force > minRun) {\n                force = minRun;\n            }\n            binaryInsertionSort(array, lo, lo + force, lo + runLength, compare);\n            runLength = force;\n        }\n        ts.pushRun(lo, runLength);\n        ts.mergeRuns();\n        remaining -= runLength;\n        lo += runLength;\n    } while (remaining !== 0);\n    ts.forceMergeRuns();\n}\n","import windingLine from './windingLine.js';\nvar EPSILON = 1e-8;\nfunction isAroundEqual(a, b) {\n    return Math.abs(a - b) < EPSILON;\n}\nexport function contain(points, x, y) {\n    var w = 0;\n    var p = points[0];\n    if (!p) {\n        return false;\n    }\n    for (var i = 1; i < points.length; i++) {\n        var p2 = points[i];\n        w += windingLine(p[0], p[1], p2[0], p2[1], x, y);\n        p = p2;\n    }\n    var p0 = points[0];\n    if (!isAroundEqual(p[0], p0[0]) || !isAroundEqual(p[1], p0[1])) {\n        w += windingLine(p[0], p[1], p0[0], p0[1], x, y);\n    }\n    return w !== 0;\n}\n","import { __extends } from \"tslib\";\nimport * as util from '../core/util.js';\nimport { devicePixelRatio } from '../config.js';\nimport Eventful from '../core/Eventful.js';\nimport { getCanvasGradient } from './helper.js';\nimport { createCanvasPattern } from './graphic.js';\nimport BoundingRect from '../core/BoundingRect.js';\nimport { REDRAW_BIT } from '../graphic/constants.js';\nimport { platformApi } from '../core/platform.js';\nfunction createDom(id, painter, dpr) {\n    var newDom = platformApi.createCanvas();\n    var width = painter.getWidth();\n    var height = painter.getHeight();\n    var newDomStyle = newDom.style;\n    if (newDomStyle) {\n        newDomStyle.position = 'absolute';\n        newDomStyle.left = '0';\n        newDomStyle.top = '0';\n        newDomStyle.width = width + 'px';\n        newDomStyle.height = height + 'px';\n        newDom.setAttribute('data-zr-dom-id', id);\n    }\n    newDom.width = width * dpr;\n    newDom.height = height * dpr;\n    return newDom;\n}\n;\nvar Layer = (function (_super) {\n    __extends(Layer, _super);\n    function Layer(id, painter, dpr) {\n        var _this = _super.call(this) || this;\n        _this.motionBlur = false;\n        _this.lastFrameAlpha = 0.7;\n        _this.dpr = 1;\n        _this.virtual = false;\n        _this.config = {};\n        _this.incremental = false;\n        _this.zlevel = 0;\n        _this.maxRepaintRectCount = 5;\n        _this.__dirty = true;\n        _this.__firstTimePaint = true;\n        _this.__used = false;\n        _this.__drawIndex = 0;\n        _this.__startIndex = 0;\n        _this.__endIndex = 0;\n        _this.__prevStartIndex = null;\n        _this.__prevEndIndex = null;\n        var dom;\n        dpr = dpr || devicePixelRatio;\n        if (typeof id === 'string') {\n            dom = createDom(id, painter, dpr);\n        }\n        else if (util.isObject(id)) {\n            dom = id;\n            id = dom.id;\n        }\n        _this.id = id;\n        _this.dom = dom;\n        var domStyle = dom.style;\n        if (domStyle) {\n            util.disableUserSelect(dom);\n            dom.onselectstart = function () { return false; };\n            domStyle.padding = '0';\n            domStyle.margin = '0';\n            domStyle.borderWidth = '0';\n        }\n        _this.painter = painter;\n        _this.dpr = dpr;\n        return _this;\n    }\n    Layer.prototype.getElementCount = function () {\n        return this.__endIndex - this.__startIndex;\n    };\n    Layer.prototype.afterBrush = function () {\n        this.__prevStartIndex = this.__startIndex;\n        this.__prevEndIndex = this.__endIndex;\n    };\n    Layer.prototype.initContext = function () {\n        this.ctx = this.dom.getContext('2d');\n        this.ctx.dpr = this.dpr;\n    };\n    Layer.prototype.setUnpainted = function () {\n        this.__firstTimePaint = true;\n    };\n    Layer.prototype.createBackBuffer = function () {\n        var dpr = this.dpr;\n        this.domBack = createDom('back-' + this.id, this.painter, dpr);\n        this.ctxBack = this.domBack.getContext('2d');\n        if (dpr !== 1) {\n            this.ctxBack.scale(dpr, dpr);\n        }\n    };\n    Layer.prototype.createRepaintRects = function (displayList, prevList, viewWidth, viewHeight) {\n        if (this.__firstTimePaint) {\n            this.__firstTimePaint = false;\n            return null;\n        }\n        var mergedRepaintRects = [];\n        var maxRepaintRectCount = this.maxRepaintRectCount;\n        var full = false;\n        var pendingRect = new BoundingRect(0, 0, 0, 0);\n        function addRectToMergePool(rect) {\n            if (!rect.isFinite() || rect.isZero()) {\n                return;\n            }\n            if (mergedRepaintRects.length === 0) {\n                var boundingRect = new BoundingRect(0, 0, 0, 0);\n                boundingRect.copy(rect);\n                mergedRepaintRects.push(boundingRect);\n            }\n            else {\n                var isMerged = false;\n                var minDeltaArea = Infinity;\n                var bestRectToMergeIdx = 0;\n                for (var i = 0; i < mergedRepaintRects.length; ++i) {\n                    var mergedRect = mergedRepaintRects[i];\n                    if (mergedRect.intersect(rect)) {\n                        var pendingRect_1 = new BoundingRect(0, 0, 0, 0);\n                        pendingRect_1.copy(mergedRect);\n                        pendingRect_1.union(rect);\n                        mergedRepaintRects[i] = pendingRect_1;\n                        isMerged = true;\n                        break;\n                    }\n                    else if (full) {\n                        pendingRect.copy(rect);\n                        pendingRect.union(mergedRect);\n                        var aArea = rect.width * rect.height;\n                        var bArea = mergedRect.width * mergedRect.height;\n                        var pendingArea = pendingRect.width * pendingRect.height;\n                        var deltaArea = pendingArea - aArea - bArea;\n                        if (deltaArea < minDeltaArea) {\n                            minDeltaArea = deltaArea;\n                            bestRectToMergeIdx = i;\n                        }\n                    }\n                }\n                if (full) {\n                    mergedRepaintRects[bestRectToMergeIdx].union(rect);\n                    isMerged = true;\n                }\n                if (!isMerged) {\n                    var boundingRect = new BoundingRect(0, 0, 0, 0);\n                    boundingRect.copy(rect);\n                    mergedRepaintRects.push(boundingRect);\n                }\n                if (!full) {\n                    full = mergedRepaintRects.length >= maxRepaintRectCount;\n                }\n            }\n        }\n        for (var i = this.__startIndex; i < this.__endIndex; ++i) {\n            var el = displayList[i];\n            if (el) {\n                var shouldPaint = el.shouldBePainted(viewWidth, viewHeight, true, true);\n                var prevRect = el.__isRendered && ((el.__dirty & REDRAW_BIT) || !shouldPaint)\n                    ? el.getPrevPaintRect()\n                    : null;\n                if (prevRect) {\n                    addRectToMergePool(prevRect);\n                }\n                var curRect = shouldPaint && ((el.__dirty & REDRAW_BIT) || !el.__isRendered)\n                    ? el.getPaintRect()\n                    : null;\n                if (curRect) {\n                    addRectToMergePool(curRect);\n                }\n            }\n        }\n        for (var i = this.__prevStartIndex; i < this.__prevEndIndex; ++i) {\n            var el = prevList[i];\n            var shouldPaint = el.shouldBePainted(viewWidth, viewHeight, true, true);\n            if (el && (!shouldPaint || !el.__zr) && el.__isRendered) {\n                var prevRect = el.getPrevPaintRect();\n                if (prevRect) {\n                    addRectToMergePool(prevRect);\n                }\n            }\n        }\n        var hasIntersections;\n        do {\n            hasIntersections = false;\n            for (var i = 0; i < mergedRepaintRects.length;) {\n                if (mergedRepaintRects[i].isZero()) {\n                    mergedRepaintRects.splice(i, 1);\n                    continue;\n                }\n                for (var j = i + 1; j < mergedRepaintRects.length;) {\n                    if (mergedRepaintRects[i].intersect(mergedRepaintRects[j])) {\n                        hasIntersections = true;\n                        mergedRepaintRects[i].union(mergedRepaintRects[j]);\n                        mergedRepaintRects.splice(j, 1);\n                    }\n                    else {\n                        j++;\n                    }\n                }\n                i++;\n            }\n        } while (hasIntersections);\n        this._paintRects = mergedRepaintRects;\n        return mergedRepaintRects;\n    };\n    Layer.prototype.debugGetPaintRects = function () {\n        return (this._paintRects || []).slice();\n    };\n    Layer.prototype.resize = function (width, height) {\n        var dpr = this.dpr;\n        var dom = this.dom;\n        var domStyle = dom.style;\n        var domBack = this.domBack;\n        if (domStyle) {\n            domStyle.width = width + 'px';\n            domStyle.height = height + 'px';\n        }\n        dom.width = width * dpr;\n        dom.height = height * dpr;\n        if (domBack) {\n            domBack.width = width * dpr;\n            domBack.height = height * dpr;\n            if (dpr !== 1) {\n                this.ctxBack.scale(dpr, dpr);\n            }\n        }\n    };\n    Layer.prototype.clear = function (clearAll, clearColor, repaintRects) {\n        var dom = this.dom;\n        var ctx = this.ctx;\n        var width = dom.width;\n        var height = dom.height;\n        clearColor = clearColor || this.clearColor;\n        var haveMotionBLur = this.motionBlur && !clearAll;\n        var lastFrameAlpha = this.lastFrameAlpha;\n        var dpr = this.dpr;\n        var self = this;\n        if (haveMotionBLur) {\n            if (!this.domBack) {\n                this.createBackBuffer();\n            }\n            this.ctxBack.globalCompositeOperation = 'copy';\n            this.ctxBack.drawImage(dom, 0, 0, width / dpr, height / dpr);\n        }\n        var domBack = this.domBack;\n        function doClear(x, y, width, height) {\n            ctx.clearRect(x, y, width, height);\n            if (clearColor && clearColor !== 'transparent') {\n                var clearColorGradientOrPattern = void 0;\n                if (util.isGradientObject(clearColor)) {\n                    clearColorGradientOrPattern = clearColor.__canvasGradient\n                        || getCanvasGradient(ctx, clearColor, {\n                            x: 0,\n                            y: 0,\n                            width: width,\n                            height: height\n                        });\n                    clearColor.__canvasGradient = clearColorGradientOrPattern;\n                }\n                else if (util.isImagePatternObject(clearColor)) {\n                    clearColorGradientOrPattern = createCanvasPattern(ctx, clearColor, {\n                        dirty: function () {\n                            self.setUnpainted();\n                            self.__painter.refresh();\n                        }\n                    });\n                }\n                ctx.save();\n                ctx.fillStyle = clearColorGradientOrPattern || clearColor;\n                ctx.fillRect(x, y, width, height);\n                ctx.restore();\n            }\n            if (haveMotionBLur) {\n                ctx.save();\n                ctx.globalAlpha = lastFrameAlpha;\n                ctx.drawImage(domBack, x, y, width, height);\n                ctx.restore();\n            }\n        }\n        ;\n        if (!repaintRects || haveMotionBLur) {\n            doClear(0, 0, width, height);\n        }\n        else if (repaintRects.length) {\n            util.each(repaintRects, function (rect) {\n                doClear(rect.x * dpr, rect.y * dpr, rect.width * dpr, rect.height * dpr);\n            });\n        }\n    };\n    return Layer;\n}(Eventful));\nexport default Layer;\n","import { devicePixelRatio } from '../config.js';\nimport * as util from '../core/util.js';\nimport Layer from './Layer.js';\nimport requestAnimationFrame from '../animation/requestAnimationFrame.js';\nimport env from '../core/env.js';\nimport { brush, brushSingle } from './graphic.js';\nimport { REDRAW_BIT } from '../graphic/constants.js';\nimport { getSize } from './helper.js';\nvar HOVER_LAYER_ZLEVEL = 1e5;\nvar CANVAS_ZLEVEL = 314159;\nvar EL_AFTER_INCREMENTAL_INC = 0.01;\nvar INCREMENTAL_INC = 0.001;\nfunction isLayerValid(layer) {\n    if (!layer) {\n        return false;\n    }\n    if (layer.__builtin__) {\n        return true;\n    }\n    if (typeof (layer.resize) !== 'function'\n        || typeof (layer.refresh) !== 'function') {\n        return false;\n    }\n    return true;\n}\nfunction createRoot(width, height) {\n    var domRoot = document.createElement('div');\n    domRoot.style.cssText = [\n        'position:relative',\n        'width:' + width + 'px',\n        'height:' + height + 'px',\n        'padding:0',\n        'margin:0',\n        'border-width:0'\n    ].join(';') + ';';\n    return domRoot;\n}\nvar CanvasPainter = (function () {\n    function CanvasPainter(root, storage, opts, id) {\n        this.type = 'canvas';\n        this._zlevelList = [];\n        this._prevDisplayList = [];\n        this._layers = {};\n        this._layerConfig = {};\n        this._needsManuallyCompositing = false;\n        this.type = 'canvas';\n        var singleCanvas = !root.nodeName\n            || root.nodeName.toUpperCase() === 'CANVAS';\n        this._opts = opts = util.extend({}, opts || {});\n        this.dpr = opts.devicePixelRatio || devicePixelRatio;\n        this._singleCanvas = singleCanvas;\n        this.root = root;\n        var rootStyle = root.style;\n        if (rootStyle) {\n            util.disableUserSelect(root);\n            root.innerHTML = '';\n        }\n        this.storage = storage;\n        var zlevelList = this._zlevelList;\n        this._prevDisplayList = [];\n        var layers = this._layers;\n        if (!singleCanvas) {\n            this._width = getSize(root, 0, opts);\n            this._height = getSize(root, 1, opts);\n            var domRoot = this._domRoot = createRoot(this._width, this._height);\n            root.appendChild(domRoot);\n        }\n        else {\n            var rootCanvas = root;\n            var width = rootCanvas.width;\n            var height = rootCanvas.height;\n            if (opts.width != null) {\n                width = opts.width;\n            }\n            if (opts.height != null) {\n                height = opts.height;\n            }\n            this.dpr = opts.devicePixelRatio || 1;\n            rootCanvas.width = width * this.dpr;\n            rootCanvas.height = height * this.dpr;\n            this._width = width;\n            this._height = height;\n            var mainLayer = new Layer(rootCanvas, this, this.dpr);\n            mainLayer.__builtin__ = true;\n            mainLayer.initContext();\n            layers[CANVAS_ZLEVEL] = mainLayer;\n            mainLayer.zlevel = CANVAS_ZLEVEL;\n            zlevelList.push(CANVAS_ZLEVEL);\n            this._domRoot = root;\n        }\n    }\n    CanvasPainter.prototype.getType = function () {\n        return 'canvas';\n    };\n    CanvasPainter.prototype.isSingleCanvas = function () {\n        return this._singleCanvas;\n    };\n    CanvasPainter.prototype.getViewportRoot = function () {\n        return this._domRoot;\n    };\n    CanvasPainter.prototype.getViewportRootOffset = function () {\n        var viewportRoot = this.getViewportRoot();\n        if (viewportRoot) {\n            return {\n                offsetLeft: viewportRoot.offsetLeft || 0,\n                offsetTop: viewportRoot.offsetTop || 0\n            };\n        }\n    };\n    CanvasPainter.prototype.refresh = function (paintAll) {\n        var list = this.storage.getDisplayList(true);\n        var prevList = this._prevDisplayList;\n        var zlevelList = this._zlevelList;\n        this._redrawId = Math.random();\n        this._paintList(list, prevList, paintAll, this._redrawId);\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            var layer = this._layers[z];\n            if (!layer.__builtin__ && layer.refresh) {\n                var clearColor = i === 0 ? this._backgroundColor : null;\n                layer.refresh(clearColor);\n            }\n        }\n        if (this._opts.useDirtyRect) {\n            this._prevDisplayList = list.slice();\n        }\n        return this;\n    };\n    CanvasPainter.prototype.refreshHover = function () {\n        this._paintHoverList(this.storage.getDisplayList(false));\n    };\n    CanvasPainter.prototype._paintHoverList = function (list) {\n        var len = list.length;\n        var hoverLayer = this._hoverlayer;\n        hoverLayer && hoverLayer.clear();\n        if (!len) {\n            return;\n        }\n        var scope = {\n            inHover: true,\n            viewWidth: this._width,\n            viewHeight: this._height\n        };\n        var ctx;\n        for (var i = 0; i < len; i++) {\n            var el = list[i];\n            if (el.__inHover) {\n                if (!hoverLayer) {\n                    hoverLayer = this._hoverlayer = this.getLayer(HOVER_LAYER_ZLEVEL);\n                }\n                if (!ctx) {\n                    ctx = hoverLayer.ctx;\n                    ctx.save();\n                }\n                brush(ctx, el, scope, i === len - 1);\n            }\n        }\n        if (ctx) {\n            ctx.restore();\n        }\n    };\n    CanvasPainter.prototype.getHoverLayer = function () {\n        return this.getLayer(HOVER_LAYER_ZLEVEL);\n    };\n    CanvasPainter.prototype.paintOne = function (ctx, el) {\n        brushSingle(ctx, el);\n    };\n    CanvasPainter.prototype._paintList = function (list, prevList, paintAll, redrawId) {\n        if (this._redrawId !== redrawId) {\n            return;\n        }\n        paintAll = paintAll || false;\n        this._updateLayerStatus(list);\n        var _a = this._doPaintList(list, prevList, paintAll), finished = _a.finished, needsRefreshHover = _a.needsRefreshHover;\n        if (this._needsManuallyCompositing) {\n            this._compositeManually();\n        }\n        if (needsRefreshHover) {\n            this._paintHoverList(list);\n        }\n        if (!finished) {\n            var self_1 = this;\n            requestAnimationFrame(function () {\n                self_1._paintList(list, prevList, paintAll, redrawId);\n            });\n        }\n        else {\n            this.eachLayer(function (layer) {\n                layer.afterBrush && layer.afterBrush();\n            });\n        }\n    };\n    CanvasPainter.prototype._compositeManually = function () {\n        var ctx = this.getLayer(CANVAS_ZLEVEL).ctx;\n        var width = this._domRoot.width;\n        var height = this._domRoot.height;\n        ctx.clearRect(0, 0, width, height);\n        this.eachBuiltinLayer(function (layer) {\n            if (layer.virtual) {\n                ctx.drawImage(layer.dom, 0, 0, width, height);\n            }\n        });\n    };\n    CanvasPainter.prototype._doPaintList = function (list, prevList, paintAll) {\n        var _this = this;\n        var layerList = [];\n        var useDirtyRect = this._opts.useDirtyRect;\n        for (var zi = 0; zi < this._zlevelList.length; zi++) {\n            var zlevel = this._zlevelList[zi];\n            var layer = this._layers[zlevel];\n            if (layer.__builtin__\n                && layer !== this._hoverlayer\n                && (layer.__dirty || paintAll)) {\n                layerList.push(layer);\n            }\n        }\n        var finished = true;\n        var needsRefreshHover = false;\n        var _loop_1 = function (k) {\n            var layer = layerList[k];\n            var ctx = layer.ctx;\n            var repaintRects = useDirtyRect\n                && layer.createRepaintRects(list, prevList, this_1._width, this_1._height);\n            var start = paintAll ? layer.__startIndex : layer.__drawIndex;\n            var useTimer = !paintAll && layer.incremental && Date.now;\n            var startTime = useTimer && Date.now();\n            var clearColor = layer.zlevel === this_1._zlevelList[0]\n                ? this_1._backgroundColor : null;\n            if (layer.__startIndex === layer.__endIndex) {\n                layer.clear(false, clearColor, repaintRects);\n            }\n            else if (start === layer.__startIndex) {\n                var firstEl = list[start];\n                if (!firstEl.incremental || !firstEl.notClear || paintAll) {\n                    layer.clear(false, clearColor, repaintRects);\n                }\n            }\n            if (start === -1) {\n                console.error('For some unknown reason. drawIndex is -1');\n                start = layer.__startIndex;\n            }\n            var i;\n            var repaint = function (repaintRect) {\n                var scope = {\n                    inHover: false,\n                    allClipped: false,\n                    prevEl: null,\n                    viewWidth: _this._width,\n                    viewHeight: _this._height\n                };\n                for (i = start; i < layer.__endIndex; i++) {\n                    var el = list[i];\n                    if (el.__inHover) {\n                        needsRefreshHover = true;\n                    }\n                    _this._doPaintEl(el, layer, useDirtyRect, repaintRect, scope, i === layer.__endIndex - 1);\n                    if (useTimer) {\n                        var dTime = Date.now() - startTime;\n                        if (dTime > 15) {\n                            break;\n                        }\n                    }\n                }\n                if (scope.prevElClipPaths) {\n                    ctx.restore();\n                }\n            };\n            if (repaintRects) {\n                if (repaintRects.length === 0) {\n                    i = layer.__endIndex;\n                }\n                else {\n                    var dpr = this_1.dpr;\n                    for (var r = 0; r < repaintRects.length; ++r) {\n                        var rect = repaintRects[r];\n                        ctx.save();\n                        ctx.beginPath();\n                        ctx.rect(rect.x * dpr, rect.y * dpr, rect.width * dpr, rect.height * dpr);\n                        ctx.clip();\n                        repaint(rect);\n                        ctx.restore();\n                    }\n                }\n            }\n            else {\n                ctx.save();\n                repaint();\n                ctx.restore();\n            }\n            layer.__drawIndex = i;\n            if (layer.__drawIndex < layer.__endIndex) {\n                finished = false;\n            }\n        };\n        var this_1 = this;\n        for (var k = 0; k < layerList.length; k++) {\n            _loop_1(k);\n        }\n        if (env.wxa) {\n            util.each(this._layers, function (layer) {\n                if (layer && layer.ctx && layer.ctx.draw) {\n                    layer.ctx.draw();\n                }\n            });\n        }\n        return {\n            finished: finished,\n            needsRefreshHover: needsRefreshHover\n        };\n    };\n    CanvasPainter.prototype._doPaintEl = function (el, currentLayer, useDirtyRect, repaintRect, scope, isLast) {\n        var ctx = currentLayer.ctx;\n        if (useDirtyRect) {\n            var paintRect = el.getPaintRect();\n            if (!repaintRect || paintRect && paintRect.intersect(repaintRect)) {\n                brush(ctx, el, scope, isLast);\n                el.setPrevPaintRect(paintRect);\n            }\n        }\n        else {\n            brush(ctx, el, scope, isLast);\n        }\n    };\n    CanvasPainter.prototype.getLayer = function (zlevel, virtual) {\n        if (this._singleCanvas && !this._needsManuallyCompositing) {\n            zlevel = CANVAS_ZLEVEL;\n        }\n        var layer = this._layers[zlevel];\n        if (!layer) {\n            layer = new Layer('zr_' + zlevel, this, this.dpr);\n            layer.zlevel = zlevel;\n            layer.__builtin__ = true;\n            if (this._layerConfig[zlevel]) {\n                util.merge(layer, this._layerConfig[zlevel], true);\n            }\n            else if (this._layerConfig[zlevel - EL_AFTER_INCREMENTAL_INC]) {\n                util.merge(layer, this._layerConfig[zlevel - EL_AFTER_INCREMENTAL_INC], true);\n            }\n            if (virtual) {\n                layer.virtual = virtual;\n            }\n            this.insertLayer(zlevel, layer);\n            layer.initContext();\n        }\n        return layer;\n    };\n    CanvasPainter.prototype.insertLayer = function (zlevel, layer) {\n        var layersMap = this._layers;\n        var zlevelList = this._zlevelList;\n        var len = zlevelList.length;\n        var domRoot = this._domRoot;\n        var prevLayer = null;\n        var i = -1;\n        if (layersMap[zlevel]) {\n            if (process.env.NODE_ENV !== 'production') {\n                util.logError('ZLevel ' + zlevel + ' has been used already');\n            }\n            return;\n        }\n        if (!isLayerValid(layer)) {\n            if (process.env.NODE_ENV !== 'production') {\n                util.logError('Layer of zlevel ' + zlevel + ' is not valid');\n            }\n            return;\n        }\n        if (len > 0 && zlevel > zlevelList[0]) {\n            for (i = 0; i < len - 1; i++) {\n                if (zlevelList[i] < zlevel\n                    && zlevelList[i + 1] > zlevel) {\n                    break;\n                }\n            }\n            prevLayer = layersMap[zlevelList[i]];\n        }\n        zlevelList.splice(i + 1, 0, zlevel);\n        layersMap[zlevel] = layer;\n        if (!layer.virtual) {\n            if (prevLayer) {\n                var prevDom = prevLayer.dom;\n                if (prevDom.nextSibling) {\n                    domRoot.insertBefore(layer.dom, prevDom.nextSibling);\n                }\n                else {\n                    domRoot.appendChild(layer.dom);\n                }\n            }\n            else {\n                if (domRoot.firstChild) {\n                    domRoot.insertBefore(layer.dom, domRoot.firstChild);\n                }\n                else {\n                    domRoot.appendChild(layer.dom);\n                }\n            }\n        }\n        layer.__painter = this;\n    };\n    CanvasPainter.prototype.eachLayer = function (cb, context) {\n        var zlevelList = this._zlevelList;\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            cb.call(context, this._layers[z], z);\n        }\n    };\n    CanvasPainter.prototype.eachBuiltinLayer = function (cb, context) {\n        var zlevelList = this._zlevelList;\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            var layer = this._layers[z];\n            if (layer.__builtin__) {\n                cb.call(context, layer, z);\n            }\n        }\n    };\n    CanvasPainter.prototype.eachOtherLayer = function (cb, context) {\n        var zlevelList = this._zlevelList;\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            var layer = this._layers[z];\n            if (!layer.__builtin__) {\n                cb.call(context, layer, z);\n            }\n        }\n    };\n    CanvasPainter.prototype.getLayers = function () {\n        return this._layers;\n    };\n    CanvasPainter.prototype._updateLayerStatus = function (list) {\n        this.eachBuiltinLayer(function (layer, z) {\n            layer.__dirty = layer.__used = false;\n        });\n        function updatePrevLayer(idx) {\n            if (prevLayer) {\n                if (prevLayer.__endIndex !== idx) {\n                    prevLayer.__dirty = true;\n                }\n                prevLayer.__endIndex = idx;\n            }\n        }\n        if (this._singleCanvas) {\n            for (var i_1 = 1; i_1 < list.length; i_1++) {\n                var el = list[i_1];\n                if (el.zlevel !== list[i_1 - 1].zlevel || el.incremental) {\n                    this._needsManuallyCompositing = true;\n                    break;\n                }\n            }\n        }\n        var prevLayer = null;\n        var incrementalLayerCount = 0;\n        var prevZlevel;\n        var i;\n        for (i = 0; i < list.length; i++) {\n            var el = list[i];\n            var zlevel = el.zlevel;\n            var layer = void 0;\n            if (prevZlevel !== zlevel) {\n                prevZlevel = zlevel;\n                incrementalLayerCount = 0;\n            }\n            if (el.incremental) {\n                layer = this.getLayer(zlevel + INCREMENTAL_INC, this._needsManuallyCompositing);\n                layer.incremental = true;\n                incrementalLayerCount = 1;\n            }\n            else {\n                layer = this.getLayer(zlevel + (incrementalLayerCount > 0 ? EL_AFTER_INCREMENTAL_INC : 0), this._needsManuallyCompositing);\n            }\n            if (!layer.__builtin__) {\n                util.logError('ZLevel ' + zlevel + ' has been used by unkown layer ' + layer.id);\n            }\n            if (layer !== prevLayer) {\n                layer.__used = true;\n                if (layer.__startIndex !== i) {\n                    layer.__dirty = true;\n                }\n                layer.__startIndex = i;\n                if (!layer.incremental) {\n                    layer.__drawIndex = i;\n                }\n                else {\n                    layer.__drawIndex = -1;\n                }\n                updatePrevLayer(i);\n                prevLayer = layer;\n            }\n            if ((el.__dirty & REDRAW_BIT) && !el.__inHover) {\n                layer.__dirty = true;\n                if (layer.incremental && layer.__drawIndex < 0) {\n                    layer.__drawIndex = i;\n                }\n            }\n        }\n        updatePrevLayer(i);\n        this.eachBuiltinLayer(function (layer, z) {\n            if (!layer.__used && layer.getElementCount() > 0) {\n                layer.__dirty = true;\n                layer.__startIndex = layer.__endIndex = layer.__drawIndex = 0;\n            }\n            if (layer.__dirty && layer.__drawIndex < 0) {\n                layer.__drawIndex = layer.__startIndex;\n            }\n        });\n    };\n    CanvasPainter.prototype.clear = function () {\n        this.eachBuiltinLayer(this._clearLayer);\n        return this;\n    };\n    CanvasPainter.prototype._clearLayer = function (layer) {\n        layer.clear();\n    };\n    CanvasPainter.prototype.setBackgroundColor = function (backgroundColor) {\n        this._backgroundColor = backgroundColor;\n        util.each(this._layers, function (layer) {\n            layer.setUnpainted();\n        });\n    };\n    CanvasPainter.prototype.configLayer = function (zlevel, config) {\n        if (config) {\n            var layerConfig = this._layerConfig;\n            if (!layerConfig[zlevel]) {\n                layerConfig[zlevel] = config;\n            }\n            else {\n                util.merge(layerConfig[zlevel], config, true);\n            }\n            for (var i = 0; i < this._zlevelList.length; i++) {\n                var _zlevel = this._zlevelList[i];\n                if (_zlevel === zlevel || _zlevel === zlevel + EL_AFTER_INCREMENTAL_INC) {\n                    var layer = this._layers[_zlevel];\n                    util.merge(layer, layerConfig[zlevel], true);\n                }\n            }\n        }\n    };\n    CanvasPainter.prototype.delLayer = function (zlevel) {\n        var layers = this._layers;\n        var zlevelList = this._zlevelList;\n        var layer = layers[zlevel];\n        if (!layer) {\n            return;\n        }\n        layer.dom.parentNode.removeChild(layer.dom);\n        delete layers[zlevel];\n        zlevelList.splice(util.indexOf(zlevelList, zlevel), 1);\n    };\n    CanvasPainter.prototype.resize = function (width, height) {\n        if (!this._domRoot.style) {\n            if (width == null || height == null) {\n                return;\n            }\n            this._width = width;\n            this._height = height;\n            this.getLayer(CANVAS_ZLEVEL).resize(width, height);\n        }\n        else {\n            var domRoot = this._domRoot;\n            domRoot.style.display = 'none';\n            var opts = this._opts;\n            var root = this.root;\n            width != null && (opts.width = width);\n            height != null && (opts.height = height);\n            width = getSize(root, 0, opts);\n            height = getSize(root, 1, opts);\n            domRoot.style.display = '';\n            if (this._width !== width || height !== this._height) {\n                domRoot.style.width = width + 'px';\n                domRoot.style.height = height + 'px';\n                for (var id in this._layers) {\n                    if (this._layers.hasOwnProperty(id)) {\n                        this._layers[id].resize(width, height);\n                    }\n                }\n                this.refresh(true);\n            }\n            this._width = width;\n            this._height = height;\n        }\n        return this;\n    };\n    CanvasPainter.prototype.clearLayer = function (zlevel) {\n        var layer = this._layers[zlevel];\n        if (layer) {\n            layer.clear();\n        }\n    };\n    CanvasPainter.prototype.dispose = function () {\n        this.root.innerHTML = '';\n        this.root =\n            this.storage =\n                this._domRoot =\n                    this._layers = null;\n    };\n    CanvasPainter.prototype.getRenderedCanvas = function (opts) {\n        opts = opts || {};\n        if (this._singleCanvas && !this._compositeManually) {\n            return this._layers[CANVAS_ZLEVEL].dom;\n        }\n        var imageLayer = new Layer('image', this, opts.pixelRatio || this.dpr);\n        imageLayer.initContext();\n        imageLayer.clear(false, opts.backgroundColor || this._backgroundColor);\n        var ctx = imageLayer.ctx;\n        if (opts.pixelRatio <= this.dpr) {\n            this.refresh();\n            var width_1 = imageLayer.dom.width;\n            var height_1 = imageLayer.dom.height;\n            this.eachLayer(function (layer) {\n                if (layer.__builtin__) {\n                    ctx.drawImage(layer.dom, 0, 0, width_1, height_1);\n                }\n                else if (layer.renderToCanvas) {\n                    ctx.save();\n                    layer.renderToCanvas(ctx);\n                    ctx.restore();\n                }\n            });\n        }\n        else {\n            var scope = {\n                inHover: false,\n                viewWidth: this._width,\n                viewHeight: this._height\n            };\n            var displayList = this.storage.getDisplayList(true);\n            for (var i = 0, len = displayList.length; i < len; i++) {\n                var el = displayList[i];\n                brush(ctx, el, scope, i === len - 1);\n            }\n        }\n        return imageLayer.dom;\n    };\n    CanvasPainter.prototype.getWidth = function () {\n        return this._width;\n    };\n    CanvasPainter.prototype.getHeight = function () {\n        return this._height;\n    };\n    return CanvasPainter;\n}());\nexport default CanvasPainter;\n;\n","var easingFuncs = {\n    linear: function (k) {\n        return k;\n    },\n    quadraticIn: function (k) {\n        return k * k;\n    },\n    quadraticOut: function (k) {\n        return k * (2 - k);\n    },\n    quadraticInOut: function (k) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k;\n        }\n        return -0.5 * (--k * (k - 2) - 1);\n    },\n    cubicIn: function (k) {\n        return k * k * k;\n    },\n    cubicOut: function (k) {\n        return --k * k * k + 1;\n    },\n    cubicInOut: function (k) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k * k;\n        }\n        return 0.5 * ((k -= 2) * k * k + 2);\n    },\n    quarticIn: function (k) {\n        return k * k * k * k;\n    },\n    quarticOut: function (k) {\n        return 1 - (--k * k * k * k);\n    },\n    quarticInOut: function (k) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k * k * k;\n        }\n        return -0.5 * ((k -= 2) * k * k * k - 2);\n    },\n    quinticIn: function (k) {\n        return k * k * k * k * k;\n    },\n    quinticOut: function (k) {\n        return --k * k * k * k * k + 1;\n    },\n    quinticInOut: function (k) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k * k * k * k;\n        }\n        return 0.5 * ((k -= 2) * k * k * k * k + 2);\n    },\n    sinusoidalIn: function (k) {\n        return 1 - Math.cos(k * Math.PI / 2);\n    },\n    sinusoidalOut: function (k) {\n        return Math.sin(k * Math.PI / 2);\n    },\n    sinusoidalInOut: function (k) {\n        return 0.5 * (1 - Math.cos(Math.PI * k));\n    },\n    exponentialIn: function (k) {\n        return k === 0 ? 0 : Math.pow(1024, k - 1);\n    },\n    exponentialOut: function (k) {\n        return k === 1 ? 1 : 1 - Math.pow(2, -10 * k);\n    },\n    exponentialInOut: function (k) {\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if ((k *= 2) < 1) {\n            return 0.5 * Math.pow(1024, k - 1);\n        }\n        return 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2);\n    },\n    circularIn: function (k) {\n        return 1 - Math.sqrt(1 - k * k);\n    },\n    circularOut: function (k) {\n        return Math.sqrt(1 - (--k * k));\n    },\n    circularInOut: function (k) {\n        if ((k *= 2) < 1) {\n            return -0.5 * (Math.sqrt(1 - k * k) - 1);\n        }\n        return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\n    },\n    elasticIn: function (k) {\n        var s;\n        var a = 0.1;\n        var p = 0.4;\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if (!a || a < 1) {\n            a = 1;\n            s = p / 4;\n        }\n        else {\n            s = p * Math.asin(1 / a) / (2 * Math.PI);\n        }\n        return -(a * Math.pow(2, 10 * (k -= 1))\n            * Math.sin((k - s) * (2 * Math.PI) / p));\n    },\n    elasticOut: function (k) {\n        var s;\n        var a = 0.1;\n        var p = 0.4;\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if (!a || a < 1) {\n            a = 1;\n            s = p / 4;\n        }\n        else {\n            s = p * Math.asin(1 / a) / (2 * Math.PI);\n        }\n        return (a * Math.pow(2, -10 * k)\n            * Math.sin((k - s) * (2 * Math.PI) / p) + 1);\n    },\n    elasticInOut: function (k) {\n        var s;\n        var a = 0.1;\n        var p = 0.4;\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if (!a || a < 1) {\n            a = 1;\n            s = p / 4;\n        }\n        else {\n            s = p * Math.asin(1 / a) / (2 * Math.PI);\n        }\n        if ((k *= 2) < 1) {\n            return -0.5 * (a * Math.pow(2, 10 * (k -= 1))\n                * Math.sin((k - s) * (2 * Math.PI) / p));\n        }\n        return a * Math.pow(2, -10 * (k -= 1))\n            * Math.sin((k - s) * (2 * Math.PI) / p) * 0.5 + 1;\n    },\n    backIn: function (k) {\n        var s = 1.70158;\n        return k * k * ((s + 1) * k - s);\n    },\n    backOut: function (k) {\n        var s = 1.70158;\n        return --k * k * ((s + 1) * k + s) + 1;\n    },\n    backInOut: function (k) {\n        var s = 1.70158 * 1.525;\n        if ((k *= 2) < 1) {\n            return 0.5 * (k * k * ((s + 1) * k - s));\n        }\n        return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\n    },\n    bounceIn: function (k) {\n        return 1 - easingFuncs.bounceOut(1 - k);\n    },\n    bounceOut: function (k) {\n        if (k < (1 / 2.75)) {\n            return 7.5625 * k * k;\n        }\n        else if (k < (2 / 2.75)) {\n            return 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75;\n        }\n        else if (k < (2.5 / 2.75)) {\n            return 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375;\n        }\n        else {\n            return 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375;\n        }\n    },\n    bounceInOut: function (k) {\n        if (k < 0.5) {\n            return easingFuncs.bounceIn(k * 2) * 0.5;\n        }\n        return easingFuncs.bounceOut(k * 2 - 1) * 0.5 + 0.5;\n    }\n};\nexport default easingFuncs;\n","import easingFuncs from './easing.js';\nimport { isFunction, noop } from '../core/util.js';\nimport { createCubicEasingFunc } from './cubicEasing.js';\nvar Clip = (function () {\n    function Clip(opts) {\n        this._inited = false;\n        this._startTime = 0;\n        this._pausedTime = 0;\n        this._paused = false;\n        this._life = opts.life || 1000;\n        this._delay = opts.delay || 0;\n        this.loop = opts.loop || false;\n        this.onframe = opts.onframe || noop;\n        this.ondestroy = opts.ondestroy || noop;\n        this.onrestart = opts.onrestart || noop;\n        opts.easing && this.setEasing(opts.easing);\n    }\n    Clip.prototype.step = function (globalTime, deltaTime) {\n        if (!this._inited) {\n            this._startTime = globalTime + this._delay;\n            this._inited = true;\n        }\n        if (this._paused) {\n            this._pausedTime += deltaTime;\n            return;\n        }\n        var life = this._life;\n        var elapsedTime = globalTime - this._startTime - this._pausedTime;\n        var percent = elapsedTime / life;\n        if (percent < 0) {\n            percent = 0;\n        }\n        percent = Math.min(percent, 1);\n        var easingFunc = this.easingFunc;\n        var schedule = easingFunc ? easingFunc(percent) : percent;\n        this.onframe(schedule);\n        if (percent === 1) {\n            if (this.loop) {\n                var remainder = elapsedTime % life;\n                this._startTime = globalTime - remainder;\n                this._pausedTime = 0;\n                this.onrestart();\n            }\n            else {\n                return true;\n            }\n        }\n        return false;\n    };\n    Clip.prototype.pause = function () {\n        this._paused = true;\n    };\n    Clip.prototype.resume = function () {\n        this._paused = false;\n    };\n    Clip.prototype.setEasing = function (easing) {\n        this.easing = easing;\n        this.easingFunc = isFunction(easing)\n            ? easing\n            : easingFuncs[easing] || createCubicEasingFunc(easing);\n    };\n    return Clip;\n}());\nexport default Clip;\n","import Clip from './Clip.js';\nimport * as color from '../tool/color.js';\nimport { eqNaN, extend, isArrayLike, isFunction, isGradientObject, isNumber, isString, keys, logError, map } from '../core/util.js';\nimport easingFuncs from './easing.js';\nimport { createCubicEasingFunc } from './cubicEasing.js';\nimport { isLinearGradient, isRadialGradient } from '../svg/helper.js';\n;\nvar arraySlice = Array.prototype.slice;\nfunction interpolateNumber(p0, p1, percent) {\n    return (p1 - p0) * percent + p0;\n}\nfunction interpolate1DArray(out, p0, p1, percent) {\n    var len = p0.length;\n    for (var i = 0; i < len; i++) {\n        out[i] = interpolateNumber(p0[i], p1[i], percent);\n    }\n    return out;\n}\nfunction interpolate2DArray(out, p0, p1, percent) {\n    var len = p0.length;\n    var len2 = len && p0[0].length;\n    for (var i = 0; i < len; i++) {\n        if (!out[i]) {\n            out[i] = [];\n        }\n        for (var j = 0; j < len2; j++) {\n            out[i][j] = interpolateNumber(p0[i][j], p1[i][j], percent);\n        }\n    }\n    return out;\n}\nfunction add1DArray(out, p0, p1, sign) {\n    var len = p0.length;\n    for (var i = 0; i < len; i++) {\n        out[i] = p0[i] + p1[i] * sign;\n    }\n    return out;\n}\nfunction add2DArray(out, p0, p1, sign) {\n    var len = p0.length;\n    var len2 = len && p0[0].length;\n    for (var i = 0; i < len; i++) {\n        if (!out[i]) {\n            out[i] = [];\n        }\n        for (var j = 0; j < len2; j++) {\n            out[i][j] = p0[i][j] + p1[i][j] * sign;\n        }\n    }\n    return out;\n}\nfunction fillColorStops(val0, val1) {\n    var len0 = val0.length;\n    var len1 = val1.length;\n    var shorterArr = len0 > len1 ? val1 : val0;\n    var shorterLen = Math.min(len0, len1);\n    var last = shorterArr[shorterLen - 1] || { color: [0, 0, 0, 0], offset: 0 };\n    for (var i = shorterLen; i < Math.max(len0, len1); i++) {\n        shorterArr.push({\n            offset: last.offset,\n            color: last.color.slice()\n        });\n    }\n}\nfunction fillArray(val0, val1, arrDim) {\n    var arr0 = val0;\n    var arr1 = val1;\n    if (!arr0.push || !arr1.push) {\n        return;\n    }\n    var arr0Len = arr0.length;\n    var arr1Len = arr1.length;\n    if (arr0Len !== arr1Len) {\n        var isPreviousLarger = arr0Len > arr1Len;\n        if (isPreviousLarger) {\n            arr0.length = arr1Len;\n        }\n        else {\n            for (var i = arr0Len; i < arr1Len; i++) {\n                arr0.push(arrDim === 1 ? arr1[i] : arraySlice.call(arr1[i]));\n            }\n        }\n    }\n    var len2 = arr0[0] && arr0[0].length;\n    for (var i = 0; i < arr0.length; i++) {\n        if (arrDim === 1) {\n            if (isNaN(arr0[i])) {\n                arr0[i] = arr1[i];\n            }\n        }\n        else {\n            for (var j = 0; j < len2; j++) {\n                if (isNaN(arr0[i][j])) {\n                    arr0[i][j] = arr1[i][j];\n                }\n            }\n        }\n    }\n}\nexport function cloneValue(value) {\n    if (isArrayLike(value)) {\n        var len = value.length;\n        if (isArrayLike(value[0])) {\n            var ret = [];\n            for (var i = 0; i < len; i++) {\n                ret.push(arraySlice.call(value[i]));\n            }\n            return ret;\n        }\n        return arraySlice.call(value);\n    }\n    return value;\n}\nfunction rgba2String(rgba) {\n    rgba[0] = Math.floor(rgba[0]) || 0;\n    rgba[1] = Math.floor(rgba[1]) || 0;\n    rgba[2] = Math.floor(rgba[2]) || 0;\n    rgba[3] = rgba[3] == null ? 1 : rgba[3];\n    return 'rgba(' + rgba.join(',') + ')';\n}\nfunction guessArrayDim(value) {\n    return isArrayLike(value && value[0]) ? 2 : 1;\n}\nvar VALUE_TYPE_NUMBER = 0;\nvar VALUE_TYPE_1D_ARRAY = 1;\nvar VALUE_TYPE_2D_ARRAY = 2;\nvar VALUE_TYPE_COLOR = 3;\nvar VALUE_TYPE_LINEAR_GRADIENT = 4;\nvar VALUE_TYPE_RADIAL_GRADIENT = 5;\nvar VALUE_TYPE_UNKOWN = 6;\nfunction isGradientValueType(valType) {\n    return valType === VALUE_TYPE_LINEAR_GRADIENT || valType === VALUE_TYPE_RADIAL_GRADIENT;\n}\nfunction isArrayValueType(valType) {\n    return valType === VALUE_TYPE_1D_ARRAY || valType === VALUE_TYPE_2D_ARRAY;\n}\nvar tmpRgba = [0, 0, 0, 0];\nvar Track = (function () {\n    function Track(propName) {\n        this.keyframes = [];\n        this.discrete = false;\n        this._invalid = false;\n        this._needsSort = false;\n        this._lastFr = 0;\n        this._lastFrP = 0;\n        this.propName = propName;\n    }\n    Track.prototype.isFinished = function () {\n        return this._finished;\n    };\n    Track.prototype.setFinished = function () {\n        this._finished = true;\n        if (this._additiveTrack) {\n            this._additiveTrack.setFinished();\n        }\n    };\n    Track.prototype.needsAnimate = function () {\n        return this.keyframes.length >= 1;\n    };\n    Track.prototype.getAdditiveTrack = function () {\n        return this._additiveTrack;\n    };\n    Track.prototype.addKeyframe = function (time, rawValue, easing) {\n        this._needsSort = true;\n        var keyframes = this.keyframes;\n        var len = keyframes.length;\n        var discrete = false;\n        var valType = VALUE_TYPE_UNKOWN;\n        var value = rawValue;\n        if (isArrayLike(rawValue)) {\n            var arrayDim = guessArrayDim(rawValue);\n            valType = arrayDim;\n            if (arrayDim === 1 && !isNumber(rawValue[0])\n                || arrayDim === 2 && !isNumber(rawValue[0][0])) {\n                discrete = true;\n            }\n        }\n        else {\n            if (isNumber(rawValue) && !eqNaN(rawValue)) {\n                valType = VALUE_TYPE_NUMBER;\n            }\n            else if (isString(rawValue)) {\n                if (!isNaN(+rawValue)) {\n                    valType = VALUE_TYPE_NUMBER;\n                }\n                else {\n                    var colorArray = color.parse(rawValue);\n                    if (colorArray) {\n                        value = colorArray;\n                        valType = VALUE_TYPE_COLOR;\n                    }\n                }\n            }\n            else if (isGradientObject(rawValue)) {\n                var parsedGradient = extend({}, value);\n                parsedGradient.colorStops = map(rawValue.colorStops, function (colorStop) { return ({\n                    offset: colorStop.offset,\n                    color: color.parse(colorStop.color)\n                }); });\n                if (isLinearGradient(rawValue)) {\n                    valType = VALUE_TYPE_LINEAR_GRADIENT;\n                }\n                else if (isRadialGradient(rawValue)) {\n                    valType = VALUE_TYPE_RADIAL_GRADIENT;\n                }\n                value = parsedGradient;\n            }\n        }\n        if (len === 0) {\n            this.valType = valType;\n        }\n        else if (valType !== this.valType || valType === VALUE_TYPE_UNKOWN) {\n            discrete = true;\n        }\n        this.discrete = this.discrete || discrete;\n        var kf = {\n            time: time,\n            value: value,\n            rawValue: rawValue,\n            percent: 0\n        };\n        if (easing) {\n            kf.easing = easing;\n            kf.easingFunc = isFunction(easing)\n                ? easing\n                : easingFuncs[easing] || createCubicEasingFunc(easing);\n        }\n        keyframes.push(kf);\n        return kf;\n    };\n    Track.prototype.prepare = function (maxTime, additiveTrack) {\n        var kfs = this.keyframes;\n        if (this._needsSort) {\n            kfs.sort(function (a, b) {\n                return a.time - b.time;\n            });\n        }\n        var valType = this.valType;\n        var kfsLen = kfs.length;\n        var lastKf = kfs[kfsLen - 1];\n        var isDiscrete = this.discrete;\n        var isArr = isArrayValueType(valType);\n        var isGradient = isGradientValueType(valType);\n        for (var i = 0; i < kfsLen; i++) {\n            var kf = kfs[i];\n            var value = kf.value;\n            var lastValue = lastKf.value;\n            kf.percent = kf.time / maxTime;\n            if (!isDiscrete) {\n                if (isArr && i !== kfsLen - 1) {\n                    fillArray(value, lastValue, valType);\n                }\n                else if (isGradient) {\n                    fillColorStops(value.colorStops, lastValue.colorStops);\n                }\n            }\n        }\n        if (!isDiscrete\n            && valType !== VALUE_TYPE_RADIAL_GRADIENT\n            && additiveTrack\n            && this.needsAnimate()\n            && additiveTrack.needsAnimate()\n            && valType === additiveTrack.valType\n            && !additiveTrack._finished) {\n            this._additiveTrack = additiveTrack;\n            var startValue = kfs[0].value;\n            for (var i = 0; i < kfsLen; i++) {\n                if (valType === VALUE_TYPE_NUMBER) {\n                    kfs[i].additiveValue = kfs[i].value - startValue;\n                }\n                else if (valType === VALUE_TYPE_COLOR) {\n                    kfs[i].additiveValue =\n                        add1DArray([], kfs[i].value, startValue, -1);\n                }\n                else if (isArrayValueType(valType)) {\n                    kfs[i].additiveValue = valType === VALUE_TYPE_1D_ARRAY\n                        ? add1DArray([], kfs[i].value, startValue, -1)\n                        : add2DArray([], kfs[i].value, startValue, -1);\n                }\n            }\n        }\n    };\n    Track.prototype.step = function (target, percent) {\n        if (this._finished) {\n            return;\n        }\n        if (this._additiveTrack && this._additiveTrack._finished) {\n            this._additiveTrack = null;\n        }\n        var isAdditive = this._additiveTrack != null;\n        var valueKey = isAdditive ? 'additiveValue' : 'value';\n        var valType = this.valType;\n        var keyframes = this.keyframes;\n        var kfsNum = keyframes.length;\n        var propName = this.propName;\n        var isValueColor = valType === VALUE_TYPE_COLOR;\n        var frameIdx;\n        var lastFrame = this._lastFr;\n        var mathMin = Math.min;\n        var frame;\n        var nextFrame;\n        if (kfsNum === 1) {\n            frame = nextFrame = keyframes[0];\n        }\n        else {\n            if (percent < 0) {\n                frameIdx = 0;\n            }\n            else if (percent < this._lastFrP) {\n                var start = mathMin(lastFrame + 1, kfsNum - 1);\n                for (frameIdx = start; frameIdx >= 0; frameIdx--) {\n                    if (keyframes[frameIdx].percent <= percent) {\n                        break;\n                    }\n                }\n                frameIdx = mathMin(frameIdx, kfsNum - 2);\n            }\n            else {\n                for (frameIdx = lastFrame; frameIdx < kfsNum; frameIdx++) {\n                    if (keyframes[frameIdx].percent > percent) {\n                        break;\n                    }\n                }\n                frameIdx = mathMin(frameIdx - 1, kfsNum - 2);\n            }\n            nextFrame = keyframes[frameIdx + 1];\n            frame = keyframes[frameIdx];\n        }\n        if (!(frame && nextFrame)) {\n            return;\n        }\n        this._lastFr = frameIdx;\n        this._lastFrP = percent;\n        var interval = (nextFrame.percent - frame.percent);\n        var w = interval === 0 ? 1 : mathMin((percent - frame.percent) / interval, 1);\n        if (nextFrame.easingFunc) {\n            w = nextFrame.easingFunc(w);\n        }\n        var targetArr = isAdditive ? this._additiveValue\n            : (isValueColor ? tmpRgba : target[propName]);\n        if ((isArrayValueType(valType) || isValueColor) && !targetArr) {\n            targetArr = this._additiveValue = [];\n        }\n        if (this.discrete) {\n            target[propName] = w < 1 ? frame.rawValue : nextFrame.rawValue;\n        }\n        else if (isArrayValueType(valType)) {\n            valType === VALUE_TYPE_1D_ARRAY\n                ? interpolate1DArray(targetArr, frame[valueKey], nextFrame[valueKey], w)\n                : interpolate2DArray(targetArr, frame[valueKey], nextFrame[valueKey], w);\n        }\n        else if (isGradientValueType(valType)) {\n            var val = frame[valueKey];\n            var nextVal_1 = nextFrame[valueKey];\n            var isLinearGradient_1 = valType === VALUE_TYPE_LINEAR_GRADIENT;\n            target[propName] = {\n                type: isLinearGradient_1 ? 'linear' : 'radial',\n                x: interpolateNumber(val.x, nextVal_1.x, w),\n                y: interpolateNumber(val.y, nextVal_1.y, w),\n                colorStops: map(val.colorStops, function (colorStop, idx) {\n                    var nextColorStop = nextVal_1.colorStops[idx];\n                    return {\n                        offset: interpolateNumber(colorStop.offset, nextColorStop.offset, w),\n                        color: rgba2String(interpolate1DArray([], colorStop.color, nextColorStop.color, w))\n                    };\n                }),\n                global: nextVal_1.global\n            };\n            if (isLinearGradient_1) {\n                target[propName].x2 = interpolateNumber(val.x2, nextVal_1.x2, w);\n                target[propName].y2 = interpolateNumber(val.y2, nextVal_1.y2, w);\n            }\n            else {\n                target[propName].r = interpolateNumber(val.r, nextVal_1.r, w);\n            }\n        }\n        else if (isValueColor) {\n            interpolate1DArray(targetArr, frame[valueKey], nextFrame[valueKey], w);\n            if (!isAdditive) {\n                target[propName] = rgba2String(targetArr);\n            }\n        }\n        else {\n            var value = interpolateNumber(frame[valueKey], nextFrame[valueKey], w);\n            if (isAdditive) {\n                this._additiveValue = value;\n            }\n            else {\n                target[propName] = value;\n            }\n        }\n        if (isAdditive) {\n            this._addToTarget(target);\n        }\n    };\n    Track.prototype._addToTarget = function (target) {\n        var valType = this.valType;\n        var propName = this.propName;\n        var additiveValue = this._additiveValue;\n        if (valType === VALUE_TYPE_NUMBER) {\n            target[propName] = target[propName] + additiveValue;\n        }\n        else if (valType === VALUE_TYPE_COLOR) {\n            color.parse(target[propName], tmpRgba);\n            add1DArray(tmpRgba, tmpRgba, additiveValue, 1);\n            target[propName] = rgba2String(tmpRgba);\n        }\n        else if (valType === VALUE_TYPE_1D_ARRAY) {\n            add1DArray(target[propName], target[propName], additiveValue, 1);\n        }\n        else if (valType === VALUE_TYPE_2D_ARRAY) {\n            add2DArray(target[propName], target[propName], additiveValue, 1);\n        }\n    };\n    return Track;\n}());\nvar Animator = (function () {\n    function Animator(target, loop, allowDiscreteAnimation, additiveTo) {\n        this._tracks = {};\n        this._trackKeys = [];\n        this._maxTime = 0;\n        this._started = 0;\n        this._clip = null;\n        this._target = target;\n        this._loop = loop;\n        if (loop && additiveTo) {\n            logError('Can\\' use additive animation on looped animation.');\n            return;\n        }\n        this._additiveAnimators = additiveTo;\n        this._allowDiscrete = allowDiscreteAnimation;\n    }\n    Animator.prototype.getMaxTime = function () {\n        return this._maxTime;\n    };\n    Animator.prototype.getDelay = function () {\n        return this._delay;\n    };\n    Animator.prototype.getLoop = function () {\n        return this._loop;\n    };\n    Animator.prototype.getTarget = function () {\n        return this._target;\n    };\n    Animator.prototype.changeTarget = function (target) {\n        this._target = target;\n    };\n    Animator.prototype.when = function (time, props, easing) {\n        return this.whenWithKeys(time, props, keys(props), easing);\n    };\n    Animator.prototype.whenWithKeys = function (time, props, propNames, easing) {\n        var tracks = this._tracks;\n        for (var i = 0; i < propNames.length; i++) {\n            var propName = propNames[i];\n            var track = tracks[propName];\n            if (!track) {\n                track = tracks[propName] = new Track(propName);\n                var initialValue = void 0;\n                var additiveTrack = this._getAdditiveTrack(propName);\n                if (additiveTrack) {\n                    var addtiveTrackKfs = additiveTrack.keyframes;\n                    var lastFinalKf = addtiveTrackKfs[addtiveTrackKfs.length - 1];\n                    initialValue = lastFinalKf && lastFinalKf.value;\n                    if (additiveTrack.valType === VALUE_TYPE_COLOR && initialValue) {\n                        initialValue = rgba2String(initialValue);\n                    }\n                }\n                else {\n                    initialValue = this._target[propName];\n                }\n                if (initialValue == null) {\n                    continue;\n                }\n                if (time > 0) {\n                    track.addKeyframe(0, cloneValue(initialValue), easing);\n                }\n                this._trackKeys.push(propName);\n            }\n            track.addKeyframe(time, cloneValue(props[propName]), easing);\n        }\n        this._maxTime = Math.max(this._maxTime, time);\n        return this;\n    };\n    Animator.prototype.pause = function () {\n        this._clip.pause();\n        this._paused = true;\n    };\n    Animator.prototype.resume = function () {\n        this._clip.resume();\n        this._paused = false;\n    };\n    Animator.prototype.isPaused = function () {\n        return !!this._paused;\n    };\n    Animator.prototype.duration = function (duration) {\n        this._maxTime = duration;\n        this._force = true;\n        return this;\n    };\n    Animator.prototype._doneCallback = function () {\n        this._setTracksFinished();\n        this._clip = null;\n        var doneList = this._doneCbs;\n        if (doneList) {\n            var len = doneList.length;\n            for (var i = 0; i < len; i++) {\n                doneList[i].call(this);\n            }\n        }\n    };\n    Animator.prototype._abortedCallback = function () {\n        this._setTracksFinished();\n        var animation = this.animation;\n        var abortedList = this._abortedCbs;\n        if (animation) {\n            animation.removeClip(this._clip);\n        }\n        this._clip = null;\n        if (abortedList) {\n            for (var i = 0; i < abortedList.length; i++) {\n                abortedList[i].call(this);\n            }\n        }\n    };\n    Animator.prototype._setTracksFinished = function () {\n        var tracks = this._tracks;\n        var tracksKeys = this._trackKeys;\n        for (var i = 0; i < tracksKeys.length; i++) {\n            tracks[tracksKeys[i]].setFinished();\n        }\n    };\n    Animator.prototype._getAdditiveTrack = function (trackName) {\n        var additiveTrack;\n        var additiveAnimators = this._additiveAnimators;\n        if (additiveAnimators) {\n            for (var i = 0; i < additiveAnimators.length; i++) {\n                var track = additiveAnimators[i].getTrack(trackName);\n                if (track) {\n                    additiveTrack = track;\n                }\n            }\n        }\n        return additiveTrack;\n    };\n    Animator.prototype.start = function (easing) {\n        if (this._started > 0) {\n            return;\n        }\n        this._started = 1;\n        var self = this;\n        var tracks = [];\n        var maxTime = this._maxTime || 0;\n        for (var i = 0; i < this._trackKeys.length; i++) {\n            var propName = this._trackKeys[i];\n            var track = this._tracks[propName];\n            var additiveTrack = this._getAdditiveTrack(propName);\n            var kfs = track.keyframes;\n            var kfsNum = kfs.length;\n            track.prepare(maxTime, additiveTrack);\n            if (track.needsAnimate()) {\n                if (!this._allowDiscrete && track.discrete) {\n                    var lastKf = kfs[kfsNum - 1];\n                    if (lastKf) {\n                        self._target[track.propName] = lastKf.rawValue;\n                    }\n                    track.setFinished();\n                }\n                else {\n                    tracks.push(track);\n                }\n            }\n        }\n        if (tracks.length || this._force) {\n            var clip = new Clip({\n                life: maxTime,\n                loop: this._loop,\n                delay: this._delay || 0,\n                onframe: function (percent) {\n                    self._started = 2;\n                    var additiveAnimators = self._additiveAnimators;\n                    if (additiveAnimators) {\n                        var stillHasAdditiveAnimator = false;\n                        for (var i = 0; i < additiveAnimators.length; i++) {\n                            if (additiveAnimators[i]._clip) {\n                                stillHasAdditiveAnimator = true;\n                                break;\n                            }\n                        }\n                        if (!stillHasAdditiveAnimator) {\n                            self._additiveAnimators = null;\n                        }\n                    }\n                    for (var i = 0; i < tracks.length; i++) {\n                        tracks[i].step(self._target, percent);\n                    }\n                    var onframeList = self._onframeCbs;\n                    if (onframeList) {\n                        for (var i = 0; i < onframeList.length; i++) {\n                            onframeList[i](self._target, percent);\n                        }\n                    }\n                },\n                ondestroy: function () {\n                    self._doneCallback();\n                }\n            });\n            this._clip = clip;\n            if (this.animation) {\n                this.animation.addClip(clip);\n            }\n            if (easing) {\n                clip.setEasing(easing);\n            }\n        }\n        else {\n            this._doneCallback();\n        }\n        return this;\n    };\n    Animator.prototype.stop = function (forwardToLast) {\n        if (!this._clip) {\n            return;\n        }\n        var clip = this._clip;\n        if (forwardToLast) {\n            clip.onframe(1);\n        }\n        this._abortedCallback();\n    };\n    Animator.prototype.delay = function (time) {\n        this._delay = time;\n        return this;\n    };\n    Animator.prototype.during = function (cb) {\n        if (cb) {\n            if (!this._onframeCbs) {\n                this._onframeCbs = [];\n            }\n            this._onframeCbs.push(cb);\n        }\n        return this;\n    };\n    Animator.prototype.done = function (cb) {\n        if (cb) {\n            if (!this._doneCbs) {\n                this._doneCbs = [];\n            }\n            this._doneCbs.push(cb);\n        }\n        return this;\n    };\n    Animator.prototype.aborted = function (cb) {\n        if (cb) {\n            if (!this._abortedCbs) {\n                this._abortedCbs = [];\n            }\n            this._abortedCbs.push(cb);\n        }\n        return this;\n    };\n    Animator.prototype.getClip = function () {\n        return this._clip;\n    };\n    Animator.prototype.getTrack = function (propName) {\n        return this._tracks[propName];\n    };\n    Animator.prototype.getTracks = function () {\n        var _this = this;\n        return map(this._trackKeys, function (key) { return _this._tracks[key]; });\n    };\n    Animator.prototype.stopTracks = function (propNames, forwardToLast) {\n        if (!propNames.length || !this._clip) {\n            return true;\n        }\n        var tracks = this._tracks;\n        var tracksKeys = this._trackKeys;\n        for (var i = 0; i < propNames.length; i++) {\n            var track = tracks[propNames[i]];\n            if (track && !track.isFinished()) {\n                if (forwardToLast) {\n                    track.step(this._target, 1);\n                }\n                else if (this._started === 1) {\n                    track.step(this._target, 0);\n                }\n                track.setFinished();\n            }\n        }\n        var allAborted = true;\n        for (var i = 0; i < tracksKeys.length; i++) {\n            if (!tracks[tracksKeys[i]].isFinished()) {\n                allAborted = false;\n                break;\n            }\n        }\n        if (allAborted) {\n            this._abortedCallback();\n        }\n        return allAborted;\n    };\n    Animator.prototype.saveTo = function (target, trackKeys, firstOrLast) {\n        if (!target) {\n            return;\n        }\n        trackKeys = trackKeys || this._trackKeys;\n        for (var i = 0; i < trackKeys.length; i++) {\n            var propName = trackKeys[i];\n            var track = this._tracks[propName];\n            if (!track || track.isFinished()) {\n                continue;\n            }\n            var kfs = track.keyframes;\n            var kf = kfs[firstOrLast ? 0 : kfs.length - 1];\n            if (kf) {\n                target[propName] = cloneValue(kf.rawValue);\n            }\n        }\n    };\n    Animator.prototype.__changeFinalValue = function (finalProps, trackKeys) {\n        trackKeys = trackKeys || keys(finalProps);\n        for (var i = 0; i < trackKeys.length; i++) {\n            var propName = trackKeys[i];\n            var track = this._tracks[propName];\n            if (!track) {\n                continue;\n            }\n            var kfs = track.keyframes;\n            if (kfs.length > 1) {\n                var lastKf = kfs.pop();\n                track.addKeyframe(lastKf.time, finalProps[propName]);\n                track.prepare(this._maxTime, track.getAdditiveTrack());\n            }\n        }\n    };\n    return Animator;\n}());\nexport default Animator;\n","import { __extends } from \"tslib\";\nimport Displayable, { DEFAULT_COMMON_STYLE, DEFAULT_COMMON_ANIMATION_PROPS } from './Displayable.js';\nimport BoundingRect from '../core/BoundingRect.js';\nimport { defaults, createObject } from '../core/util.js';\nexport var DEFAULT_IMAGE_STYLE = defaults({\n    x: 0,\n    y: 0\n}, DEFAULT_COMMON_STYLE);\nexport var DEFAULT_IMAGE_ANIMATION_PROPS = {\n    style: defaults({\n        x: true,\n        y: true,\n        width: true,\n        height: true,\n        sx: true,\n        sy: true,\n        sWidth: true,\n        sHeight: true\n    }, DEFAULT_COMMON_ANIMATION_PROPS.style)\n};\nfunction isImageLike(source) {\n    return !!(source\n        && typeof source !== 'string'\n        && source.width && source.height);\n}\nvar ZRImage = (function (_super) {\n    __extends(ZRImage, _super);\n    function ZRImage() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ZRImage.prototype.createStyle = function (obj) {\n        return createObject(DEFAULT_IMAGE_STYLE, obj);\n    };\n    ZRImage.prototype._getSize = function (dim) {\n        var style = this.style;\n        var size = style[dim];\n        if (size != null) {\n            return size;\n        }\n        var imageSource = isImageLike(style.image)\n            ? style.image : this.__image;\n        if (!imageSource) {\n            return 0;\n        }\n        var otherDim = dim === 'width' ? 'height' : 'width';\n        var otherDimSize = style[otherDim];\n        if (otherDimSize == null) {\n            return imageSource[dim];\n        }\n        else {\n            return imageSource[dim] / imageSource[otherDim] * otherDimSize;\n        }\n    };\n    ZRImage.prototype.getWidth = function () {\n        return this._getSize('width');\n    };\n    ZRImage.prototype.getHeight = function () {\n        return this._getSize('height');\n    };\n    ZRImage.prototype.getAnimationStyleProps = function () {\n        return DEFAULT_IMAGE_ANIMATION_PROPS;\n    };\n    ZRImage.prototype.getBoundingRect = function () {\n        var style = this.style;\n        if (!this._rect) {\n            this._rect = new BoundingRect(style.x || 0, style.y || 0, this.getWidth(), this.getHeight());\n        }\n        return this._rect;\n    };\n    return ZRImage;\n}(Displayable));\nZRImage.prototype.type = 'image';\nexport default ZRImage;\n","import { cubicSubdivide } from '../core/curve.js';\nimport PathProxy from '../core/PathProxy.js';\nvar CMD = PathProxy.CMD;\nfunction aroundEqual(a, b) {\n    return Math.abs(a - b) < 1e-5;\n}\nexport function pathToBezierCurves(path) {\n    var data = path.data;\n    var len = path.len();\n    var bezierArrayGroups = [];\n    var currentSubpath;\n    var xi = 0;\n    var yi = 0;\n    var x0 = 0;\n    var y0 = 0;\n    function createNewSubpath(x, y) {\n        if (currentSubpath && currentSubpath.length > 2) {\n            bezierArrayGroups.push(currentSubpath);\n        }\n        currentSubpath = [x, y];\n    }\n    function addLine(x0, y0, x1, y1) {\n        if (!(aroundEqual(x0, x1) && aroundEqual(y0, y1))) {\n            currentSubpath.push(x0, y0, x1, y1, x1, y1);\n        }\n    }\n    function addArc(startAngle, endAngle, cx, cy, rx, ry) {\n        var delta = Math.abs(endAngle - startAngle);\n        var len = Math.tan(delta / 4) * 4 / 3;\n        var dir = endAngle < startAngle ? -1 : 1;\n        var c1 = Math.cos(startAngle);\n        var s1 = Math.sin(startAngle);\n        var c2 = Math.cos(endAngle);\n        var s2 = Math.sin(endAngle);\n        var x1 = c1 * rx + cx;\n        var y1 = s1 * ry + cy;\n        var x4 = c2 * rx + cx;\n        var y4 = s2 * ry + cy;\n        var hx = rx * len * dir;\n        var hy = ry * len * dir;\n        currentSubpath.push(x1 - hx * s1, y1 + hy * c1, x4 + hx * s2, y4 - hy * c2, x4, y4);\n    }\n    var x1;\n    var y1;\n    var x2;\n    var y2;\n    for (var i = 0; i < len;) {\n        var cmd = data[i++];\n        var isFirst = i === 1;\n        if (isFirst) {\n            xi = data[i];\n            yi = data[i + 1];\n            x0 = xi;\n            y0 = yi;\n            if (cmd === CMD.L || cmd === CMD.C || cmd === CMD.Q) {\n                currentSubpath = [x0, y0];\n            }\n        }\n        switch (cmd) {\n            case CMD.M:\n                xi = x0 = data[i++];\n                yi = y0 = data[i++];\n                createNewSubpath(x0, y0);\n                break;\n            case CMD.L:\n                x1 = data[i++];\n                y1 = data[i++];\n                addLine(xi, yi, x1, y1);\n                xi = x1;\n                yi = y1;\n                break;\n            case CMD.C:\n                currentSubpath.push(data[i++], data[i++], data[i++], data[i++], xi = data[i++], yi = data[i++]);\n                break;\n            case CMD.Q:\n                x1 = data[i++];\n                y1 = data[i++];\n                x2 = data[i++];\n                y2 = data[i++];\n                currentSubpath.push(xi + 2 / 3 * (x1 - xi), yi + 2 / 3 * (y1 - yi), x2 + 2 / 3 * (x1 - x2), y2 + 2 / 3 * (y1 - y2), x2, y2);\n                xi = x2;\n                yi = y2;\n                break;\n            case CMD.A:\n                var cx = data[i++];\n                var cy = data[i++];\n                var rx = data[i++];\n                var ry = data[i++];\n                var startAngle = data[i++];\n                var endAngle = data[i++] + startAngle;\n                i += 1;\n                var anticlockwise = !data[i++];\n                x1 = Math.cos(startAngle) * rx + cx;\n                y1 = Math.sin(startAngle) * ry + cy;\n                if (isFirst) {\n                    x0 = x1;\n                    y0 = y1;\n                    createNewSubpath(x0, y0);\n                }\n                else {\n                    addLine(xi, yi, x1, y1);\n                }\n                xi = Math.cos(endAngle) * rx + cx;\n                yi = Math.sin(endAngle) * ry + cy;\n                var step = (anticlockwise ? -1 : 1) * Math.PI / 2;\n                for (var angle = startAngle; anticlockwise ? angle > endAngle : angle < endAngle; angle += step) {\n                    var nextAngle = anticlockwise ? Math.max(angle + step, endAngle)\n                        : Math.min(angle + step, endAngle);\n                    addArc(angle, nextAngle, cx, cy, rx, ry);\n                }\n                break;\n            case CMD.R:\n                x0 = xi = data[i++];\n                y0 = yi = data[i++];\n                x1 = x0 + data[i++];\n                y1 = y0 + data[i++];\n                createNewSubpath(x1, y0);\n                addLine(x1, y0, x1, y1);\n                addLine(x1, y1, x0, y1);\n                addLine(x0, y1, x0, y0);\n                addLine(x0, y0, x1, y0);\n                break;\n            case CMD.Z:\n                currentSubpath && addLine(xi, yi, x0, y0);\n                xi = x0;\n                yi = y0;\n                break;\n        }\n    }\n    if (currentSubpath && currentSubpath.length > 2) {\n        bezierArrayGroups.push(currentSubpath);\n    }\n    return bezierArrayGroups;\n}\nfunction adpativeBezier(x0, y0, x1, y1, x2, y2, x3, y3, out, scale) {\n    if (aroundEqual(x0, x1) && aroundEqual(y0, y1) && aroundEqual(x2, x3) && aroundEqual(y2, y3)) {\n        out.push(x3, y3);\n        return;\n    }\n    var PIXEL_DISTANCE = 2 / scale;\n    var PIXEL_DISTANCE_SQR = PIXEL_DISTANCE * PIXEL_DISTANCE;\n    var dx = x3 - x0;\n    var dy = y3 - y0;\n    var d = Math.sqrt(dx * dx + dy * dy);\n    dx /= d;\n    dy /= d;\n    var dx1 = x1 - x0;\n    var dy1 = y1 - y0;\n    var dx2 = x2 - x3;\n    var dy2 = y2 - y3;\n    var cp1LenSqr = dx1 * dx1 + dy1 * dy1;\n    var cp2LenSqr = dx2 * dx2 + dy2 * dy2;\n    if (cp1LenSqr < PIXEL_DISTANCE_SQR && cp2LenSqr < PIXEL_DISTANCE_SQR) {\n        out.push(x3, y3);\n        return;\n    }\n    var projLen1 = dx * dx1 + dy * dy1;\n    var projLen2 = -dx * dx2 - dy * dy2;\n    var d1Sqr = cp1LenSqr - projLen1 * projLen1;\n    var d2Sqr = cp2LenSqr - projLen2 * projLen2;\n    if (d1Sqr < PIXEL_DISTANCE_SQR && projLen1 >= 0\n        && d2Sqr < PIXEL_DISTANCE_SQR && projLen2 >= 0) {\n        out.push(x3, y3);\n        return;\n    }\n    var tmpSegX = [];\n    var tmpSegY = [];\n    cubicSubdivide(x0, x1, x2, x3, 0.5, tmpSegX);\n    cubicSubdivide(y0, y1, y2, y3, 0.5, tmpSegY);\n    adpativeBezier(tmpSegX[0], tmpSegY[0], tmpSegX[1], tmpSegY[1], tmpSegX[2], tmpSegY[2], tmpSegX[3], tmpSegY[3], out, scale);\n    adpativeBezier(tmpSegX[4], tmpSegY[4], tmpSegX[5], tmpSegY[5], tmpSegX[6], tmpSegY[6], tmpSegX[7], tmpSegY[7], out, scale);\n}\nexport function pathToPolygons(path, scale) {\n    var bezierArrayGroups = pathToBezierCurves(path);\n    var polygons = [];\n    scale = scale || 1;\n    for (var i = 0; i < bezierArrayGroups.length; i++) {\n        var beziers = bezierArrayGroups[i];\n        var polygon = [];\n        var x0 = beziers[0];\n        var y0 = beziers[1];\n        polygon.push(x0, y0);\n        for (var k = 2; k < beziers.length;) {\n            var x1 = beziers[k++];\n            var y1 = beziers[k++];\n            var x2 = beziers[k++];\n            var y2 = beziers[k++];\n            var x3 = beziers[k++];\n            var y3 = beziers[k++];\n            adpativeBezier(x0, y0, x1, y1, x2, y2, x3, y3, polygon, scale);\n            x0 = x3;\n            y0 = y3;\n        }\n        polygons.push(polygon);\n    }\n    return polygons;\n}\n","import { fromPoints } from '../core/bbox.js';\nimport BoundingRect from '../core/BoundingRect.js';\nimport Point from '../core/Point.js';\nimport { map } from '../core/util.js';\nimport Polygon from '../graphic/shape/Polygon.js';\nimport Rect from '../graphic/shape/Rect.js';\nimport Sector from '../graphic/shape/Sector.js';\nimport { pathToPolygons } from './convertPath.js';\nimport { clonePath } from './path.js';\nfunction getDividingGrids(dimSize, rowDim, count) {\n    var rowSize = dimSize[rowDim];\n    var columnSize = dimSize[1 - rowDim];\n    var ratio = Math.abs(rowSize / columnSize);\n    var rowCount = Math.ceil(Math.sqrt(ratio * count));\n    var columnCount = Math.floor(count / rowCount);\n    if (columnCount === 0) {\n        columnCount = 1;\n        rowCount = count;\n    }\n    var grids = [];\n    for (var i = 0; i < rowCount; i++) {\n        grids.push(columnCount);\n    }\n    var currentCount = rowCount * columnCount;\n    var remained = count - currentCount;\n    if (remained > 0) {\n        for (var i = 0; i < remained; i++) {\n            grids[i % rowCount] += 1;\n        }\n    }\n    return grids;\n}\nfunction divideSector(sectorShape, count, outShapes) {\n    var r0 = sectorShape.r0;\n    var r = sectorShape.r;\n    var startAngle = sectorShape.startAngle;\n    var endAngle = sectorShape.endAngle;\n    var angle = Math.abs(endAngle - startAngle);\n    var arcLen = angle * r;\n    var deltaR = r - r0;\n    var isAngleRow = arcLen > Math.abs(deltaR);\n    var grids = getDividingGrids([arcLen, deltaR], isAngleRow ? 0 : 1, count);\n    var rowSize = (isAngleRow ? angle : deltaR) / grids.length;\n    for (var row = 0; row < grids.length; row++) {\n        var columnSize = (isAngleRow ? deltaR : angle) / grids[row];\n        for (var column = 0; column < grids[row]; column++) {\n            var newShape = {};\n            if (isAngleRow) {\n                newShape.startAngle = startAngle + rowSize * row;\n                newShape.endAngle = startAngle + rowSize * (row + 1);\n                newShape.r0 = r0 + columnSize * column;\n                newShape.r = r0 + columnSize * (column + 1);\n            }\n            else {\n                newShape.startAngle = startAngle + columnSize * column;\n                newShape.endAngle = startAngle + columnSize * (column + 1);\n                newShape.r0 = r0 + rowSize * row;\n                newShape.r = r0 + rowSize * (row + 1);\n            }\n            newShape.clockwise = sectorShape.clockwise;\n            newShape.cx = sectorShape.cx;\n            newShape.cy = sectorShape.cy;\n            outShapes.push(newShape);\n        }\n    }\n}\nfunction divideRect(rectShape, count, outShapes) {\n    var width = rectShape.width;\n    var height = rectShape.height;\n    var isHorizontalRow = width > height;\n    var grids = getDividingGrids([width, height], isHorizontalRow ? 0 : 1, count);\n    var rowSizeDim = isHorizontalRow ? 'width' : 'height';\n    var columnSizeDim = isHorizontalRow ? 'height' : 'width';\n    var rowDim = isHorizontalRow ? 'x' : 'y';\n    var columnDim = isHorizontalRow ? 'y' : 'x';\n    var rowSize = rectShape[rowSizeDim] / grids.length;\n    for (var row = 0; row < grids.length; row++) {\n        var columnSize = rectShape[columnSizeDim] / grids[row];\n        for (var column = 0; column < grids[row]; column++) {\n            var newShape = {};\n            newShape[rowDim] = row * rowSize;\n            newShape[columnDim] = column * columnSize;\n            newShape[rowSizeDim] = rowSize;\n            newShape[columnSizeDim] = columnSize;\n            newShape.x += rectShape.x;\n            newShape.y += rectShape.y;\n            outShapes.push(newShape);\n        }\n    }\n}\nfunction crossProduct2d(x1, y1, x2, y2) {\n    return x1 * y2 - x2 * y1;\n}\nfunction lineLineIntersect(a1x, a1y, a2x, a2y, b1x, b1y, b2x, b2y) {\n    var mx = a2x - a1x;\n    var my = a2y - a1y;\n    var nx = b2x - b1x;\n    var ny = b2y - b1y;\n    var nmCrossProduct = crossProduct2d(nx, ny, mx, my);\n    if (Math.abs(nmCrossProduct) < 1e-6) {\n        return null;\n    }\n    var b1a1x = a1x - b1x;\n    var b1a1y = a1y - b1y;\n    var p = crossProduct2d(b1a1x, b1a1y, nx, ny) / nmCrossProduct;\n    if (p < 0 || p > 1) {\n        return null;\n    }\n    return new Point(p * mx + a1x, p * my + a1y);\n}\nfunction projPtOnLine(pt, lineA, lineB) {\n    var dir = new Point();\n    Point.sub(dir, lineB, lineA);\n    dir.normalize();\n    var dir2 = new Point();\n    Point.sub(dir2, pt, lineA);\n    var len = dir2.dot(dir);\n    return len;\n}\nfunction addToPoly(poly, pt) {\n    var last = poly[poly.length - 1];\n    if (last && last[0] === pt[0] && last[1] === pt[1]) {\n        return;\n    }\n    poly.push(pt);\n}\nfunction splitPolygonByLine(points, lineA, lineB) {\n    var len = points.length;\n    var intersections = [];\n    for (var i = 0; i < len; i++) {\n        var p0 = points[i];\n        var p1 = points[(i + 1) % len];\n        var intersectionPt = lineLineIntersect(p0[0], p0[1], p1[0], p1[1], lineA.x, lineA.y, lineB.x, lineB.y);\n        if (intersectionPt) {\n            intersections.push({\n                projPt: projPtOnLine(intersectionPt, lineA, lineB),\n                pt: intersectionPt,\n                idx: i\n            });\n        }\n    }\n    if (intersections.length < 2) {\n        return [{ points: points }, { points: points }];\n    }\n    intersections.sort(function (a, b) {\n        return a.projPt - b.projPt;\n    });\n    var splitPt0 = intersections[0];\n    var splitPt1 = intersections[intersections.length - 1];\n    if (splitPt1.idx < splitPt0.idx) {\n        var tmp = splitPt0;\n        splitPt0 = splitPt1;\n        splitPt1 = tmp;\n    }\n    var splitPt0Arr = [splitPt0.pt.x, splitPt0.pt.y];\n    var splitPt1Arr = [splitPt1.pt.x, splitPt1.pt.y];\n    var newPolyA = [splitPt0Arr];\n    var newPolyB = [splitPt1Arr];\n    for (var i = splitPt0.idx + 1; i <= splitPt1.idx; i++) {\n        addToPoly(newPolyA, points[i].slice());\n    }\n    addToPoly(newPolyA, splitPt1Arr);\n    addToPoly(newPolyA, splitPt0Arr);\n    for (var i = splitPt1.idx + 1; i <= splitPt0.idx + len; i++) {\n        addToPoly(newPolyB, points[i % len].slice());\n    }\n    addToPoly(newPolyB, splitPt0Arr);\n    addToPoly(newPolyB, splitPt1Arr);\n    return [{\n            points: newPolyA\n        }, {\n            points: newPolyB\n        }];\n}\nfunction binaryDividePolygon(polygonShape) {\n    var points = polygonShape.points;\n    var min = [];\n    var max = [];\n    fromPoints(points, min, max);\n    var boundingRect = new BoundingRect(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n    var width = boundingRect.width;\n    var height = boundingRect.height;\n    var x = boundingRect.x;\n    var y = boundingRect.y;\n    var pt0 = new Point();\n    var pt1 = new Point();\n    if (width > height) {\n        pt0.x = pt1.x = x + width / 2;\n        pt0.y = y;\n        pt1.y = y + height;\n    }\n    else {\n        pt0.y = pt1.y = y + height / 2;\n        pt0.x = x;\n        pt1.x = x + width;\n    }\n    return splitPolygonByLine(points, pt0, pt1);\n}\nfunction binaryDivideRecursive(divider, shape, count, out) {\n    if (count === 1) {\n        out.push(shape);\n    }\n    else {\n        var mid = Math.floor(count / 2);\n        var sub = divider(shape);\n        binaryDivideRecursive(divider, sub[0], mid, out);\n        binaryDivideRecursive(divider, sub[1], count - mid, out);\n    }\n    return out;\n}\nexport function clone(path, count) {\n    var paths = [];\n    for (var i = 0; i < count; i++) {\n        paths.push(clonePath(path));\n    }\n    return paths;\n}\nfunction copyPathProps(source, target) {\n    target.setStyle(source.style);\n    target.z = source.z;\n    target.z2 = source.z2;\n    target.zlevel = source.zlevel;\n}\nfunction polygonConvert(points) {\n    var out = [];\n    for (var i = 0; i < points.length;) {\n        out.push([points[i++], points[i++]]);\n    }\n    return out;\n}\nexport function split(path, count) {\n    var outShapes = [];\n    var shape = path.shape;\n    var OutShapeCtor;\n    switch (path.type) {\n        case 'rect':\n            divideRect(shape, count, outShapes);\n            OutShapeCtor = Rect;\n            break;\n        case 'sector':\n            divideSector(shape, count, outShapes);\n            OutShapeCtor = Sector;\n            break;\n        case 'circle':\n            divideSector({\n                r0: 0, r: shape.r, startAngle: 0, endAngle: Math.PI * 2,\n                cx: shape.cx, cy: shape.cy\n            }, count, outShapes);\n            OutShapeCtor = Sector;\n            break;\n        default:\n            var m = path.getComputedTransform();\n            var scale = m ? Math.sqrt(Math.max(m[0] * m[0] + m[1] * m[1], m[2] * m[2] + m[3] * m[3])) : 1;\n            var polygons = map(pathToPolygons(path.getUpdatedPathProxy(), scale), function (poly) { return polygonConvert(poly); });\n            var polygonCount = polygons.length;\n            if (polygonCount === 0) {\n                binaryDivideRecursive(binaryDividePolygon, {\n                    points: polygons[0]\n                }, count, outShapes);\n            }\n            else if (polygonCount === count) {\n                for (var i = 0; i < polygonCount; i++) {\n                    outShapes.push({\n                        points: polygons[i]\n                    });\n                }\n            }\n            else {\n                var totalArea_1 = 0;\n                var items = map(polygons, function (poly) {\n                    var min = [];\n                    var max = [];\n                    fromPoints(poly, min, max);\n                    var area = (max[1] - min[1]) * (max[0] - min[0]);\n                    totalArea_1 += area;\n                    return { poly: poly, area: area };\n                });\n                items.sort(function (a, b) { return b.area - a.area; });\n                var left = count;\n                for (var i = 0; i < polygonCount; i++) {\n                    var item = items[i];\n                    if (left <= 0) {\n                        break;\n                    }\n                    var selfCount = i === polygonCount - 1\n                        ? left\n                        : Math.ceil(item.area / totalArea_1 * count);\n                    if (selfCount < 0) {\n                        continue;\n                    }\n                    binaryDivideRecursive(binaryDividePolygon, {\n                        points: item.poly\n                    }, selfCount, outShapes);\n                    left -= selfCount;\n                }\n                ;\n            }\n            OutShapeCtor = Polygon;\n            break;\n    }\n    if (!OutShapeCtor) {\n        return clone(path, count);\n    }\n    var out = [];\n    for (var i = 0; i < outShapes.length; i++) {\n        var subPath = new OutShapeCtor();\n        subPath.setShape(outShapes[i]);\n        copyPathProps(path, subPath);\n        out.push(subPath);\n    }\n    return out;\n}\n","import { cubicSubdivide } from '../core/curve.js';\nimport Path from '../graphic/Path.js';\nimport { defaults, map } from '../core/util.js';\nimport { lerp } from '../core/vector.js';\nimport { clonePath } from './path.js';\nimport Transformable from '../core/Transformable.js';\nimport { split } from './dividePath.js';\nimport { pathToBezierCurves } from './convertPath.js';\nfunction alignSubpath(subpath1, subpath2) {\n    var len1 = subpath1.length;\n    var len2 = subpath2.length;\n    if (len1 === len2) {\n        return [subpath1, subpath2];\n    }\n    var tmpSegX = [];\n    var tmpSegY = [];\n    var shorterPath = len1 < len2 ? subpath1 : subpath2;\n    var shorterLen = Math.min(len1, len2);\n    var diff = Math.abs(len2 - len1) / 6;\n    var shorterBezierCount = (shorterLen - 2) / 6;\n    var eachCurveSubDivCount = Math.ceil(diff / shorterBezierCount) + 1;\n    var newSubpath = [shorterPath[0], shorterPath[1]];\n    var remained = diff;\n    for (var i = 2; i < shorterLen;) {\n        var x0 = shorterPath[i - 2];\n        var y0 = shorterPath[i - 1];\n        var x1 = shorterPath[i++];\n        var y1 = shorterPath[i++];\n        var x2 = shorterPath[i++];\n        var y2 = shorterPath[i++];\n        var x3 = shorterPath[i++];\n        var y3 = shorterPath[i++];\n        if (remained <= 0) {\n            newSubpath.push(x1, y1, x2, y2, x3, y3);\n            continue;\n        }\n        var actualSubDivCount = Math.min(remained, eachCurveSubDivCount - 1) + 1;\n        for (var k = 1; k <= actualSubDivCount; k++) {\n            var p = k / actualSubDivCount;\n            cubicSubdivide(x0, x1, x2, x3, p, tmpSegX);\n            cubicSubdivide(y0, y1, y2, y3, p, tmpSegY);\n            x0 = tmpSegX[3];\n            y0 = tmpSegY[3];\n            newSubpath.push(tmpSegX[1], tmpSegY[1], tmpSegX[2], tmpSegY[2], x0, y0);\n            x1 = tmpSegX[5];\n            y1 = tmpSegY[5];\n            x2 = tmpSegX[6];\n            y2 = tmpSegY[6];\n        }\n        remained -= actualSubDivCount - 1;\n    }\n    return shorterPath === subpath1 ? [newSubpath, subpath2] : [subpath1, newSubpath];\n}\nfunction createSubpath(lastSubpathSubpath, otherSubpath) {\n    var len = lastSubpathSubpath.length;\n    var lastX = lastSubpathSubpath[len - 2];\n    var lastY = lastSubpathSubpath[len - 1];\n    var newSubpath = [];\n    for (var i = 0; i < otherSubpath.length;) {\n        newSubpath[i++] = lastX;\n        newSubpath[i++] = lastY;\n    }\n    return newSubpath;\n}\nexport function alignBezierCurves(array1, array2) {\n    var _a;\n    var lastSubpath1;\n    var lastSubpath2;\n    var newArray1 = [];\n    var newArray2 = [];\n    for (var i = 0; i < Math.max(array1.length, array2.length); i++) {\n        var subpath1 = array1[i];\n        var subpath2 = array2[i];\n        var newSubpath1 = void 0;\n        var newSubpath2 = void 0;\n        if (!subpath1) {\n            newSubpath1 = createSubpath(lastSubpath1 || subpath2, subpath2);\n            newSubpath2 = subpath2;\n        }\n        else if (!subpath2) {\n            newSubpath2 = createSubpath(lastSubpath2 || subpath1, subpath1);\n            newSubpath1 = subpath1;\n        }\n        else {\n            _a = alignSubpath(subpath1, subpath2), newSubpath1 = _a[0], newSubpath2 = _a[1];\n            lastSubpath1 = newSubpath1;\n            lastSubpath2 = newSubpath2;\n        }\n        newArray1.push(newSubpath1);\n        newArray2.push(newSubpath2);\n    }\n    return [newArray1, newArray2];\n}\nexport function centroid(array) {\n    var signedArea = 0;\n    var cx = 0;\n    var cy = 0;\n    var len = array.length;\n    for (var i = 0, j = len - 2; i < len; j = i, i += 2) {\n        var x0 = array[j];\n        var y0 = array[j + 1];\n        var x1 = array[i];\n        var y1 = array[i + 1];\n        var a = x0 * y1 - x1 * y0;\n        signedArea += a;\n        cx += (x0 + x1) * a;\n        cy += (y0 + y1) * a;\n    }\n    if (signedArea === 0) {\n        return [array[0] || 0, array[1] || 0];\n    }\n    return [cx / signedArea / 3, cy / signedArea / 3, signedArea];\n}\nfunction findBestRingOffset(fromSubBeziers, toSubBeziers, fromCp, toCp) {\n    var bezierCount = (fromSubBeziers.length - 2) / 6;\n    var bestScore = Infinity;\n    var bestOffset = 0;\n    var len = fromSubBeziers.length;\n    var len2 = len - 2;\n    for (var offset = 0; offset < bezierCount; offset++) {\n        var cursorOffset = offset * 6;\n        var score = 0;\n        for (var k = 0; k < len; k += 2) {\n            var idx = k === 0 ? cursorOffset : ((cursorOffset + k - 2) % len2 + 2);\n            var x0 = fromSubBeziers[idx] - fromCp[0];\n            var y0 = fromSubBeziers[idx + 1] - fromCp[1];\n            var x1 = toSubBeziers[k] - toCp[0];\n            var y1 = toSubBeziers[k + 1] - toCp[1];\n            var dx = x1 - x0;\n            var dy = y1 - y0;\n            score += dx * dx + dy * dy;\n        }\n        if (score < bestScore) {\n            bestScore = score;\n            bestOffset = offset;\n        }\n    }\n    return bestOffset;\n}\nfunction reverse(array) {\n    var newArr = [];\n    var len = array.length;\n    for (var i = 0; i < len; i += 2) {\n        newArr[i] = array[len - i - 2];\n        newArr[i + 1] = array[len - i - 1];\n    }\n    return newArr;\n}\nfunction findBestMorphingRotation(fromArr, toArr, searchAngleIteration, searchAngleRange) {\n    var result = [];\n    var fromNeedsReverse;\n    for (var i = 0; i < fromArr.length; i++) {\n        var fromSubpathBezier = fromArr[i];\n        var toSubpathBezier = toArr[i];\n        var fromCp = centroid(fromSubpathBezier);\n        var toCp = centroid(toSubpathBezier);\n        if (fromNeedsReverse == null) {\n            fromNeedsReverse = fromCp[2] < 0 !== toCp[2] < 0;\n        }\n        var newFromSubpathBezier = [];\n        var newToSubpathBezier = [];\n        var bestAngle = 0;\n        var bestScore = Infinity;\n        var tmpArr = [];\n        var len = fromSubpathBezier.length;\n        if (fromNeedsReverse) {\n            fromSubpathBezier = reverse(fromSubpathBezier);\n        }\n        var offset = findBestRingOffset(fromSubpathBezier, toSubpathBezier, fromCp, toCp) * 6;\n        var len2 = len - 2;\n        for (var k = 0; k < len2; k += 2) {\n            var idx = (offset + k) % len2 + 2;\n            newFromSubpathBezier[k + 2] = fromSubpathBezier[idx] - fromCp[0];\n            newFromSubpathBezier[k + 3] = fromSubpathBezier[idx + 1] - fromCp[1];\n        }\n        newFromSubpathBezier[0] = fromSubpathBezier[offset] - fromCp[0];\n        newFromSubpathBezier[1] = fromSubpathBezier[offset + 1] - fromCp[1];\n        if (searchAngleIteration > 0) {\n            var step = searchAngleRange / searchAngleIteration;\n            for (var angle = -searchAngleRange / 2; angle <= searchAngleRange / 2; angle += step) {\n                var sa = Math.sin(angle);\n                var ca = Math.cos(angle);\n                var score = 0;\n                for (var k = 0; k < fromSubpathBezier.length; k += 2) {\n                    var x0 = newFromSubpathBezier[k];\n                    var y0 = newFromSubpathBezier[k + 1];\n                    var x1 = toSubpathBezier[k] - toCp[0];\n                    var y1 = toSubpathBezier[k + 1] - toCp[1];\n                    var newX1 = x1 * ca - y1 * sa;\n                    var newY1 = x1 * sa + y1 * ca;\n                    tmpArr[k] = newX1;\n                    tmpArr[k + 1] = newY1;\n                    var dx = newX1 - x0;\n                    var dy = newY1 - y0;\n                    score += dx * dx + dy * dy;\n                }\n                if (score < bestScore) {\n                    bestScore = score;\n                    bestAngle = angle;\n                    for (var m = 0; m < tmpArr.length; m++) {\n                        newToSubpathBezier[m] = tmpArr[m];\n                    }\n                }\n            }\n        }\n        else {\n            for (var i_1 = 0; i_1 < len; i_1 += 2) {\n                newToSubpathBezier[i_1] = toSubpathBezier[i_1] - toCp[0];\n                newToSubpathBezier[i_1 + 1] = toSubpathBezier[i_1 + 1] - toCp[1];\n            }\n        }\n        result.push({\n            from: newFromSubpathBezier,\n            to: newToSubpathBezier,\n            fromCp: fromCp,\n            toCp: toCp,\n            rotation: -bestAngle\n        });\n    }\n    return result;\n}\nexport function isCombineMorphing(path) {\n    return path.__isCombineMorphing;\n}\nexport function isMorphing(el) {\n    return el.__morphT >= 0;\n}\nvar SAVED_METHOD_PREFIX = '__mOriginal_';\nfunction saveAndModifyMethod(obj, methodName, modifiers) {\n    var savedMethodName = SAVED_METHOD_PREFIX + methodName;\n    var originalMethod = obj[savedMethodName] || obj[methodName];\n    if (!obj[savedMethodName]) {\n        obj[savedMethodName] = obj[methodName];\n    }\n    var replace = modifiers.replace;\n    var after = modifiers.after;\n    var before = modifiers.before;\n    obj[methodName] = function () {\n        var args = arguments;\n        var res;\n        before && before.apply(this, args);\n        if (replace) {\n            res = replace.apply(this, args);\n        }\n        else {\n            res = originalMethod.apply(this, args);\n        }\n        after && after.apply(this, args);\n        return res;\n    };\n}\nfunction restoreMethod(obj, methodName) {\n    var savedMethodName = SAVED_METHOD_PREFIX + methodName;\n    if (obj[savedMethodName]) {\n        obj[methodName] = obj[savedMethodName];\n        obj[savedMethodName] = null;\n    }\n}\nfunction applyTransformOnBeziers(bezierCurves, mm) {\n    for (var i = 0; i < bezierCurves.length; i++) {\n        var subBeziers = bezierCurves[i];\n        for (var k = 0; k < subBeziers.length;) {\n            var x = subBeziers[k];\n            var y = subBeziers[k + 1];\n            subBeziers[k++] = mm[0] * x + mm[2] * y + mm[4];\n            subBeziers[k++] = mm[1] * x + mm[3] * y + mm[5];\n        }\n    }\n}\nfunction prepareMorphPath(fromPath, toPath) {\n    var fromPathProxy = fromPath.getUpdatedPathProxy();\n    var toPathProxy = toPath.getUpdatedPathProxy();\n    var _a = alignBezierCurves(pathToBezierCurves(fromPathProxy), pathToBezierCurves(toPathProxy)), fromBezierCurves = _a[0], toBezierCurves = _a[1];\n    var fromPathTransform = fromPath.getComputedTransform();\n    var toPathTransform = toPath.getComputedTransform();\n    function updateIdentityTransform() {\n        this.transform = null;\n    }\n    fromPathTransform && applyTransformOnBeziers(fromBezierCurves, fromPathTransform);\n    toPathTransform && applyTransformOnBeziers(toBezierCurves, toPathTransform);\n    saveAndModifyMethod(toPath, 'updateTransform', { replace: updateIdentityTransform });\n    toPath.transform = null;\n    var morphingData = findBestMorphingRotation(fromBezierCurves, toBezierCurves, 10, Math.PI);\n    var tmpArr = [];\n    saveAndModifyMethod(toPath, 'buildPath', { replace: function (path) {\n            var t = toPath.__morphT;\n            var onet = 1 - t;\n            var newCp = [];\n            for (var i = 0; i < morphingData.length; i++) {\n                var item = morphingData[i];\n                var from = item.from;\n                var to = item.to;\n                var angle = item.rotation * t;\n                var fromCp = item.fromCp;\n                var toCp = item.toCp;\n                var sa = Math.sin(angle);\n                var ca = Math.cos(angle);\n                lerp(newCp, fromCp, toCp, t);\n                for (var m = 0; m < from.length; m += 2) {\n                    var x0_1 = from[m];\n                    var y0_1 = from[m + 1];\n                    var x1 = to[m];\n                    var y1 = to[m + 1];\n                    var x = x0_1 * onet + x1 * t;\n                    var y = y0_1 * onet + y1 * t;\n                    tmpArr[m] = (x * ca - y * sa) + newCp[0];\n                    tmpArr[m + 1] = (x * sa + y * ca) + newCp[1];\n                }\n                var x0 = tmpArr[0];\n                var y0 = tmpArr[1];\n                path.moveTo(x0, y0);\n                for (var m = 2; m < from.length;) {\n                    var x1 = tmpArr[m++];\n                    var y1 = tmpArr[m++];\n                    var x2 = tmpArr[m++];\n                    var y2 = tmpArr[m++];\n                    var x3 = tmpArr[m++];\n                    var y3 = tmpArr[m++];\n                    if (x0 === x1 && y0 === y1 && x2 === x3 && y2 === y3) {\n                        path.lineTo(x3, y3);\n                    }\n                    else {\n                        path.bezierCurveTo(x1, y1, x2, y2, x3, y3);\n                    }\n                    x0 = x3;\n                    y0 = y3;\n                }\n            }\n        } });\n}\nexport function morphPath(fromPath, toPath, animationOpts) {\n    if (!fromPath || !toPath) {\n        return toPath;\n    }\n    var oldDone = animationOpts.done;\n    var oldDuring = animationOpts.during;\n    prepareMorphPath(fromPath, toPath);\n    toPath.__morphT = 0;\n    function restoreToPath() {\n        restoreMethod(toPath, 'buildPath');\n        restoreMethod(toPath, 'updateTransform');\n        toPath.__morphT = -1;\n        toPath.createPathProxy();\n        toPath.dirtyShape();\n    }\n    toPath.animateTo({\n        __morphT: 1\n    }, defaults({\n        during: function (p) {\n            toPath.dirtyShape();\n            oldDuring && oldDuring(p);\n        },\n        done: function () {\n            restoreToPath();\n            oldDone && oldDone();\n        }\n    }, animationOpts));\n    return toPath;\n}\nfunction hilbert(x, y, minX, minY, maxX, maxY) {\n    var bits = 16;\n    x = (maxX === minX) ? 0 : Math.round(32767 * (x - minX) / (maxX - minX));\n    y = (maxY === minY) ? 0 : Math.round(32767 * (y - minY) / (maxY - minY));\n    var d = 0;\n    var tmp;\n    for (var s = (1 << bits) / 2; s > 0; s /= 2) {\n        var rx = 0;\n        var ry = 0;\n        if ((x & s) > 0) {\n            rx = 1;\n        }\n        if ((y & s) > 0) {\n            ry = 1;\n        }\n        d += s * s * ((3 * rx) ^ ry);\n        if (ry === 0) {\n            if (rx === 1) {\n                x = s - 1 - x;\n                y = s - 1 - y;\n            }\n            tmp = x;\n            x = y;\n            y = tmp;\n        }\n    }\n    return d;\n}\nfunction sortPaths(pathList) {\n    var xMin = Infinity;\n    var yMin = Infinity;\n    var xMax = -Infinity;\n    var yMax = -Infinity;\n    var cps = map(pathList, function (path) {\n        var rect = path.getBoundingRect();\n        var m = path.getComputedTransform();\n        var x = rect.x + rect.width / 2 + (m ? m[4] : 0);\n        var y = rect.y + rect.height / 2 + (m ? m[5] : 0);\n        xMin = Math.min(x, xMin);\n        yMin = Math.min(y, yMin);\n        xMax = Math.max(x, xMax);\n        yMax = Math.max(y, yMax);\n        return [x, y];\n    });\n    var items = map(cps, function (cp, idx) {\n        return {\n            cp: cp,\n            z: hilbert(cp[0], cp[1], xMin, yMin, xMax, yMax),\n            path: pathList[idx]\n        };\n    });\n    return items.sort(function (a, b) { return a.z - b.z; }).map(function (item) { return item.path; });\n}\n;\nfunction defaultDividePath(param) {\n    return split(param.path, param.count);\n}\nfunction createEmptyReturn() {\n    return {\n        fromIndividuals: [],\n        toIndividuals: [],\n        count: 0\n    };\n}\nexport function combineMorph(fromList, toPath, animationOpts) {\n    var fromPathList = [];\n    function addFromPath(fromList) {\n        for (var i = 0; i < fromList.length; i++) {\n            var from = fromList[i];\n            if (isCombineMorphing(from)) {\n                addFromPath(from.childrenRef());\n            }\n            else if (from instanceof Path) {\n                fromPathList.push(from);\n            }\n        }\n    }\n    addFromPath(fromList);\n    var separateCount = fromPathList.length;\n    if (!separateCount) {\n        return createEmptyReturn();\n    }\n    var dividePath = animationOpts.dividePath || defaultDividePath;\n    var toSubPathList = dividePath({\n        path: toPath, count: separateCount\n    });\n    if (toSubPathList.length !== separateCount) {\n        console.error('Invalid morphing: unmatched splitted path');\n        return createEmptyReturn();\n    }\n    fromPathList = sortPaths(fromPathList);\n    toSubPathList = sortPaths(toSubPathList);\n    var oldDone = animationOpts.done;\n    var oldDuring = animationOpts.during;\n    var individualDelay = animationOpts.individualDelay;\n    var identityTransform = new Transformable();\n    for (var i = 0; i < separateCount; i++) {\n        var from = fromPathList[i];\n        var to = toSubPathList[i];\n        to.parent = toPath;\n        to.copyTransform(identityTransform);\n        if (!individualDelay) {\n            prepareMorphPath(from, to);\n        }\n    }\n    toPath.__isCombineMorphing = true;\n    toPath.childrenRef = function () {\n        return toSubPathList;\n    };\n    function addToSubPathListToZr(zr) {\n        for (var i = 0; i < toSubPathList.length; i++) {\n            toSubPathList[i].addSelfToZr(zr);\n        }\n    }\n    saveAndModifyMethod(toPath, 'addSelfToZr', {\n        after: function (zr) {\n            addToSubPathListToZr(zr);\n        }\n    });\n    saveAndModifyMethod(toPath, 'removeSelfFromZr', {\n        after: function (zr) {\n            for (var i = 0; i < toSubPathList.length; i++) {\n                toSubPathList[i].removeSelfFromZr(zr);\n            }\n        }\n    });\n    function restoreToPath() {\n        toPath.__isCombineMorphing = false;\n        toPath.__morphT = -1;\n        toPath.childrenRef = null;\n        restoreMethod(toPath, 'addSelfToZr');\n        restoreMethod(toPath, 'removeSelfFromZr');\n    }\n    var toLen = toSubPathList.length;\n    if (individualDelay) {\n        var animating_1 = toLen;\n        var eachDone = function () {\n            animating_1--;\n            if (animating_1 === 0) {\n                restoreToPath();\n                oldDone && oldDone();\n            }\n        };\n        for (var i = 0; i < toLen; i++) {\n            var indivdualAnimationOpts = individualDelay ? defaults({\n                delay: (animationOpts.delay || 0) + individualDelay(i, toLen, fromPathList[i], toSubPathList[i]),\n                done: eachDone\n            }, animationOpts) : animationOpts;\n            morphPath(fromPathList[i], toSubPathList[i], indivdualAnimationOpts);\n        }\n    }\n    else {\n        toPath.__morphT = 0;\n        toPath.animateTo({\n            __morphT: 1\n        }, defaults({\n            during: function (p) {\n                for (var i = 0; i < toLen; i++) {\n                    var child = toSubPathList[i];\n                    child.__morphT = toPath.__morphT;\n                    child.dirtyShape();\n                }\n                oldDuring && oldDuring(p);\n            },\n            done: function () {\n                restoreToPath();\n                for (var i = 0; i < fromList.length; i++) {\n                    restoreMethod(fromList[i], 'updateTransform');\n                }\n                oldDone && oldDone();\n            }\n        }, animationOpts));\n    }\n    if (toPath.__zr) {\n        addToSubPathListToZr(toPath.__zr);\n    }\n    return {\n        fromIndividuals: fromPathList,\n        toIndividuals: toSubPathList,\n        count: toLen\n    };\n}\nexport function separateMorph(fromPath, toPathList, animationOpts) {\n    var toLen = toPathList.length;\n    var fromPathList = [];\n    var dividePath = animationOpts.dividePath || defaultDividePath;\n    function addFromPath(fromList) {\n        for (var i = 0; i < fromList.length; i++) {\n            var from = fromList[i];\n            if (isCombineMorphing(from)) {\n                addFromPath(from.childrenRef());\n            }\n            else if (from instanceof Path) {\n                fromPathList.push(from);\n            }\n        }\n    }\n    if (isCombineMorphing(fromPath)) {\n        addFromPath(fromPath.childrenRef());\n        var fromLen = fromPathList.length;\n        if (fromLen < toLen) {\n            var k = 0;\n            for (var i = fromLen; i < toLen; i++) {\n                fromPathList.push(clonePath(fromPathList[k++ % fromLen]));\n            }\n        }\n        fromPathList.length = toLen;\n    }\n    else {\n        fromPathList = dividePath({ path: fromPath, count: toLen });\n        var fromPathTransform = fromPath.getComputedTransform();\n        for (var i = 0; i < fromPathList.length; i++) {\n            fromPathList[i].setLocalTransform(fromPathTransform);\n        }\n        if (fromPathList.length !== toLen) {\n            console.error('Invalid morphing: unmatched splitted path');\n            return createEmptyReturn();\n        }\n    }\n    fromPathList = sortPaths(fromPathList);\n    toPathList = sortPaths(toPathList);\n    var individualDelay = animationOpts.individualDelay;\n    for (var i = 0; i < toLen; i++) {\n        var indivdualAnimationOpts = individualDelay ? defaults({\n            delay: (animationOpts.delay || 0) + individualDelay(i, toLen, fromPathList[i], toPathList[i])\n        }, animationOpts) : animationOpts;\n        morphPath(fromPathList[i], toPathList[i], indivdualAnimationOpts);\n    }\n    return {\n        fromIndividuals: fromPathList,\n        toIndividuals: toPathList,\n        count: toPathList.length\n    };\n}\nexport { split as defaultDividePath };\n","export function create() {\n    return [1, 0, 0, 1, 0, 0];\n}\nexport function identity(out) {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 1;\n    out[4] = 0;\n    out[5] = 0;\n    return out;\n}\nexport function copy(out, m) {\n    out[0] = m[0];\n    out[1] = m[1];\n    out[2] = m[2];\n    out[3] = m[3];\n    out[4] = m[4];\n    out[5] = m[5];\n    return out;\n}\nexport function mul(out, m1, m2) {\n    var out0 = m1[0] * m2[0] + m1[2] * m2[1];\n    var out1 = m1[1] * m2[0] + m1[3] * m2[1];\n    var out2 = m1[0] * m2[2] + m1[2] * m2[3];\n    var out3 = m1[1] * m2[2] + m1[3] * m2[3];\n    var out4 = m1[0] * m2[4] + m1[2] * m2[5] + m1[4];\n    var out5 = m1[1] * m2[4] + m1[3] * m2[5] + m1[5];\n    out[0] = out0;\n    out[1] = out1;\n    out[2] = out2;\n    out[3] = out3;\n    out[4] = out4;\n    out[5] = out5;\n    return out;\n}\nexport function translate(out, a, v) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4] + v[0];\n    out[5] = a[5] + v[1];\n    return out;\n}\nexport function rotate(out, a, rad) {\n    var aa = a[0];\n    var ac = a[2];\n    var atx = a[4];\n    var ab = a[1];\n    var ad = a[3];\n    var aty = a[5];\n    var st = Math.sin(rad);\n    var ct = Math.cos(rad);\n    out[0] = aa * ct + ab * st;\n    out[1] = -aa * st + ab * ct;\n    out[2] = ac * ct + ad * st;\n    out[3] = -ac * st + ct * ad;\n    out[4] = ct * atx + st * aty;\n    out[5] = ct * aty - st * atx;\n    return out;\n}\nexport function scale(out, a, v) {\n    var vx = v[0];\n    var vy = v[1];\n    out[0] = a[0] * vx;\n    out[1] = a[1] * vy;\n    out[2] = a[2] * vx;\n    out[3] = a[3] * vy;\n    out[4] = a[4] * vx;\n    out[5] = a[5] * vy;\n    return out;\n}\nexport function invert(out, a) {\n    var aa = a[0];\n    var ac = a[2];\n    var atx = a[4];\n    var ab = a[1];\n    var ad = a[3];\n    var aty = a[5];\n    var det = aa * ad - ab * ac;\n    if (!det) {\n        return null;\n    }\n    det = 1.0 / det;\n    out[0] = ad * det;\n    out[1] = -ab * det;\n    out[2] = -ac * det;\n    out[3] = aa * det;\n    out[4] = (ac * aty - ad * atx) * det;\n    out[5] = (ab * atx - aa * aty) * det;\n    return out;\n}\nexport function clone(a) {\n    var b = create();\n    copy(b, a);\n    return b;\n}\n","import { __extends } from \"tslib\";\nimport Element from '../Element.js';\nimport BoundingRect from '../core/BoundingRect.js';\nimport { keys, extend, createObject } from '../core/util.js';\nimport { REDRAW_BIT, STYLE_CHANGED_BIT } from './constants.js';\nvar STYLE_MAGIC_KEY = '__zr_style_' + Math.round((Math.random() * 10));\nexport var DEFAULT_COMMON_STYLE = {\n    shadowBlur: 0,\n    shadowOffsetX: 0,\n    shadowOffsetY: 0,\n    shadowColor: '#000',\n    opacity: 1,\n    blend: 'source-over'\n};\nexport var DEFAULT_COMMON_ANIMATION_PROPS = {\n    style: {\n        shadowBlur: true,\n        shadowOffsetX: true,\n        shadowOffsetY: true,\n        shadowColor: true,\n        opacity: true\n    }\n};\nDEFAULT_COMMON_STYLE[STYLE_MAGIC_KEY] = true;\nvar PRIMARY_STATES_KEYS = ['z', 'z2', 'invisible'];\nvar PRIMARY_STATES_KEYS_IN_HOVER_LAYER = ['invisible'];\nvar Displayable = (function (_super) {\n    __extends(Displayable, _super);\n    function Displayable(props) {\n        return _super.call(this, props) || this;\n    }\n    Displayable.prototype._init = function (props) {\n        var keysArr = keys(props);\n        for (var i = 0; i < keysArr.length; i++) {\n            var key = keysArr[i];\n            if (key === 'style') {\n                this.useStyle(props[key]);\n            }\n            else {\n                _super.prototype.attrKV.call(this, key, props[key]);\n            }\n        }\n        if (!this.style) {\n            this.useStyle({});\n        }\n    };\n    Displayable.prototype.beforeBrush = function () { };\n    Displayable.prototype.afterBrush = function () { };\n    Displayable.prototype.innerBeforeBrush = function () { };\n    Displayable.prototype.innerAfterBrush = function () { };\n    Displayable.prototype.shouldBePainted = function (viewWidth, viewHeight, considerClipPath, considerAncestors) {\n        var m = this.transform;\n        if (this.ignore\n            || this.invisible\n            || this.style.opacity === 0\n            || (this.culling\n                && isDisplayableCulled(this, viewWidth, viewHeight))\n            || (m && !m[0] && !m[3])) {\n            return false;\n        }\n        if (considerClipPath && this.__clipPaths) {\n            for (var i = 0; i < this.__clipPaths.length; ++i) {\n                if (this.__clipPaths[i].isZeroArea()) {\n                    return false;\n                }\n            }\n        }\n        if (considerAncestors && this.parent) {\n            var parent_1 = this.parent;\n            while (parent_1) {\n                if (parent_1.ignore) {\n                    return false;\n                }\n                parent_1 = parent_1.parent;\n            }\n        }\n        return true;\n    };\n    Displayable.prototype.contain = function (x, y) {\n        return this.rectContain(x, y);\n    };\n    Displayable.prototype.traverse = function (cb, context) {\n        cb.call(context, this);\n    };\n    Displayable.prototype.rectContain = function (x, y) {\n        var coord = this.transformCoordToLocal(x, y);\n        var rect = this.getBoundingRect();\n        return rect.contain(coord[0], coord[1]);\n    };\n    Displayable.prototype.getPaintRect = function () {\n        var rect = this._paintRect;\n        if (!this._paintRect || this.__dirty) {\n            var transform = this.transform;\n            var elRect = this.getBoundingRect();\n            var style = this.style;\n            var shadowSize = style.shadowBlur || 0;\n            var shadowOffsetX = style.shadowOffsetX || 0;\n            var shadowOffsetY = style.shadowOffsetY || 0;\n            rect = this._paintRect || (this._paintRect = new BoundingRect(0, 0, 0, 0));\n            if (transform) {\n                BoundingRect.applyTransform(rect, elRect, transform);\n            }\n            else {\n                rect.copy(elRect);\n            }\n            if (shadowSize || shadowOffsetX || shadowOffsetY) {\n                rect.width += shadowSize * 2 + Math.abs(shadowOffsetX);\n                rect.height += shadowSize * 2 + Math.abs(shadowOffsetY);\n                rect.x = Math.min(rect.x, rect.x + shadowOffsetX - shadowSize);\n                rect.y = Math.min(rect.y, rect.y + shadowOffsetY - shadowSize);\n            }\n            var tolerance = this.dirtyRectTolerance;\n            if (!rect.isZero()) {\n                rect.x = Math.floor(rect.x - tolerance);\n                rect.y = Math.floor(rect.y - tolerance);\n                rect.width = Math.ceil(rect.width + 1 + tolerance * 2);\n                rect.height = Math.ceil(rect.height + 1 + tolerance * 2);\n            }\n        }\n        return rect;\n    };\n    Displayable.prototype.setPrevPaintRect = function (paintRect) {\n        if (paintRect) {\n            this._prevPaintRect = this._prevPaintRect || new BoundingRect(0, 0, 0, 0);\n            this._prevPaintRect.copy(paintRect);\n        }\n        else {\n            this._prevPaintRect = null;\n        }\n    };\n    Displayable.prototype.getPrevPaintRect = function () {\n        return this._prevPaintRect;\n    };\n    Displayable.prototype.animateStyle = function (loop) {\n        return this.animate('style', loop);\n    };\n    Displayable.prototype.updateDuringAnimation = function (targetKey) {\n        if (targetKey === 'style') {\n            this.dirtyStyle();\n        }\n        else {\n            this.markRedraw();\n        }\n    };\n    Displayable.prototype.attrKV = function (key, value) {\n        if (key !== 'style') {\n            _super.prototype.attrKV.call(this, key, value);\n        }\n        else {\n            if (!this.style) {\n                this.useStyle(value);\n            }\n            else {\n                this.setStyle(value);\n            }\n        }\n    };\n    Displayable.prototype.setStyle = function (keyOrObj, value) {\n        if (typeof keyOrObj === 'string') {\n            this.style[keyOrObj] = value;\n        }\n        else {\n            extend(this.style, keyOrObj);\n        }\n        this.dirtyStyle();\n        return this;\n    };\n    Displayable.prototype.dirtyStyle = function (notRedraw) {\n        if (!notRedraw) {\n            this.markRedraw();\n        }\n        this.__dirty |= STYLE_CHANGED_BIT;\n        if (this._rect) {\n            this._rect = null;\n        }\n    };\n    Displayable.prototype.dirty = function () {\n        this.dirtyStyle();\n    };\n    Displayable.prototype.styleChanged = function () {\n        return !!(this.__dirty & STYLE_CHANGED_BIT);\n    };\n    Displayable.prototype.styleUpdated = function () {\n        this.__dirty &= ~STYLE_CHANGED_BIT;\n    };\n    Displayable.prototype.createStyle = function (obj) {\n        return createObject(DEFAULT_COMMON_STYLE, obj);\n    };\n    Displayable.prototype.useStyle = function (obj) {\n        if (!obj[STYLE_MAGIC_KEY]) {\n            obj = this.createStyle(obj);\n        }\n        if (this.__inHover) {\n            this.__hoverStyle = obj;\n        }\n        else {\n            this.style = obj;\n        }\n        this.dirtyStyle();\n    };\n    Displayable.prototype.isStyleObject = function (obj) {\n        return obj[STYLE_MAGIC_KEY];\n    };\n    Displayable.prototype._innerSaveToNormal = function (toState) {\n        _super.prototype._innerSaveToNormal.call(this, toState);\n        var normalState = this._normalState;\n        if (toState.style && !normalState.style) {\n            normalState.style = this._mergeStyle(this.createStyle(), this.style);\n        }\n        this._savePrimaryToNormal(toState, normalState, PRIMARY_STATES_KEYS);\n    };\n    Displayable.prototype._applyStateObj = function (stateName, state, normalState, keepCurrentStates, transition, animationCfg) {\n        _super.prototype._applyStateObj.call(this, stateName, state, normalState, keepCurrentStates, transition, animationCfg);\n        var needsRestoreToNormal = !(state && keepCurrentStates);\n        var targetStyle;\n        if (state && state.style) {\n            if (transition) {\n                if (keepCurrentStates) {\n                    targetStyle = state.style;\n                }\n                else {\n                    targetStyle = this._mergeStyle(this.createStyle(), normalState.style);\n                    this._mergeStyle(targetStyle, state.style);\n                }\n            }\n            else {\n                targetStyle = this._mergeStyle(this.createStyle(), keepCurrentStates ? this.style : normalState.style);\n                this._mergeStyle(targetStyle, state.style);\n            }\n        }\n        else if (needsRestoreToNormal) {\n            targetStyle = normalState.style;\n        }\n        if (targetStyle) {\n            if (transition) {\n                var sourceStyle = this.style;\n                this.style = this.createStyle(needsRestoreToNormal ? {} : sourceStyle);\n                if (needsRestoreToNormal) {\n                    var changedKeys = keys(sourceStyle);\n                    for (var i = 0; i < changedKeys.length; i++) {\n                        var key = changedKeys[i];\n                        if (key in targetStyle) {\n                            targetStyle[key] = targetStyle[key];\n                            this.style[key] = sourceStyle[key];\n                        }\n                    }\n                }\n                var targetKeys = keys(targetStyle);\n                for (var i = 0; i < targetKeys.length; i++) {\n                    var key = targetKeys[i];\n                    this.style[key] = this.style[key];\n                }\n                this._transitionState(stateName, {\n                    style: targetStyle\n                }, animationCfg, this.getAnimationStyleProps());\n            }\n            else {\n                this.useStyle(targetStyle);\n            }\n        }\n        var statesKeys = this.__inHover ? PRIMARY_STATES_KEYS_IN_HOVER_LAYER : PRIMARY_STATES_KEYS;\n        for (var i = 0; i < statesKeys.length; i++) {\n            var key = statesKeys[i];\n            if (state && state[key] != null) {\n                this[key] = state[key];\n            }\n            else if (needsRestoreToNormal) {\n                if (normalState[key] != null) {\n                    this[key] = normalState[key];\n                }\n            }\n        }\n    };\n    Displayable.prototype._mergeStates = function (states) {\n        var mergedState = _super.prototype._mergeStates.call(this, states);\n        var mergedStyle;\n        for (var i = 0; i < states.length; i++) {\n            var state = states[i];\n            if (state.style) {\n                mergedStyle = mergedStyle || {};\n                this._mergeStyle(mergedStyle, state.style);\n            }\n        }\n        if (mergedStyle) {\n            mergedState.style = mergedStyle;\n        }\n        return mergedState;\n    };\n    Displayable.prototype._mergeStyle = function (targetStyle, sourceStyle) {\n        extend(targetStyle, sourceStyle);\n        return targetStyle;\n    };\n    Displayable.prototype.getAnimationStyleProps = function () {\n        return DEFAULT_COMMON_ANIMATION_PROPS;\n    };\n    Displayable.initDefaultProps = (function () {\n        var dispProto = Displayable.prototype;\n        dispProto.type = 'displayable';\n        dispProto.invisible = false;\n        dispProto.z = 0;\n        dispProto.z2 = 0;\n        dispProto.zlevel = 0;\n        dispProto.culling = false;\n        dispProto.cursor = 'pointer';\n        dispProto.rectHover = false;\n        dispProto.incremental = false;\n        dispProto._rect = null;\n        dispProto.dirtyRectTolerance = 0;\n        dispProto.__dirty = REDRAW_BIT | STYLE_CHANGED_BIT;\n    })();\n    return Displayable;\n}(Element));\nvar tmpRect = new BoundingRect(0, 0, 0, 0);\nvar viewRect = new BoundingRect(0, 0, 0, 0);\nfunction isDisplayableCulled(el, width, height) {\n    tmpRect.copy(el.getBoundingRect());\n    if (el.transform) {\n        tmpRect.applyTransform(el.transform);\n    }\n    viewRect.width = width;\n    viewRect.height = height;\n    return !tmpRect.intersect(viewRect);\n}\nexport default Displayable;\n","import * as vec2 from './vector.js';\nimport BoundingRect from './BoundingRect.js';\nimport { devicePixelRatio as dpr } from '../config.js';\nimport { fromLine, fromCubic, fromQuadratic, fromArc } from './bbox.js';\nimport { cubicLength, cubicSubdivide, quadraticLength, quadraticSubdivide } from './curve.js';\nvar CMD = {\n    M: 1,\n    L: 2,\n    C: 3,\n    Q: 4,\n    A: 5,\n    Z: 6,\n    R: 7\n};\nvar tmpOutX = [];\nvar tmpOutY = [];\nvar min = [];\nvar max = [];\nvar min2 = [];\nvar max2 = [];\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathCos = Math.cos;\nvar mathSin = Math.sin;\nvar mathAbs = Math.abs;\nvar PI = Math.PI;\nvar PI2 = PI * 2;\nvar hasTypedArray = typeof Float32Array !== 'undefined';\nvar tmpAngles = [];\nfunction modPI2(radian) {\n    var n = Math.round(radian / PI * 1e8) / 1e8;\n    return (n % 2) * PI;\n}\nexport function normalizeArcAngles(angles, anticlockwise) {\n    var newStartAngle = modPI2(angles[0]);\n    if (newStartAngle < 0) {\n        newStartAngle += PI2;\n    }\n    var delta = newStartAngle - angles[0];\n    var newEndAngle = angles[1];\n    newEndAngle += delta;\n    if (!anticlockwise && newEndAngle - newStartAngle >= PI2) {\n        newEndAngle = newStartAngle + PI2;\n    }\n    else if (anticlockwise && newStartAngle - newEndAngle >= PI2) {\n        newEndAngle = newStartAngle - PI2;\n    }\n    else if (!anticlockwise && newStartAngle > newEndAngle) {\n        newEndAngle = newStartAngle + (PI2 - modPI2(newStartAngle - newEndAngle));\n    }\n    else if (anticlockwise && newStartAngle < newEndAngle) {\n        newEndAngle = newStartAngle - (PI2 - modPI2(newEndAngle - newStartAngle));\n    }\n    angles[0] = newStartAngle;\n    angles[1] = newEndAngle;\n}\nvar PathProxy = (function () {\n    function PathProxy(notSaveData) {\n        this.dpr = 1;\n        this._xi = 0;\n        this._yi = 0;\n        this._x0 = 0;\n        this._y0 = 0;\n        this._len = 0;\n        if (notSaveData) {\n            this._saveData = false;\n        }\n        if (this._saveData) {\n            this.data = [];\n        }\n    }\n    PathProxy.prototype.increaseVersion = function () {\n        this._version++;\n    };\n    PathProxy.prototype.getVersion = function () {\n        return this._version;\n    };\n    PathProxy.prototype.setScale = function (sx, sy, segmentIgnoreThreshold) {\n        segmentIgnoreThreshold = segmentIgnoreThreshold || 0;\n        if (segmentIgnoreThreshold > 0) {\n            this._ux = mathAbs(segmentIgnoreThreshold / dpr / sx) || 0;\n            this._uy = mathAbs(segmentIgnoreThreshold / dpr / sy) || 0;\n        }\n    };\n    PathProxy.prototype.setDPR = function (dpr) {\n        this.dpr = dpr;\n    };\n    PathProxy.prototype.setContext = function (ctx) {\n        this._ctx = ctx;\n    };\n    PathProxy.prototype.getContext = function () {\n        return this._ctx;\n    };\n    PathProxy.prototype.beginPath = function () {\n        this._ctx && this._ctx.beginPath();\n        this.reset();\n        return this;\n    };\n    PathProxy.prototype.reset = function () {\n        if (this._saveData) {\n            this._len = 0;\n        }\n        if (this._pathSegLen) {\n            this._pathSegLen = null;\n            this._pathLen = 0;\n        }\n        this._version++;\n    };\n    PathProxy.prototype.moveTo = function (x, y) {\n        this._drawPendingPt();\n        this.addData(CMD.M, x, y);\n        this._ctx && this._ctx.moveTo(x, y);\n        this._x0 = x;\n        this._y0 = y;\n        this._xi = x;\n        this._yi = y;\n        return this;\n    };\n    PathProxy.prototype.lineTo = function (x, y) {\n        var dx = mathAbs(x - this._xi);\n        var dy = mathAbs(y - this._yi);\n        var exceedUnit = dx > this._ux || dy > this._uy;\n        this.addData(CMD.L, x, y);\n        if (this._ctx && exceedUnit) {\n            this._ctx.lineTo(x, y);\n        }\n        if (exceedUnit) {\n            this._xi = x;\n            this._yi = y;\n            this._pendingPtDist = 0;\n        }\n        else {\n            var d2 = dx * dx + dy * dy;\n            if (d2 > this._pendingPtDist) {\n                this._pendingPtX = x;\n                this._pendingPtY = y;\n                this._pendingPtDist = d2;\n            }\n        }\n        return this;\n    };\n    PathProxy.prototype.bezierCurveTo = function (x1, y1, x2, y2, x3, y3) {\n        this._drawPendingPt();\n        this.addData(CMD.C, x1, y1, x2, y2, x3, y3);\n        if (this._ctx) {\n            this._ctx.bezierCurveTo(x1, y1, x2, y2, x3, y3);\n        }\n        this._xi = x3;\n        this._yi = y3;\n        return this;\n    };\n    PathProxy.prototype.quadraticCurveTo = function (x1, y1, x2, y2) {\n        this._drawPendingPt();\n        this.addData(CMD.Q, x1, y1, x2, y2);\n        if (this._ctx) {\n            this._ctx.quadraticCurveTo(x1, y1, x2, y2);\n        }\n        this._xi = x2;\n        this._yi = y2;\n        return this;\n    };\n    PathProxy.prototype.arc = function (cx, cy, r, startAngle, endAngle, anticlockwise) {\n        this._drawPendingPt();\n        tmpAngles[0] = startAngle;\n        tmpAngles[1] = endAngle;\n        normalizeArcAngles(tmpAngles, anticlockwise);\n        startAngle = tmpAngles[0];\n        endAngle = tmpAngles[1];\n        var delta = endAngle - startAngle;\n        this.addData(CMD.A, cx, cy, r, r, startAngle, delta, 0, anticlockwise ? 0 : 1);\n        this._ctx && this._ctx.arc(cx, cy, r, startAngle, endAngle, anticlockwise);\n        this._xi = mathCos(endAngle) * r + cx;\n        this._yi = mathSin(endAngle) * r + cy;\n        return this;\n    };\n    PathProxy.prototype.arcTo = function (x1, y1, x2, y2, radius) {\n        this._drawPendingPt();\n        if (this._ctx) {\n            this._ctx.arcTo(x1, y1, x2, y2, radius);\n        }\n        return this;\n    };\n    PathProxy.prototype.rect = function (x, y, w, h) {\n        this._drawPendingPt();\n        this._ctx && this._ctx.rect(x, y, w, h);\n        this.addData(CMD.R, x, y, w, h);\n        return this;\n    };\n    PathProxy.prototype.closePath = function () {\n        this._drawPendingPt();\n        this.addData(CMD.Z);\n        var ctx = this._ctx;\n        var x0 = this._x0;\n        var y0 = this._y0;\n        if (ctx) {\n            ctx.closePath();\n        }\n        this._xi = x0;\n        this._yi = y0;\n        return this;\n    };\n    PathProxy.prototype.fill = function (ctx) {\n        ctx && ctx.fill();\n        this.toStatic();\n    };\n    PathProxy.prototype.stroke = function (ctx) {\n        ctx && ctx.stroke();\n        this.toStatic();\n    };\n    PathProxy.prototype.len = function () {\n        return this._len;\n    };\n    PathProxy.prototype.setData = function (data) {\n        var len = data.length;\n        if (!(this.data && this.data.length === len) && hasTypedArray) {\n            this.data = new Float32Array(len);\n        }\n        for (var i = 0; i < len; i++) {\n            this.data[i] = data[i];\n        }\n        this._len = len;\n    };\n    PathProxy.prototype.appendPath = function (path) {\n        if (!(path instanceof Array)) {\n            path = [path];\n        }\n        var len = path.length;\n        var appendSize = 0;\n        var offset = this._len;\n        for (var i = 0; i < len; i++) {\n            appendSize += path[i].len();\n        }\n        if (hasTypedArray && (this.data instanceof Float32Array)) {\n            this.data = new Float32Array(offset + appendSize);\n        }\n        for (var i = 0; i < len; i++) {\n            var appendPathData = path[i].data;\n            for (var k = 0; k < appendPathData.length; k++) {\n                this.data[offset++] = appendPathData[k];\n            }\n        }\n        this._len = offset;\n    };\n    PathProxy.prototype.addData = function (cmd, a, b, c, d, e, f, g, h) {\n        if (!this._saveData) {\n            return;\n        }\n        var data = this.data;\n        if (this._len + arguments.length > data.length) {\n            this._expandData();\n            data = this.data;\n        }\n        for (var i = 0; i < arguments.length; i++) {\n            data[this._len++] = arguments[i];\n        }\n    };\n    PathProxy.prototype._drawPendingPt = function () {\n        if (this._pendingPtDist > 0) {\n            this._ctx && this._ctx.lineTo(this._pendingPtX, this._pendingPtY);\n            this._pendingPtDist = 0;\n        }\n    };\n    PathProxy.prototype._expandData = function () {\n        if (!(this.data instanceof Array)) {\n            var newData = [];\n            for (var i = 0; i < this._len; i++) {\n                newData[i] = this.data[i];\n            }\n            this.data = newData;\n        }\n    };\n    PathProxy.prototype.toStatic = function () {\n        if (!this._saveData) {\n            return;\n        }\n        this._drawPendingPt();\n        var data = this.data;\n        if (data instanceof Array) {\n            data.length = this._len;\n            if (hasTypedArray && this._len > 11) {\n                this.data = new Float32Array(data);\n            }\n        }\n    };\n    PathProxy.prototype.getBoundingRect = function () {\n        min[0] = min[1] = min2[0] = min2[1] = Number.MAX_VALUE;\n        max[0] = max[1] = max2[0] = max2[1] = -Number.MAX_VALUE;\n        var data = this.data;\n        var xi = 0;\n        var yi = 0;\n        var x0 = 0;\n        var y0 = 0;\n        var i;\n        for (i = 0; i < this._len;) {\n            var cmd = data[i++];\n            var isFirst = i === 1;\n            if (isFirst) {\n                xi = data[i];\n                yi = data[i + 1];\n                x0 = xi;\n                y0 = yi;\n            }\n            switch (cmd) {\n                case CMD.M:\n                    xi = x0 = data[i++];\n                    yi = y0 = data[i++];\n                    min2[0] = x0;\n                    min2[1] = y0;\n                    max2[0] = x0;\n                    max2[1] = y0;\n                    break;\n                case CMD.L:\n                    fromLine(xi, yi, data[i], data[i + 1], min2, max2);\n                    xi = data[i++];\n                    yi = data[i++];\n                    break;\n                case CMD.C:\n                    fromCubic(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], min2, max2);\n                    xi = data[i++];\n                    yi = data[i++];\n                    break;\n                case CMD.Q:\n                    fromQuadratic(xi, yi, data[i++], data[i++], data[i], data[i + 1], min2, max2);\n                    xi = data[i++];\n                    yi = data[i++];\n                    break;\n                case CMD.A:\n                    var cx = data[i++];\n                    var cy = data[i++];\n                    var rx = data[i++];\n                    var ry = data[i++];\n                    var startAngle = data[i++];\n                    var endAngle = data[i++] + startAngle;\n                    i += 1;\n                    var anticlockwise = !data[i++];\n                    if (isFirst) {\n                        x0 = mathCos(startAngle) * rx + cx;\n                        y0 = mathSin(startAngle) * ry + cy;\n                    }\n                    fromArc(cx, cy, rx, ry, startAngle, endAngle, anticlockwise, min2, max2);\n                    xi = mathCos(endAngle) * rx + cx;\n                    yi = mathSin(endAngle) * ry + cy;\n                    break;\n                case CMD.R:\n                    x0 = xi = data[i++];\n                    y0 = yi = data[i++];\n                    var width = data[i++];\n                    var height = data[i++];\n                    fromLine(x0, y0, x0 + width, y0 + height, min2, max2);\n                    break;\n                case CMD.Z:\n                    xi = x0;\n                    yi = y0;\n                    break;\n            }\n            vec2.min(min, min, min2);\n            vec2.max(max, max, max2);\n        }\n        if (i === 0) {\n            min[0] = min[1] = max[0] = max[1] = 0;\n        }\n        return new BoundingRect(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n    };\n    PathProxy.prototype._calculateLength = function () {\n        var data = this.data;\n        var len = this._len;\n        var ux = this._ux;\n        var uy = this._uy;\n        var xi = 0;\n        var yi = 0;\n        var x0 = 0;\n        var y0 = 0;\n        if (!this._pathSegLen) {\n            this._pathSegLen = [];\n        }\n        var pathSegLen = this._pathSegLen;\n        var pathTotalLen = 0;\n        var segCount = 0;\n        for (var i = 0; i < len;) {\n            var cmd = data[i++];\n            var isFirst = i === 1;\n            if (isFirst) {\n                xi = data[i];\n                yi = data[i + 1];\n                x0 = xi;\n                y0 = yi;\n            }\n            var l = -1;\n            switch (cmd) {\n                case CMD.M:\n                    xi = x0 = data[i++];\n                    yi = y0 = data[i++];\n                    break;\n                case CMD.L: {\n                    var x2 = data[i++];\n                    var y2 = data[i++];\n                    var dx = x2 - xi;\n                    var dy = y2 - yi;\n                    if (mathAbs(dx) > ux || mathAbs(dy) > uy || i === len - 1) {\n                        l = Math.sqrt(dx * dx + dy * dy);\n                        xi = x2;\n                        yi = y2;\n                    }\n                    break;\n                }\n                case CMD.C: {\n                    var x1 = data[i++];\n                    var y1 = data[i++];\n                    var x2 = data[i++];\n                    var y2 = data[i++];\n                    var x3 = data[i++];\n                    var y3 = data[i++];\n                    l = cubicLength(xi, yi, x1, y1, x2, y2, x3, y3, 10);\n                    xi = x3;\n                    yi = y3;\n                    break;\n                }\n                case CMD.Q: {\n                    var x1 = data[i++];\n                    var y1 = data[i++];\n                    var x2 = data[i++];\n                    var y2 = data[i++];\n                    l = quadraticLength(xi, yi, x1, y1, x2, y2, 10);\n                    xi = x2;\n                    yi = y2;\n                    break;\n                }\n                case CMD.A:\n                    var cx = data[i++];\n                    var cy = data[i++];\n                    var rx = data[i++];\n                    var ry = data[i++];\n                    var startAngle = data[i++];\n                    var delta = data[i++];\n                    var endAngle = delta + startAngle;\n                    i += 1;\n                    var anticlockwise = !data[i++];\n                    if (isFirst) {\n                        x0 = mathCos(startAngle) * rx + cx;\n                        y0 = mathSin(startAngle) * ry + cy;\n                    }\n                    l = mathMax(rx, ry) * mathMin(PI2, Math.abs(delta));\n                    xi = mathCos(endAngle) * rx + cx;\n                    yi = mathSin(endAngle) * ry + cy;\n                    break;\n                case CMD.R: {\n                    x0 = xi = data[i++];\n                    y0 = yi = data[i++];\n                    var width = data[i++];\n                    var height = data[i++];\n                    l = width * 2 + height * 2;\n                    break;\n                }\n                case CMD.Z: {\n                    var dx = x0 - xi;\n                    var dy = y0 - yi;\n                    l = Math.sqrt(dx * dx + dy * dy);\n                    xi = x0;\n                    yi = y0;\n                    break;\n                }\n            }\n            if (l >= 0) {\n                pathSegLen[segCount++] = l;\n                pathTotalLen += l;\n            }\n        }\n        this._pathLen = pathTotalLen;\n        return pathTotalLen;\n    };\n    PathProxy.prototype.rebuildPath = function (ctx, percent) {\n        var d = this.data;\n        var ux = this._ux;\n        var uy = this._uy;\n        var len = this._len;\n        var x0;\n        var y0;\n        var xi;\n        var yi;\n        var x;\n        var y;\n        var drawPart = percent < 1;\n        var pathSegLen;\n        var pathTotalLen;\n        var accumLength = 0;\n        var segCount = 0;\n        var displayedLength;\n        var pendingPtDist = 0;\n        var pendingPtX;\n        var pendingPtY;\n        if (drawPart) {\n            if (!this._pathSegLen) {\n                this._calculateLength();\n            }\n            pathSegLen = this._pathSegLen;\n            pathTotalLen = this._pathLen;\n            displayedLength = percent * pathTotalLen;\n            if (!displayedLength) {\n                return;\n            }\n        }\n        lo: for (var i = 0; i < len;) {\n            var cmd = d[i++];\n            var isFirst = i === 1;\n            if (isFirst) {\n                xi = d[i];\n                yi = d[i + 1];\n                x0 = xi;\n                y0 = yi;\n            }\n            if (cmd !== CMD.L && pendingPtDist > 0) {\n                ctx.lineTo(pendingPtX, pendingPtY);\n                pendingPtDist = 0;\n            }\n            switch (cmd) {\n                case CMD.M:\n                    x0 = xi = d[i++];\n                    y0 = yi = d[i++];\n                    ctx.moveTo(xi, yi);\n                    break;\n                case CMD.L: {\n                    x = d[i++];\n                    y = d[i++];\n                    var dx = mathAbs(x - xi);\n                    var dy = mathAbs(y - yi);\n                    if (dx > ux || dy > uy) {\n                        if (drawPart) {\n                            var l = pathSegLen[segCount++];\n                            if (accumLength + l > displayedLength) {\n                                var t = (displayedLength - accumLength) / l;\n                                ctx.lineTo(xi * (1 - t) + x * t, yi * (1 - t) + y * t);\n                                break lo;\n                            }\n                            accumLength += l;\n                        }\n                        ctx.lineTo(x, y);\n                        xi = x;\n                        yi = y;\n                        pendingPtDist = 0;\n                    }\n                    else {\n                        var d2 = dx * dx + dy * dy;\n                        if (d2 > pendingPtDist) {\n                            pendingPtX = x;\n                            pendingPtY = y;\n                            pendingPtDist = d2;\n                        }\n                    }\n                    break;\n                }\n                case CMD.C: {\n                    var x1 = d[i++];\n                    var y1 = d[i++];\n                    var x2 = d[i++];\n                    var y2 = d[i++];\n                    var x3 = d[i++];\n                    var y3 = d[i++];\n                    if (drawPart) {\n                        var l = pathSegLen[segCount++];\n                        if (accumLength + l > displayedLength) {\n                            var t = (displayedLength - accumLength) / l;\n                            cubicSubdivide(xi, x1, x2, x3, t, tmpOutX);\n                            cubicSubdivide(yi, y1, y2, y3, t, tmpOutY);\n                            ctx.bezierCurveTo(tmpOutX[1], tmpOutY[1], tmpOutX[2], tmpOutY[2], tmpOutX[3], tmpOutY[3]);\n                            break lo;\n                        }\n                        accumLength += l;\n                    }\n                    ctx.bezierCurveTo(x1, y1, x2, y2, x3, y3);\n                    xi = x3;\n                    yi = y3;\n                    break;\n                }\n                case CMD.Q: {\n                    var x1 = d[i++];\n                    var y1 = d[i++];\n                    var x2 = d[i++];\n                    var y2 = d[i++];\n                    if (drawPart) {\n                        var l = pathSegLen[segCount++];\n                        if (accumLength + l > displayedLength) {\n                            var t = (displayedLength - accumLength) / l;\n                            quadraticSubdivide(xi, x1, x2, t, tmpOutX);\n                            quadraticSubdivide(yi, y1, y2, t, tmpOutY);\n                            ctx.quadraticCurveTo(tmpOutX[1], tmpOutY[1], tmpOutX[2], tmpOutY[2]);\n                            break lo;\n                        }\n                        accumLength += l;\n                    }\n                    ctx.quadraticCurveTo(x1, y1, x2, y2);\n                    xi = x2;\n                    yi = y2;\n                    break;\n                }\n                case CMD.A:\n                    var cx = d[i++];\n                    var cy = d[i++];\n                    var rx = d[i++];\n                    var ry = d[i++];\n                    var startAngle = d[i++];\n                    var delta = d[i++];\n                    var psi = d[i++];\n                    var anticlockwise = !d[i++];\n                    var r = (rx > ry) ? rx : ry;\n                    var isEllipse = mathAbs(rx - ry) > 1e-3;\n                    var endAngle = startAngle + delta;\n                    var breakBuild = false;\n                    if (drawPart) {\n                        var l = pathSegLen[segCount++];\n                        if (accumLength + l > displayedLength) {\n                            endAngle = startAngle + delta * (displayedLength - accumLength) / l;\n                            breakBuild = true;\n                        }\n                        accumLength += l;\n                    }\n                    if (isEllipse && ctx.ellipse) {\n                        ctx.ellipse(cx, cy, rx, ry, psi, startAngle, endAngle, anticlockwise);\n                    }\n                    else {\n                        ctx.arc(cx, cy, r, startAngle, endAngle, anticlockwise);\n                    }\n                    if (breakBuild) {\n                        break lo;\n                    }\n                    if (isFirst) {\n                        x0 = mathCos(startAngle) * rx + cx;\n                        y0 = mathSin(startAngle) * ry + cy;\n                    }\n                    xi = mathCos(endAngle) * rx + cx;\n                    yi = mathSin(endAngle) * ry + cy;\n                    break;\n                case CMD.R:\n                    x0 = xi = d[i];\n                    y0 = yi = d[i + 1];\n                    x = d[i++];\n                    y = d[i++];\n                    var width = d[i++];\n                    var height = d[i++];\n                    if (drawPart) {\n                        var l = pathSegLen[segCount++];\n                        if (accumLength + l > displayedLength) {\n                            var d_1 = displayedLength - accumLength;\n                            ctx.moveTo(x, y);\n                            ctx.lineTo(x + mathMin(d_1, width), y);\n                            d_1 -= width;\n                            if (d_1 > 0) {\n                                ctx.lineTo(x + width, y + mathMin(d_1, height));\n                            }\n                            d_1 -= height;\n                            if (d_1 > 0) {\n                                ctx.lineTo(x + mathMax(width - d_1, 0), y + height);\n                            }\n                            d_1 -= width;\n                            if (d_1 > 0) {\n                                ctx.lineTo(x, y + mathMax(height - d_1, 0));\n                            }\n                            break lo;\n                        }\n                        accumLength += l;\n                    }\n                    ctx.rect(x, y, width, height);\n                    break;\n                case CMD.Z:\n                    if (drawPart) {\n                        var l = pathSegLen[segCount++];\n                        if (accumLength + l > displayedLength) {\n                            var t = (displayedLength - accumLength) / l;\n                            ctx.lineTo(xi * (1 - t) + x0 * t, yi * (1 - t) + y0 * t);\n                            break lo;\n                        }\n                        accumLength += l;\n                    }\n                    ctx.closePath();\n                    xi = x0;\n                    yi = y0;\n            }\n        }\n    };\n    PathProxy.prototype.clone = function () {\n        var newProxy = new PathProxy();\n        var data = this.data;\n        newProxy.data = data.slice ? data.slice()\n            : Array.prototype.slice.call(data);\n        newProxy._len = this._len;\n        return newProxy;\n    };\n    PathProxy.CMD = CMD;\n    PathProxy.initDefaultProps = (function () {\n        var proto = PathProxy.prototype;\n        proto._saveData = true;\n        proto._ux = 0;\n        proto._uy = 0;\n        proto._pendingPtDist = 0;\n        proto._version = 0;\n    })();\n    return PathProxy;\n}());\nexport default PathProxy;\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || from);\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","var Browser = (function () {\n    function Browser() {\n        this.firefox = false;\n        this.ie = false;\n        this.edge = false;\n        this.newEdge = false;\n        this.weChat = false;\n    }\n    return Browser;\n}());\nvar Env = (function () {\n    function Env() {\n        this.browser = new Browser();\n        this.node = false;\n        this.wxa = false;\n        this.worker = false;\n        this.svgSupported = false;\n        this.touchEventsSupported = false;\n        this.pointerEventsSupported = false;\n        this.domSupported = false;\n        this.transformSupported = false;\n        this.transform3dSupported = false;\n        this.hasGlobalWindow = typeof window !== 'undefined';\n    }\n    return Env;\n}());\nvar env = new Env();\nif (typeof wx === 'object' && typeof wx.getSystemInfoSync === 'function') {\n    env.wxa = true;\n    env.touchEventsSupported = true;\n}\nelse if (typeof document === 'undefined' && typeof self !== 'undefined') {\n    env.worker = true;\n}\nelse if (typeof navigator === 'undefined') {\n    env.node = true;\n    env.svgSupported = true;\n}\nelse {\n    detect(navigator.userAgent, env);\n}\nfunction detect(ua, env) {\n    var browser = env.browser;\n    var firefox = ua.match(/Firefox\\/([\\d.]+)/);\n    var ie = ua.match(/MSIE\\s([\\d.]+)/)\n        || ua.match(/Trident\\/.+?rv:(([\\d.]+))/);\n    var edge = ua.match(/Edge?\\/([\\d.]+)/);\n    var weChat = (/micromessenger/i).test(ua);\n    if (firefox) {\n        browser.firefox = true;\n        browser.version = firefox[1];\n    }\n    if (ie) {\n        browser.ie = true;\n        browser.version = ie[1];\n    }\n    if (edge) {\n        browser.edge = true;\n        browser.version = edge[1];\n        browser.newEdge = +edge[1].split('.')[0] > 18;\n    }\n    if (weChat) {\n        browser.weChat = true;\n    }\n    env.svgSupported = typeof SVGRect !== 'undefined';\n    env.touchEventsSupported = 'ontouchstart' in window && !browser.ie && !browser.edge;\n    env.pointerEventsSupported = 'onpointerdown' in window\n        && (browser.edge || (browser.ie && +browser.version >= 11));\n    env.domSupported = typeof document !== 'undefined';\n    var style = document.documentElement.style;\n    env.transform3dSupported = ((browser.ie && 'transition' in style)\n        || browser.edge\n        || (('WebKitCSSMatrix' in window) && ('m11' in new WebKitCSSMatrix()))\n        || 'MozPerspective' in style)\n        && !('OTransition' in style);\n    env.transformSupported = env.transform3dSupported\n        || (browser.ie && +browser.version >= 9);\n}\nexport default env;\n","import env from './core/env.js';\nvar dpr = 1;\nif (env.hasGlobalWindow) {\n    dpr = Math.max(window.devicePixelRatio\n        || (window.screen && window.screen.deviceXDPI / window.screen.logicalXDPI)\n        || 1, 1);\n}\nexport var debugMode = 0;\nexport var devicePixelRatio = dpr;\nexport var DARK_MODE_THRESHOLD = 0.4;\nexport var DARK_LABEL_COLOR = '#333';\nexport var LIGHT_LABEL_COLOR = '#ccc';\nexport var LIGHTER_LABEL_COLOR = '#eee';\n","import { __extends } from \"tslib\";\nimport * as zrUtil from '../core/util.js';\nimport Element from '../Element.js';\nimport BoundingRect from '../core/BoundingRect.js';\nvar Group = (function (_super) {\n    __extends(Group, _super);\n    function Group(opts) {\n        var _this = _super.call(this) || this;\n        _this.isGroup = true;\n        _this._children = [];\n        _this.attr(opts);\n        return _this;\n    }\n    Group.prototype.childrenRef = function () {\n        return this._children;\n    };\n    Group.prototype.children = function () {\n        return this._children.slice();\n    };\n    Group.prototype.childAt = function (idx) {\n        return this._children[idx];\n    };\n    Group.prototype.childOfName = function (name) {\n        var children = this._children;\n        for (var i = 0; i < children.length; i++) {\n            if (children[i].name === name) {\n                return children[i];\n            }\n        }\n    };\n    Group.prototype.childCount = function () {\n        return this._children.length;\n    };\n    Group.prototype.add = function (child) {\n        if (child) {\n            if (child !== this && child.parent !== this) {\n                this._children.push(child);\n                this._doAdd(child);\n            }\n            if (process.env.NODE_ENV !== 'production') {\n                if (child.__hostTarget) {\n                    throw 'This elemenet has been used as an attachment';\n                }\n            }\n        }\n        return this;\n    };\n    Group.prototype.addBefore = function (child, nextSibling) {\n        if (child && child !== this && child.parent !== this\n            && nextSibling && nextSibling.parent === this) {\n            var children = this._children;\n            var idx = children.indexOf(nextSibling);\n            if (idx >= 0) {\n                children.splice(idx, 0, child);\n                this._doAdd(child);\n            }\n        }\n        return this;\n    };\n    Group.prototype.replace = function (oldChild, newChild) {\n        var idx = zrUtil.indexOf(this._children, oldChild);\n        if (idx >= 0) {\n            this.replaceAt(newChild, idx);\n        }\n        return this;\n    };\n    Group.prototype.replaceAt = function (child, index) {\n        var children = this._children;\n        var old = children[index];\n        if (child && child !== this && child.parent !== this && child !== old) {\n            children[index] = child;\n            old.parent = null;\n            var zr = this.__zr;\n            if (zr) {\n                old.removeSelfFromZr(zr);\n            }\n            this._doAdd(child);\n        }\n        return this;\n    };\n    Group.prototype._doAdd = function (child) {\n        if (child.parent) {\n            child.parent.remove(child);\n        }\n        child.parent = this;\n        var zr = this.__zr;\n        if (zr && zr !== child.__zr) {\n            child.addSelfToZr(zr);\n        }\n        zr && zr.refresh();\n    };\n    Group.prototype.remove = function (child) {\n        var zr = this.__zr;\n        var children = this._children;\n        var idx = zrUtil.indexOf(children, child);\n        if (idx < 0) {\n            return this;\n        }\n        children.splice(idx, 1);\n        child.parent = null;\n        if (zr) {\n            child.removeSelfFromZr(zr);\n        }\n        zr && zr.refresh();\n        return this;\n    };\n    Group.prototype.removeAll = function () {\n        var children = this._children;\n        var zr = this.__zr;\n        for (var i = 0; i < children.length; i++) {\n            var child = children[i];\n            if (zr) {\n                child.removeSelfFromZr(zr);\n            }\n            child.parent = null;\n        }\n        children.length = 0;\n        return this;\n    };\n    Group.prototype.eachChild = function (cb, context) {\n        var children = this._children;\n        for (var i = 0; i < children.length; i++) {\n            var child = children[i];\n            cb.call(context, child, i);\n        }\n        return this;\n    };\n    Group.prototype.traverse = function (cb, context) {\n        for (var i = 0; i < this._children.length; i++) {\n            var child = this._children[i];\n            var stopped = cb.call(context, child);\n            if (child.isGroup && !stopped) {\n                child.traverse(cb, context);\n            }\n        }\n        return this;\n    };\n    Group.prototype.addSelfToZr = function (zr) {\n        _super.prototype.addSelfToZr.call(this, zr);\n        for (var i = 0; i < this._children.length; i++) {\n            var child = this._children[i];\n            child.addSelfToZr(zr);\n        }\n    };\n    Group.prototype.removeSelfFromZr = function (zr) {\n        _super.prototype.removeSelfFromZr.call(this, zr);\n        for (var i = 0; i < this._children.length; i++) {\n            var child = this._children[i];\n            child.removeSelfFromZr(zr);\n        }\n    };\n    Group.prototype.getBoundingRect = function (includeChildren) {\n        var tmpRect = new BoundingRect(0, 0, 0, 0);\n        var children = includeChildren || this._children;\n        var tmpMat = [];\n        var rect = null;\n        for (var i = 0; i < children.length; i++) {\n            var child = children[i];\n            if (child.ignore || child.invisible) {\n                continue;\n            }\n            var childRect = child.getBoundingRect();\n            var transform = child.getLocalTransform(tmpMat);\n            if (transform) {\n                BoundingRect.applyTransform(tmpRect, childRect, transform);\n                rect = rect || tmpRect.clone();\n                rect.union(tmpRect);\n            }\n            else {\n                rect = rect || childRect.clone();\n                rect.union(childRect);\n            }\n        }\n        return rect || tmpRect;\n    };\n    return Group;\n}(Element));\nGroup.prototype.type = 'group';\nexport default Group;\n","import Group from '../graphic/Group.js';\nimport ZRImage from '../graphic/Image.js';\nimport Circle from '../graphic/shape/Circle.js';\nimport Rect from '../graphic/shape/Rect.js';\nimport Ellipse from '../graphic/shape/Ellipse.js';\nimport Line from '../graphic/shape/Line.js';\nimport Polygon from '../graphic/shape/Polygon.js';\nimport Polyline from '../graphic/shape/Polyline.js';\nimport * as matrix from '../core/matrix.js';\nimport { createFromString } from './path.js';\nimport { defaults, trim, each, map, keys, hasOwn } from '../core/util.js';\nimport LinearGradient from '../graphic/LinearGradient.js';\nimport RadialGradient from '../graphic/RadialGradient.js';\nimport TSpan from '../graphic/TSpan.js';\nimport { parseXML } from './parseXML.js';\n;\nvar nodeParsers;\nvar INHERITABLE_STYLE_ATTRIBUTES_MAP = {\n    'fill': 'fill',\n    'stroke': 'stroke',\n    'stroke-width': 'lineWidth',\n    'opacity': 'opacity',\n    'fill-opacity': 'fillOpacity',\n    'stroke-opacity': 'strokeOpacity',\n    'stroke-dasharray': 'lineDash',\n    'stroke-dashoffset': 'lineDashOffset',\n    'stroke-linecap': 'lineCap',\n    'stroke-linejoin': 'lineJoin',\n    'stroke-miterlimit': 'miterLimit',\n    'font-family': 'fontFamily',\n    'font-size': 'fontSize',\n    'font-style': 'fontStyle',\n    'font-weight': 'fontWeight',\n    'text-anchor': 'textAlign',\n    'visibility': 'visibility',\n    'display': 'display'\n};\nvar INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS = keys(INHERITABLE_STYLE_ATTRIBUTES_MAP);\nvar SELF_STYLE_ATTRIBUTES_MAP = {\n    'alignment-baseline': 'textBaseline',\n    'stop-color': 'stopColor'\n};\nvar SELF_STYLE_ATTRIBUTES_MAP_KEYS = keys(SELF_STYLE_ATTRIBUTES_MAP);\nvar SVGParser = (function () {\n    function SVGParser() {\n        this._defs = {};\n        this._root = null;\n    }\n    SVGParser.prototype.parse = function (xml, opt) {\n        opt = opt || {};\n        var svg = parseXML(xml);\n        if (process.env.NODE_ENV !== 'production') {\n            if (!svg) {\n                throw new Error('Illegal svg');\n            }\n        }\n        this._defsUsePending = [];\n        var root = new Group();\n        this._root = root;\n        var named = [];\n        var viewBox = svg.getAttribute('viewBox') || '';\n        var width = parseFloat((svg.getAttribute('width') || opt.width));\n        var height = parseFloat((svg.getAttribute('height') || opt.height));\n        isNaN(width) && (width = null);\n        isNaN(height) && (height = null);\n        parseAttributes(svg, root, null, true, false);\n        var child = svg.firstChild;\n        while (child) {\n            this._parseNode(child, root, named, null, false, false);\n            child = child.nextSibling;\n        }\n        applyDefs(this._defs, this._defsUsePending);\n        this._defsUsePending = [];\n        var viewBoxRect;\n        var viewBoxTransform;\n        if (viewBox) {\n            var viewBoxArr = splitNumberSequence(viewBox);\n            if (viewBoxArr.length >= 4) {\n                viewBoxRect = {\n                    x: parseFloat((viewBoxArr[0] || 0)),\n                    y: parseFloat((viewBoxArr[1] || 0)),\n                    width: parseFloat(viewBoxArr[2]),\n                    height: parseFloat(viewBoxArr[3])\n                };\n            }\n        }\n        if (viewBoxRect && width != null && height != null) {\n            viewBoxTransform = makeViewBoxTransform(viewBoxRect, { x: 0, y: 0, width: width, height: height });\n            if (!opt.ignoreViewBox) {\n                var elRoot = root;\n                root = new Group();\n                root.add(elRoot);\n                elRoot.scaleX = elRoot.scaleY = viewBoxTransform.scale;\n                elRoot.x = viewBoxTransform.x;\n                elRoot.y = viewBoxTransform.y;\n            }\n        }\n        if (!opt.ignoreRootClip && width != null && height != null) {\n            root.setClipPath(new Rect({\n                shape: { x: 0, y: 0, width: width, height: height }\n            }));\n        }\n        return {\n            root: root,\n            width: width,\n            height: height,\n            viewBoxRect: viewBoxRect,\n            viewBoxTransform: viewBoxTransform,\n            named: named\n        };\n    };\n    SVGParser.prototype._parseNode = function (xmlNode, parentGroup, named, namedFrom, isInDefs, isInText) {\n        var nodeName = xmlNode.nodeName.toLowerCase();\n        var el;\n        var namedFromForSub = namedFrom;\n        if (nodeName === 'defs') {\n            isInDefs = true;\n        }\n        if (nodeName === 'text') {\n            isInText = true;\n        }\n        if (nodeName === 'defs' || nodeName === 'switch') {\n            el = parentGroup;\n        }\n        else {\n            if (!isInDefs) {\n                var parser_1 = nodeParsers[nodeName];\n                if (parser_1 && hasOwn(nodeParsers, nodeName)) {\n                    el = parser_1.call(this, xmlNode, parentGroup);\n                    var nameAttr = xmlNode.getAttribute('name');\n                    if (nameAttr) {\n                        var newNamed = {\n                            name: nameAttr,\n                            namedFrom: null,\n                            svgNodeTagLower: nodeName,\n                            el: el\n                        };\n                        named.push(newNamed);\n                        if (nodeName === 'g') {\n                            namedFromForSub = newNamed;\n                        }\n                    }\n                    else if (namedFrom) {\n                        named.push({\n                            name: namedFrom.name,\n                            namedFrom: namedFrom,\n                            svgNodeTagLower: nodeName,\n                            el: el\n                        });\n                    }\n                    parentGroup.add(el);\n                }\n            }\n            var parser = paintServerParsers[nodeName];\n            if (parser && hasOwn(paintServerParsers, nodeName)) {\n                var def = parser.call(this, xmlNode);\n                var id = xmlNode.getAttribute('id');\n                if (id) {\n                    this._defs[id] = def;\n                }\n            }\n        }\n        if (el && el.isGroup) {\n            var child = xmlNode.firstChild;\n            while (child) {\n                if (child.nodeType === 1) {\n                    this._parseNode(child, el, named, namedFromForSub, isInDefs, isInText);\n                }\n                else if (child.nodeType === 3 && isInText) {\n                    this._parseText(child, el);\n                }\n                child = child.nextSibling;\n            }\n        }\n    };\n    SVGParser.prototype._parseText = function (xmlNode, parentGroup) {\n        var text = new TSpan({\n            style: {\n                text: xmlNode.textContent\n            },\n            silent: true,\n            x: this._textX || 0,\n            y: this._textY || 0\n        });\n        inheritStyle(parentGroup, text);\n        parseAttributes(xmlNode, text, this._defsUsePending, false, false);\n        applyTextAlignment(text, parentGroup);\n        var textStyle = text.style;\n        var fontSize = textStyle.fontSize;\n        if (fontSize && fontSize < 9) {\n            textStyle.fontSize = 9;\n            text.scaleX *= fontSize / 9;\n            text.scaleY *= fontSize / 9;\n        }\n        var font = (textStyle.fontSize || textStyle.fontFamily) && [\n            textStyle.fontStyle,\n            textStyle.fontWeight,\n            (textStyle.fontSize || 12) + 'px',\n            textStyle.fontFamily || 'sans-serif'\n        ].join(' ');\n        textStyle.font = font;\n        var rect = text.getBoundingRect();\n        this._textX += rect.width;\n        parentGroup.add(text);\n        return text;\n    };\n    SVGParser.internalField = (function () {\n        nodeParsers = {\n            'g': function (xmlNode, parentGroup) {\n                var g = new Group();\n                inheritStyle(parentGroup, g);\n                parseAttributes(xmlNode, g, this._defsUsePending, false, false);\n                return g;\n            },\n            'rect': function (xmlNode, parentGroup) {\n                var rect = new Rect();\n                inheritStyle(parentGroup, rect);\n                parseAttributes(xmlNode, rect, this._defsUsePending, false, false);\n                rect.setShape({\n                    x: parseFloat(xmlNode.getAttribute('x') || '0'),\n                    y: parseFloat(xmlNode.getAttribute('y') || '0'),\n                    width: parseFloat(xmlNode.getAttribute('width') || '0'),\n                    height: parseFloat(xmlNode.getAttribute('height') || '0')\n                });\n                rect.silent = true;\n                return rect;\n            },\n            'circle': function (xmlNode, parentGroup) {\n                var circle = new Circle();\n                inheritStyle(parentGroup, circle);\n                parseAttributes(xmlNode, circle, this._defsUsePending, false, false);\n                circle.setShape({\n                    cx: parseFloat(xmlNode.getAttribute('cx') || '0'),\n                    cy: parseFloat(xmlNode.getAttribute('cy') || '0'),\n                    r: parseFloat(xmlNode.getAttribute('r') || '0')\n                });\n                circle.silent = true;\n                return circle;\n            },\n            'line': function (xmlNode, parentGroup) {\n                var line = new Line();\n                inheritStyle(parentGroup, line);\n                parseAttributes(xmlNode, line, this._defsUsePending, false, false);\n                line.setShape({\n                    x1: parseFloat(xmlNode.getAttribute('x1') || '0'),\n                    y1: parseFloat(xmlNode.getAttribute('y1') || '0'),\n                    x2: parseFloat(xmlNode.getAttribute('x2') || '0'),\n                    y2: parseFloat(xmlNode.getAttribute('y2') || '0')\n                });\n                line.silent = true;\n                return line;\n            },\n            'ellipse': function (xmlNode, parentGroup) {\n                var ellipse = new Ellipse();\n                inheritStyle(parentGroup, ellipse);\n                parseAttributes(xmlNode, ellipse, this._defsUsePending, false, false);\n                ellipse.setShape({\n                    cx: parseFloat(xmlNode.getAttribute('cx') || '0'),\n                    cy: parseFloat(xmlNode.getAttribute('cy') || '0'),\n                    rx: parseFloat(xmlNode.getAttribute('rx') || '0'),\n                    ry: parseFloat(xmlNode.getAttribute('ry') || '0')\n                });\n                ellipse.silent = true;\n                return ellipse;\n            },\n            'polygon': function (xmlNode, parentGroup) {\n                var pointsStr = xmlNode.getAttribute('points');\n                var pointsArr;\n                if (pointsStr) {\n                    pointsArr = parsePoints(pointsStr);\n                }\n                var polygon = new Polygon({\n                    shape: {\n                        points: pointsArr || []\n                    },\n                    silent: true\n                });\n                inheritStyle(parentGroup, polygon);\n                parseAttributes(xmlNode, polygon, this._defsUsePending, false, false);\n                return polygon;\n            },\n            'polyline': function (xmlNode, parentGroup) {\n                var pointsStr = xmlNode.getAttribute('points');\n                var pointsArr;\n                if (pointsStr) {\n                    pointsArr = parsePoints(pointsStr);\n                }\n                var polyline = new Polyline({\n                    shape: {\n                        points: pointsArr || []\n                    },\n                    silent: true\n                });\n                inheritStyle(parentGroup, polyline);\n                parseAttributes(xmlNode, polyline, this._defsUsePending, false, false);\n                return polyline;\n            },\n            'image': function (xmlNode, parentGroup) {\n                var img = new ZRImage();\n                inheritStyle(parentGroup, img);\n                parseAttributes(xmlNode, img, this._defsUsePending, false, false);\n                img.setStyle({\n                    image: xmlNode.getAttribute('xlink:href') || xmlNode.getAttribute('href'),\n                    x: +xmlNode.getAttribute('x'),\n                    y: +xmlNode.getAttribute('y'),\n                    width: +xmlNode.getAttribute('width'),\n                    height: +xmlNode.getAttribute('height')\n                });\n                img.silent = true;\n                return img;\n            },\n            'text': function (xmlNode, parentGroup) {\n                var x = xmlNode.getAttribute('x') || '0';\n                var y = xmlNode.getAttribute('y') || '0';\n                var dx = xmlNode.getAttribute('dx') || '0';\n                var dy = xmlNode.getAttribute('dy') || '0';\n                this._textX = parseFloat(x) + parseFloat(dx);\n                this._textY = parseFloat(y) + parseFloat(dy);\n                var g = new Group();\n                inheritStyle(parentGroup, g);\n                parseAttributes(xmlNode, g, this._defsUsePending, false, true);\n                return g;\n            },\n            'tspan': function (xmlNode, parentGroup) {\n                var x = xmlNode.getAttribute('x');\n                var y = xmlNode.getAttribute('y');\n                if (x != null) {\n                    this._textX = parseFloat(x);\n                }\n                if (y != null) {\n                    this._textY = parseFloat(y);\n                }\n                var dx = xmlNode.getAttribute('dx') || '0';\n                var dy = xmlNode.getAttribute('dy') || '0';\n                var g = new Group();\n                inheritStyle(parentGroup, g);\n                parseAttributes(xmlNode, g, this._defsUsePending, false, true);\n                this._textX += parseFloat(dx);\n                this._textY += parseFloat(dy);\n                return g;\n            },\n            'path': function (xmlNode, parentGroup) {\n                var d = xmlNode.getAttribute('d') || '';\n                var path = createFromString(d);\n                inheritStyle(parentGroup, path);\n                parseAttributes(xmlNode, path, this._defsUsePending, false, false);\n                path.silent = true;\n                return path;\n            }\n        };\n    })();\n    return SVGParser;\n}());\nvar paintServerParsers = {\n    'lineargradient': function (xmlNode) {\n        var x1 = parseInt(xmlNode.getAttribute('x1') || '0', 10);\n        var y1 = parseInt(xmlNode.getAttribute('y1') || '0', 10);\n        var x2 = parseInt(xmlNode.getAttribute('x2') || '10', 10);\n        var y2 = parseInt(xmlNode.getAttribute('y2') || '0', 10);\n        var gradient = new LinearGradient(x1, y1, x2, y2);\n        parsePaintServerUnit(xmlNode, gradient);\n        parseGradientColorStops(xmlNode, gradient);\n        return gradient;\n    },\n    'radialgradient': function (xmlNode) {\n        var cx = parseInt(xmlNode.getAttribute('cx') || '0', 10);\n        var cy = parseInt(xmlNode.getAttribute('cy') || '0', 10);\n        var r = parseInt(xmlNode.getAttribute('r') || '0', 10);\n        var gradient = new RadialGradient(cx, cy, r);\n        parsePaintServerUnit(xmlNode, gradient);\n        parseGradientColorStops(xmlNode, gradient);\n        return gradient;\n    }\n};\nfunction parsePaintServerUnit(xmlNode, gradient) {\n    var gradientUnits = xmlNode.getAttribute('gradientUnits');\n    if (gradientUnits === 'userSpaceOnUse') {\n        gradient.global = true;\n    }\n}\nfunction parseGradientColorStops(xmlNode, gradient) {\n    var stop = xmlNode.firstChild;\n    while (stop) {\n        if (stop.nodeType === 1\n            && stop.nodeName.toLocaleLowerCase() === 'stop') {\n            var offsetStr = stop.getAttribute('offset');\n            var offset = void 0;\n            if (offsetStr && offsetStr.indexOf('%') > 0) {\n                offset = parseInt(offsetStr, 10) / 100;\n            }\n            else if (offsetStr) {\n                offset = parseFloat(offsetStr);\n            }\n            else {\n                offset = 0;\n            }\n            var styleVals = {};\n            parseInlineStyle(stop, styleVals, styleVals);\n            var stopColor = styleVals.stopColor\n                || stop.getAttribute('stop-color')\n                || '#000000';\n            gradient.colorStops.push({\n                offset: offset,\n                color: stopColor\n            });\n        }\n        stop = stop.nextSibling;\n    }\n}\nfunction inheritStyle(parent, child) {\n    if (parent && parent.__inheritedStyle) {\n        if (!child.__inheritedStyle) {\n            child.__inheritedStyle = {};\n        }\n        defaults(child.__inheritedStyle, parent.__inheritedStyle);\n    }\n}\nfunction parsePoints(pointsString) {\n    var list = splitNumberSequence(pointsString);\n    var points = [];\n    for (var i = 0; i < list.length; i += 2) {\n        var x = parseFloat(list[i]);\n        var y = parseFloat(list[i + 1]);\n        points.push([x, y]);\n    }\n    return points;\n}\nfunction parseAttributes(xmlNode, el, defsUsePending, onlyInlineStyle, isTextGroup) {\n    var disp = el;\n    var inheritedStyle = disp.__inheritedStyle = disp.__inheritedStyle || {};\n    var selfStyle = {};\n    if (xmlNode.nodeType === 1) {\n        parseTransformAttribute(xmlNode, el);\n        parseInlineStyle(xmlNode, inheritedStyle, selfStyle);\n        if (!onlyInlineStyle) {\n            parseAttributeStyle(xmlNode, inheritedStyle, selfStyle);\n        }\n    }\n    disp.style = disp.style || {};\n    if (inheritedStyle.fill != null) {\n        disp.style.fill = getFillStrokeStyle(disp, 'fill', inheritedStyle.fill, defsUsePending);\n    }\n    if (inheritedStyle.stroke != null) {\n        disp.style.stroke = getFillStrokeStyle(disp, 'stroke', inheritedStyle.stroke, defsUsePending);\n    }\n    each([\n        'lineWidth', 'opacity', 'fillOpacity', 'strokeOpacity', 'miterLimit', 'fontSize'\n    ], function (propName) {\n        if (inheritedStyle[propName] != null) {\n            disp.style[propName] = parseFloat(inheritedStyle[propName]);\n        }\n    });\n    each([\n        'lineDashOffset', 'lineCap', 'lineJoin', 'fontWeight', 'fontFamily', 'fontStyle', 'textAlign'\n    ], function (propName) {\n        if (inheritedStyle[propName] != null) {\n            disp.style[propName] = inheritedStyle[propName];\n        }\n    });\n    if (isTextGroup) {\n        disp.__selfStyle = selfStyle;\n    }\n    if (inheritedStyle.lineDash) {\n        disp.style.lineDash = map(splitNumberSequence(inheritedStyle.lineDash), function (str) {\n            return parseFloat(str);\n        });\n    }\n    if (inheritedStyle.visibility === 'hidden' || inheritedStyle.visibility === 'collapse') {\n        disp.invisible = true;\n    }\n    if (inheritedStyle.display === 'none') {\n        disp.ignore = true;\n    }\n}\nfunction applyTextAlignment(text, parentGroup) {\n    var parentSelfStyle = parentGroup.__selfStyle;\n    if (parentSelfStyle) {\n        var textBaseline = parentSelfStyle.textBaseline;\n        var zrTextBaseline = textBaseline;\n        if (!textBaseline || textBaseline === 'auto') {\n            zrTextBaseline = 'alphabetic';\n        }\n        else if (textBaseline === 'baseline') {\n            zrTextBaseline = 'alphabetic';\n        }\n        else if (textBaseline === 'before-edge' || textBaseline === 'text-before-edge') {\n            zrTextBaseline = 'top';\n        }\n        else if (textBaseline === 'after-edge' || textBaseline === 'text-after-edge') {\n            zrTextBaseline = 'bottom';\n        }\n        else if (textBaseline === 'central' || textBaseline === 'mathematical') {\n            zrTextBaseline = 'middle';\n        }\n        text.style.textBaseline = zrTextBaseline;\n    }\n    var parentInheritedStyle = parentGroup.__inheritedStyle;\n    if (parentInheritedStyle) {\n        var textAlign = parentInheritedStyle.textAlign;\n        var zrTextAlign = textAlign;\n        if (textAlign) {\n            if (textAlign === 'middle') {\n                zrTextAlign = 'center';\n            }\n            text.style.textAlign = zrTextAlign;\n        }\n    }\n}\nvar urlRegex = /^url\\(\\s*#(.*?)\\)/;\nfunction getFillStrokeStyle(el, method, str, defsUsePending) {\n    var urlMatch = str && str.match(urlRegex);\n    if (urlMatch) {\n        var url = trim(urlMatch[1]);\n        defsUsePending.push([el, method, url]);\n        return;\n    }\n    if (str === 'none') {\n        str = null;\n    }\n    return str;\n}\nfunction applyDefs(defs, defsUsePending) {\n    for (var i = 0; i < defsUsePending.length; i++) {\n        var item = defsUsePending[i];\n        item[0].style[item[1]] = defs[item[2]];\n    }\n}\nvar numberReg = /-?([0-9]*\\.)?[0-9]+([eE]-?[0-9]+)?/g;\nfunction splitNumberSequence(rawStr) {\n    return rawStr.match(numberReg) || [];\n}\nvar transformRegex = /(translate|scale|rotate|skewX|skewY|matrix)\\(([\\-\\s0-9\\.eE,]*)\\)/g;\nvar DEGREE_TO_ANGLE = Math.PI / 180;\nfunction parseTransformAttribute(xmlNode, node) {\n    var transform = xmlNode.getAttribute('transform');\n    if (transform) {\n        transform = transform.replace(/,/g, ' ');\n        var transformOps_1 = [];\n        var mt = null;\n        transform.replace(transformRegex, function (str, type, value) {\n            transformOps_1.push(type, value);\n            return '';\n        });\n        for (var i = transformOps_1.length - 1; i > 0; i -= 2) {\n            var value = transformOps_1[i];\n            var type = transformOps_1[i - 1];\n            var valueArr = splitNumberSequence(value);\n            mt = mt || matrix.create();\n            switch (type) {\n                case 'translate':\n                    matrix.translate(mt, mt, [parseFloat(valueArr[0]), parseFloat(valueArr[1] || '0')]);\n                    break;\n                case 'scale':\n                    matrix.scale(mt, mt, [parseFloat(valueArr[0]), parseFloat(valueArr[1] || valueArr[0])]);\n                    break;\n                case 'rotate':\n                    matrix.rotate(mt, mt, -parseFloat(valueArr[0]) * DEGREE_TO_ANGLE);\n                    break;\n                case 'skewX':\n                    var sx = Math.tan(parseFloat(valueArr[0]) * DEGREE_TO_ANGLE);\n                    matrix.mul(mt, [1, 0, sx, 1, 0, 0], mt);\n                    break;\n                case 'skewY':\n                    var sy = Math.tan(parseFloat(valueArr[0]) * DEGREE_TO_ANGLE);\n                    matrix.mul(mt, [1, sy, 0, 1, 0, 0], mt);\n                    break;\n                case 'matrix':\n                    mt[0] = parseFloat(valueArr[0]);\n                    mt[1] = parseFloat(valueArr[1]);\n                    mt[2] = parseFloat(valueArr[2]);\n                    mt[3] = parseFloat(valueArr[3]);\n                    mt[4] = parseFloat(valueArr[4]);\n                    mt[5] = parseFloat(valueArr[5]);\n                    break;\n            }\n        }\n        node.setLocalTransform(mt);\n    }\n}\nvar styleRegex = /([^\\s:;]+)\\s*:\\s*([^:;]+)/g;\nfunction parseInlineStyle(xmlNode, inheritableStyleResult, selfStyleResult) {\n    var style = xmlNode.getAttribute('style');\n    if (!style) {\n        return;\n    }\n    styleRegex.lastIndex = 0;\n    var styleRegResult;\n    while ((styleRegResult = styleRegex.exec(style)) != null) {\n        var svgStlAttr = styleRegResult[1];\n        var zrInheritableStlAttr = hasOwn(INHERITABLE_STYLE_ATTRIBUTES_MAP, svgStlAttr)\n            ? INHERITABLE_STYLE_ATTRIBUTES_MAP[svgStlAttr]\n            : null;\n        if (zrInheritableStlAttr) {\n            inheritableStyleResult[zrInheritableStlAttr] = styleRegResult[2];\n        }\n        var zrSelfStlAttr = hasOwn(SELF_STYLE_ATTRIBUTES_MAP, svgStlAttr)\n            ? SELF_STYLE_ATTRIBUTES_MAP[svgStlAttr]\n            : null;\n        if (zrSelfStlAttr) {\n            selfStyleResult[zrSelfStlAttr] = styleRegResult[2];\n        }\n    }\n}\nfunction parseAttributeStyle(xmlNode, inheritableStyleResult, selfStyleResult) {\n    for (var i = 0; i < INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS.length; i++) {\n        var svgAttrName = INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS[i];\n        var attrValue = xmlNode.getAttribute(svgAttrName);\n        if (attrValue != null) {\n            inheritableStyleResult[INHERITABLE_STYLE_ATTRIBUTES_MAP[svgAttrName]] = attrValue;\n        }\n    }\n    for (var i = 0; i < SELF_STYLE_ATTRIBUTES_MAP_KEYS.length; i++) {\n        var svgAttrName = SELF_STYLE_ATTRIBUTES_MAP_KEYS[i];\n        var attrValue = xmlNode.getAttribute(svgAttrName);\n        if (attrValue != null) {\n            selfStyleResult[SELF_STYLE_ATTRIBUTES_MAP[svgAttrName]] = attrValue;\n        }\n    }\n}\nexport function makeViewBoxTransform(viewBoxRect, boundingRect) {\n    var scaleX = boundingRect.width / viewBoxRect.width;\n    var scaleY = boundingRect.height / viewBoxRect.height;\n    var scale = Math.min(scaleX, scaleY);\n    return {\n        scale: scale,\n        x: -(viewBoxRect.x + viewBoxRect.width / 2) * scale + (boundingRect.x + boundingRect.width / 2),\n        y: -(viewBoxRect.y + viewBoxRect.height / 2) * scale + (boundingRect.y + boundingRect.height / 2)\n    };\n}\nexport function parseSVG(xml, opt) {\n    var parser = new SVGParser();\n    return parser.parse(xml, opt);\n}\nexport { parseXML };\n","import PathProxy from '../core/PathProxy.js';\nimport { applyTransform as v2ApplyTransform } from '../core/vector.js';\nvar CMD = PathProxy.CMD;\nvar points = [[], [], []];\nvar mathSqrt = Math.sqrt;\nvar mathAtan2 = Math.atan2;\nexport default function transformPath(path, m) {\n    if (!m) {\n        return;\n    }\n    var data = path.data;\n    var len = path.len();\n    var cmd;\n    var nPoint;\n    var i;\n    var j;\n    var k;\n    var p;\n    var M = CMD.M;\n    var C = CMD.C;\n    var L = CMD.L;\n    var R = CMD.R;\n    var A = CMD.A;\n    var Q = CMD.Q;\n    for (i = 0, j = 0; i < len;) {\n        cmd = data[i++];\n        j = i;\n        nPoint = 0;\n        switch (cmd) {\n            case M:\n                nPoint = 1;\n                break;\n            case L:\n                nPoint = 1;\n                break;\n            case C:\n                nPoint = 3;\n                break;\n            case Q:\n                nPoint = 2;\n                break;\n            case A:\n                var x = m[4];\n                var y = m[5];\n                var sx = mathSqrt(m[0] * m[0] + m[1] * m[1]);\n                var sy = mathSqrt(m[2] * m[2] + m[3] * m[3]);\n                var angle = mathAtan2(-m[1] / sy, m[0] / sx);\n                data[i] *= sx;\n                data[i++] += x;\n                data[i] *= sy;\n                data[i++] += y;\n                data[i++] *= sx;\n                data[i++] *= sy;\n                data[i++] += angle;\n                data[i++] += angle;\n                i += 2;\n                j = i;\n                break;\n            case R:\n                p[0] = data[i++];\n                p[1] = data[i++];\n                v2ApplyTransform(p, p, m);\n                data[j++] = p[0];\n                data[j++] = p[1];\n                p[0] += data[i++];\n                p[1] += data[i++];\n                v2ApplyTransform(p, p, m);\n                data[j++] = p[0];\n                data[j++] = p[1];\n        }\n        for (k = 0; k < nPoint; k++) {\n            var p_1 = points[k];\n            p_1[0] = data[i++];\n            p_1[1] = data[i++];\n            v2ApplyTransform(p_1, p_1, m);\n            data[j++] = p_1[0];\n            data[j++] = p_1[1];\n        }\n    }\n    path.increaseVersion();\n}\n","import { __extends } from \"tslib\";\nimport Path from '../graphic/Path.js';\nimport PathProxy from '../core/PathProxy.js';\nimport transformPath from './transformPath.js';\nimport { extend } from '../core/util.js';\nvar mathSqrt = Math.sqrt;\nvar mathSin = Math.sin;\nvar mathCos = Math.cos;\nvar PI = Math.PI;\nfunction vMag(v) {\n    return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\n}\n;\nfunction vRatio(u, v) {\n    return (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v));\n}\n;\nfunction vAngle(u, v) {\n    return (u[0] * v[1] < u[1] * v[0] ? -1 : 1)\n        * Math.acos(vRatio(u, v));\n}\n;\nfunction processArc(x1, y1, x2, y2, fa, fs, rx, ry, psiDeg, cmd, path) {\n    var psi = psiDeg * (PI / 180.0);\n    var xp = mathCos(psi) * (x1 - x2) / 2.0\n        + mathSin(psi) * (y1 - y2) / 2.0;\n    var yp = -1 * mathSin(psi) * (x1 - x2) / 2.0\n        + mathCos(psi) * (y1 - y2) / 2.0;\n    var lambda = (xp * xp) / (rx * rx) + (yp * yp) / (ry * ry);\n    if (lambda > 1) {\n        rx *= mathSqrt(lambda);\n        ry *= mathSqrt(lambda);\n    }\n    var f = (fa === fs ? -1 : 1)\n        * mathSqrt((((rx * rx) * (ry * ry))\n            - ((rx * rx) * (yp * yp))\n            - ((ry * ry) * (xp * xp))) / ((rx * rx) * (yp * yp)\n            + (ry * ry) * (xp * xp))) || 0;\n    var cxp = f * rx * yp / ry;\n    var cyp = f * -ry * xp / rx;\n    var cx = (x1 + x2) / 2.0\n        + mathCos(psi) * cxp\n        - mathSin(psi) * cyp;\n    var cy = (y1 + y2) / 2.0\n        + mathSin(psi) * cxp\n        + mathCos(psi) * cyp;\n    var theta = vAngle([1, 0], [(xp - cxp) / rx, (yp - cyp) / ry]);\n    var u = [(xp - cxp) / rx, (yp - cyp) / ry];\n    var v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];\n    var dTheta = vAngle(u, v);\n    if (vRatio(u, v) <= -1) {\n        dTheta = PI;\n    }\n    if (vRatio(u, v) >= 1) {\n        dTheta = 0;\n    }\n    if (dTheta < 0) {\n        var n = Math.round(dTheta / PI * 1e6) / 1e6;\n        dTheta = PI * 2 + (n % 2) * PI;\n    }\n    path.addData(cmd, cx, cy, rx, ry, theta, dTheta, psi, fs);\n}\nvar commandReg = /([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig;\nvar numberReg = /-?([0-9]*\\.)?[0-9]+([eE]-?[0-9]+)?/g;\nfunction createPathProxyFromString(data) {\n    var path = new PathProxy();\n    if (!data) {\n        return path;\n    }\n    var cpx = 0;\n    var cpy = 0;\n    var subpathX = cpx;\n    var subpathY = cpy;\n    var prevCmd;\n    var CMD = PathProxy.CMD;\n    var cmdList = data.match(commandReg);\n    if (!cmdList) {\n        return path;\n    }\n    for (var l = 0; l < cmdList.length; l++) {\n        var cmdText = cmdList[l];\n        var cmdStr = cmdText.charAt(0);\n        var cmd = void 0;\n        var p = cmdText.match(numberReg) || [];\n        var pLen = p.length;\n        for (var i = 0; i < pLen; i++) {\n            p[i] = parseFloat(p[i]);\n        }\n        var off = 0;\n        while (off < pLen) {\n            var ctlPtx = void 0;\n            var ctlPty = void 0;\n            var rx = void 0;\n            var ry = void 0;\n            var psi = void 0;\n            var fa = void 0;\n            var fs = void 0;\n            var x1 = cpx;\n            var y1 = cpy;\n            var len = void 0;\n            var pathData = void 0;\n            switch (cmdStr) {\n                case 'l':\n                    cpx += p[off++];\n                    cpy += p[off++];\n                    cmd = CMD.L;\n                    path.addData(cmd, cpx, cpy);\n                    break;\n                case 'L':\n                    cpx = p[off++];\n                    cpy = p[off++];\n                    cmd = CMD.L;\n                    path.addData(cmd, cpx, cpy);\n                    break;\n                case 'm':\n                    cpx += p[off++];\n                    cpy += p[off++];\n                    cmd = CMD.M;\n                    path.addData(cmd, cpx, cpy);\n                    subpathX = cpx;\n                    subpathY = cpy;\n                    cmdStr = 'l';\n                    break;\n                case 'M':\n                    cpx = p[off++];\n                    cpy = p[off++];\n                    cmd = CMD.M;\n                    path.addData(cmd, cpx, cpy);\n                    subpathX = cpx;\n                    subpathY = cpy;\n                    cmdStr = 'L';\n                    break;\n                case 'h':\n                    cpx += p[off++];\n                    cmd = CMD.L;\n                    path.addData(cmd, cpx, cpy);\n                    break;\n                case 'H':\n                    cpx = p[off++];\n                    cmd = CMD.L;\n                    path.addData(cmd, cpx, cpy);\n                    break;\n                case 'v':\n                    cpy += p[off++];\n                    cmd = CMD.L;\n                    path.addData(cmd, cpx, cpy);\n                    break;\n                case 'V':\n                    cpy = p[off++];\n                    cmd = CMD.L;\n                    path.addData(cmd, cpx, cpy);\n                    break;\n                case 'C':\n                    cmd = CMD.C;\n                    path.addData(cmd, p[off++], p[off++], p[off++], p[off++], p[off++], p[off++]);\n                    cpx = p[off - 2];\n                    cpy = p[off - 1];\n                    break;\n                case 'c':\n                    cmd = CMD.C;\n                    path.addData(cmd, p[off++] + cpx, p[off++] + cpy, p[off++] + cpx, p[off++] + cpy, p[off++] + cpx, p[off++] + cpy);\n                    cpx += p[off - 2];\n                    cpy += p[off - 1];\n                    break;\n                case 'S':\n                    ctlPtx = cpx;\n                    ctlPty = cpy;\n                    len = path.len();\n                    pathData = path.data;\n                    if (prevCmd === CMD.C) {\n                        ctlPtx += cpx - pathData[len - 4];\n                        ctlPty += cpy - pathData[len - 3];\n                    }\n                    cmd = CMD.C;\n                    x1 = p[off++];\n                    y1 = p[off++];\n                    cpx = p[off++];\n                    cpy = p[off++];\n                    path.addData(cmd, ctlPtx, ctlPty, x1, y1, cpx, cpy);\n                    break;\n                case 's':\n                    ctlPtx = cpx;\n                    ctlPty = cpy;\n                    len = path.len();\n                    pathData = path.data;\n                    if (prevCmd === CMD.C) {\n                        ctlPtx += cpx - pathData[len - 4];\n                        ctlPty += cpy - pathData[len - 3];\n                    }\n                    cmd = CMD.C;\n                    x1 = cpx + p[off++];\n                    y1 = cpy + p[off++];\n                    cpx += p[off++];\n                    cpy += p[off++];\n                    path.addData(cmd, ctlPtx, ctlPty, x1, y1, cpx, cpy);\n                    break;\n                case 'Q':\n                    x1 = p[off++];\n                    y1 = p[off++];\n                    cpx = p[off++];\n                    cpy = p[off++];\n                    cmd = CMD.Q;\n                    path.addData(cmd, x1, y1, cpx, cpy);\n                    break;\n                case 'q':\n                    x1 = p[off++] + cpx;\n                    y1 = p[off++] + cpy;\n                    cpx += p[off++];\n                    cpy += p[off++];\n                    cmd = CMD.Q;\n                    path.addData(cmd, x1, y1, cpx, cpy);\n                    break;\n                case 'T':\n                    ctlPtx = cpx;\n                    ctlPty = cpy;\n                    len = path.len();\n                    pathData = path.data;\n                    if (prevCmd === CMD.Q) {\n                        ctlPtx += cpx - pathData[len - 4];\n                        ctlPty += cpy - pathData[len - 3];\n                    }\n                    cpx = p[off++];\n                    cpy = p[off++];\n                    cmd = CMD.Q;\n                    path.addData(cmd, ctlPtx, ctlPty, cpx, cpy);\n                    break;\n                case 't':\n                    ctlPtx = cpx;\n                    ctlPty = cpy;\n                    len = path.len();\n                    pathData = path.data;\n                    if (prevCmd === CMD.Q) {\n                        ctlPtx += cpx - pathData[len - 4];\n                        ctlPty += cpy - pathData[len - 3];\n                    }\n                    cpx += p[off++];\n                    cpy += p[off++];\n                    cmd = CMD.Q;\n                    path.addData(cmd, ctlPtx, ctlPty, cpx, cpy);\n                    break;\n                case 'A':\n                    rx = p[off++];\n                    ry = p[off++];\n                    psi = p[off++];\n                    fa = p[off++];\n                    fs = p[off++];\n                    x1 = cpx, y1 = cpy;\n                    cpx = p[off++];\n                    cpy = p[off++];\n                    cmd = CMD.A;\n                    processArc(x1, y1, cpx, cpy, fa, fs, rx, ry, psi, cmd, path);\n                    break;\n                case 'a':\n                    rx = p[off++];\n                    ry = p[off++];\n                    psi = p[off++];\n                    fa = p[off++];\n                    fs = p[off++];\n                    x1 = cpx, y1 = cpy;\n                    cpx += p[off++];\n                    cpy += p[off++];\n                    cmd = CMD.A;\n                    processArc(x1, y1, cpx, cpy, fa, fs, rx, ry, psi, cmd, path);\n                    break;\n            }\n        }\n        if (cmdStr === 'z' || cmdStr === 'Z') {\n            cmd = CMD.Z;\n            path.addData(cmd);\n            cpx = subpathX;\n            cpy = subpathY;\n        }\n        prevCmd = cmd;\n    }\n    path.toStatic();\n    return path;\n}\nvar SVGPath = (function (_super) {\n    __extends(SVGPath, _super);\n    function SVGPath() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SVGPath.prototype.applyTransform = function (m) { };\n    return SVGPath;\n}(Path));\nfunction isPathProxy(path) {\n    return path.setData != null;\n}\nfunction createPathOptions(str, opts) {\n    var pathProxy = createPathProxyFromString(str);\n    var innerOpts = extend({}, opts);\n    innerOpts.buildPath = function (path) {\n        if (isPathProxy(path)) {\n            path.setData(pathProxy.data);\n            var ctx = path.getContext();\n            if (ctx) {\n                path.rebuildPath(ctx, 1);\n            }\n        }\n        else {\n            var ctx = path;\n            pathProxy.rebuildPath(ctx, 1);\n        }\n    };\n    innerOpts.applyTransform = function (m) {\n        transformPath(pathProxy, m);\n        this.dirtyShape();\n    };\n    return innerOpts;\n}\nexport function createFromString(str, opts) {\n    return new SVGPath(createPathOptions(str, opts));\n}\nexport function extendFromString(str, defaultOpts) {\n    var innerOpts = createPathOptions(str, defaultOpts);\n    var Sub = (function (_super) {\n        __extends(Sub, _super);\n        function Sub(opts) {\n            var _this = _super.call(this, opts) || this;\n            _this.applyTransform = innerOpts.applyTransform;\n            _this.buildPath = innerOpts.buildPath;\n            return _this;\n        }\n        return Sub;\n    }(SVGPath));\n    return Sub;\n}\nexport function mergePath(pathEls, opts) {\n    var pathList = [];\n    var len = pathEls.length;\n    for (var i = 0; i < len; i++) {\n        var pathEl = pathEls[i];\n        pathList.push(pathEl.getUpdatedPathProxy(true));\n    }\n    var pathBundle = new Path(opts);\n    pathBundle.createPathProxy();\n    pathBundle.buildPath = function (path) {\n        if (isPathProxy(path)) {\n            path.appendPath(pathList);\n            var ctx = path.getContext();\n            if (ctx) {\n                path.rebuildPath(ctx, 1);\n            }\n        }\n    };\n    return pathBundle;\n}\nexport function clonePath(sourcePath, opts) {\n    opts = opts || {};\n    var path = new Path();\n    if (sourcePath.shape) {\n        path.setShape(sourcePath.shape);\n    }\n    path.setStyle(sourcePath.style);\n    if (opts.bakeTransform) {\n        transformPath(path.path, sourcePath.getComputedTransform());\n    }\n    else {\n        if (opts.toLocal) {\n            path.setLocalTransform(sourcePath.getComputedTransform());\n        }\n        else {\n            path.copyTransform(sourcePath);\n        }\n    }\n    path.buildPath = sourcePath.buildPath;\n    path.applyTransform = path.applyTransform;\n    path.z = sourcePath.z;\n    path.z2 = sourcePath.z2;\n    path.zlevel = sourcePath.zlevel;\n    return path;\n}\n","function isSafeNum(num) {\n    return isFinite(num);\n}\nexport function createLinearGradient(ctx, obj, rect) {\n    var x = obj.x == null ? 0 : obj.x;\n    var x2 = obj.x2 == null ? 1 : obj.x2;\n    var y = obj.y == null ? 0 : obj.y;\n    var y2 = obj.y2 == null ? 0 : obj.y2;\n    if (!obj.global) {\n        x = x * rect.width + rect.x;\n        x2 = x2 * rect.width + rect.x;\n        y = y * rect.height + rect.y;\n        y2 = y2 * rect.height + rect.y;\n    }\n    x = isSafeNum(x) ? x : 0;\n    x2 = isSafeNum(x2) ? x2 : 1;\n    y = isSafeNum(y) ? y : 0;\n    y2 = isSafeNum(y2) ? y2 : 0;\n    var canvasGradient = ctx.createLinearGradient(x, y, x2, y2);\n    return canvasGradient;\n}\nexport function createRadialGradient(ctx, obj, rect) {\n    var width = rect.width;\n    var height = rect.height;\n    var min = Math.min(width, height);\n    var x = obj.x == null ? 0.5 : obj.x;\n    var y = obj.y == null ? 0.5 : obj.y;\n    var r = obj.r == null ? 0.5 : obj.r;\n    if (!obj.global) {\n        x = x * width + rect.x;\n        y = y * height + rect.y;\n        r = r * min;\n    }\n    x = isSafeNum(x) ? x : 0.5;\n    y = isSafeNum(y) ? y : 0.5;\n    r = r >= 0 && isSafeNum(r) ? r : 0.5;\n    var canvasGradient = ctx.createRadialGradient(x, y, 0, x, y, r);\n    return canvasGradient;\n}\nexport function getCanvasGradient(ctx, obj, rect) {\n    var canvasGradient = obj.type === 'radial'\n        ? createRadialGradient(ctx, obj, rect)\n        : createLinearGradient(ctx, obj, rect);\n    var colorStops = obj.colorStops;\n    for (var i = 0; i < colorStops.length; i++) {\n        canvasGradient.addColorStop(colorStops[i].offset, colorStops[i].color);\n    }\n    return canvasGradient;\n}\nexport function isClipPathChanged(clipPaths, prevClipPaths) {\n    if (clipPaths === prevClipPaths || (!clipPaths && !prevClipPaths)) {\n        return false;\n    }\n    if (!clipPaths || !prevClipPaths || (clipPaths.length !== prevClipPaths.length)) {\n        return true;\n    }\n    for (var i = 0; i < clipPaths.length; i++) {\n        if (clipPaths[i] !== prevClipPaths[i]) {\n            return true;\n        }\n    }\n    return false;\n}\nfunction parseInt10(val) {\n    return parseInt(val, 10);\n}\nexport function getSize(root, whIdx, opts) {\n    var wh = ['width', 'height'][whIdx];\n    var cwh = ['clientWidth', 'clientHeight'][whIdx];\n    var plt = ['paddingLeft', 'paddingTop'][whIdx];\n    var prb = ['paddingRight', 'paddingBottom'][whIdx];\n    if (opts[wh] != null && opts[wh] !== 'auto') {\n        return parseFloat(opts[wh]);\n    }\n    var stl = document.defaultView.getComputedStyle(root);\n    return ((root[cwh] || parseInt10(stl[wh]) || parseInt10(root.style[wh]))\n        - (parseInt10(stl[plt]) || 0)\n        - (parseInt10(stl[prb]) || 0)) | 0;\n}\n","import { __extends } from \"tslib\";\nimport Displayble from './Displayable.js';\nimport BoundingRect from '../core/BoundingRect.js';\nvar m = [];\nvar IncrementalDisplayable = (function (_super) {\n    __extends(IncrementalDisplayable, _super);\n    function IncrementalDisplayable() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.notClear = true;\n        _this.incremental = true;\n        _this._displayables = [];\n        _this._temporaryDisplayables = [];\n        _this._cursor = 0;\n        return _this;\n    }\n    IncrementalDisplayable.prototype.traverse = function (cb, context) {\n        cb.call(context, this);\n    };\n    IncrementalDisplayable.prototype.useStyle = function () {\n        this.style = {};\n    };\n    IncrementalDisplayable.prototype.getCursor = function () {\n        return this._cursor;\n    };\n    IncrementalDisplayable.prototype.innerAfterBrush = function () {\n        this._cursor = this._displayables.length;\n    };\n    IncrementalDisplayable.prototype.clearDisplaybles = function () {\n        this._displayables = [];\n        this._temporaryDisplayables = [];\n        this._cursor = 0;\n        this.markRedraw();\n        this.notClear = false;\n    };\n    IncrementalDisplayable.prototype.clearTemporalDisplayables = function () {\n        this._temporaryDisplayables = [];\n    };\n    IncrementalDisplayable.prototype.addDisplayable = function (displayable, notPersistent) {\n        if (notPersistent) {\n            this._temporaryDisplayables.push(displayable);\n        }\n        else {\n            this._displayables.push(displayable);\n        }\n        this.markRedraw();\n    };\n    IncrementalDisplayable.prototype.addDisplayables = function (displayables, notPersistent) {\n        notPersistent = notPersistent || false;\n        for (var i = 0; i < displayables.length; i++) {\n            this.addDisplayable(displayables[i], notPersistent);\n        }\n    };\n    IncrementalDisplayable.prototype.getDisplayables = function () {\n        return this._displayables;\n    };\n    IncrementalDisplayable.prototype.getTemporalDisplayables = function () {\n        return this._temporaryDisplayables;\n    };\n    IncrementalDisplayable.prototype.eachPendingDisplayable = function (cb) {\n        for (var i = this._cursor; i < this._displayables.length; i++) {\n            cb && cb(this._displayables[i]);\n        }\n        for (var i = 0; i < this._temporaryDisplayables.length; i++) {\n            cb && cb(this._temporaryDisplayables[i]);\n        }\n    };\n    IncrementalDisplayable.prototype.update = function () {\n        this.updateTransform();\n        for (var i = this._cursor; i < this._displayables.length; i++) {\n            var displayable = this._displayables[i];\n            displayable.parent = this;\n            displayable.update();\n            displayable.parent = null;\n        }\n        for (var i = 0; i < this._temporaryDisplayables.length; i++) {\n            var displayable = this._temporaryDisplayables[i];\n            displayable.parent = this;\n            displayable.update();\n            displayable.parent = null;\n        }\n    };\n    IncrementalDisplayable.prototype.getBoundingRect = function () {\n        if (!this._rect) {\n            var rect = new BoundingRect(Infinity, Infinity, -Infinity, -Infinity);\n            for (var i = 0; i < this._displayables.length; i++) {\n                var displayable = this._displayables[i];\n                var childRect = displayable.getBoundingRect().clone();\n                if (displayable.needLocalTransform()) {\n                    childRect.applyTransform(displayable.getLocalTransform(m));\n                }\n                rect.union(childRect);\n            }\n            this._rect = rect;\n        }\n        return this._rect;\n    };\n    IncrementalDisplayable.prototype.contain = function (x, y) {\n        var localPos = this.transformCoordToLocal(x, y);\n        var rect = this.getBoundingRect();\n        if (rect.contain(localPos[0], localPos[1])) {\n            for (var i = 0; i < this._displayables.length; i++) {\n                var displayable = this._displayables[i];\n                if (displayable.contain(x, y)) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n    return IncrementalDisplayable;\n}(Displayble));\nexport default IncrementalDisplayable;\n","export function create(x, y) {\n    if (x == null) {\n        x = 0;\n    }\n    if (y == null) {\n        y = 0;\n    }\n    return [x, y];\n}\nexport function copy(out, v) {\n    out[0] = v[0];\n    out[1] = v[1];\n    return out;\n}\nexport function clone(v) {\n    return [v[0], v[1]];\n}\nexport function set(out, a, b) {\n    out[0] = a;\n    out[1] = b;\n    return out;\n}\nexport function add(out, v1, v2) {\n    out[0] = v1[0] + v2[0];\n    out[1] = v1[1] + v2[1];\n    return out;\n}\nexport function scaleAndAdd(out, v1, v2, a) {\n    out[0] = v1[0] + v2[0] * a;\n    out[1] = v1[1] + v2[1] * a;\n    return out;\n}\nexport function sub(out, v1, v2) {\n    out[0] = v1[0] - v2[0];\n    out[1] = v1[1] - v2[1];\n    return out;\n}\nexport function len(v) {\n    return Math.sqrt(lenSquare(v));\n}\nexport var length = len;\nexport function lenSquare(v) {\n    return v[0] * v[0] + v[1] * v[1];\n}\nexport var lengthSquare = lenSquare;\nexport function mul(out, v1, v2) {\n    out[0] = v1[0] * v2[0];\n    out[1] = v1[1] * v2[1];\n    return out;\n}\nexport function div(out, v1, v2) {\n    out[0] = v1[0] / v2[0];\n    out[1] = v1[1] / v2[1];\n    return out;\n}\nexport function dot(v1, v2) {\n    return v1[0] * v2[0] + v1[1] * v2[1];\n}\nexport function scale(out, v, s) {\n    out[0] = v[0] * s;\n    out[1] = v[1] * s;\n    return out;\n}\nexport function normalize(out, v) {\n    var d = len(v);\n    if (d === 0) {\n        out[0] = 0;\n        out[1] = 0;\n    }\n    else {\n        out[0] = v[0] / d;\n        out[1] = v[1] / d;\n    }\n    return out;\n}\nexport function distance(v1, v2) {\n    return Math.sqrt((v1[0] - v2[0]) * (v1[0] - v2[0])\n        + (v1[1] - v2[1]) * (v1[1] - v2[1]));\n}\nexport var dist = distance;\nexport function distanceSquare(v1, v2) {\n    return (v1[0] - v2[0]) * (v1[0] - v2[0])\n        + (v1[1] - v2[1]) * (v1[1] - v2[1]);\n}\nexport var distSquare = distanceSquare;\nexport function negate(out, v) {\n    out[0] = -v[0];\n    out[1] = -v[1];\n    return out;\n}\nexport function lerp(out, v1, v2, t) {\n    out[0] = v1[0] + t * (v2[0] - v1[0]);\n    out[1] = v1[1] + t * (v2[1] - v1[1]);\n    return out;\n}\nexport function applyTransform(out, v, m) {\n    var x = v[0];\n    var y = v[1];\n    out[0] = m[0] * x + m[2] * y + m[4];\n    out[1] = m[1] * x + m[3] * y + m[5];\n    return out;\n}\nexport function min(out, v1, v2) {\n    out[0] = Math.min(v1[0], v2[0]);\n    out[1] = Math.min(v1[1], v2[1]);\n    return out;\n}\nexport function max(out, v1, v2) {\n    out[0] = Math.max(v1[0], v2[0]);\n    out[1] = Math.max(v1[1], v2[1]);\n    return out;\n}\n","import LRU from '../core/LRU.js';\nvar kCSSColorTable = {\n    'transparent': [0, 0, 0, 0], 'aliceblue': [240, 248, 255, 1],\n    'antiquewhite': [250, 235, 215, 1], 'aqua': [0, 255, 255, 1],\n    'aquamarine': [127, 255, 212, 1], 'azure': [240, 255, 255, 1],\n    'beige': [245, 245, 220, 1], 'bisque': [255, 228, 196, 1],\n    'black': [0, 0, 0, 1], 'blanchedalmond': [255, 235, 205, 1],\n    'blue': [0, 0, 255, 1], 'blueviolet': [138, 43, 226, 1],\n    'brown': [165, 42, 42, 1], 'burlywood': [222, 184, 135, 1],\n    'cadetblue': [95, 158, 160, 1], 'chartreuse': [127, 255, 0, 1],\n    'chocolate': [210, 105, 30, 1], 'coral': [255, 127, 80, 1],\n    'cornflowerblue': [100, 149, 237, 1], 'cornsilk': [255, 248, 220, 1],\n    'crimson': [220, 20, 60, 1], 'cyan': [0, 255, 255, 1],\n    'darkblue': [0, 0, 139, 1], 'darkcyan': [0, 139, 139, 1],\n    'darkgoldenrod': [184, 134, 11, 1], 'darkgray': [169, 169, 169, 1],\n    'darkgreen': [0, 100, 0, 1], 'darkgrey': [169, 169, 169, 1],\n    'darkkhaki': [189, 183, 107, 1], 'darkmagenta': [139, 0, 139, 1],\n    'darkolivegreen': [85, 107, 47, 1], 'darkorange': [255, 140, 0, 1],\n    'darkorchid': [153, 50, 204, 1], 'darkred': [139, 0, 0, 1],\n    'darksalmon': [233, 150, 122, 1], 'darkseagreen': [143, 188, 143, 1],\n    'darkslateblue': [72, 61, 139, 1], 'darkslategray': [47, 79, 79, 1],\n    'darkslategrey': [47, 79, 79, 1], 'darkturquoise': [0, 206, 209, 1],\n    'darkviolet': [148, 0, 211, 1], 'deeppink': [255, 20, 147, 1],\n    'deepskyblue': [0, 191, 255, 1], 'dimgray': [105, 105, 105, 1],\n    'dimgrey': [105, 105, 105, 1], 'dodgerblue': [30, 144, 255, 1],\n    'firebrick': [178, 34, 34, 1], 'floralwhite': [255, 250, 240, 1],\n    'forestgreen': [34, 139, 34, 1], 'fuchsia': [255, 0, 255, 1],\n    'gainsboro': [220, 220, 220, 1], 'ghostwhite': [248, 248, 255, 1],\n    'gold': [255, 215, 0, 1], 'goldenrod': [218, 165, 32, 1],\n    'gray': [128, 128, 128, 1], 'green': [0, 128, 0, 1],\n    'greenyellow': [173, 255, 47, 1], 'grey': [128, 128, 128, 1],\n    'honeydew': [240, 255, 240, 1], 'hotpink': [255, 105, 180, 1],\n    'indianred': [205, 92, 92, 1], 'indigo': [75, 0, 130, 1],\n    'ivory': [255, 255, 240, 1], 'khaki': [240, 230, 140, 1],\n    'lavender': [230, 230, 250, 1], 'lavenderblush': [255, 240, 245, 1],\n    'lawngreen': [124, 252, 0, 1], 'lemonchiffon': [255, 250, 205, 1],\n    'lightblue': [173, 216, 230, 1], 'lightcoral': [240, 128, 128, 1],\n    'lightcyan': [224, 255, 255, 1], 'lightgoldenrodyellow': [250, 250, 210, 1],\n    'lightgray': [211, 211, 211, 1], 'lightgreen': [144, 238, 144, 1],\n    'lightgrey': [211, 211, 211, 1], 'lightpink': [255, 182, 193, 1],\n    'lightsalmon': [255, 160, 122, 1], 'lightseagreen': [32, 178, 170, 1],\n    'lightskyblue': [135, 206, 250, 1], 'lightslategray': [119, 136, 153, 1],\n    'lightslategrey': [119, 136, 153, 1], 'lightsteelblue': [176, 196, 222, 1],\n    'lightyellow': [255, 255, 224, 1], 'lime': [0, 255, 0, 1],\n    'limegreen': [50, 205, 50, 1], 'linen': [250, 240, 230, 1],\n    'magenta': [255, 0, 255, 1], 'maroon': [128, 0, 0, 1],\n    'mediumaquamarine': [102, 205, 170, 1], 'mediumblue': [0, 0, 205, 1],\n    'mediumorchid': [186, 85, 211, 1], 'mediumpurple': [147, 112, 219, 1],\n    'mediumseagreen': [60, 179, 113, 1], 'mediumslateblue': [123, 104, 238, 1],\n    'mediumspringgreen': [0, 250, 154, 1], 'mediumturquoise': [72, 209, 204, 1],\n    'mediumvioletred': [199, 21, 133, 1], 'midnightblue': [25, 25, 112, 1],\n    'mintcream': [245, 255, 250, 1], 'mistyrose': [255, 228, 225, 1],\n    'moccasin': [255, 228, 181, 1], 'navajowhite': [255, 222, 173, 1],\n    'navy': [0, 0, 128, 1], 'oldlace': [253, 245, 230, 1],\n    'olive': [128, 128, 0, 1], 'olivedrab': [107, 142, 35, 1],\n    'orange': [255, 165, 0, 1], 'orangered': [255, 69, 0, 1],\n    'orchid': [218, 112, 214, 1], 'palegoldenrod': [238, 232, 170, 1],\n    'palegreen': [152, 251, 152, 1], 'paleturquoise': [175, 238, 238, 1],\n    'palevioletred': [219, 112, 147, 1], 'papayawhip': [255, 239, 213, 1],\n    'peachpuff': [255, 218, 185, 1], 'peru': [205, 133, 63, 1],\n    'pink': [255, 192, 203, 1], 'plum': [221, 160, 221, 1],\n    'powderblue': [176, 224, 230, 1], 'purple': [128, 0, 128, 1],\n    'red': [255, 0, 0, 1], 'rosybrown': [188, 143, 143, 1],\n    'royalblue': [65, 105, 225, 1], 'saddlebrown': [139, 69, 19, 1],\n    'salmon': [250, 128, 114, 1], 'sandybrown': [244, 164, 96, 1],\n    'seagreen': [46, 139, 87, 1], 'seashell': [255, 245, 238, 1],\n    'sienna': [160, 82, 45, 1], 'silver': [192, 192, 192, 1],\n    'skyblue': [135, 206, 235, 1], 'slateblue': [106, 90, 205, 1],\n    'slategray': [112, 128, 144, 1], 'slategrey': [112, 128, 144, 1],\n    'snow': [255, 250, 250, 1], 'springgreen': [0, 255, 127, 1],\n    'steelblue': [70, 130, 180, 1], 'tan': [210, 180, 140, 1],\n    'teal': [0, 128, 128, 1], 'thistle': [216, 191, 216, 1],\n    'tomato': [255, 99, 71, 1], 'turquoise': [64, 224, 208, 1],\n    'violet': [238, 130, 238, 1], 'wheat': [245, 222, 179, 1],\n    'white': [255, 255, 255, 1], 'whitesmoke': [245, 245, 245, 1],\n    'yellow': [255, 255, 0, 1], 'yellowgreen': [154, 205, 50, 1]\n};\nfunction clampCssByte(i) {\n    i = Math.round(i);\n    return i < 0 ? 0 : i > 255 ? 255 : i;\n}\nfunction clampCssAngle(i) {\n    i = Math.round(i);\n    return i < 0 ? 0 : i > 360 ? 360 : i;\n}\nfunction clampCssFloat(f) {\n    return f < 0 ? 0 : f > 1 ? 1 : f;\n}\nfunction parseCssInt(val) {\n    var str = val;\n    if (str.length && str.charAt(str.length - 1) === '%') {\n        return clampCssByte(parseFloat(str) / 100 * 255);\n    }\n    return clampCssByte(parseInt(str, 10));\n}\nfunction parseCssFloat(val) {\n    var str = val;\n    if (str.length && str.charAt(str.length - 1) === '%') {\n        return clampCssFloat(parseFloat(str) / 100);\n    }\n    return clampCssFloat(parseFloat(str));\n}\nfunction cssHueToRgb(m1, m2, h) {\n    if (h < 0) {\n        h += 1;\n    }\n    else if (h > 1) {\n        h -= 1;\n    }\n    if (h * 6 < 1) {\n        return m1 + (m2 - m1) * h * 6;\n    }\n    if (h * 2 < 1) {\n        return m2;\n    }\n    if (h * 3 < 2) {\n        return m1 + (m2 - m1) * (2 / 3 - h) * 6;\n    }\n    return m1;\n}\nfunction lerpNumber(a, b, p) {\n    return a + (b - a) * p;\n}\nfunction setRgba(out, r, g, b, a) {\n    out[0] = r;\n    out[1] = g;\n    out[2] = b;\n    out[3] = a;\n    return out;\n}\nfunction copyRgba(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    return out;\n}\nvar colorCache = new LRU(20);\nvar lastRemovedArr = null;\nfunction putToCache(colorStr, rgbaArr) {\n    if (lastRemovedArr) {\n        copyRgba(lastRemovedArr, rgbaArr);\n    }\n    lastRemovedArr = colorCache.put(colorStr, lastRemovedArr || (rgbaArr.slice()));\n}\nexport function parse(colorStr, rgbaArr) {\n    if (!colorStr) {\n        return;\n    }\n    rgbaArr = rgbaArr || [];\n    var cached = colorCache.get(colorStr);\n    if (cached) {\n        return copyRgba(rgbaArr, cached);\n    }\n    colorStr = colorStr + '';\n    var str = colorStr.replace(/ /g, '').toLowerCase();\n    if (str in kCSSColorTable) {\n        copyRgba(rgbaArr, kCSSColorTable[str]);\n        putToCache(colorStr, rgbaArr);\n        return rgbaArr;\n    }\n    var strLen = str.length;\n    if (str.charAt(0) === '#') {\n        if (strLen === 4 || strLen === 5) {\n            var iv = parseInt(str.slice(1, 4), 16);\n            if (!(iv >= 0 && iv <= 0xfff)) {\n                setRgba(rgbaArr, 0, 0, 0, 1);\n                return;\n            }\n            setRgba(rgbaArr, ((iv & 0xf00) >> 4) | ((iv & 0xf00) >> 8), (iv & 0xf0) | ((iv & 0xf0) >> 4), (iv & 0xf) | ((iv & 0xf) << 4), strLen === 5 ? parseInt(str.slice(4), 16) / 0xf : 1);\n            putToCache(colorStr, rgbaArr);\n            return rgbaArr;\n        }\n        else if (strLen === 7 || strLen === 9) {\n            var iv = parseInt(str.slice(1, 7), 16);\n            if (!(iv >= 0 && iv <= 0xffffff)) {\n                setRgba(rgbaArr, 0, 0, 0, 1);\n                return;\n            }\n            setRgba(rgbaArr, (iv & 0xff0000) >> 16, (iv & 0xff00) >> 8, iv & 0xff, strLen === 9 ? parseInt(str.slice(7), 16) / 0xff : 1);\n            putToCache(colorStr, rgbaArr);\n            return rgbaArr;\n        }\n        return;\n    }\n    var op = str.indexOf('(');\n    var ep = str.indexOf(')');\n    if (op !== -1 && ep + 1 === strLen) {\n        var fname = str.substr(0, op);\n        var params = str.substr(op + 1, ep - (op + 1)).split(',');\n        var alpha = 1;\n        switch (fname) {\n            case 'rgba':\n                if (params.length !== 4) {\n                    return params.length === 3\n                        ? setRgba(rgbaArr, +params[0], +params[1], +params[2], 1)\n                        : setRgba(rgbaArr, 0, 0, 0, 1);\n                }\n                alpha = parseCssFloat(params.pop());\n            case 'rgb':\n                if (params.length !== 3) {\n                    setRgba(rgbaArr, 0, 0, 0, 1);\n                    return;\n                }\n                setRgba(rgbaArr, parseCssInt(params[0]), parseCssInt(params[1]), parseCssInt(params[2]), alpha);\n                putToCache(colorStr, rgbaArr);\n                return rgbaArr;\n            case 'hsla':\n                if (params.length !== 4) {\n                    setRgba(rgbaArr, 0, 0, 0, 1);\n                    return;\n                }\n                params[3] = parseCssFloat(params[3]);\n                hsla2rgba(params, rgbaArr);\n                putToCache(colorStr, rgbaArr);\n                return rgbaArr;\n            case 'hsl':\n                if (params.length !== 3) {\n                    setRgba(rgbaArr, 0, 0, 0, 1);\n                    return;\n                }\n                hsla2rgba(params, rgbaArr);\n                putToCache(colorStr, rgbaArr);\n                return rgbaArr;\n            default:\n                return;\n        }\n    }\n    setRgba(rgbaArr, 0, 0, 0, 1);\n    return;\n}\nfunction hsla2rgba(hsla, rgba) {\n    var h = (((parseFloat(hsla[0]) % 360) + 360) % 360) / 360;\n    var s = parseCssFloat(hsla[1]);\n    var l = parseCssFloat(hsla[2]);\n    var m2 = l <= 0.5 ? l * (s + 1) : l + s - l * s;\n    var m1 = l * 2 - m2;\n    rgba = rgba || [];\n    setRgba(rgba, clampCssByte(cssHueToRgb(m1, m2, h + 1 / 3) * 255), clampCssByte(cssHueToRgb(m1, m2, h) * 255), clampCssByte(cssHueToRgb(m1, m2, h - 1 / 3) * 255), 1);\n    if (hsla.length === 4) {\n        rgba[3] = hsla[3];\n    }\n    return rgba;\n}\nfunction rgba2hsla(rgba) {\n    if (!rgba) {\n        return;\n    }\n    var R = rgba[0] / 255;\n    var G = rgba[1] / 255;\n    var B = rgba[2] / 255;\n    var vMin = Math.min(R, G, B);\n    var vMax = Math.max(R, G, B);\n    var delta = vMax - vMin;\n    var L = (vMax + vMin) / 2;\n    var H;\n    var S;\n    if (delta === 0) {\n        H = 0;\n        S = 0;\n    }\n    else {\n        if (L < 0.5) {\n            S = delta / (vMax + vMin);\n        }\n        else {\n            S = delta / (2 - vMax - vMin);\n        }\n        var deltaR = (((vMax - R) / 6) + (delta / 2)) / delta;\n        var deltaG = (((vMax - G) / 6) + (delta / 2)) / delta;\n        var deltaB = (((vMax - B) / 6) + (delta / 2)) / delta;\n        if (R === vMax) {\n            H = deltaB - deltaG;\n        }\n        else if (G === vMax) {\n            H = (1 / 3) + deltaR - deltaB;\n        }\n        else if (B === vMax) {\n            H = (2 / 3) + deltaG - deltaR;\n        }\n        if (H < 0) {\n            H += 1;\n        }\n        if (H > 1) {\n            H -= 1;\n        }\n    }\n    var hsla = [H * 360, S, L];\n    if (rgba[3] != null) {\n        hsla.push(rgba[3]);\n    }\n    return hsla;\n}\nexport function lift(color, level) {\n    var colorArr = parse(color);\n    if (colorArr) {\n        for (var i = 0; i < 3; i++) {\n            if (level < 0) {\n                colorArr[i] = colorArr[i] * (1 - level) | 0;\n            }\n            else {\n                colorArr[i] = ((255 - colorArr[i]) * level + colorArr[i]) | 0;\n            }\n            if (colorArr[i] > 255) {\n                colorArr[i] = 255;\n            }\n            else if (colorArr[i] < 0) {\n                colorArr[i] = 0;\n            }\n        }\n        return stringify(colorArr, colorArr.length === 4 ? 'rgba' : 'rgb');\n    }\n}\nexport function toHex(color) {\n    var colorArr = parse(color);\n    if (colorArr) {\n        return ((1 << 24) + (colorArr[0] << 16) + (colorArr[1] << 8) + (+colorArr[2])).toString(16).slice(1);\n    }\n}\nexport function fastLerp(normalizedValue, colors, out) {\n    if (!(colors && colors.length)\n        || !(normalizedValue >= 0 && normalizedValue <= 1)) {\n        return;\n    }\n    out = out || [];\n    var value = normalizedValue * (colors.length - 1);\n    var leftIndex = Math.floor(value);\n    var rightIndex = Math.ceil(value);\n    var leftColor = colors[leftIndex];\n    var rightColor = colors[rightIndex];\n    var dv = value - leftIndex;\n    out[0] = clampCssByte(lerpNumber(leftColor[0], rightColor[0], dv));\n    out[1] = clampCssByte(lerpNumber(leftColor[1], rightColor[1], dv));\n    out[2] = clampCssByte(lerpNumber(leftColor[2], rightColor[2], dv));\n    out[3] = clampCssFloat(lerpNumber(leftColor[3], rightColor[3], dv));\n    return out;\n}\nexport var fastMapToColor = fastLerp;\nexport function lerp(normalizedValue, colors, fullOutput) {\n    if (!(colors && colors.length)\n        || !(normalizedValue >= 0 && normalizedValue <= 1)) {\n        return;\n    }\n    var value = normalizedValue * (colors.length - 1);\n    var leftIndex = Math.floor(value);\n    var rightIndex = Math.ceil(value);\n    var leftColor = parse(colors[leftIndex]);\n    var rightColor = parse(colors[rightIndex]);\n    var dv = value - leftIndex;\n    var color = stringify([\n        clampCssByte(lerpNumber(leftColor[0], rightColor[0], dv)),\n        clampCssByte(lerpNumber(leftColor[1], rightColor[1], dv)),\n        clampCssByte(lerpNumber(leftColor[2], rightColor[2], dv)),\n        clampCssFloat(lerpNumber(leftColor[3], rightColor[3], dv))\n    ], 'rgba');\n    return fullOutput\n        ? {\n            color: color,\n            leftIndex: leftIndex,\n            rightIndex: rightIndex,\n            value: value\n        }\n        : color;\n}\nexport var mapToColor = lerp;\nexport function modifyHSL(color, h, s, l) {\n    var colorArr = parse(color);\n    if (color) {\n        colorArr = rgba2hsla(colorArr);\n        h != null && (colorArr[0] = clampCssAngle(h));\n        s != null && (colorArr[1] = parseCssFloat(s));\n        l != null && (colorArr[2] = parseCssFloat(l));\n        return stringify(hsla2rgba(colorArr), 'rgba');\n    }\n}\nexport function modifyAlpha(color, alpha) {\n    var colorArr = parse(color);\n    if (colorArr && alpha != null) {\n        colorArr[3] = clampCssFloat(alpha);\n        return stringify(colorArr, 'rgba');\n    }\n}\nexport function stringify(arrColor, type) {\n    if (!arrColor || !arrColor.length) {\n        return;\n    }\n    var colorStr = arrColor[0] + ',' + arrColor[1] + ',' + arrColor[2];\n    if (type === 'rgba' || type === 'hsva' || type === 'hsla') {\n        colorStr += ',' + arrColor[3];\n    }\n    return type + '(' + colorStr + ')';\n}\nexport function lum(color, backgroundLum) {\n    var arr = parse(color);\n    return arr\n        ? (0.299 * arr[0] + 0.587 * arr[1] + 0.114 * arr[2]) * arr[3] / 255\n            + (1 - arr[3]) * backgroundLum\n        : 0;\n}\nexport function random() {\n    return stringify([\n        Math.round(Math.random() * 255),\n        Math.round(Math.random() * 255),\n        Math.round(Math.random() * 255)\n    ], 'rgb');\n}\n","var Gradient = (function () {\n    function Gradient(colorStops) {\n        this.colorStops = colorStops || [];\n    }\n    Gradient.prototype.addColorStop = function (offset, color) {\n        this.colorStops.push({\n            offset: offset,\n            color: color\n        });\n    };\n    return Gradient;\n}());\nexport default Gradient;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nvar RingShape = (function () {\n    function RingShape() {\n        this.cx = 0;\n        this.cy = 0;\n        this.r = 0;\n        this.r0 = 0;\n    }\n    return RingShape;\n}());\nexport { RingShape };\nvar Ring = (function (_super) {\n    __extends(Ring, _super);\n    function Ring(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Ring.prototype.getDefaultShape = function () {\n        return new RingShape();\n    };\n    Ring.prototype.buildPath = function (ctx, shape) {\n        var x = shape.cx;\n        var y = shape.cy;\n        var PI2 = Math.PI * 2;\n        ctx.moveTo(x + shape.r, y);\n        ctx.arc(x, y, shape.r, 0, PI2, false);\n        ctx.moveTo(x + shape.r0, y);\n        ctx.arc(x, y, shape.r0, 0, PI2, true);\n    };\n    return Ring;\n}(Path));\nRing.prototype.type = 'ring';\nexport default Ring;\n","var wmUniqueIndex = Math.round(Math.random() * 9);\nvar supportDefineProperty = typeof Object.defineProperty === 'function';\nvar WeakMap = (function () {\n    function WeakMap() {\n        this._id = '__ec_inner_' + wmUniqueIndex++;\n    }\n    WeakMap.prototype.get = function (key) {\n        return this._guard(key)[this._id];\n    };\n    WeakMap.prototype.set = function (key, value) {\n        var target = this._guard(key);\n        if (supportDefineProperty) {\n            Object.defineProperty(target, this._id, {\n                value: value,\n                enumerable: false,\n                configurable: true\n            });\n        }\n        else {\n            target[this._id] = value;\n        }\n        return this;\n    };\n    WeakMap.prototype[\"delete\"] = function (key) {\n        if (this.has(key)) {\n            delete this._guard(key)[this._id];\n            return true;\n        }\n        return false;\n    };\n    WeakMap.prototype.has = function (key) {\n        return !!this._guard(key)[this._id];\n    };\n    WeakMap.prototype._guard = function (key) {\n        if (key !== Object(key)) {\n            throw TypeError('Value of WeakMap is not a non-null object.');\n        }\n        return key;\n    };\n    return WeakMap;\n}());\nexport default WeakMap;\n","import { __extends } from \"tslib\";\nimport Gradient from './Gradient.js';\nvar LinearGradient = (function (_super) {\n    __extends(LinearGradient, _super);\n    function LinearGradient(x, y, x2, y2, colorStops, globalCoord) {\n        var _this = _super.call(this, colorStops) || this;\n        _this.x = x == null ? 0 : x;\n        _this.y = y == null ? 0 : y;\n        _this.x2 = x2 == null ? 1 : x2;\n        _this.y2 = y2 == null ? 0 : y2;\n        _this.type = 'linear';\n        _this.global = globalCoord || false;\n        return _this;\n    }\n    return LinearGradient;\n}(Gradient));\nexport default LinearGradient;\n;\n","import { create as v2Create, distSquare as v2DistSquare } from './vector.js';\nvar mathPow = Math.pow;\nvar mathSqrt = Math.sqrt;\nvar EPSILON = 1e-8;\nvar EPSILON_NUMERIC = 1e-4;\nvar THREE_SQRT = mathSqrt(3);\nvar ONE_THIRD = 1 / 3;\nvar _v0 = v2Create();\nvar _v1 = v2Create();\nvar _v2 = v2Create();\nfunction isAroundZero(val) {\n    return val > -EPSILON && val < EPSILON;\n}\nfunction isNotAroundZero(val) {\n    return val > EPSILON || val < -EPSILON;\n}\nexport function cubicAt(p0, p1, p2, p3, t) {\n    var onet = 1 - t;\n    return onet * onet * (onet * p0 + 3 * t * p1)\n        + t * t * (t * p3 + 3 * onet * p2);\n}\nexport function cubicDerivativeAt(p0, p1, p2, p3, t) {\n    var onet = 1 - t;\n    return 3 * (((p1 - p0) * onet + 2 * (p2 - p1) * t) * onet\n        + (p3 - p2) * t * t);\n}\nexport function cubicRootAt(p0, p1, p2, p3, val, roots) {\n    var a = p3 + 3 * (p1 - p2) - p0;\n    var b = 3 * (p2 - p1 * 2 + p0);\n    var c = 3 * (p1 - p0);\n    var d = p0 - val;\n    var A = b * b - 3 * a * c;\n    var B = b * c - 9 * a * d;\n    var C = c * c - 3 * b * d;\n    var n = 0;\n    if (isAroundZero(A) && isAroundZero(B)) {\n        if (isAroundZero(b)) {\n            roots[0] = 0;\n        }\n        else {\n            var t1 = -c / b;\n            if (t1 >= 0 && t1 <= 1) {\n                roots[n++] = t1;\n            }\n        }\n    }\n    else {\n        var disc = B * B - 4 * A * C;\n        if (isAroundZero(disc)) {\n            var K = B / A;\n            var t1 = -b / a + K;\n            var t2 = -K / 2;\n            if (t1 >= 0 && t1 <= 1) {\n                roots[n++] = t1;\n            }\n            if (t2 >= 0 && t2 <= 1) {\n                roots[n++] = t2;\n            }\n        }\n        else if (disc > 0) {\n            var discSqrt = mathSqrt(disc);\n            var Y1 = A * b + 1.5 * a * (-B + discSqrt);\n            var Y2 = A * b + 1.5 * a * (-B - discSqrt);\n            if (Y1 < 0) {\n                Y1 = -mathPow(-Y1, ONE_THIRD);\n            }\n            else {\n                Y1 = mathPow(Y1, ONE_THIRD);\n            }\n            if (Y2 < 0) {\n                Y2 = -mathPow(-Y2, ONE_THIRD);\n            }\n            else {\n                Y2 = mathPow(Y2, ONE_THIRD);\n            }\n            var t1 = (-b - (Y1 + Y2)) / (3 * a);\n            if (t1 >= 0 && t1 <= 1) {\n                roots[n++] = t1;\n            }\n        }\n        else {\n            var T = (2 * A * b - 3 * a * B) / (2 * mathSqrt(A * A * A));\n            var theta = Math.acos(T) / 3;\n            var ASqrt = mathSqrt(A);\n            var tmp = Math.cos(theta);\n            var t1 = (-b - 2 * ASqrt * tmp) / (3 * a);\n            var t2 = (-b + ASqrt * (tmp + THREE_SQRT * Math.sin(theta))) / (3 * a);\n            var t3 = (-b + ASqrt * (tmp - THREE_SQRT * Math.sin(theta))) / (3 * a);\n            if (t1 >= 0 && t1 <= 1) {\n                roots[n++] = t1;\n            }\n            if (t2 >= 0 && t2 <= 1) {\n                roots[n++] = t2;\n            }\n            if (t3 >= 0 && t3 <= 1) {\n                roots[n++] = t3;\n            }\n        }\n    }\n    return n;\n}\nexport function cubicExtrema(p0, p1, p2, p3, extrema) {\n    var b = 6 * p2 - 12 * p1 + 6 * p0;\n    var a = 9 * p1 + 3 * p3 - 3 * p0 - 9 * p2;\n    var c = 3 * p1 - 3 * p0;\n    var n = 0;\n    if (isAroundZero(a)) {\n        if (isNotAroundZero(b)) {\n            var t1 = -c / b;\n            if (t1 >= 0 && t1 <= 1) {\n                extrema[n++] = t1;\n            }\n        }\n    }\n    else {\n        var disc = b * b - 4 * a * c;\n        if (isAroundZero(disc)) {\n            extrema[0] = -b / (2 * a);\n        }\n        else if (disc > 0) {\n            var discSqrt = mathSqrt(disc);\n            var t1 = (-b + discSqrt) / (2 * a);\n            var t2 = (-b - discSqrt) / (2 * a);\n            if (t1 >= 0 && t1 <= 1) {\n                extrema[n++] = t1;\n            }\n            if (t2 >= 0 && t2 <= 1) {\n                extrema[n++] = t2;\n            }\n        }\n    }\n    return n;\n}\nexport function cubicSubdivide(p0, p1, p2, p3, t, out) {\n    var p01 = (p1 - p0) * t + p0;\n    var p12 = (p2 - p1) * t + p1;\n    var p23 = (p3 - p2) * t + p2;\n    var p012 = (p12 - p01) * t + p01;\n    var p123 = (p23 - p12) * t + p12;\n    var p0123 = (p123 - p012) * t + p012;\n    out[0] = p0;\n    out[1] = p01;\n    out[2] = p012;\n    out[3] = p0123;\n    out[4] = p0123;\n    out[5] = p123;\n    out[6] = p23;\n    out[7] = p3;\n}\nexport function cubicProjectPoint(x0, y0, x1, y1, x2, y2, x3, y3, x, y, out) {\n    var t;\n    var interval = 0.005;\n    var d = Infinity;\n    var prev;\n    var next;\n    var d1;\n    var d2;\n    _v0[0] = x;\n    _v0[1] = y;\n    for (var _t = 0; _t < 1; _t += 0.05) {\n        _v1[0] = cubicAt(x0, x1, x2, x3, _t);\n        _v1[1] = cubicAt(y0, y1, y2, y3, _t);\n        d1 = v2DistSquare(_v0, _v1);\n        if (d1 < d) {\n            t = _t;\n            d = d1;\n        }\n    }\n    d = Infinity;\n    for (var i = 0; i < 32; i++) {\n        if (interval < EPSILON_NUMERIC) {\n            break;\n        }\n        prev = t - interval;\n        next = t + interval;\n        _v1[0] = cubicAt(x0, x1, x2, x3, prev);\n        _v1[1] = cubicAt(y0, y1, y2, y3, prev);\n        d1 = v2DistSquare(_v1, _v0);\n        if (prev >= 0 && d1 < d) {\n            t = prev;\n            d = d1;\n        }\n        else {\n            _v2[0] = cubicAt(x0, x1, x2, x3, next);\n            _v2[1] = cubicAt(y0, y1, y2, y3, next);\n            d2 = v2DistSquare(_v2, _v0);\n            if (next <= 1 && d2 < d) {\n                t = next;\n                d = d2;\n            }\n            else {\n                interval *= 0.5;\n            }\n        }\n    }\n    if (out) {\n        out[0] = cubicAt(x0, x1, x2, x3, t);\n        out[1] = cubicAt(y0, y1, y2, y3, t);\n    }\n    return mathSqrt(d);\n}\nexport function cubicLength(x0, y0, x1, y1, x2, y2, x3, y3, iteration) {\n    var px = x0;\n    var py = y0;\n    var d = 0;\n    var step = 1 / iteration;\n    for (var i = 1; i <= iteration; i++) {\n        var t = i * step;\n        var x = cubicAt(x0, x1, x2, x3, t);\n        var y = cubicAt(y0, y1, y2, y3, t);\n        var dx = x - px;\n        var dy = y - py;\n        d += Math.sqrt(dx * dx + dy * dy);\n        px = x;\n        py = y;\n    }\n    return d;\n}\nexport function quadraticAt(p0, p1, p2, t) {\n    var onet = 1 - t;\n    return onet * (onet * p0 + 2 * t * p1) + t * t * p2;\n}\nexport function quadraticDerivativeAt(p0, p1, p2, t) {\n    return 2 * ((1 - t) * (p1 - p0) + t * (p2 - p1));\n}\nexport function quadraticRootAt(p0, p1, p2, val, roots) {\n    var a = p0 - 2 * p1 + p2;\n    var b = 2 * (p1 - p0);\n    var c = p0 - val;\n    var n = 0;\n    if (isAroundZero(a)) {\n        if (isNotAroundZero(b)) {\n            var t1 = -c / b;\n            if (t1 >= 0 && t1 <= 1) {\n                roots[n++] = t1;\n            }\n        }\n    }\n    else {\n        var disc = b * b - 4 * a * c;\n        if (isAroundZero(disc)) {\n            var t1 = -b / (2 * a);\n            if (t1 >= 0 && t1 <= 1) {\n                roots[n++] = t1;\n            }\n        }\n        else if (disc > 0) {\n            var discSqrt = mathSqrt(disc);\n            var t1 = (-b + discSqrt) / (2 * a);\n            var t2 = (-b - discSqrt) / (2 * a);\n            if (t1 >= 0 && t1 <= 1) {\n                roots[n++] = t1;\n            }\n            if (t2 >= 0 && t2 <= 1) {\n                roots[n++] = t2;\n            }\n        }\n    }\n    return n;\n}\nexport function quadraticExtremum(p0, p1, p2) {\n    var divider = p0 + p2 - 2 * p1;\n    if (divider === 0) {\n        return 0.5;\n    }\n    else {\n        return (p0 - p1) / divider;\n    }\n}\nexport function quadraticSubdivide(p0, p1, p2, t, out) {\n    var p01 = (p1 - p0) * t + p0;\n    var p12 = (p2 - p1) * t + p1;\n    var p012 = (p12 - p01) * t + p01;\n    out[0] = p0;\n    out[1] = p01;\n    out[2] = p012;\n    out[3] = p012;\n    out[4] = p12;\n    out[5] = p2;\n}\nexport function quadraticProjectPoint(x0, y0, x1, y1, x2, y2, x, y, out) {\n    var t;\n    var interval = 0.005;\n    var d = Infinity;\n    _v0[0] = x;\n    _v0[1] = y;\n    for (var _t = 0; _t < 1; _t += 0.05) {\n        _v1[0] = quadraticAt(x0, x1, x2, _t);\n        _v1[1] = quadraticAt(y0, y1, y2, _t);\n        var d1 = v2DistSquare(_v0, _v1);\n        if (d1 < d) {\n            t = _t;\n            d = d1;\n        }\n    }\n    d = Infinity;\n    for (var i = 0; i < 32; i++) {\n        if (interval < EPSILON_NUMERIC) {\n            break;\n        }\n        var prev = t - interval;\n        var next = t + interval;\n        _v1[0] = quadraticAt(x0, x1, x2, prev);\n        _v1[1] = quadraticAt(y0, y1, y2, prev);\n        var d1 = v2DistSquare(_v1, _v0);\n        if (prev >= 0 && d1 < d) {\n            t = prev;\n            d = d1;\n        }\n        else {\n            _v2[0] = quadraticAt(x0, x1, x2, next);\n            _v2[1] = quadraticAt(y0, y1, y2, next);\n            var d2 = v2DistSquare(_v2, _v0);\n            if (next <= 1 && d2 < d) {\n                t = next;\n                d = d2;\n            }\n            else {\n                interval *= 0.5;\n            }\n        }\n    }\n    if (out) {\n        out[0] = quadraticAt(x0, x1, x2, t);\n        out[1] = quadraticAt(y0, y1, y2, t);\n    }\n    return mathSqrt(d);\n}\nexport function quadraticLength(x0, y0, x1, y1, x2, y2, iteration) {\n    var px = x0;\n    var py = y0;\n    var d = 0;\n    var step = 1 / iteration;\n    for (var i = 1; i <= iteration; i++) {\n        var t = i * step;\n        var x = quadraticAt(x0, x1, x2, t);\n        var y = quadraticAt(y0, y1, y2, t);\n        var dx = x - px;\n        var dy = y - py;\n        d += Math.sqrt(dx * dx + dy * dy);\n        px = x;\n        py = y;\n    }\n    return d;\n}\n","import { isString } from '../core/util.js';\nexport function parseXML(svg) {\n    if (isString(svg)) {\n        var parser = new DOMParser();\n        svg = parser.parseFromString(svg, 'text/xml');\n    }\n    var svgNode = svg;\n    if (svgNode.nodeType === 9) {\n        svgNode = svgNode.firstChild;\n    }\n    while (svgNode.nodeName.toLowerCase() !== 'svg' || svgNode.nodeType !== 1) {\n        svgNode = svgNode.nextSibling;\n    }\n    return svgNode;\n}\n","import { isArray } from '../../core/util.js';\nvar PI = Math.PI;\nvar PI2 = PI * 2;\nvar mathSin = Math.sin;\nvar mathCos = Math.cos;\nvar mathACos = Math.acos;\nvar mathATan2 = Math.atan2;\nvar mathAbs = Math.abs;\nvar mathSqrt = Math.sqrt;\nvar mathMax = Math.max;\nvar mathMin = Math.min;\nvar e = 1e-4;\nfunction intersect(x0, y0, x1, y1, x2, y2, x3, y3) {\n    var dx10 = x1 - x0;\n    var dy10 = y1 - y0;\n    var dx32 = x3 - x2;\n    var dy32 = y3 - y2;\n    var t = dy32 * dx10 - dx32 * dy10;\n    if (t * t < e) {\n        return;\n    }\n    t = (dx32 * (y0 - y2) - dy32 * (x0 - x2)) / t;\n    return [x0 + t * dx10, y0 + t * dy10];\n}\nfunction computeCornerTangents(x0, y0, x1, y1, radius, cr, clockwise) {\n    var x01 = x0 - x1;\n    var y01 = y0 - y1;\n    var lo = (clockwise ? cr : -cr) / mathSqrt(x01 * x01 + y01 * y01);\n    var ox = lo * y01;\n    var oy = -lo * x01;\n    var x11 = x0 + ox;\n    var y11 = y0 + oy;\n    var x10 = x1 + ox;\n    var y10 = y1 + oy;\n    var x00 = (x11 + x10) / 2;\n    var y00 = (y11 + y10) / 2;\n    var dx = x10 - x11;\n    var dy = y10 - y11;\n    var d2 = dx * dx + dy * dy;\n    var r = radius - cr;\n    var s = x11 * y10 - x10 * y11;\n    var d = (dy < 0 ? -1 : 1) * mathSqrt(mathMax(0, r * r * d2 - s * s));\n    var cx0 = (s * dy - dx * d) / d2;\n    var cy0 = (-s * dx - dy * d) / d2;\n    var cx1 = (s * dy + dx * d) / d2;\n    var cy1 = (-s * dx + dy * d) / d2;\n    var dx0 = cx0 - x00;\n    var dy0 = cy0 - y00;\n    var dx1 = cx1 - x00;\n    var dy1 = cy1 - y00;\n    if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1) {\n        cx0 = cx1;\n        cy0 = cy1;\n    }\n    return {\n        cx: cx0,\n        cy: cy0,\n        x0: -ox,\n        y0: -oy,\n        x1: cx0 * (radius / r - 1),\n        y1: cy0 * (radius / r - 1)\n    };\n}\nfunction normalizeCornerRadius(cr) {\n    var arr;\n    if (isArray(cr)) {\n        var len = cr.length;\n        if (!len) {\n            return cr;\n        }\n        if (len === 1) {\n            arr = [cr[0], cr[0], 0, 0];\n        }\n        else if (len === 2) {\n            arr = [cr[0], cr[0], cr[1], cr[1]];\n        }\n        else if (len === 3) {\n            arr = cr.concat(cr[2]);\n        }\n        else {\n            arr = cr;\n        }\n    }\n    else {\n        arr = [cr, cr, cr, cr];\n    }\n    return arr;\n}\nexport function buildPath(ctx, shape) {\n    var _a;\n    var radius = mathMax(shape.r, 0);\n    var innerRadius = mathMax(shape.r0 || 0, 0);\n    var hasRadius = radius > 0;\n    var hasInnerRadius = innerRadius > 0;\n    if (!hasRadius && !hasInnerRadius) {\n        return;\n    }\n    if (!hasRadius) {\n        radius = innerRadius;\n        innerRadius = 0;\n    }\n    if (innerRadius > radius) {\n        var tmp = radius;\n        radius = innerRadius;\n        innerRadius = tmp;\n    }\n    var startAngle = shape.startAngle, endAngle = shape.endAngle;\n    if (isNaN(startAngle) || isNaN(endAngle)) {\n        return;\n    }\n    var cx = shape.cx, cy = shape.cy;\n    var clockwise = !!shape.clockwise;\n    var arc = mathAbs(endAngle - startAngle);\n    var mod = arc > PI2 && arc % PI2;\n    mod > e && (arc = mod);\n    if (!(radius > e)) {\n        ctx.moveTo(cx, cy);\n    }\n    else if (arc > PI2 - e) {\n        ctx.moveTo(cx + radius * mathCos(startAngle), cy + radius * mathSin(startAngle));\n        ctx.arc(cx, cy, radius, startAngle, endAngle, !clockwise);\n        if (innerRadius > e) {\n            ctx.moveTo(cx + innerRadius * mathCos(endAngle), cy + innerRadius * mathSin(endAngle));\n            ctx.arc(cx, cy, innerRadius, endAngle, startAngle, clockwise);\n        }\n    }\n    else {\n        var icrStart = void 0;\n        var icrEnd = void 0;\n        var ocrStart = void 0;\n        var ocrEnd = void 0;\n        var ocrs = void 0;\n        var ocre = void 0;\n        var icrs = void 0;\n        var icre = void 0;\n        var ocrMax = void 0;\n        var icrMax = void 0;\n        var limitedOcrMax = void 0;\n        var limitedIcrMax = void 0;\n        var xre = void 0;\n        var yre = void 0;\n        var xirs = void 0;\n        var yirs = void 0;\n        var xrs = radius * mathCos(startAngle);\n        var yrs = radius * mathSin(startAngle);\n        var xire = innerRadius * mathCos(endAngle);\n        var yire = innerRadius * mathSin(endAngle);\n        var hasArc = arc > e;\n        if (hasArc) {\n            var cornerRadius = shape.cornerRadius;\n            if (cornerRadius) {\n                _a = normalizeCornerRadius(cornerRadius), icrStart = _a[0], icrEnd = _a[1], ocrStart = _a[2], ocrEnd = _a[3];\n            }\n            var halfRd = mathAbs(radius - innerRadius) / 2;\n            ocrs = mathMin(halfRd, ocrStart);\n            ocre = mathMin(halfRd, ocrEnd);\n            icrs = mathMin(halfRd, icrStart);\n            icre = mathMin(halfRd, icrEnd);\n            limitedOcrMax = ocrMax = mathMax(ocrs, ocre);\n            limitedIcrMax = icrMax = mathMax(icrs, icre);\n            if (ocrMax > e || icrMax > e) {\n                xre = radius * mathCos(endAngle);\n                yre = radius * mathSin(endAngle);\n                xirs = innerRadius * mathCos(startAngle);\n                yirs = innerRadius * mathSin(startAngle);\n                if (arc < PI) {\n                    var it_1 = intersect(xrs, yrs, xirs, yirs, xre, yre, xire, yire);\n                    if (it_1) {\n                        var x0 = xrs - it_1[0];\n                        var y0 = yrs - it_1[1];\n                        var x1 = xre - it_1[0];\n                        var y1 = yre - it_1[1];\n                        var a = 1 / mathSin(mathACos((x0 * x1 + y0 * y1) / (mathSqrt(x0 * x0 + y0 * y0) * mathSqrt(x1 * x1 + y1 * y1))) / 2);\n                        var b = mathSqrt(it_1[0] * it_1[0] + it_1[1] * it_1[1]);\n                        limitedOcrMax = mathMin(ocrMax, (radius - b) / (a + 1));\n                        limitedIcrMax = mathMin(icrMax, (innerRadius - b) / (a - 1));\n                    }\n                }\n            }\n        }\n        if (!hasArc) {\n            ctx.moveTo(cx + xrs, cy + yrs);\n        }\n        else if (limitedOcrMax > e) {\n            var crStart = mathMin(ocrStart, limitedOcrMax);\n            var crEnd = mathMin(ocrEnd, limitedOcrMax);\n            var ct0 = computeCornerTangents(xirs, yirs, xrs, yrs, radius, crStart, clockwise);\n            var ct1 = computeCornerTangents(xre, yre, xire, yire, radius, crEnd, clockwise);\n            ctx.moveTo(cx + ct0.cx + ct0.x0, cy + ct0.cy + ct0.y0);\n            if (limitedOcrMax < ocrMax && crStart === crEnd) {\n                ctx.arc(cx + ct0.cx, cy + ct0.cy, limitedOcrMax, mathATan2(ct0.y0, ct0.x0), mathATan2(ct1.y0, ct1.x0), !clockwise);\n            }\n            else {\n                crStart > 0 && ctx.arc(cx + ct0.cx, cy + ct0.cy, crStart, mathATan2(ct0.y0, ct0.x0), mathATan2(ct0.y1, ct0.x1), !clockwise);\n                ctx.arc(cx, cy, radius, mathATan2(ct0.cy + ct0.y1, ct0.cx + ct0.x1), mathATan2(ct1.cy + ct1.y1, ct1.cx + ct1.x1), !clockwise);\n                crEnd > 0 && ctx.arc(cx + ct1.cx, cy + ct1.cy, crEnd, mathATan2(ct1.y1, ct1.x1), mathATan2(ct1.y0, ct1.x0), !clockwise);\n            }\n        }\n        else {\n            ctx.moveTo(cx + xrs, cy + yrs);\n            ctx.arc(cx, cy, radius, startAngle, endAngle, !clockwise);\n        }\n        if (!(innerRadius > e) || !hasArc) {\n            ctx.lineTo(cx + xire, cy + yire);\n        }\n        else if (limitedIcrMax > e) {\n            var crStart = mathMin(icrStart, limitedIcrMax);\n            var crEnd = mathMin(icrEnd, limitedIcrMax);\n            var ct0 = computeCornerTangents(xire, yire, xre, yre, innerRadius, -crEnd, clockwise);\n            var ct1 = computeCornerTangents(xrs, yrs, xirs, yirs, innerRadius, -crStart, clockwise);\n            ctx.lineTo(cx + ct0.cx + ct0.x0, cy + ct0.cy + ct0.y0);\n            if (limitedIcrMax < icrMax && crStart === crEnd) {\n                ctx.arc(cx + ct0.cx, cy + ct0.cy, limitedIcrMax, mathATan2(ct0.y0, ct0.x0), mathATan2(ct1.y0, ct1.x0), !clockwise);\n            }\n            else {\n                crEnd > 0 && ctx.arc(cx + ct0.cx, cy + ct0.cy, crEnd, mathATan2(ct0.y0, ct0.x0), mathATan2(ct0.y1, ct0.x1), !clockwise);\n                ctx.arc(cx, cy, innerRadius, mathATan2(ct0.cy + ct0.y1, ct0.cx + ct0.x1), mathATan2(ct1.cy + ct1.y1, ct1.cx + ct1.x1), clockwise);\n                crStart > 0 && ctx.arc(cx + ct1.cx, cy + ct1.cy, crStart, mathATan2(ct1.y1, ct1.x1), mathATan2(ct1.y0, ct1.x0), !clockwise);\n            }\n        }\n        else {\n            ctx.lineTo(cx + xire, cy + yire);\n            ctx.arc(cx, cy, innerRadius, endAngle, startAngle, clockwise);\n        }\n    }\n    ctx.closePath();\n}\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nimport * as roundSectorHelper from '../helper/roundSector.js';\nvar SectorShape = (function () {\n    function SectorShape() {\n        this.cx = 0;\n        this.cy = 0;\n        this.r0 = 0;\n        this.r = 0;\n        this.startAngle = 0;\n        this.endAngle = Math.PI * 2;\n        this.clockwise = true;\n        this.cornerRadius = 0;\n    }\n    return SectorShape;\n}());\nexport { SectorShape };\nvar Sector = (function (_super) {\n    __extends(Sector, _super);\n    function Sector(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Sector.prototype.getDefaultShape = function () {\n        return new SectorShape();\n    };\n    Sector.prototype.buildPath = function (ctx, shape) {\n        roundSectorHelper.buildPath(ctx, shape);\n    };\n    Sector.prototype.isZeroArea = function () {\n        return this.shape.startAngle === this.shape.endAngle\n            || this.shape.r === this.shape.r0;\n    };\n    return Sector;\n}(Path));\nSector.prototype.type = 'sector';\nexport default Sector;\n","export var REDRAW_BIT = 1;\nexport var STYLE_CHANGED_BIT = 2;\nexport var SHAPE_CHANGED_BIT = 4;\n","import smoothBezier from './smoothBezier.js';\nexport function buildPath(ctx, shape, closePath) {\n    var smooth = shape.smooth;\n    var points = shape.points;\n    if (points && points.length >= 2) {\n        if (smooth) {\n            var controlPoints = smoothBezier(points, smooth, closePath, shape.smoothConstraint);\n            ctx.moveTo(points[0][0], points[0][1]);\n            var len = points.length;\n            for (var i = 0; i < (closePath ? len : len - 1); i++) {\n                var cp1 = controlPoints[i * 2];\n                var cp2 = controlPoints[i * 2 + 1];\n                var p = points[(i + 1) % len];\n                ctx.bezierCurveTo(cp1[0], cp1[1], cp2[0], cp2[1], p[0], p[1]);\n            }\n        }\n        else {\n            ctx.moveTo(points[0][0], points[0][1]);\n            for (var i = 1, l = points.length; i < l; i++) {\n                ctx.lineTo(points[i][0], points[i][1]);\n            }\n        }\n        closePath && ctx.closePath();\n    }\n}\n","import { min as v2Min, max as v2Max, scale as v2Scale, distance as v2Distance, add as v2Add, clone as v2Clone, sub as v2Sub } from '../../core/vector.js';\nexport default function smoothBezier(points, smooth, isLoop, constraint) {\n    var cps = [];\n    var v = [];\n    var v1 = [];\n    var v2 = [];\n    var prevPoint;\n    var nextPoint;\n    var min;\n    var max;\n    if (constraint) {\n        min = [Infinity, Infinity];\n        max = [-Infinity, -Infinity];\n        for (var i = 0, len = points.length; i < len; i++) {\n            v2Min(min, min, points[i]);\n            v2Max(max, max, points[i]);\n        }\n        v2Min(min, min, constraint[0]);\n        v2Max(max, max, constraint[1]);\n    }\n    for (var i = 0, len = points.length; i < len; i++) {\n        var point = points[i];\n        if (isLoop) {\n            prevPoint = points[i ? i - 1 : len - 1];\n            nextPoint = points[(i + 1) % len];\n        }\n        else {\n            if (i === 0 || i === len - 1) {\n                cps.push(v2Clone(points[i]));\n                continue;\n            }\n            else {\n                prevPoint = points[i - 1];\n                nextPoint = points[i + 1];\n            }\n        }\n        v2Sub(v, nextPoint, prevPoint);\n        v2Scale(v, v, smooth);\n        var d0 = v2Distance(point, prevPoint);\n        var d1 = v2Distance(point, nextPoint);\n        var sum = d0 + d1;\n        if (sum !== 0) {\n            d0 /= sum;\n            d1 /= sum;\n        }\n        v2Scale(v1, v, -d0);\n        v2Scale(v2, v, d1);\n        var cp0 = v2Add([], point, v1);\n        var cp1 = v2Add([], point, v2);\n        if (constraint) {\n            v2Max(cp0, cp0, min);\n            v2Min(cp0, cp0, max);\n            v2Max(cp1, cp1, min);\n            v2Min(cp1, cp1, max);\n        }\n        cps.push(cp0);\n        cps.push(cp1);\n    }\n    if (isLoop) {\n        cps.push(cps.shift());\n    }\n    return cps;\n}\n","import { DEFAULT_COMMON_STYLE } from '../graphic/Displayable.js';\nimport PathProxy from '../core/PathProxy.js';\nimport { createOrUpdateImage, isImageReady } from '../graphic/helper/image.js';\nimport { getCanvasGradient, isClipPathChanged } from './helper.js';\nimport Path from '../graphic/Path.js';\nimport ZRImage from '../graphic/Image.js';\nimport TSpan from '../graphic/TSpan.js';\nimport { RADIAN_TO_DEGREE } from '../core/util.js';\nimport { getLineDash } from './dashStyle.js';\nimport { REDRAW_BIT, SHAPE_CHANGED_BIT } from '../graphic/constants.js';\nimport { DEFAULT_FONT } from '../core/platform.js';\nvar pathProxyForDraw = new PathProxy(true);\nfunction styleHasStroke(style) {\n    var stroke = style.stroke;\n    return !(stroke == null || stroke === 'none' || !(style.lineWidth > 0));\n}\nfunction isValidStrokeFillStyle(strokeOrFill) {\n    return typeof strokeOrFill === 'string' && strokeOrFill !== 'none';\n}\nfunction styleHasFill(style) {\n    var fill = style.fill;\n    return fill != null && fill !== 'none';\n}\nfunction doFillPath(ctx, style) {\n    if (style.fillOpacity != null && style.fillOpacity !== 1) {\n        var originalGlobalAlpha = ctx.globalAlpha;\n        ctx.globalAlpha = style.fillOpacity * style.opacity;\n        ctx.fill();\n        ctx.globalAlpha = originalGlobalAlpha;\n    }\n    else {\n        ctx.fill();\n    }\n}\nfunction doStrokePath(ctx, style) {\n    if (style.strokeOpacity != null && style.strokeOpacity !== 1) {\n        var originalGlobalAlpha = ctx.globalAlpha;\n        ctx.globalAlpha = style.strokeOpacity * style.opacity;\n        ctx.stroke();\n        ctx.globalAlpha = originalGlobalAlpha;\n    }\n    else {\n        ctx.stroke();\n    }\n}\nexport function createCanvasPattern(ctx, pattern, el) {\n    var image = createOrUpdateImage(pattern.image, pattern.__image, el);\n    if (isImageReady(image)) {\n        var canvasPattern = ctx.createPattern(image, pattern.repeat || 'repeat');\n        if (typeof DOMMatrix === 'function'\n            && canvasPattern\n            && canvasPattern.setTransform) {\n            var matrix = new DOMMatrix();\n            matrix.translateSelf((pattern.x || 0), (pattern.y || 0));\n            matrix.rotateSelf(0, 0, (pattern.rotation || 0) * RADIAN_TO_DEGREE);\n            matrix.scaleSelf((pattern.scaleX || 1), (pattern.scaleY || 1));\n            canvasPattern.setTransform(matrix);\n        }\n        return canvasPattern;\n    }\n}\nfunction brushPath(ctx, el, style, inBatch) {\n    var _a;\n    var hasStroke = styleHasStroke(style);\n    var hasFill = styleHasFill(style);\n    var strokePercent = style.strokePercent;\n    var strokePart = strokePercent < 1;\n    var firstDraw = !el.path;\n    if ((!el.silent || strokePart) && firstDraw) {\n        el.createPathProxy();\n    }\n    var path = el.path || pathProxyForDraw;\n    var dirtyFlag = el.__dirty;\n    if (!inBatch) {\n        var fill = style.fill;\n        var stroke = style.stroke;\n        var hasFillGradient = hasFill && !!fill.colorStops;\n        var hasStrokeGradient = hasStroke && !!stroke.colorStops;\n        var hasFillPattern = hasFill && !!fill.image;\n        var hasStrokePattern = hasStroke && !!stroke.image;\n        var fillGradient = void 0;\n        var strokeGradient = void 0;\n        var fillPattern = void 0;\n        var strokePattern = void 0;\n        var rect = void 0;\n        if (hasFillGradient || hasStrokeGradient) {\n            rect = el.getBoundingRect();\n        }\n        if (hasFillGradient) {\n            fillGradient = dirtyFlag\n                ? getCanvasGradient(ctx, fill, rect)\n                : el.__canvasFillGradient;\n            el.__canvasFillGradient = fillGradient;\n        }\n        if (hasStrokeGradient) {\n            strokeGradient = dirtyFlag\n                ? getCanvasGradient(ctx, stroke, rect)\n                : el.__canvasStrokeGradient;\n            el.__canvasStrokeGradient = strokeGradient;\n        }\n        if (hasFillPattern) {\n            fillPattern = (dirtyFlag || !el.__canvasFillPattern)\n                ? createCanvasPattern(ctx, fill, el)\n                : el.__canvasFillPattern;\n            el.__canvasFillPattern = fillPattern;\n        }\n        if (hasStrokePattern) {\n            strokePattern = (dirtyFlag || !el.__canvasStrokePattern)\n                ? createCanvasPattern(ctx, stroke, el)\n                : el.__canvasStrokePattern;\n            el.__canvasStrokePattern = fillPattern;\n        }\n        if (hasFillGradient) {\n            ctx.fillStyle = fillGradient;\n        }\n        else if (hasFillPattern) {\n            if (fillPattern) {\n                ctx.fillStyle = fillPattern;\n            }\n            else {\n                hasFill = false;\n            }\n        }\n        if (hasStrokeGradient) {\n            ctx.strokeStyle = strokeGradient;\n        }\n        else if (hasStrokePattern) {\n            if (strokePattern) {\n                ctx.strokeStyle = strokePattern;\n            }\n            else {\n                hasStroke = false;\n            }\n        }\n    }\n    var scale = el.getGlobalScale();\n    path.setScale(scale[0], scale[1], el.segmentIgnoreThreshold);\n    var lineDash;\n    var lineDashOffset;\n    if (ctx.setLineDash && style.lineDash) {\n        _a = getLineDash(el), lineDash = _a[0], lineDashOffset = _a[1];\n    }\n    var needsRebuild = true;\n    if (firstDraw || (dirtyFlag & SHAPE_CHANGED_BIT)) {\n        path.setDPR(ctx.dpr);\n        if (strokePart) {\n            path.setContext(null);\n        }\n        else {\n            path.setContext(ctx);\n            needsRebuild = false;\n        }\n        path.reset();\n        el.buildPath(path, el.shape, inBatch);\n        path.toStatic();\n        el.pathUpdated();\n    }\n    if (needsRebuild) {\n        path.rebuildPath(ctx, strokePart ? strokePercent : 1);\n    }\n    if (lineDash) {\n        ctx.setLineDash(lineDash);\n        ctx.lineDashOffset = lineDashOffset;\n    }\n    if (!inBatch) {\n        if (style.strokeFirst) {\n            if (hasStroke) {\n                doStrokePath(ctx, style);\n            }\n            if (hasFill) {\n                doFillPath(ctx, style);\n            }\n        }\n        else {\n            if (hasFill) {\n                doFillPath(ctx, style);\n            }\n            if (hasStroke) {\n                doStrokePath(ctx, style);\n            }\n        }\n    }\n    if (lineDash) {\n        ctx.setLineDash([]);\n    }\n}\nfunction brushImage(ctx, el, style) {\n    var image = el.__image = createOrUpdateImage(style.image, el.__image, el, el.onload);\n    if (!image || !isImageReady(image)) {\n        return;\n    }\n    var x = style.x || 0;\n    var y = style.y || 0;\n    var width = el.getWidth();\n    var height = el.getHeight();\n    var aspect = image.width / image.height;\n    if (width == null && height != null) {\n        width = height * aspect;\n    }\n    else if (height == null && width != null) {\n        height = width / aspect;\n    }\n    else if (width == null && height == null) {\n        width = image.width;\n        height = image.height;\n    }\n    if (style.sWidth && style.sHeight) {\n        var sx = style.sx || 0;\n        var sy = style.sy || 0;\n        ctx.drawImage(image, sx, sy, style.sWidth, style.sHeight, x, y, width, height);\n    }\n    else if (style.sx && style.sy) {\n        var sx = style.sx;\n        var sy = style.sy;\n        var sWidth = width - sx;\n        var sHeight = height - sy;\n        ctx.drawImage(image, sx, sy, sWidth, sHeight, x, y, width, height);\n    }\n    else {\n        ctx.drawImage(image, x, y, width, height);\n    }\n}\nfunction brushText(ctx, el, style) {\n    var _a;\n    var text = style.text;\n    text != null && (text += '');\n    if (text) {\n        ctx.font = style.font || DEFAULT_FONT;\n        ctx.textAlign = style.textAlign;\n        ctx.textBaseline = style.textBaseline;\n        var lineDash = void 0;\n        var lineDashOffset = void 0;\n        if (ctx.setLineDash && style.lineDash) {\n            _a = getLineDash(el), lineDash = _a[0], lineDashOffset = _a[1];\n        }\n        if (lineDash) {\n            ctx.setLineDash(lineDash);\n            ctx.lineDashOffset = lineDashOffset;\n        }\n        if (style.strokeFirst) {\n            if (styleHasStroke(style)) {\n                ctx.strokeText(text, style.x, style.y);\n            }\n            if (styleHasFill(style)) {\n                ctx.fillText(text, style.x, style.y);\n            }\n        }\n        else {\n            if (styleHasFill(style)) {\n                ctx.fillText(text, style.x, style.y);\n            }\n            if (styleHasStroke(style)) {\n                ctx.strokeText(text, style.x, style.y);\n            }\n        }\n        if (lineDash) {\n            ctx.setLineDash([]);\n        }\n    }\n}\nvar SHADOW_NUMBER_PROPS = ['shadowBlur', 'shadowOffsetX', 'shadowOffsetY'];\nvar STROKE_PROPS = [\n    ['lineCap', 'butt'], ['lineJoin', 'miter'], ['miterLimit', 10]\n];\nfunction bindCommonProps(ctx, style, prevStyle, forceSetAll, scope) {\n    var styleChanged = false;\n    if (!forceSetAll) {\n        prevStyle = prevStyle || {};\n        if (style === prevStyle) {\n            return false;\n        }\n    }\n    if (forceSetAll || style.opacity !== prevStyle.opacity) {\n        flushPathDrawn(ctx, scope);\n        styleChanged = true;\n        var opacity = Math.max(Math.min(style.opacity, 1), 0);\n        ctx.globalAlpha = isNaN(opacity) ? DEFAULT_COMMON_STYLE.opacity : opacity;\n    }\n    if (forceSetAll || style.blend !== prevStyle.blend) {\n        if (!styleChanged) {\n            flushPathDrawn(ctx, scope);\n            styleChanged = true;\n        }\n        ctx.globalCompositeOperation = style.blend || DEFAULT_COMMON_STYLE.blend;\n    }\n    for (var i = 0; i < SHADOW_NUMBER_PROPS.length; i++) {\n        var propName = SHADOW_NUMBER_PROPS[i];\n        if (forceSetAll || style[propName] !== prevStyle[propName]) {\n            if (!styleChanged) {\n                flushPathDrawn(ctx, scope);\n                styleChanged = true;\n            }\n            ctx[propName] = ctx.dpr * (style[propName] || 0);\n        }\n    }\n    if (forceSetAll || style.shadowColor !== prevStyle.shadowColor) {\n        if (!styleChanged) {\n            flushPathDrawn(ctx, scope);\n            styleChanged = true;\n        }\n        ctx.shadowColor = style.shadowColor || DEFAULT_COMMON_STYLE.shadowColor;\n    }\n    return styleChanged;\n}\nfunction bindPathAndTextCommonStyle(ctx, el, prevEl, forceSetAll, scope) {\n    var style = getStyle(el, scope.inHover);\n    var prevStyle = forceSetAll\n        ? null\n        : (prevEl && getStyle(prevEl, scope.inHover) || {});\n    if (style === prevStyle) {\n        return false;\n    }\n    var styleChanged = bindCommonProps(ctx, style, prevStyle, forceSetAll, scope);\n    if (forceSetAll || style.fill !== prevStyle.fill) {\n        if (!styleChanged) {\n            flushPathDrawn(ctx, scope);\n            styleChanged = true;\n        }\n        isValidStrokeFillStyle(style.fill) && (ctx.fillStyle = style.fill);\n    }\n    if (forceSetAll || style.stroke !== prevStyle.stroke) {\n        if (!styleChanged) {\n            flushPathDrawn(ctx, scope);\n            styleChanged = true;\n        }\n        isValidStrokeFillStyle(style.stroke) && (ctx.strokeStyle = style.stroke);\n    }\n    if (forceSetAll || style.opacity !== prevStyle.opacity) {\n        if (!styleChanged) {\n            flushPathDrawn(ctx, scope);\n            styleChanged = true;\n        }\n        ctx.globalAlpha = style.opacity == null ? 1 : style.opacity;\n    }\n    if (el.hasStroke()) {\n        var lineWidth = style.lineWidth;\n        var newLineWidth = lineWidth / ((style.strokeNoScale && el.getLineScale) ? el.getLineScale() : 1);\n        if (ctx.lineWidth !== newLineWidth) {\n            if (!styleChanged) {\n                flushPathDrawn(ctx, scope);\n                styleChanged = true;\n            }\n            ctx.lineWidth = newLineWidth;\n        }\n    }\n    for (var i = 0; i < STROKE_PROPS.length; i++) {\n        var prop = STROKE_PROPS[i];\n        var propName = prop[0];\n        if (forceSetAll || style[propName] !== prevStyle[propName]) {\n            if (!styleChanged) {\n                flushPathDrawn(ctx, scope);\n                styleChanged = true;\n            }\n            ctx[propName] = style[propName] || prop[1];\n        }\n    }\n    return styleChanged;\n}\nfunction bindImageStyle(ctx, el, prevEl, forceSetAll, scope) {\n    return bindCommonProps(ctx, getStyle(el, scope.inHover), prevEl && getStyle(prevEl, scope.inHover), forceSetAll, scope);\n}\nfunction setContextTransform(ctx, el) {\n    var m = el.transform;\n    var dpr = ctx.dpr || 1;\n    if (m) {\n        ctx.setTransform(dpr * m[0], dpr * m[1], dpr * m[2], dpr * m[3], dpr * m[4], dpr * m[5]);\n    }\n    else {\n        ctx.setTransform(dpr, 0, 0, dpr, 0, 0);\n    }\n}\nfunction updateClipStatus(clipPaths, ctx, scope) {\n    var allClipped = false;\n    for (var i = 0; i < clipPaths.length; i++) {\n        var clipPath = clipPaths[i];\n        allClipped = allClipped || clipPath.isZeroArea();\n        setContextTransform(ctx, clipPath);\n        ctx.beginPath();\n        clipPath.buildPath(ctx, clipPath.shape);\n        ctx.clip();\n    }\n    scope.allClipped = allClipped;\n}\nfunction isTransformChanged(m0, m1) {\n    if (m0 && m1) {\n        return m0[0] !== m1[0]\n            || m0[1] !== m1[1]\n            || m0[2] !== m1[2]\n            || m0[3] !== m1[3]\n            || m0[4] !== m1[4]\n            || m0[5] !== m1[5];\n    }\n    else if (!m0 && !m1) {\n        return false;\n    }\n    return true;\n}\nvar DRAW_TYPE_PATH = 1;\nvar DRAW_TYPE_IMAGE = 2;\nvar DRAW_TYPE_TEXT = 3;\nvar DRAW_TYPE_INCREMENTAL = 4;\nfunction canPathBatch(style) {\n    var hasFill = styleHasFill(style);\n    var hasStroke = styleHasStroke(style);\n    return !(style.lineDash\n        || !(+hasFill ^ +hasStroke)\n        || (hasFill && typeof style.fill !== 'string')\n        || (hasStroke && typeof style.stroke !== 'string')\n        || style.strokePercent < 1\n        || style.strokeOpacity < 1\n        || style.fillOpacity < 1);\n}\nfunction flushPathDrawn(ctx, scope) {\n    scope.batchFill && ctx.fill();\n    scope.batchStroke && ctx.stroke();\n    scope.batchFill = '';\n    scope.batchStroke = '';\n}\nfunction getStyle(el, inHover) {\n    return inHover ? (el.__hoverStyle || el.style) : el.style;\n}\nexport function brushSingle(ctx, el) {\n    brush(ctx, el, { inHover: false, viewWidth: 0, viewHeight: 0 }, true);\n}\nexport function brush(ctx, el, scope, isLast) {\n    var m = el.transform;\n    if (!el.shouldBePainted(scope.viewWidth, scope.viewHeight, false, false)) {\n        el.__dirty &= ~REDRAW_BIT;\n        el.__isRendered = false;\n        return;\n    }\n    var clipPaths = el.__clipPaths;\n    var prevElClipPaths = scope.prevElClipPaths;\n    var forceSetTransform = false;\n    var forceSetStyle = false;\n    if (!prevElClipPaths || isClipPathChanged(clipPaths, prevElClipPaths)) {\n        if (prevElClipPaths && prevElClipPaths.length) {\n            flushPathDrawn(ctx, scope);\n            ctx.restore();\n            forceSetStyle = forceSetTransform = true;\n            scope.prevElClipPaths = null;\n            scope.allClipped = false;\n            scope.prevEl = null;\n        }\n        if (clipPaths && clipPaths.length) {\n            flushPathDrawn(ctx, scope);\n            ctx.save();\n            updateClipStatus(clipPaths, ctx, scope);\n            forceSetTransform = true;\n        }\n        scope.prevElClipPaths = clipPaths;\n    }\n    if (scope.allClipped) {\n        el.__isRendered = false;\n        return;\n    }\n    el.beforeBrush && el.beforeBrush();\n    el.innerBeforeBrush();\n    var prevEl = scope.prevEl;\n    if (!prevEl) {\n        forceSetStyle = forceSetTransform = true;\n    }\n    var canBatchPath = el instanceof Path\n        && el.autoBatch\n        && canPathBatch(el.style);\n    if (forceSetTransform || isTransformChanged(m, prevEl.transform)) {\n        flushPathDrawn(ctx, scope);\n        setContextTransform(ctx, el);\n    }\n    else if (!canBatchPath) {\n        flushPathDrawn(ctx, scope);\n    }\n    var style = getStyle(el, scope.inHover);\n    if (el instanceof Path) {\n        if (scope.lastDrawType !== DRAW_TYPE_PATH) {\n            forceSetStyle = true;\n            scope.lastDrawType = DRAW_TYPE_PATH;\n        }\n        bindPathAndTextCommonStyle(ctx, el, prevEl, forceSetStyle, scope);\n        if (!canBatchPath || (!scope.batchFill && !scope.batchStroke)) {\n            ctx.beginPath();\n        }\n        brushPath(ctx, el, style, canBatchPath);\n        if (canBatchPath) {\n            scope.batchFill = style.fill || '';\n            scope.batchStroke = style.stroke || '';\n        }\n    }\n    else {\n        if (el instanceof TSpan) {\n            if (scope.lastDrawType !== DRAW_TYPE_TEXT) {\n                forceSetStyle = true;\n                scope.lastDrawType = DRAW_TYPE_TEXT;\n            }\n            bindPathAndTextCommonStyle(ctx, el, prevEl, forceSetStyle, scope);\n            brushText(ctx, el, style);\n        }\n        else if (el instanceof ZRImage) {\n            if (scope.lastDrawType !== DRAW_TYPE_IMAGE) {\n                forceSetStyle = true;\n                scope.lastDrawType = DRAW_TYPE_IMAGE;\n            }\n            bindImageStyle(ctx, el, prevEl, forceSetStyle, scope);\n            brushImage(ctx, el, style);\n        }\n        else if (el.getTemporalDisplayables) {\n            if (scope.lastDrawType !== DRAW_TYPE_INCREMENTAL) {\n                forceSetStyle = true;\n                scope.lastDrawType = DRAW_TYPE_INCREMENTAL;\n            }\n            brushIncremental(ctx, el, scope);\n        }\n    }\n    if (canBatchPath && isLast) {\n        flushPathDrawn(ctx, scope);\n    }\n    el.innerAfterBrush();\n    el.afterBrush && el.afterBrush();\n    scope.prevEl = el;\n    el.__dirty = 0;\n    el.__isRendered = true;\n}\nfunction brushIncremental(ctx, el, scope) {\n    var displayables = el.getDisplayables();\n    var temporalDisplayables = el.getTemporalDisplayables();\n    ctx.save();\n    var innerScope = {\n        prevElClipPaths: null,\n        prevEl: null,\n        allClipped: false,\n        viewWidth: scope.viewWidth,\n        viewHeight: scope.viewHeight,\n        inHover: scope.inHover\n    };\n    var i;\n    var len;\n    for (i = el.getCursor(), len = displayables.length; i < len; i++) {\n        var displayable = displayables[i];\n        displayable.beforeBrush && displayable.beforeBrush();\n        displayable.innerBeforeBrush();\n        brush(ctx, displayable, innerScope, i === len - 1);\n        displayable.innerAfterBrush();\n        displayable.afterBrush && displayable.afterBrush();\n        innerScope.prevEl = displayable;\n    }\n    for (var i_1 = 0, len_1 = temporalDisplayables.length; i_1 < len_1; i_1++) {\n        var displayable = temporalDisplayables[i_1];\n        displayable.beforeBrush && displayable.beforeBrush();\n        displayable.innerBeforeBrush();\n        brush(ctx, displayable, innerScope, i_1 === len_1 - 1);\n        displayable.innerAfterBrush();\n        displayable.afterBrush && displayable.afterBrush();\n        innerScope.prevEl = displayable;\n    }\n    el.clearTemporalDisplayables();\n    el.notClear = true;\n    ctx.restore();\n}\n","import LRU from '../../core/LRU.js';\nimport { platformApi } from '../../core/platform.js';\nvar globalImageCache = new LRU(50);\nexport function findExistImage(newImageOrSrc) {\n    if (typeof newImageOrSrc === 'string') {\n        var cachedImgObj = globalImageCache.get(newImageOrSrc);\n        return cachedImgObj && cachedImgObj.image;\n    }\n    else {\n        return newImageOrSrc;\n    }\n}\nexport function createOrUpdateImage(newImageOrSrc, image, hostEl, onload, cbPayload) {\n    if (!newImageOrSrc) {\n        return image;\n    }\n    else if (typeof newImageOrSrc === 'string') {\n        if ((image && image.__zrImageSrc === newImageOrSrc) || !hostEl) {\n            return image;\n        }\n        var cachedImgObj = globalImageCache.get(newImageOrSrc);\n        var pendingWrap = { hostEl: hostEl, cb: onload, cbPayload: cbPayload };\n        if (cachedImgObj) {\n            image = cachedImgObj.image;\n            !isImageReady(image) && cachedImgObj.pending.push(pendingWrap);\n        }\n        else {\n            image = platformApi.loadImage(newImageOrSrc, imageOnLoad, imageOnLoad);\n            image.__zrImageSrc = newImageOrSrc;\n            globalImageCache.put(newImageOrSrc, image.__cachedImgObj = {\n                image: image,\n                pending: [pendingWrap]\n            });\n        }\n        return image;\n    }\n    else {\n        return newImageOrSrc;\n    }\n}\nfunction imageOnLoad() {\n    var cachedImgObj = this.__cachedImgObj;\n    this.onload = this.onerror = this.__cachedImgObj = null;\n    for (var i = 0; i < cachedImgObj.pending.length; i++) {\n        var pendingWrap = cachedImgObj.pending[i];\n        var cb = pendingWrap.cb;\n        cb && cb(this, pendingWrap.cbPayload);\n        pendingWrap.hostEl.dirty();\n    }\n    cachedImgObj.pending.length = 0;\n}\nexport function isImageReady(image) {\n    return image && image.width && image.height;\n}\n","import Eventful from './Eventful.js';\nimport env from './env.js';\nimport { isCanvasEl, transformCoordWithViewport } from './dom.js';\nvar MOUSE_EVENT_REG = /^(?:mouse|pointer|contextmenu|drag|drop)|click/;\nvar _calcOut = [];\nvar firefoxNotSupportOffsetXY = env.browser.firefox\n    && +env.browser.version.split('.')[0] < 39;\nexport function clientToLocal(el, e, out, calculate) {\n    out = out || {};\n    if (calculate) {\n        calculateZrXY(el, e, out);\n    }\n    else if (firefoxNotSupportOffsetXY\n        && e.layerX != null\n        && e.layerX !== e.offsetX) {\n        out.zrX = e.layerX;\n        out.zrY = e.layerY;\n    }\n    else if (e.offsetX != null) {\n        out.zrX = e.offsetX;\n        out.zrY = e.offsetY;\n    }\n    else {\n        calculateZrXY(el, e, out);\n    }\n    return out;\n}\nfunction calculateZrXY(el, e, out) {\n    if (env.domSupported && el.getBoundingClientRect) {\n        var ex = e.clientX;\n        var ey = e.clientY;\n        if (isCanvasEl(el)) {\n            var box = el.getBoundingClientRect();\n            out.zrX = ex - box.left;\n            out.zrY = ey - box.top;\n            return;\n        }\n        else {\n            if (transformCoordWithViewport(_calcOut, el, ex, ey)) {\n                out.zrX = _calcOut[0];\n                out.zrY = _calcOut[1];\n                return;\n            }\n        }\n    }\n    out.zrX = out.zrY = 0;\n}\nexport function getNativeEvent(e) {\n    return e\n        || window.event;\n}\nexport function normalizeEvent(el, e, calculate) {\n    e = getNativeEvent(e);\n    if (e.zrX != null) {\n        return e;\n    }\n    var eventType = e.type;\n    var isTouch = eventType && eventType.indexOf('touch') >= 0;\n    if (!isTouch) {\n        clientToLocal(el, e, e, calculate);\n        var wheelDelta = getWheelDeltaMayPolyfill(e);\n        e.zrDelta = wheelDelta ? wheelDelta / 120 : -(e.detail || 0) / 3;\n    }\n    else {\n        var touch = eventType !== 'touchend'\n            ? e.targetTouches[0]\n            : e.changedTouches[0];\n        touch && clientToLocal(el, touch, e, calculate);\n    }\n    var button = e.button;\n    if (e.which == null && button !== undefined && MOUSE_EVENT_REG.test(e.type)) {\n        e.which = (button & 1 ? 1 : (button & 2 ? 3 : (button & 4 ? 2 : 0)));\n    }\n    return e;\n}\nfunction getWheelDeltaMayPolyfill(e) {\n    var rawWheelDelta = e.wheelDelta;\n    if (rawWheelDelta) {\n        return rawWheelDelta;\n    }\n    var deltaX = e.deltaX;\n    var deltaY = e.deltaY;\n    if (deltaX == null || deltaY == null) {\n        return rawWheelDelta;\n    }\n    var delta = deltaY !== 0 ? Math.abs(deltaY) : Math.abs(deltaX);\n    var sign = deltaY > 0 ? -1\n        : deltaY < 0 ? 1\n            : deltaX > 0 ? -1\n                : 1;\n    return 3 * delta * sign;\n}\nexport function addEventListener(el, name, handler, opt) {\n    el.addEventListener(name, handler, opt);\n}\nexport function removeEventListener(el, name, handler, opt) {\n    el.removeEventListener(name, handler, opt);\n}\nexport var stop = function (e) {\n    e.preventDefault();\n    e.stopPropagation();\n    e.cancelBubble = true;\n};\nexport function isMiddleOrRightButtonOnMouseUpDown(e) {\n    return e.which === 2 || e.which === 3;\n}\nexport { Eventful as Dispatcher };\n","var LN2 = Math.log(2);\nfunction determinant(rows, rank, rowStart, rowMask, colMask, detCache) {\n    var cacheKey = rowMask + '-' + colMask;\n    var fullRank = rows.length;\n    if (detCache.hasOwnProperty(cacheKey)) {\n        return detCache[cacheKey];\n    }\n    if (rank === 1) {\n        var colStart = Math.round(Math.log(((1 << fullRank) - 1) & ~colMask) / LN2);\n        return rows[rowStart][colStart];\n    }\n    var subRowMask = rowMask | (1 << rowStart);\n    var subRowStart = rowStart + 1;\n    while (rowMask & (1 << subRowStart)) {\n        subRowStart++;\n    }\n    var sum = 0;\n    for (var j = 0, colLocalIdx = 0; j < fullRank; j++) {\n        var colTag = 1 << j;\n        if (!(colTag & colMask)) {\n            sum += (colLocalIdx % 2 ? -1 : 1) * rows[rowStart][j]\n                * determinant(rows, rank - 1, subRowStart, subRowMask, colMask | colTag, detCache);\n            colLocalIdx++;\n        }\n    }\n    detCache[cacheKey] = sum;\n    return sum;\n}\nexport function buildTransformer(src, dest) {\n    var mA = [\n        [src[0], src[1], 1, 0, 0, 0, -dest[0] * src[0], -dest[0] * src[1]],\n        [0, 0, 0, src[0], src[1], 1, -dest[1] * src[0], -dest[1] * src[1]],\n        [src[2], src[3], 1, 0, 0, 0, -dest[2] * src[2], -dest[2] * src[3]],\n        [0, 0, 0, src[2], src[3], 1, -dest[3] * src[2], -dest[3] * src[3]],\n        [src[4], src[5], 1, 0, 0, 0, -dest[4] * src[4], -dest[4] * src[5]],\n        [0, 0, 0, src[4], src[5], 1, -dest[5] * src[4], -dest[5] * src[5]],\n        [src[6], src[7], 1, 0, 0, 0, -dest[6] * src[6], -dest[6] * src[7]],\n        [0, 0, 0, src[6], src[7], 1, -dest[7] * src[6], -dest[7] * src[7]]\n    ];\n    var detCache = {};\n    var det = determinant(mA, 8, 0, 0, 0, detCache);\n    if (det === 0) {\n        return;\n    }\n    var vh = [];\n    for (var i = 0; i < 8; i++) {\n        for (var j = 0; j < 8; j++) {\n            vh[j] == null && (vh[j] = 0);\n            vh[j] += ((i + j) % 2 ? -1 : 1)\n                * determinant(mA, 7, i === 0 ? 1 : 0, 1 << i, 1 << j, detCache)\n                / det * dest[i];\n        }\n    }\n    return function (out, srcPointX, srcPointY) {\n        var pk = srcPointX * vh[6] + srcPointY * vh[7] + 1;\n        out[0] = (srcPointX * vh[0] + srcPointY * vh[1] + vh[2]) / pk;\n        out[1] = (srcPointX * vh[3] + srcPointY * vh[4] + vh[5]) / pk;\n    };\n}\n","import env from './env.js';\nimport { buildTransformer } from './fourPointsTransform.js';\nvar EVENT_SAVED_PROP = '___zrEVENTSAVED';\nvar _calcOut = [];\nexport function transformLocalCoord(out, elFrom, elTarget, inX, inY) {\n    return transformCoordWithViewport(_calcOut, elFrom, inX, inY, true)\n        && transformCoordWithViewport(out, elTarget, _calcOut[0], _calcOut[1]);\n}\nexport function transformCoordWithViewport(out, el, inX, inY, inverse) {\n    if (el.getBoundingClientRect && env.domSupported && !isCanvasEl(el)) {\n        var saved = el[EVENT_SAVED_PROP] || (el[EVENT_SAVED_PROP] = {});\n        var markers = prepareCoordMarkers(el, saved);\n        var transformer = preparePointerTransformer(markers, saved, inverse);\n        if (transformer) {\n            transformer(out, inX, inY);\n            return true;\n        }\n    }\n    return false;\n}\nfunction prepareCoordMarkers(el, saved) {\n    var markers = saved.markers;\n    if (markers) {\n        return markers;\n    }\n    markers = saved.markers = [];\n    var propLR = ['left', 'right'];\n    var propTB = ['top', 'bottom'];\n    for (var i = 0; i < 4; i++) {\n        var marker = document.createElement('div');\n        var stl = marker.style;\n        var idxLR = i % 2;\n        var idxTB = (i >> 1) % 2;\n        stl.cssText = [\n            'position: absolute',\n            'visibility: hidden',\n            'padding: 0',\n            'margin: 0',\n            'border-width: 0',\n            'user-select: none',\n            'width:0',\n            'height:0',\n            propLR[idxLR] + ':0',\n            propTB[idxTB] + ':0',\n            propLR[1 - idxLR] + ':auto',\n            propTB[1 - idxTB] + ':auto',\n            ''\n        ].join('!important;');\n        el.appendChild(marker);\n        markers.push(marker);\n    }\n    return markers;\n}\nfunction preparePointerTransformer(markers, saved, inverse) {\n    var transformerName = inverse ? 'invTrans' : 'trans';\n    var transformer = saved[transformerName];\n    var oldSrcCoords = saved.srcCoords;\n    var srcCoords = [];\n    var destCoords = [];\n    var oldCoordTheSame = true;\n    for (var i = 0; i < 4; i++) {\n        var rect = markers[i].getBoundingClientRect();\n        var ii = 2 * i;\n        var x = rect.left;\n        var y = rect.top;\n        srcCoords.push(x, y);\n        oldCoordTheSame = oldCoordTheSame && oldSrcCoords && x === oldSrcCoords[ii] && y === oldSrcCoords[ii + 1];\n        destCoords.push(markers[i].offsetLeft, markers[i].offsetTop);\n    }\n    return (oldCoordTheSame && transformer)\n        ? transformer\n        : (saved.srcCoords = srcCoords,\n            saved[transformerName] = inverse\n                ? buildTransformer(destCoords, srcCoords)\n                : buildTransformer(srcCoords, destCoords));\n}\nexport function isCanvasEl(el) {\n    return el.nodeName.toUpperCase() === 'CANVAS';\n}\n","import { quadraticProjectPoint } from '../core/curve.js';\nexport function containStroke(x0, y0, x1, y1, x2, y2, lineWidth, x, y) {\n    if (lineWidth === 0) {\n        return false;\n    }\n    var _l = lineWidth;\n    if ((y > y0 + _l && y > y1 + _l && y > y2 + _l)\n        || (y < y0 - _l && y < y1 - _l && y < y2 - _l)\n        || (x > x0 + _l && x > x1 + _l && x > x2 + _l)\n        || (x < x0 - _l && x < x1 - _l && x < x2 - _l)) {\n        return false;\n    }\n    var d = quadraticProjectPoint(x0, y0, x1, y1, x2, y2, x, y, null);\n    return d <= _l / 2;\n}\n","var Param = (function () {\n    function Param(target, e) {\n        this.target = target;\n        this.topTarget = e && e.topTarget;\n    }\n    return Param;\n}());\nvar Draggable = (function () {\n    function Draggable(handler) {\n        this.handler = handler;\n        handler.on('mousedown', this._dragStart, this);\n        handler.on('mousemove', this._drag, this);\n        handler.on('mouseup', this._dragEnd, this);\n    }\n    Draggable.prototype._dragStart = function (e) {\n        var draggingTarget = e.target;\n        while (draggingTarget && !draggingTarget.draggable) {\n            draggingTarget = draggingTarget.parent || draggingTarget.__hostTarget;\n        }\n        if (draggingTarget) {\n            this._draggingTarget = draggingTarget;\n            draggingTarget.dragging = true;\n            this._x = e.offsetX;\n            this._y = e.offsetY;\n            this.handler.dispatchToElement(new Param(draggingTarget, e), 'dragstart', e.event);\n        }\n    };\n    Draggable.prototype._drag = function (e) {\n        var draggingTarget = this._draggingTarget;\n        if (draggingTarget) {\n            var x = e.offsetX;\n            var y = e.offsetY;\n            var dx = x - this._x;\n            var dy = y - this._y;\n            this._x = x;\n            this._y = y;\n            draggingTarget.drift(dx, dy, e);\n            this.handler.dispatchToElement(new Param(draggingTarget, e), 'drag', e.event);\n            var dropTarget = this.handler.findHover(x, y, draggingTarget).target;\n            var lastDropTarget = this._dropTarget;\n            this._dropTarget = dropTarget;\n            if (draggingTarget !== dropTarget) {\n                if (lastDropTarget && dropTarget !== lastDropTarget) {\n                    this.handler.dispatchToElement(new Param(lastDropTarget, e), 'dragleave', e.event);\n                }\n                if (dropTarget && dropTarget !== lastDropTarget) {\n                    this.handler.dispatchToElement(new Param(dropTarget, e), 'dragenter', e.event);\n                }\n            }\n        }\n    };\n    Draggable.prototype._dragEnd = function (e) {\n        var draggingTarget = this._draggingTarget;\n        if (draggingTarget) {\n            draggingTarget.dragging = false;\n        }\n        this.handler.dispatchToElement(new Param(draggingTarget, e), 'dragend', e.event);\n        if (this._dropTarget) {\n            this.handler.dispatchToElement(new Param(this._dropTarget, e), 'drop', e.event);\n        }\n        this._draggingTarget = null;\n        this._dropTarget = null;\n    };\n    return Draggable;\n}());\nexport default Draggable;\n","import * as eventUtil from './event.js';\nvar GestureMgr = (function () {\n    function GestureMgr() {\n        this._track = [];\n    }\n    GestureMgr.prototype.recognize = function (event, target, root) {\n        this._doTrack(event, target, root);\n        return this._recognize(event);\n    };\n    GestureMgr.prototype.clear = function () {\n        this._track.length = 0;\n        return this;\n    };\n    GestureMgr.prototype._doTrack = function (event, target, root) {\n        var touches = event.touches;\n        if (!touches) {\n            return;\n        }\n        var trackItem = {\n            points: [],\n            touches: [],\n            target: target,\n            event: event\n        };\n        for (var i = 0, len = touches.length; i < len; i++) {\n            var touch = touches[i];\n            var pos = eventUtil.clientToLocal(root, touch, {});\n            trackItem.points.push([pos.zrX, pos.zrY]);\n            trackItem.touches.push(touch);\n        }\n        this._track.push(trackItem);\n    };\n    GestureMgr.prototype._recognize = function (event) {\n        for (var eventName in recognizers) {\n            if (recognizers.hasOwnProperty(eventName)) {\n                var gestureInfo = recognizers[eventName](this._track, event);\n                if (gestureInfo) {\n                    return gestureInfo;\n                }\n            }\n        }\n    };\n    return GestureMgr;\n}());\nexport { GestureMgr };\nfunction dist(pointPair) {\n    var dx = pointPair[1][0] - pointPair[0][0];\n    var dy = pointPair[1][1] - pointPair[0][1];\n    return Math.sqrt(dx * dx + dy * dy);\n}\nfunction center(pointPair) {\n    return [\n        (pointPair[0][0] + pointPair[1][0]) / 2,\n        (pointPair[0][1] + pointPair[1][1]) / 2\n    ];\n}\nvar recognizers = {\n    pinch: function (tracks, event) {\n        var trackLen = tracks.length;\n        if (!trackLen) {\n            return;\n        }\n        var pinchEnd = (tracks[trackLen - 1] || {}).points;\n        var pinchPre = (tracks[trackLen - 2] || {}).points || pinchEnd;\n        if (pinchPre\n            && pinchPre.length > 1\n            && pinchEnd\n            && pinchEnd.length > 1) {\n            var pinchScale = dist(pinchEnd) / dist(pinchPre);\n            !isFinite(pinchScale) && (pinchScale = 1);\n            event.pinchScale = pinchScale;\n            var pinchCenter = center(pinchEnd);\n            event.pinchX = pinchCenter[0];\n            event.pinchY = pinchCenter[1];\n            return {\n                type: 'pinch',\n                target: tracks[0].target,\n                event: event\n            };\n        }\n    }\n};\n","import { __extends } from \"tslib\";\nimport * as util from './core/util.js';\nimport * as vec2 from './core/vector.js';\nimport Draggable from './mixin/Draggable.js';\nimport Eventful from './core/Eventful.js';\nimport * as eventTool from './core/event.js';\nimport { GestureMgr } from './core/GestureMgr.js';\nvar SILENT = 'silent';\nfunction makeEventPacket(eveType, targetInfo, event) {\n    return {\n        type: eveType,\n        event: event,\n        target: targetInfo.target,\n        topTarget: targetInfo.topTarget,\n        cancelBubble: false,\n        offsetX: event.zrX,\n        offsetY: event.zrY,\n        gestureEvent: event.gestureEvent,\n        pinchX: event.pinchX,\n        pinchY: event.pinchY,\n        pinchScale: event.pinchScale,\n        wheelDelta: event.zrDelta,\n        zrByTouch: event.zrByTouch,\n        which: event.which,\n        stop: stopEvent\n    };\n}\nfunction stopEvent() {\n    eventTool.stop(this.event);\n}\nvar EmptyProxy = (function (_super) {\n    __extends(EmptyProxy, _super);\n    function EmptyProxy() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.handler = null;\n        return _this;\n    }\n    EmptyProxy.prototype.dispose = function () { };\n    EmptyProxy.prototype.setCursor = function () { };\n    return EmptyProxy;\n}(Eventful));\nvar HoveredResult = (function () {\n    function HoveredResult(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n    return HoveredResult;\n}());\nvar handlerNames = [\n    'click', 'dblclick', 'mousewheel', 'mouseout',\n    'mouseup', 'mousedown', 'mousemove', 'contextmenu'\n];\nvar Handler = (function (_super) {\n    __extends(Handler, _super);\n    function Handler(storage, painter, proxy, painterRoot) {\n        var _this = _super.call(this) || this;\n        _this._hovered = new HoveredResult(0, 0);\n        _this.storage = storage;\n        _this.painter = painter;\n        _this.painterRoot = painterRoot;\n        proxy = proxy || new EmptyProxy();\n        _this.proxy = null;\n        _this.setHandlerProxy(proxy);\n        _this._draggingMgr = new Draggable(_this);\n        return _this;\n    }\n    Handler.prototype.setHandlerProxy = function (proxy) {\n        if (this.proxy) {\n            this.proxy.dispose();\n        }\n        if (proxy) {\n            util.each(handlerNames, function (name) {\n                proxy.on && proxy.on(name, this[name], this);\n            }, this);\n            proxy.handler = this;\n        }\n        this.proxy = proxy;\n    };\n    Handler.prototype.mousemove = function (event) {\n        var x = event.zrX;\n        var y = event.zrY;\n        var isOutside = isOutsideBoundary(this, x, y);\n        var lastHovered = this._hovered;\n        var lastHoveredTarget = lastHovered.target;\n        if (lastHoveredTarget && !lastHoveredTarget.__zr) {\n            lastHovered = this.findHover(lastHovered.x, lastHovered.y);\n            lastHoveredTarget = lastHovered.target;\n        }\n        var hovered = this._hovered = isOutside ? new HoveredResult(x, y) : this.findHover(x, y);\n        var hoveredTarget = hovered.target;\n        var proxy = this.proxy;\n        proxy.setCursor && proxy.setCursor(hoveredTarget ? hoveredTarget.cursor : 'default');\n        if (lastHoveredTarget && hoveredTarget !== lastHoveredTarget) {\n            this.dispatchToElement(lastHovered, 'mouseout', event);\n        }\n        this.dispatchToElement(hovered, 'mousemove', event);\n        if (hoveredTarget && hoveredTarget !== lastHoveredTarget) {\n            this.dispatchToElement(hovered, 'mouseover', event);\n        }\n    };\n    Handler.prototype.mouseout = function (event) {\n        var eventControl = event.zrEventControl;\n        if (eventControl !== 'only_globalout') {\n            this.dispatchToElement(this._hovered, 'mouseout', event);\n        }\n        if (eventControl !== 'no_globalout') {\n            this.trigger('globalout', { type: 'globalout', event: event });\n        }\n    };\n    Handler.prototype.resize = function () {\n        this._hovered = new HoveredResult(0, 0);\n    };\n    Handler.prototype.dispatch = function (eventName, eventArgs) {\n        var handler = this[eventName];\n        handler && handler.call(this, eventArgs);\n    };\n    Handler.prototype.dispose = function () {\n        this.proxy.dispose();\n        this.storage = null;\n        this.proxy = null;\n        this.painter = null;\n    };\n    Handler.prototype.setCursorStyle = function (cursorStyle) {\n        var proxy = this.proxy;\n        proxy.setCursor && proxy.setCursor(cursorStyle);\n    };\n    Handler.prototype.dispatchToElement = function (targetInfo, eventName, event) {\n        targetInfo = targetInfo || {};\n        var el = targetInfo.target;\n        if (el && el.silent) {\n            return;\n        }\n        var eventKey = ('on' + eventName);\n        var eventPacket = makeEventPacket(eventName, targetInfo, event);\n        while (el) {\n            el[eventKey]\n                && (eventPacket.cancelBubble = !!el[eventKey].call(el, eventPacket));\n            el.trigger(eventName, eventPacket);\n            el = el.__hostTarget ? el.__hostTarget : el.parent;\n            if (eventPacket.cancelBubble) {\n                break;\n            }\n        }\n        if (!eventPacket.cancelBubble) {\n            this.trigger(eventName, eventPacket);\n            if (this.painter && this.painter.eachOtherLayer) {\n                this.painter.eachOtherLayer(function (layer) {\n                    if (typeof (layer[eventKey]) === 'function') {\n                        layer[eventKey].call(layer, eventPacket);\n                    }\n                    if (layer.trigger) {\n                        layer.trigger(eventName, eventPacket);\n                    }\n                });\n            }\n        }\n    };\n    Handler.prototype.findHover = function (x, y, exclude) {\n        var list = this.storage.getDisplayList();\n        var out = new HoveredResult(x, y);\n        for (var i = list.length - 1; i >= 0; i--) {\n            var hoverCheckResult = void 0;\n            if (list[i] !== exclude\n                && !list[i].ignore\n                && (hoverCheckResult = isHover(list[i], x, y))) {\n                !out.topTarget && (out.topTarget = list[i]);\n                if (hoverCheckResult !== SILENT) {\n                    out.target = list[i];\n                    break;\n                }\n            }\n        }\n        return out;\n    };\n    Handler.prototype.processGesture = function (event, stage) {\n        if (!this._gestureMgr) {\n            this._gestureMgr = new GestureMgr();\n        }\n        var gestureMgr = this._gestureMgr;\n        stage === 'start' && gestureMgr.clear();\n        var gestureInfo = gestureMgr.recognize(event, this.findHover(event.zrX, event.zrY, null).target, this.proxy.dom);\n        stage === 'end' && gestureMgr.clear();\n        if (gestureInfo) {\n            var type = gestureInfo.type;\n            event.gestureEvent = type;\n            var res = new HoveredResult();\n            res.target = gestureInfo.target;\n            this.dispatchToElement(res, type, gestureInfo.event);\n        }\n    };\n    return Handler;\n}(Eventful));\nutil.each(['click', 'mousedown', 'mouseup', 'mousewheel', 'dblclick', 'contextmenu'], function (name) {\n    Handler.prototype[name] = function (event) {\n        var x = event.zrX;\n        var y = event.zrY;\n        var isOutside = isOutsideBoundary(this, x, y);\n        var hovered;\n        var hoveredTarget;\n        if (name !== 'mouseup' || !isOutside) {\n            hovered = this.findHover(x, y);\n            hoveredTarget = hovered.target;\n        }\n        if (name === 'mousedown') {\n            this._downEl = hoveredTarget;\n            this._downPoint = [event.zrX, event.zrY];\n            this._upEl = hoveredTarget;\n        }\n        else if (name === 'mouseup') {\n            this._upEl = hoveredTarget;\n        }\n        else if (name === 'click') {\n            if (this._downEl !== this._upEl\n                || !this._downPoint\n                || vec2.dist(this._downPoint, [event.zrX, event.zrY]) > 4) {\n                return;\n            }\n            this._downPoint = null;\n        }\n        this.dispatchToElement(hovered, name, event);\n    };\n});\nfunction isHover(displayable, x, y) {\n    if (displayable[displayable.rectHover ? 'rectContain' : 'contain'](x, y)) {\n        var el = displayable;\n        var isSilent = void 0;\n        var ignoreClip = false;\n        while (el) {\n            if (el.ignoreClip) {\n                ignoreClip = true;\n            }\n            if (!ignoreClip) {\n                var clipPath = el.getClipPath();\n                if (clipPath && !clipPath.contain(x, y)) {\n                    return false;\n                }\n                if (el.silent) {\n                    isSilent = true;\n                }\n            }\n            var hostEl = el.__hostTarget;\n            el = hostEl ? hostEl : el.parent;\n        }\n        return isSilent ? SILENT : true;\n    }\n    return false;\n}\nfunction isOutsideBoundary(handlerInstance, x, y) {\n    var painter = handlerInstance.painter;\n    return x < 0 || x > painter.getWidth() || y < 0 || y > painter.getHeight();\n}\nexport default Handler;\n","import * as util from './core/util.js';\nimport timsort from './core/timsort.js';\nimport { REDRAW_BIT } from './graphic/constants.js';\nvar invalidZErrorLogged = false;\nfunction logInvalidZError() {\n    if (invalidZErrorLogged) {\n        return;\n    }\n    invalidZErrorLogged = true;\n    console.warn('z / z2 / zlevel of displayable is invalid, which may cause unexpected errors');\n}\nfunction shapeCompareFunc(a, b) {\n    if (a.zlevel === b.zlevel) {\n        if (a.z === b.z) {\n            return a.z2 - b.z2;\n        }\n        return a.z - b.z;\n    }\n    return a.zlevel - b.zlevel;\n}\nvar Storage = (function () {\n    function Storage() {\n        this._roots = [];\n        this._displayList = [];\n        this._displayListLen = 0;\n        this.displayableSortFunc = shapeCompareFunc;\n    }\n    Storage.prototype.traverse = function (cb, context) {\n        for (var i = 0; i < this._roots.length; i++) {\n            this._roots[i].traverse(cb, context);\n        }\n    };\n    Storage.prototype.getDisplayList = function (update, includeIgnore) {\n        includeIgnore = includeIgnore || false;\n        var displayList = this._displayList;\n        if (update || !displayList.length) {\n            this.updateDisplayList(includeIgnore);\n        }\n        return displayList;\n    };\n    Storage.prototype.updateDisplayList = function (includeIgnore) {\n        this._displayListLen = 0;\n        var roots = this._roots;\n        var displayList = this._displayList;\n        for (var i = 0, len = roots.length; i < len; i++) {\n            this._updateAndAddDisplayable(roots[i], null, includeIgnore);\n        }\n        displayList.length = this._displayListLen;\n        timsort(displayList, shapeCompareFunc);\n    };\n    Storage.prototype._updateAndAddDisplayable = function (el, clipPaths, includeIgnore) {\n        if (el.ignore && !includeIgnore) {\n            return;\n        }\n        el.beforeUpdate();\n        el.update();\n        el.afterUpdate();\n        var userSetClipPath = el.getClipPath();\n        if (el.ignoreClip) {\n            clipPaths = null;\n        }\n        else if (userSetClipPath) {\n            if (clipPaths) {\n                clipPaths = clipPaths.slice();\n            }\n            else {\n                clipPaths = [];\n            }\n            var currentClipPath = userSetClipPath;\n            var parentClipPath = el;\n            while (currentClipPath) {\n                currentClipPath.parent = parentClipPath;\n                currentClipPath.updateTransform();\n                clipPaths.push(currentClipPath);\n                parentClipPath = currentClipPath;\n                currentClipPath = currentClipPath.getClipPath();\n            }\n        }\n        if (el.childrenRef) {\n            var children = el.childrenRef();\n            for (var i = 0; i < children.length; i++) {\n                var child = children[i];\n                if (el.__dirty) {\n                    child.__dirty |= REDRAW_BIT;\n                }\n                this._updateAndAddDisplayable(child, clipPaths, includeIgnore);\n            }\n            el.__dirty = 0;\n        }\n        else {\n            var disp = el;\n            if (clipPaths && clipPaths.length) {\n                disp.__clipPaths = clipPaths;\n            }\n            else if (disp.__clipPaths && disp.__clipPaths.length > 0) {\n                disp.__clipPaths = [];\n            }\n            if (isNaN(disp.z)) {\n                logInvalidZError();\n                disp.z = 0;\n            }\n            if (isNaN(disp.z2)) {\n                logInvalidZError();\n                disp.z2 = 0;\n            }\n            if (isNaN(disp.zlevel)) {\n                logInvalidZError();\n                disp.zlevel = 0;\n            }\n            this._displayList[this._displayListLen++] = disp;\n        }\n        var decalEl = el.getDecalElement && el.getDecalElement();\n        if (decalEl) {\n            this._updateAndAddDisplayable(decalEl, clipPaths, includeIgnore);\n        }\n        var textGuide = el.getTextGuideLine();\n        if (textGuide) {\n            this._updateAndAddDisplayable(textGuide, clipPaths, includeIgnore);\n        }\n        var textEl = el.getTextContent();\n        if (textEl) {\n            this._updateAndAddDisplayable(textEl, clipPaths, includeIgnore);\n        }\n    };\n    Storage.prototype.addRoot = function (el) {\n        if (el.__zr && el.__zr.storage === this) {\n            return;\n        }\n        this._roots.push(el);\n    };\n    Storage.prototype.delRoot = function (el) {\n        if (el instanceof Array) {\n            for (var i = 0, l = el.length; i < l; i++) {\n                this.delRoot(el[i]);\n            }\n            return;\n        }\n        var idx = util.indexOf(this._roots, el);\n        if (idx >= 0) {\n            this._roots.splice(idx, 1);\n        }\n    };\n    Storage.prototype.delAllRoots = function () {\n        this._roots = [];\n        this._displayList = [];\n        this._displayListLen = 0;\n        return;\n    };\n    Storage.prototype.getRoots = function () {\n        return this._roots;\n    };\n    Storage.prototype.dispose = function () {\n        this._displayList = null;\n        this._roots = null;\n    };\n    return Storage;\n}());\nexport default Storage;\n","import { __extends } from \"tslib\";\nimport Eventful from '../core/Eventful.js';\nimport requestAnimationFrame from './requestAnimationFrame.js';\nimport Animator from './Animator.js';\nexport function getTime() {\n    return new Date().getTime();\n}\nvar Animation = (function (_super) {\n    __extends(Animation, _super);\n    function Animation(opts) {\n        var _this = _super.call(this) || this;\n        _this._running = false;\n        _this._time = 0;\n        _this._pausedTime = 0;\n        _this._pauseStart = 0;\n        _this._paused = false;\n        opts = opts || {};\n        _this.stage = opts.stage || {};\n        return _this;\n    }\n    Animation.prototype.addClip = function (clip) {\n        if (clip.animation) {\n            this.removeClip(clip);\n        }\n        if (!this._head) {\n            this._head = this._tail = clip;\n        }\n        else {\n            this._tail.next = clip;\n            clip.prev = this._tail;\n            clip.next = null;\n            this._tail = clip;\n        }\n        clip.animation = this;\n    };\n    Animation.prototype.addAnimator = function (animator) {\n        animator.animation = this;\n        var clip = animator.getClip();\n        if (clip) {\n            this.addClip(clip);\n        }\n    };\n    Animation.prototype.removeClip = function (clip) {\n        if (!clip.animation) {\n            return;\n        }\n        var prev = clip.prev;\n        var next = clip.next;\n        if (prev) {\n            prev.next = next;\n        }\n        else {\n            this._head = next;\n        }\n        if (next) {\n            next.prev = prev;\n        }\n        else {\n            this._tail = prev;\n        }\n        clip.next = clip.prev = clip.animation = null;\n    };\n    Animation.prototype.removeAnimator = function (animator) {\n        var clip = animator.getClip();\n        if (clip) {\n            this.removeClip(clip);\n        }\n        animator.animation = null;\n    };\n    Animation.prototype.update = function (notTriggerFrameAndStageUpdate) {\n        var time = getTime() - this._pausedTime;\n        var delta = time - this._time;\n        var clip = this._head;\n        while (clip) {\n            var nextClip = clip.next;\n            var finished = clip.step(time, delta);\n            if (finished) {\n                clip.ondestroy();\n                this.removeClip(clip);\n                clip = nextClip;\n            }\n            else {\n                clip = nextClip;\n            }\n        }\n        this._time = time;\n        if (!notTriggerFrameAndStageUpdate) {\n            this.trigger('frame', delta);\n            this.stage.update && this.stage.update();\n        }\n    };\n    Animation.prototype._startLoop = function () {\n        var self = this;\n        this._running = true;\n        function step() {\n            if (self._running) {\n                requestAnimationFrame(step);\n                !self._paused && self.update();\n            }\n        }\n        requestAnimationFrame(step);\n    };\n    Animation.prototype.start = function () {\n        if (this._running) {\n            return;\n        }\n        this._time = getTime();\n        this._pausedTime = 0;\n        this._startLoop();\n    };\n    Animation.prototype.stop = function () {\n        this._running = false;\n    };\n    Animation.prototype.pause = function () {\n        if (!this._paused) {\n            this._pauseStart = getTime();\n            this._paused = true;\n        }\n    };\n    Animation.prototype.resume = function () {\n        if (this._paused) {\n            this._pausedTime += getTime() - this._pauseStart;\n            this._paused = false;\n        }\n    };\n    Animation.prototype.clear = function () {\n        var clip = this._head;\n        while (clip) {\n            var nextClip = clip.next;\n            clip.prev = clip.next = clip.animation = null;\n            clip = nextClip;\n        }\n        this._head = this._tail = null;\n    };\n    Animation.prototype.isFinished = function () {\n        return this._head == null;\n    };\n    Animation.prototype.animate = function (target, options) {\n        options = options || {};\n        this.start();\n        var animator = new Animator(target, options.loop);\n        this.addAnimator(animator);\n        return animator;\n    };\n    return Animation;\n}(Eventful));\nexport default Animation;\n","import { __extends } from \"tslib\";\nimport { addEventListener, removeEventListener, normalizeEvent, getNativeEvent } from '../core/event.js';\nimport * as zrUtil from '../core/util.js';\nimport Eventful from '../core/Eventful.js';\nimport env from '../core/env.js';\nvar TOUCH_CLICK_DELAY = 300;\nvar globalEventSupported = env.domSupported;\nvar localNativeListenerNames = (function () {\n    var mouseHandlerNames = [\n        'click', 'dblclick', 'mousewheel', 'wheel', 'mouseout',\n        'mouseup', 'mousedown', 'mousemove', 'contextmenu'\n    ];\n    var touchHandlerNames = [\n        'touchstart', 'touchend', 'touchmove'\n    ];\n    var pointerEventNameMap = {\n        pointerdown: 1, pointerup: 1, pointermove: 1, pointerout: 1\n    };\n    var pointerHandlerNames = zrUtil.map(mouseHandlerNames, function (name) {\n        var nm = name.replace('mouse', 'pointer');\n        return pointerEventNameMap.hasOwnProperty(nm) ? nm : name;\n    });\n    return {\n        mouse: mouseHandlerNames,\n        touch: touchHandlerNames,\n        pointer: pointerHandlerNames\n    };\n})();\nvar globalNativeListenerNames = {\n    mouse: ['mousemove', 'mouseup'],\n    pointer: ['pointermove', 'pointerup']\n};\nvar wheelEventSupported = false;\nfunction isPointerFromTouch(event) {\n    var pointerType = event.pointerType;\n    return pointerType === 'pen' || pointerType === 'touch';\n}\nfunction setTouchTimer(scope) {\n    scope.touching = true;\n    if (scope.touchTimer != null) {\n        clearTimeout(scope.touchTimer);\n        scope.touchTimer = null;\n    }\n    scope.touchTimer = setTimeout(function () {\n        scope.touching = false;\n        scope.touchTimer = null;\n    }, 700);\n}\nfunction markTouch(event) {\n    event && (event.zrByTouch = true);\n}\nfunction normalizeGlobalEvent(instance, event) {\n    return normalizeEvent(instance.dom, new FakeGlobalEvent(instance, event), true);\n}\nfunction isLocalEl(instance, el) {\n    var elTmp = el;\n    var isLocal = false;\n    while (elTmp && elTmp.nodeType !== 9\n        && !(isLocal = elTmp.domBelongToZr\n            || (elTmp !== el && elTmp === instance.painterRoot))) {\n        elTmp = elTmp.parentNode;\n    }\n    return isLocal;\n}\nvar FakeGlobalEvent = (function () {\n    function FakeGlobalEvent(instance, event) {\n        this.stopPropagation = zrUtil.noop;\n        this.stopImmediatePropagation = zrUtil.noop;\n        this.preventDefault = zrUtil.noop;\n        this.type = event.type;\n        this.target = this.currentTarget = instance.dom;\n        this.pointerType = event.pointerType;\n        this.clientX = event.clientX;\n        this.clientY = event.clientY;\n    }\n    return FakeGlobalEvent;\n}());\nvar localDOMHandlers = {\n    mousedown: function (event) {\n        event = normalizeEvent(this.dom, event);\n        this.__mayPointerCapture = [event.zrX, event.zrY];\n        this.trigger('mousedown', event);\n    },\n    mousemove: function (event) {\n        event = normalizeEvent(this.dom, event);\n        var downPoint = this.__mayPointerCapture;\n        if (downPoint && (event.zrX !== downPoint[0] || event.zrY !== downPoint[1])) {\n            this.__togglePointerCapture(true);\n        }\n        this.trigger('mousemove', event);\n    },\n    mouseup: function (event) {\n        event = normalizeEvent(this.dom, event);\n        this.__togglePointerCapture(false);\n        this.trigger('mouseup', event);\n    },\n    mouseout: function (event) {\n        event = normalizeEvent(this.dom, event);\n        var element = event.toElement || event.relatedTarget;\n        if (!isLocalEl(this, element)) {\n            if (this.__pointerCapturing) {\n                event.zrEventControl = 'no_globalout';\n            }\n            this.trigger('mouseout', event);\n        }\n    },\n    wheel: function (event) {\n        wheelEventSupported = true;\n        event = normalizeEvent(this.dom, event);\n        this.trigger('mousewheel', event);\n    },\n    mousewheel: function (event) {\n        if (wheelEventSupported) {\n            return;\n        }\n        event = normalizeEvent(this.dom, event);\n        this.trigger('mousewheel', event);\n    },\n    touchstart: function (event) {\n        event = normalizeEvent(this.dom, event);\n        markTouch(event);\n        this.__lastTouchMoment = new Date();\n        this.handler.processGesture(event, 'start');\n        localDOMHandlers.mousemove.call(this, event);\n        localDOMHandlers.mousedown.call(this, event);\n    },\n    touchmove: function (event) {\n        event = normalizeEvent(this.dom, event);\n        markTouch(event);\n        this.handler.processGesture(event, 'change');\n        localDOMHandlers.mousemove.call(this, event);\n    },\n    touchend: function (event) {\n        event = normalizeEvent(this.dom, event);\n        markTouch(event);\n        this.handler.processGesture(event, 'end');\n        localDOMHandlers.mouseup.call(this, event);\n        if (+new Date() - (+this.__lastTouchMoment) < TOUCH_CLICK_DELAY) {\n            localDOMHandlers.click.call(this, event);\n        }\n    },\n    pointerdown: function (event) {\n        localDOMHandlers.mousedown.call(this, event);\n    },\n    pointermove: function (event) {\n        if (!isPointerFromTouch(event)) {\n            localDOMHandlers.mousemove.call(this, event);\n        }\n    },\n    pointerup: function (event) {\n        localDOMHandlers.mouseup.call(this, event);\n    },\n    pointerout: function (event) {\n        if (!isPointerFromTouch(event)) {\n            localDOMHandlers.mouseout.call(this, event);\n        }\n    }\n};\nzrUtil.each(['click', 'dblclick', 'contextmenu'], function (name) {\n    localDOMHandlers[name] = function (event) {\n        event = normalizeEvent(this.dom, event);\n        this.trigger(name, event);\n    };\n});\nvar globalDOMHandlers = {\n    pointermove: function (event) {\n        if (!isPointerFromTouch(event)) {\n            globalDOMHandlers.mousemove.call(this, event);\n        }\n    },\n    pointerup: function (event) {\n        globalDOMHandlers.mouseup.call(this, event);\n    },\n    mousemove: function (event) {\n        this.trigger('mousemove', event);\n    },\n    mouseup: function (event) {\n        var pointerCaptureReleasing = this.__pointerCapturing;\n        this.__togglePointerCapture(false);\n        this.trigger('mouseup', event);\n        if (pointerCaptureReleasing) {\n            event.zrEventControl = 'only_globalout';\n            this.trigger('mouseout', event);\n        }\n    }\n};\nfunction mountLocalDOMEventListeners(instance, scope) {\n    var domHandlers = scope.domHandlers;\n    if (env.pointerEventsSupported) {\n        zrUtil.each(localNativeListenerNames.pointer, function (nativeEventName) {\n            mountSingleDOMEventListener(scope, nativeEventName, function (event) {\n                domHandlers[nativeEventName].call(instance, event);\n            });\n        });\n    }\n    else {\n        if (env.touchEventsSupported) {\n            zrUtil.each(localNativeListenerNames.touch, function (nativeEventName) {\n                mountSingleDOMEventListener(scope, nativeEventName, function (event) {\n                    domHandlers[nativeEventName].call(instance, event);\n                    setTouchTimer(scope);\n                });\n            });\n        }\n        zrUtil.each(localNativeListenerNames.mouse, function (nativeEventName) {\n            mountSingleDOMEventListener(scope, nativeEventName, function (event) {\n                event = getNativeEvent(event);\n                if (!scope.touching) {\n                    domHandlers[nativeEventName].call(instance, event);\n                }\n            });\n        });\n    }\n}\nfunction mountGlobalDOMEventListeners(instance, scope) {\n    if (env.pointerEventsSupported) {\n        zrUtil.each(globalNativeListenerNames.pointer, mount);\n    }\n    else if (!env.touchEventsSupported) {\n        zrUtil.each(globalNativeListenerNames.mouse, mount);\n    }\n    function mount(nativeEventName) {\n        function nativeEventListener(event) {\n            event = getNativeEvent(event);\n            if (!isLocalEl(instance, event.target)) {\n                event = normalizeGlobalEvent(instance, event);\n                scope.domHandlers[nativeEventName].call(instance, event);\n            }\n        }\n        mountSingleDOMEventListener(scope, nativeEventName, nativeEventListener, { capture: true });\n    }\n}\nfunction mountSingleDOMEventListener(scope, nativeEventName, listener, opt) {\n    scope.mounted[nativeEventName] = listener;\n    scope.listenerOpts[nativeEventName] = opt;\n    addEventListener(scope.domTarget, nativeEventName, listener, opt);\n}\nfunction unmountDOMEventListeners(scope) {\n    var mounted = scope.mounted;\n    for (var nativeEventName in mounted) {\n        if (mounted.hasOwnProperty(nativeEventName)) {\n            removeEventListener(scope.domTarget, nativeEventName, mounted[nativeEventName], scope.listenerOpts[nativeEventName]);\n        }\n    }\n    scope.mounted = {};\n}\nvar DOMHandlerScope = (function () {\n    function DOMHandlerScope(domTarget, domHandlers) {\n        this.mounted = {};\n        this.listenerOpts = {};\n        this.touching = false;\n        this.domTarget = domTarget;\n        this.domHandlers = domHandlers;\n    }\n    return DOMHandlerScope;\n}());\nvar HandlerDomProxy = (function (_super) {\n    __extends(HandlerDomProxy, _super);\n    function HandlerDomProxy(dom, painterRoot) {\n        var _this = _super.call(this) || this;\n        _this.__pointerCapturing = false;\n        _this.dom = dom;\n        _this.painterRoot = painterRoot;\n        _this._localHandlerScope = new DOMHandlerScope(dom, localDOMHandlers);\n        if (globalEventSupported) {\n            _this._globalHandlerScope = new DOMHandlerScope(document, globalDOMHandlers);\n        }\n        mountLocalDOMEventListeners(_this, _this._localHandlerScope);\n        return _this;\n    }\n    HandlerDomProxy.prototype.dispose = function () {\n        unmountDOMEventListeners(this._localHandlerScope);\n        if (globalEventSupported) {\n            unmountDOMEventListeners(this._globalHandlerScope);\n        }\n    };\n    HandlerDomProxy.prototype.setCursor = function (cursorStyle) {\n        this.dom.style && (this.dom.style.cursor = cursorStyle || 'default');\n    };\n    HandlerDomProxy.prototype.__togglePointerCapture = function (isPointerCapturing) {\n        this.__mayPointerCapture = null;\n        if (globalEventSupported\n            && ((+this.__pointerCapturing) ^ (+isPointerCapturing))) {\n            this.__pointerCapturing = isPointerCapturing;\n            var globalHandlerScope = this._globalHandlerScope;\n            isPointerCapturing\n                ? mountGlobalDOMEventListeners(this, globalHandlerScope)\n                : unmountDOMEventListeners(globalHandlerScope);\n        }\n    };\n    return HandlerDomProxy;\n}(Eventful));\nexport default HandlerDomProxy;\n","/*!\n* ZRender, a high performance 2d drawing library.\n*\n* Copyright (c) 2013, Baidu Inc.\n* All rights reserved.\n*\n* LICENSE\n* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt\n*/\nimport env from './core/env.js';\nimport * as zrUtil from './core/util.js';\nimport Handler from './Handler.js';\nimport Storage from './Storage.js';\nimport Animation, { getTime } from './animation/Animation.js';\nimport HandlerProxy from './dom/HandlerProxy.js';\nimport { lum } from './tool/color.js';\nimport { DARK_MODE_THRESHOLD } from './config.js';\nimport Group from './graphic/Group.js';\nvar painterCtors = {};\nvar instances = {};\nfunction delInstance(id) {\n    delete instances[id];\n}\nfunction isDarkMode(backgroundColor) {\n    if (!backgroundColor) {\n        return false;\n    }\n    if (typeof backgroundColor === 'string') {\n        return lum(backgroundColor, 1) < DARK_MODE_THRESHOLD;\n    }\n    else if (backgroundColor.colorStops) {\n        var colorStops = backgroundColor.colorStops;\n        var totalLum = 0;\n        var len = colorStops.length;\n        for (var i = 0; i < len; i++) {\n            totalLum += lum(colorStops[i].color, 1);\n        }\n        totalLum /= len;\n        return totalLum < DARK_MODE_THRESHOLD;\n    }\n    return false;\n}\nvar ZRender = (function () {\n    function ZRender(id, dom, opts) {\n        var _this = this;\n        this._sleepAfterStill = 10;\n        this._stillFrameAccum = 0;\n        this._needsRefresh = true;\n        this._needsRefreshHover = true;\n        this._darkMode = false;\n        opts = opts || {};\n        this.dom = dom;\n        this.id = id;\n        var storage = new Storage();\n        var rendererType = opts.renderer || 'canvas';\n        if (!painterCtors[rendererType]) {\n            rendererType = zrUtil.keys(painterCtors)[0];\n        }\n        if (process.env.NODE_ENV !== 'production') {\n            if (!painterCtors[rendererType]) {\n                throw new Error(\"Renderer '\" + rendererType + \"' is not imported. Please import it first.\");\n            }\n        }\n        opts.useDirtyRect = opts.useDirtyRect == null\n            ? false\n            : opts.useDirtyRect;\n        var painter = new painterCtors[rendererType](dom, storage, opts, id);\n        var ssrMode = opts.ssr || painter.ssrOnly;\n        this.storage = storage;\n        this.painter = painter;\n        var handerProxy = (!env.node && !env.worker && !ssrMode)\n            ? new HandlerProxy(painter.getViewportRoot(), painter.root)\n            : null;\n        this.handler = new Handler(storage, painter, handerProxy, painter.root);\n        this.animation = new Animation({\n            stage: {\n                update: ssrMode ? null : function () { return _this._flush(true); }\n            }\n        });\n        if (!ssrMode) {\n            this.animation.start();\n        }\n    }\n    ZRender.prototype.add = function (el) {\n        if (!el) {\n            return;\n        }\n        this.storage.addRoot(el);\n        el.addSelfToZr(this);\n        this.refresh();\n    };\n    ZRender.prototype.remove = function (el) {\n        if (!el) {\n            return;\n        }\n        this.storage.delRoot(el);\n        el.removeSelfFromZr(this);\n        this.refresh();\n    };\n    ZRender.prototype.configLayer = function (zLevel, config) {\n        if (this.painter.configLayer) {\n            this.painter.configLayer(zLevel, config);\n        }\n        this.refresh();\n    };\n    ZRender.prototype.setBackgroundColor = function (backgroundColor) {\n        if (this.painter.setBackgroundColor) {\n            this.painter.setBackgroundColor(backgroundColor);\n        }\n        this.refresh();\n        this._backgroundColor = backgroundColor;\n        this._darkMode = isDarkMode(backgroundColor);\n    };\n    ZRender.prototype.getBackgroundColor = function () {\n        return this._backgroundColor;\n    };\n    ZRender.prototype.setDarkMode = function (darkMode) {\n        this._darkMode = darkMode;\n    };\n    ZRender.prototype.isDarkMode = function () {\n        return this._darkMode;\n    };\n    ZRender.prototype.refreshImmediately = function (fromInside) {\n        if (!fromInside) {\n            this.animation.update(true);\n        }\n        this._needsRefresh = false;\n        this.painter.refresh();\n        this._needsRefresh = false;\n    };\n    ZRender.prototype.refresh = function () {\n        this._needsRefresh = true;\n        this.animation.start();\n    };\n    ZRender.prototype.flush = function () {\n        this._flush(false);\n    };\n    ZRender.prototype._flush = function (fromInside) {\n        var triggerRendered;\n        var start = getTime();\n        if (this._needsRefresh) {\n            triggerRendered = true;\n            this.refreshImmediately(fromInside);\n        }\n        if (this._needsRefreshHover) {\n            triggerRendered = true;\n            this.refreshHoverImmediately();\n        }\n        var end = getTime();\n        if (triggerRendered) {\n            this._stillFrameAccum = 0;\n            this.trigger('rendered', {\n                elapsedTime: end - start\n            });\n        }\n        else if (this._sleepAfterStill > 0) {\n            this._stillFrameAccum++;\n            if (this._stillFrameAccum > this._sleepAfterStill) {\n                this.animation.stop();\n            }\n        }\n    };\n    ZRender.prototype.setSleepAfterStill = function (stillFramesCount) {\n        this._sleepAfterStill = stillFramesCount;\n    };\n    ZRender.prototype.wakeUp = function () {\n        this.animation.start();\n        this._stillFrameAccum = 0;\n    };\n    ZRender.prototype.refreshHover = function () {\n        this._needsRefreshHover = true;\n    };\n    ZRender.prototype.refreshHoverImmediately = function () {\n        this._needsRefreshHover = false;\n        if (this.painter.refreshHover && this.painter.getType() === 'canvas') {\n            this.painter.refreshHover();\n        }\n    };\n    ZRender.prototype.resize = function (opts) {\n        opts = opts || {};\n        this.painter.resize(opts.width, opts.height);\n        this.handler.resize();\n    };\n    ZRender.prototype.clearAnimation = function () {\n        this.animation.clear();\n    };\n    ZRender.prototype.getWidth = function () {\n        return this.painter.getWidth();\n    };\n    ZRender.prototype.getHeight = function () {\n        return this.painter.getHeight();\n    };\n    ZRender.prototype.setCursorStyle = function (cursorStyle) {\n        this.handler.setCursorStyle(cursorStyle);\n    };\n    ZRender.prototype.findHover = function (x, y) {\n        return this.handler.findHover(x, y);\n    };\n    ZRender.prototype.on = function (eventName, eventHandler, context) {\n        this.handler.on(eventName, eventHandler, context);\n        return this;\n    };\n    ZRender.prototype.off = function (eventName, eventHandler) {\n        this.handler.off(eventName, eventHandler);\n    };\n    ZRender.prototype.trigger = function (eventName, event) {\n        this.handler.trigger(eventName, event);\n    };\n    ZRender.prototype.clear = function () {\n        var roots = this.storage.getRoots();\n        for (var i = 0; i < roots.length; i++) {\n            if (roots[i] instanceof Group) {\n                roots[i].removeSelfFromZr(this);\n            }\n        }\n        this.storage.delAllRoots();\n        this.painter.clear();\n    };\n    ZRender.prototype.dispose = function () {\n        this.animation.stop();\n        this.clear();\n        this.storage.dispose();\n        this.painter.dispose();\n        this.handler.dispose();\n        this.animation =\n            this.storage =\n                this.painter =\n                    this.handler = null;\n        delInstance(this.id);\n    };\n    return ZRender;\n}());\nexport function init(dom, opts) {\n    var zr = new ZRender(zrUtil.guid(), dom, opts);\n    instances[zr.id] = zr;\n    return zr;\n}\nexport function dispose(zr) {\n    zr.dispose();\n}\nexport function disposeAll() {\n    for (var key in instances) {\n        if (instances.hasOwnProperty(key)) {\n            instances[key].dispose();\n        }\n    }\n    instances = {};\n}\nexport function getInstance(id) {\n    return instances[id];\n}\nexport function registerPainter(name, Ctor) {\n    painterCtors[name] = Ctor;\n}\nexport var version = '5.3.2';\n;\n","import { platformApi } from './platform.js';\nvar BUILTIN_OBJECT = reduce([\n    'Function',\n    'RegExp',\n    'Date',\n    'Error',\n    'CanvasGradient',\n    'CanvasPattern',\n    'Image',\n    'Canvas'\n], function (obj, val) {\n    obj['[object ' + val + ']'] = true;\n    return obj;\n}, {});\nvar TYPED_ARRAY = reduce([\n    'Int8',\n    'Uint8',\n    'Uint8Clamped',\n    'Int16',\n    'Uint16',\n    'Int32',\n    'Uint32',\n    'Float32',\n    'Float64'\n], function (obj, val) {\n    obj['[object ' + val + 'Array]'] = true;\n    return obj;\n}, {});\nvar objToString = Object.prototype.toString;\nvar arrayProto = Array.prototype;\nvar nativeForEach = arrayProto.forEach;\nvar nativeFilter = arrayProto.filter;\nvar nativeSlice = arrayProto.slice;\nvar nativeMap = arrayProto.map;\nvar ctorFunction = function () { }.constructor;\nvar protoFunction = ctorFunction ? ctorFunction.prototype : null;\nvar protoKey = '__proto__';\nvar idStart = 0x0907;\nexport function guid() {\n    return idStart++;\n}\nexport function logError() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    if (typeof console !== 'undefined') {\n        console.error.apply(console, args);\n    }\n}\nexport function clone(source) {\n    if (source == null || typeof source !== 'object') {\n        return source;\n    }\n    var result = source;\n    var typeStr = objToString.call(source);\n    if (typeStr === '[object Array]') {\n        if (!isPrimitive(source)) {\n            result = [];\n            for (var i = 0, len = source.length; i < len; i++) {\n                result[i] = clone(source[i]);\n            }\n        }\n    }\n    else if (TYPED_ARRAY[typeStr]) {\n        if (!isPrimitive(source)) {\n            var Ctor = source.constructor;\n            if (Ctor.from) {\n                result = Ctor.from(source);\n            }\n            else {\n                result = new Ctor(source.length);\n                for (var i = 0, len = source.length; i < len; i++) {\n                    result[i] = source[i];\n                }\n            }\n        }\n    }\n    else if (!BUILTIN_OBJECT[typeStr] && !isPrimitive(source) && !isDom(source)) {\n        result = {};\n        for (var key in source) {\n            if (source.hasOwnProperty(key) && key !== protoKey) {\n                result[key] = clone(source[key]);\n            }\n        }\n    }\n    return result;\n}\nexport function merge(target, source, overwrite) {\n    if (!isObject(source) || !isObject(target)) {\n        return overwrite ? clone(source) : target;\n    }\n    for (var key in source) {\n        if (source.hasOwnProperty(key) && key !== protoKey) {\n            var targetProp = target[key];\n            var sourceProp = source[key];\n            if (isObject(sourceProp)\n                && isObject(targetProp)\n                && !isArray(sourceProp)\n                && !isArray(targetProp)\n                && !isDom(sourceProp)\n                && !isDom(targetProp)\n                && !isBuiltInObject(sourceProp)\n                && !isBuiltInObject(targetProp)\n                && !isPrimitive(sourceProp)\n                && !isPrimitive(targetProp)) {\n                merge(targetProp, sourceProp, overwrite);\n            }\n            else if (overwrite || !(key in target)) {\n                target[key] = clone(source[key]);\n            }\n        }\n    }\n    return target;\n}\nexport function mergeAll(targetAndSources, overwrite) {\n    var result = targetAndSources[0];\n    for (var i = 1, len = targetAndSources.length; i < len; i++) {\n        result = merge(result, targetAndSources[i], overwrite);\n    }\n    return result;\n}\nexport function extend(target, source) {\n    if (Object.assign) {\n        Object.assign(target, source);\n    }\n    else {\n        for (var key in source) {\n            if (source.hasOwnProperty(key) && key !== protoKey) {\n                target[key] = source[key];\n            }\n        }\n    }\n    return target;\n}\nexport function defaults(target, source, overlay) {\n    var keysArr = keys(source);\n    for (var i = 0; i < keysArr.length; i++) {\n        var key = keysArr[i];\n        if ((overlay ? source[key] != null : target[key] == null)) {\n            target[key] = source[key];\n        }\n    }\n    return target;\n}\nexport var createCanvas = platformApi.createCanvas;\nexport function indexOf(array, value) {\n    if (array) {\n        if (array.indexOf) {\n            return array.indexOf(value);\n        }\n        for (var i = 0, len = array.length; i < len; i++) {\n            if (array[i] === value) {\n                return i;\n            }\n        }\n    }\n    return -1;\n}\nexport function inherits(clazz, baseClazz) {\n    var clazzPrototype = clazz.prototype;\n    function F() { }\n    F.prototype = baseClazz.prototype;\n    clazz.prototype = new F();\n    for (var prop in clazzPrototype) {\n        if (clazzPrototype.hasOwnProperty(prop)) {\n            clazz.prototype[prop] = clazzPrototype[prop];\n        }\n    }\n    clazz.prototype.constructor = clazz;\n    clazz.superClass = baseClazz;\n}\nexport function mixin(target, source, override) {\n    target = 'prototype' in target ? target.prototype : target;\n    source = 'prototype' in source ? source.prototype : source;\n    if (Object.getOwnPropertyNames) {\n        var keyList = Object.getOwnPropertyNames(source);\n        for (var i = 0; i < keyList.length; i++) {\n            var key = keyList[i];\n            if (key !== 'constructor') {\n                if ((override ? source[key] != null : target[key] == null)) {\n                    target[key] = source[key];\n                }\n            }\n        }\n    }\n    else {\n        defaults(target, source, override);\n    }\n}\nexport function isArrayLike(data) {\n    if (!data) {\n        return false;\n    }\n    if (typeof data === 'string') {\n        return false;\n    }\n    return typeof data.length === 'number';\n}\nexport function each(arr, cb, context) {\n    if (!(arr && cb)) {\n        return;\n    }\n    if (arr.forEach && arr.forEach === nativeForEach) {\n        arr.forEach(cb, context);\n    }\n    else if (arr.length === +arr.length) {\n        for (var i = 0, len = arr.length; i < len; i++) {\n            cb.call(context, arr[i], i, arr);\n        }\n    }\n    else {\n        for (var key in arr) {\n            if (arr.hasOwnProperty(key)) {\n                cb.call(context, arr[key], key, arr);\n            }\n        }\n    }\n}\nexport function map(arr, cb, context) {\n    if (!arr) {\n        return [];\n    }\n    if (!cb) {\n        return slice(arr);\n    }\n    if (arr.map && arr.map === nativeMap) {\n        return arr.map(cb, context);\n    }\n    else {\n        var result = [];\n        for (var i = 0, len = arr.length; i < len; i++) {\n            result.push(cb.call(context, arr[i], i, arr));\n        }\n        return result;\n    }\n}\nexport function reduce(arr, cb, memo, context) {\n    if (!(arr && cb)) {\n        return;\n    }\n    for (var i = 0, len = arr.length; i < len; i++) {\n        memo = cb.call(context, memo, arr[i], i, arr);\n    }\n    return memo;\n}\nexport function filter(arr, cb, context) {\n    if (!arr) {\n        return [];\n    }\n    if (!cb) {\n        return slice(arr);\n    }\n    if (arr.filter && arr.filter === nativeFilter) {\n        return arr.filter(cb, context);\n    }\n    else {\n        var result = [];\n        for (var i = 0, len = arr.length; i < len; i++) {\n            if (cb.call(context, arr[i], i, arr)) {\n                result.push(arr[i]);\n            }\n        }\n        return result;\n    }\n}\nexport function find(arr, cb, context) {\n    if (!(arr && cb)) {\n        return;\n    }\n    for (var i = 0, len = arr.length; i < len; i++) {\n        if (cb.call(context, arr[i], i, arr)) {\n            return arr[i];\n        }\n    }\n}\nexport function keys(obj) {\n    if (!obj) {\n        return [];\n    }\n    if (Object.keys) {\n        return Object.keys(obj);\n    }\n    var keyList = [];\n    for (var key in obj) {\n        if (obj.hasOwnProperty(key)) {\n            keyList.push(key);\n        }\n    }\n    return keyList;\n}\nfunction bindPolyfill(func, context) {\n    var args = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        args[_i - 2] = arguments[_i];\n    }\n    return function () {\n        return func.apply(context, args.concat(nativeSlice.call(arguments)));\n    };\n}\nexport var bind = (protoFunction && isFunction(protoFunction.bind))\n    ? protoFunction.call.bind(protoFunction.bind)\n    : bindPolyfill;\nfunction curry(func) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n    }\n    return function () {\n        return func.apply(this, args.concat(nativeSlice.call(arguments)));\n    };\n}\nexport { curry };\nexport function isArray(value) {\n    if (Array.isArray) {\n        return Array.isArray(value);\n    }\n    return objToString.call(value) === '[object Array]';\n}\nexport function isFunction(value) {\n    return typeof value === 'function';\n}\nexport function isString(value) {\n    return typeof value === 'string';\n}\nexport function isStringSafe(value) {\n    return objToString.call(value) === '[object String]';\n}\nexport function isNumber(value) {\n    return typeof value === 'number';\n}\nexport function isObject(value) {\n    var type = typeof value;\n    return type === 'function' || (!!value && type === 'object');\n}\nexport function isBuiltInObject(value) {\n    return !!BUILTIN_OBJECT[objToString.call(value)];\n}\nexport function isTypedArray(value) {\n    return !!TYPED_ARRAY[objToString.call(value)];\n}\nexport function isDom(value) {\n    return typeof value === 'object'\n        && typeof value.nodeType === 'number'\n        && typeof value.ownerDocument === 'object';\n}\nexport function isGradientObject(value) {\n    return value.colorStops != null;\n}\nexport function isImagePatternObject(value) {\n    return value.image != null;\n}\nexport function isRegExp(value) {\n    return objToString.call(value) === '[object RegExp]';\n}\nexport function eqNaN(value) {\n    return value !== value;\n}\nexport function retrieve() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    for (var i = 0, len = args.length; i < len; i++) {\n        if (args[i] != null) {\n            return args[i];\n        }\n    }\n}\nexport function retrieve2(value0, value1) {\n    return value0 != null\n        ? value0\n        : value1;\n}\nexport function retrieve3(value0, value1, value2) {\n    return value0 != null\n        ? value0\n        : value1 != null\n            ? value1\n            : value2;\n}\nexport function slice(arr) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n    }\n    return nativeSlice.apply(arr, args);\n}\nexport function normalizeCssArray(val) {\n    if (typeof (val) === 'number') {\n        return [val, val, val, val];\n    }\n    var len = val.length;\n    if (len === 2) {\n        return [val[0], val[1], val[0], val[1]];\n    }\n    else if (len === 3) {\n        return [val[0], val[1], val[2], val[1]];\n    }\n    return val;\n}\nexport function assert(condition, message) {\n    if (!condition) {\n        throw new Error(message);\n    }\n}\nexport function trim(str) {\n    if (str == null) {\n        return null;\n    }\n    else if (typeof str.trim === 'function') {\n        return str.trim();\n    }\n    else {\n        return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n    }\n}\nvar primitiveKey = '__ec_primitive__';\nexport function setAsPrimitive(obj) {\n    obj[primitiveKey] = true;\n}\nexport function isPrimitive(obj) {\n    return obj[primitiveKey];\n}\nvar HashMap = (function () {\n    function HashMap(obj) {\n        this.data = {};\n        var isArr = isArray(obj);\n        this.data = {};\n        var thisMap = this;\n        (obj instanceof HashMap)\n            ? obj.each(visit)\n            : (obj && each(obj, visit));\n        function visit(value, key) {\n            isArr ? thisMap.set(value, key) : thisMap.set(key, value);\n        }\n    }\n    HashMap.prototype.get = function (key) {\n        return this.data.hasOwnProperty(key) ? this.data[key] : null;\n    };\n    HashMap.prototype.set = function (key, value) {\n        return (this.data[key] = value);\n    };\n    HashMap.prototype.each = function (cb, context) {\n        for (var key in this.data) {\n            if (this.data.hasOwnProperty(key)) {\n                cb.call(context, this.data[key], key);\n            }\n        }\n    };\n    HashMap.prototype.keys = function () {\n        return keys(this.data);\n    };\n    HashMap.prototype.removeKey = function (key) {\n        delete this.data[key];\n    };\n    return HashMap;\n}());\nexport { HashMap };\nexport function createHashMap(obj) {\n    return new HashMap(obj);\n}\nexport function concatArray(a, b) {\n    var newArray = new a.constructor(a.length + b.length);\n    for (var i = 0; i < a.length; i++) {\n        newArray[i] = a[i];\n    }\n    var offset = a.length;\n    for (var i = 0; i < b.length; i++) {\n        newArray[i + offset] = b[i];\n    }\n    return newArray;\n}\nexport function createObject(proto, properties) {\n    var obj;\n    if (Object.create) {\n        obj = Object.create(proto);\n    }\n    else {\n        var StyleCtor = function () { };\n        StyleCtor.prototype = proto;\n        obj = new StyleCtor();\n    }\n    if (properties) {\n        extend(obj, properties);\n    }\n    return obj;\n}\nexport function disableUserSelect(dom) {\n    var domStyle = dom.style;\n    domStyle.webkitUserSelect = 'none';\n    domStyle.userSelect = 'none';\n    domStyle.webkitTapHighlightColor = 'rgba(0,0,0,0)';\n    domStyle['-webkit-touch-callout'] = 'none';\n}\nexport function hasOwn(own, prop) {\n    return own.hasOwnProperty(prop);\n}\nexport function noop() { }\nexport var RADIAN_TO_DEGREE = 180 / Math.PI;\n","var Eventful = (function () {\n    function Eventful(eventProcessors) {\n        if (eventProcessors) {\n            this._$eventProcessor = eventProcessors;\n        }\n    }\n    Eventful.prototype.on = function (event, query, handler, context) {\n        if (!this._$handlers) {\n            this._$handlers = {};\n        }\n        var _h = this._$handlers;\n        if (typeof query === 'function') {\n            context = handler;\n            handler = query;\n            query = null;\n        }\n        if (!handler || !event) {\n            return this;\n        }\n        var eventProcessor = this._$eventProcessor;\n        if (query != null && eventProcessor && eventProcessor.normalizeQuery) {\n            query = eventProcessor.normalizeQuery(query);\n        }\n        if (!_h[event]) {\n            _h[event] = [];\n        }\n        for (var i = 0; i < _h[event].length; i++) {\n            if (_h[event][i].h === handler) {\n                return this;\n            }\n        }\n        var wrap = {\n            h: handler,\n            query: query,\n            ctx: (context || this),\n            callAtLast: handler.zrEventfulCallAtLast\n        };\n        var lastIndex = _h[event].length - 1;\n        var lastWrap = _h[event][lastIndex];\n        (lastWrap && lastWrap.callAtLast)\n            ? _h[event].splice(lastIndex, 0, wrap)\n            : _h[event].push(wrap);\n        return this;\n    };\n    Eventful.prototype.isSilent = function (eventName) {\n        var _h = this._$handlers;\n        return !_h || !_h[eventName] || !_h[eventName].length;\n    };\n    Eventful.prototype.off = function (eventType, handler) {\n        var _h = this._$handlers;\n        if (!_h) {\n            return this;\n        }\n        if (!eventType) {\n            this._$handlers = {};\n            return this;\n        }\n        if (handler) {\n            if (_h[eventType]) {\n                var newList = [];\n                for (var i = 0, l = _h[eventType].length; i < l; i++) {\n                    if (_h[eventType][i].h !== handler) {\n                        newList.push(_h[eventType][i]);\n                    }\n                }\n                _h[eventType] = newList;\n            }\n            if (_h[eventType] && _h[eventType].length === 0) {\n                delete _h[eventType];\n            }\n        }\n        else {\n            delete _h[eventType];\n        }\n        return this;\n    };\n    Eventful.prototype.trigger = function (eventType) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        if (!this._$handlers) {\n            return this;\n        }\n        var _h = this._$handlers[eventType];\n        var eventProcessor = this._$eventProcessor;\n        if (_h) {\n            var argLen = args.length;\n            var len = _h.length;\n            for (var i = 0; i < len; i++) {\n                var hItem = _h[i];\n                if (eventProcessor\n                    && eventProcessor.filter\n                    && hItem.query != null\n                    && !eventProcessor.filter(eventType, hItem.query)) {\n                    continue;\n                }\n                switch (argLen) {\n                    case 0:\n                        hItem.h.call(hItem.ctx);\n                        break;\n                    case 1:\n                        hItem.h.call(hItem.ctx, args[0]);\n                        break;\n                    case 2:\n                        hItem.h.call(hItem.ctx, args[0], args[1]);\n                        break;\n                    default:\n                        hItem.h.apply(hItem.ctx, args);\n                        break;\n                }\n            }\n        }\n        eventProcessor && eventProcessor.afterTrigger\n            && eventProcessor.afterTrigger(eventType);\n        return this;\n    };\n    Eventful.prototype.triggerWithContext = function (type) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        if (!this._$handlers) {\n            return this;\n        }\n        var _h = this._$handlers[type];\n        var eventProcessor = this._$eventProcessor;\n        if (_h) {\n            var argLen = args.length;\n            var ctx = args[argLen - 1];\n            var len = _h.length;\n            for (var i = 0; i < len; i++) {\n                var hItem = _h[i];\n                if (eventProcessor\n                    && eventProcessor.filter\n                    && hItem.query != null\n                    && !eventProcessor.filter(type, hItem.query)) {\n                    continue;\n                }\n                switch (argLen) {\n                    case 0:\n                        hItem.h.call(ctx);\n                        break;\n                    case 1:\n                        hItem.h.call(ctx, args[0]);\n                        break;\n                    case 2:\n                        hItem.h.call(ctx, args[0], args[1]);\n                        break;\n                    default:\n                        hItem.h.apply(ctx, args.slice(1, argLen - 1));\n                        break;\n                }\n            }\n        }\n        eventProcessor && eventProcessor.afterTrigger\n            && eventProcessor.afterTrigger(type);\n        return this;\n    };\n    return Eventful;\n}());\nexport default Eventful;\n","export var DEFAULT_FONT_SIZE = 12;\nexport var DEFAULT_FONT_FAMILY = 'sans-serif';\nexport var DEFAULT_FONT = DEFAULT_FONT_SIZE + \"px \" + DEFAULT_FONT_FAMILY;\nvar OFFSET = 20;\nvar SCALE = 100;\nvar defaultWidthMapStr = \"007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\\\\\WQb\\\\0FWLg\\\\bWb\\\\WQ\\\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\\\FFF5.5N\";\nfunction getTextWidthMap(mapStr) {\n    var map = {};\n    if (typeof JSON === 'undefined') {\n        return map;\n    }\n    for (var i = 0; i < mapStr.length; i++) {\n        var char = String.fromCharCode(i + 32);\n        var size = (mapStr.charCodeAt(i) - OFFSET) / SCALE;\n        map[char] = size;\n    }\n    return map;\n}\nexport var DEFAULT_TEXT_WIDTH_MAP = getTextWidthMap(defaultWidthMapStr);\nexport var platformApi = {\n    createCanvas: function () {\n        return typeof document !== 'undefined'\n            && document.createElement('canvas');\n    },\n    measureText: (function () {\n        var _ctx;\n        var _cachedFont;\n        return function (text, font) {\n            if (!_ctx) {\n                var canvas = platformApi.createCanvas();\n                _ctx = canvas && canvas.getContext('2d');\n            }\n            if (_ctx) {\n                if (_cachedFont !== font) {\n                    _cachedFont = _ctx.font = font || DEFAULT_FONT;\n                }\n                return _ctx.measureText(text);\n            }\n            else {\n                text = text || '';\n                font = font || DEFAULT_FONT;\n                var res = /^([0-9]*?)px$/.exec(font);\n                var fontSize = +(res && res[1]) || DEFAULT_FONT_SIZE;\n                var width = 0;\n                if (font.indexOf('mono') >= 0) {\n                    width = fontSize * text.length;\n                }\n                else {\n                    for (var i = 0; i < text.length; i++) {\n                        var preCalcWidth = DEFAULT_TEXT_WIDTH_MAP[text[i]];\n                        width += preCalcWidth == null ? fontSize : (preCalcWidth * fontSize);\n                    }\n                }\n                return { width: width };\n            }\n        };\n    })(),\n    loadImage: function (src, onload, onerror) {\n        var image = new Image();\n        image.onload = onload;\n        image.onerror = onerror;\n        image.src = src;\n        return image;\n    }\n};\nexport function setPlatformAPI(newPlatformApis) {\n    for (var key in platformApi) {\n        if (newPlatformApis[key]) {\n            platformApi[key] = newPlatformApis[key];\n        }\n    }\n}\n","import { __extends } from \"tslib\";\nimport { parseRichText, parsePlainText } from './helper/parseText.js';\nimport TSpan from './TSpan.js';\nimport { retrieve2, each, normalizeCssArray, trim, retrieve3, extend, keys, defaults } from '../core/util.js';\nimport { adjustTextX, adjustTextY } from '../contain/text.js';\nimport ZRImage from './Image.js';\nimport Rect from './shape/Rect.js';\nimport BoundingRect from '../core/BoundingRect.js';\nimport Displayable, { DEFAULT_COMMON_ANIMATION_PROPS } from './Displayable.js';\nimport { DEFAULT_FONT, DEFAULT_FONT_SIZE } from '../core/platform.js';\nvar DEFAULT_RICH_TEXT_COLOR = {\n    fill: '#000'\n};\nvar DEFAULT_STROKE_LINE_WIDTH = 2;\nexport var DEFAULT_TEXT_ANIMATION_PROPS = {\n    style: defaults({\n        fill: true,\n        stroke: true,\n        fillOpacity: true,\n        strokeOpacity: true,\n        lineWidth: true,\n        fontSize: true,\n        lineHeight: true,\n        width: true,\n        height: true,\n        textShadowColor: true,\n        textShadowBlur: true,\n        textShadowOffsetX: true,\n        textShadowOffsetY: true,\n        backgroundColor: true,\n        padding: true,\n        borderColor: true,\n        borderWidth: true,\n        borderRadius: true\n    }, DEFAULT_COMMON_ANIMATION_PROPS.style)\n};\nvar ZRText = (function (_super) {\n    __extends(ZRText, _super);\n    function ZRText(opts) {\n        var _this = _super.call(this) || this;\n        _this.type = 'text';\n        _this._children = [];\n        _this._defaultStyle = DEFAULT_RICH_TEXT_COLOR;\n        _this.attr(opts);\n        return _this;\n    }\n    ZRText.prototype.childrenRef = function () {\n        return this._children;\n    };\n    ZRText.prototype.update = function () {\n        _super.prototype.update.call(this);\n        if (this.styleChanged()) {\n            this._updateSubTexts();\n        }\n        for (var i = 0; i < this._children.length; i++) {\n            var child = this._children[i];\n            child.zlevel = this.zlevel;\n            child.z = this.z;\n            child.z2 = this.z2;\n            child.culling = this.culling;\n            child.cursor = this.cursor;\n            child.invisible = this.invisible;\n        }\n    };\n    ZRText.prototype.updateTransform = function () {\n        var innerTransformable = this.innerTransformable;\n        if (innerTransformable) {\n            innerTransformable.updateTransform();\n            if (innerTransformable.transform) {\n                this.transform = innerTransformable.transform;\n            }\n        }\n        else {\n            _super.prototype.updateTransform.call(this);\n        }\n    };\n    ZRText.prototype.getLocalTransform = function (m) {\n        var innerTransformable = this.innerTransformable;\n        return innerTransformable\n            ? innerTransformable.getLocalTransform(m)\n            : _super.prototype.getLocalTransform.call(this, m);\n    };\n    ZRText.prototype.getComputedTransform = function () {\n        if (this.__hostTarget) {\n            this.__hostTarget.getComputedTransform();\n            this.__hostTarget.updateInnerText(true);\n        }\n        return _super.prototype.getComputedTransform.call(this);\n    };\n    ZRText.prototype._updateSubTexts = function () {\n        this._childCursor = 0;\n        normalizeTextStyle(this.style);\n        this.style.rich\n            ? this._updateRichTexts()\n            : this._updatePlainTexts();\n        this._children.length = this._childCursor;\n        this.styleUpdated();\n    };\n    ZRText.prototype.addSelfToZr = function (zr) {\n        _super.prototype.addSelfToZr.call(this, zr);\n        for (var i = 0; i < this._children.length; i++) {\n            this._children[i].__zr = zr;\n        }\n    };\n    ZRText.prototype.removeSelfFromZr = function (zr) {\n        _super.prototype.removeSelfFromZr.call(this, zr);\n        for (var i = 0; i < this._children.length; i++) {\n            this._children[i].__zr = null;\n        }\n    };\n    ZRText.prototype.getBoundingRect = function () {\n        if (this.styleChanged()) {\n            this._updateSubTexts();\n        }\n        if (!this._rect) {\n            var tmpRect = new BoundingRect(0, 0, 0, 0);\n            var children = this._children;\n            var tmpMat = [];\n            var rect = null;\n            for (var i = 0; i < children.length; i++) {\n                var child = children[i];\n                var childRect = child.getBoundingRect();\n                var transform = child.getLocalTransform(tmpMat);\n                if (transform) {\n                    tmpRect.copy(childRect);\n                    tmpRect.applyTransform(transform);\n                    rect = rect || tmpRect.clone();\n                    rect.union(tmpRect);\n                }\n                else {\n                    rect = rect || childRect.clone();\n                    rect.union(childRect);\n                }\n            }\n            this._rect = rect || tmpRect;\n        }\n        return this._rect;\n    };\n    ZRText.prototype.setDefaultTextStyle = function (defaultTextStyle) {\n        this._defaultStyle = defaultTextStyle || DEFAULT_RICH_TEXT_COLOR;\n    };\n    ZRText.prototype.setTextContent = function (textContent) {\n        if (process.env.NODE_ENV !== 'production') {\n            throw new Error('Can\\'t attach text on another text');\n        }\n    };\n    ZRText.prototype._mergeStyle = function (targetStyle, sourceStyle) {\n        if (!sourceStyle) {\n            return targetStyle;\n        }\n        var sourceRich = sourceStyle.rich;\n        var targetRich = targetStyle.rich || (sourceRich && {});\n        extend(targetStyle, sourceStyle);\n        if (sourceRich && targetRich) {\n            this._mergeRich(targetRich, sourceRich);\n            targetStyle.rich = targetRich;\n        }\n        else if (targetRich) {\n            targetStyle.rich = targetRich;\n        }\n        return targetStyle;\n    };\n    ZRText.prototype._mergeRich = function (targetRich, sourceRich) {\n        var richNames = keys(sourceRich);\n        for (var i = 0; i < richNames.length; i++) {\n            var richName = richNames[i];\n            targetRich[richName] = targetRich[richName] || {};\n            extend(targetRich[richName], sourceRich[richName]);\n        }\n    };\n    ZRText.prototype.getAnimationStyleProps = function () {\n        return DEFAULT_TEXT_ANIMATION_PROPS;\n    };\n    ZRText.prototype._getOrCreateChild = function (Ctor) {\n        var child = this._children[this._childCursor];\n        if (!child || !(child instanceof Ctor)) {\n            child = new Ctor();\n        }\n        this._children[this._childCursor++] = child;\n        child.__zr = this.__zr;\n        child.parent = this;\n        return child;\n    };\n    ZRText.prototype._updatePlainTexts = function () {\n        var style = this.style;\n        var textFont = style.font || DEFAULT_FONT;\n        var textPadding = style.padding;\n        var text = getStyleText(style);\n        var contentBlock = parsePlainText(text, style);\n        var needDrawBg = needDrawBackground(style);\n        var bgColorDrawn = !!(style.backgroundColor);\n        var outerHeight = contentBlock.outerHeight;\n        var outerWidth = contentBlock.outerWidth;\n        var contentWidth = contentBlock.contentWidth;\n        var textLines = contentBlock.lines;\n        var lineHeight = contentBlock.lineHeight;\n        var defaultStyle = this._defaultStyle;\n        var baseX = style.x || 0;\n        var baseY = style.y || 0;\n        var textAlign = style.align || defaultStyle.align || 'left';\n        var verticalAlign = style.verticalAlign || defaultStyle.verticalAlign || 'top';\n        var textX = baseX;\n        var textY = adjustTextY(baseY, contentBlock.contentHeight, verticalAlign);\n        if (needDrawBg || textPadding) {\n            var boxX = adjustTextX(baseX, outerWidth, textAlign);\n            var boxY = adjustTextY(baseY, outerHeight, verticalAlign);\n            needDrawBg && this._renderBackground(style, style, boxX, boxY, outerWidth, outerHeight);\n        }\n        textY += lineHeight / 2;\n        if (textPadding) {\n            textX = getTextXForPadding(baseX, textAlign, textPadding);\n            if (verticalAlign === 'top') {\n                textY += textPadding[0];\n            }\n            else if (verticalAlign === 'bottom') {\n                textY -= textPadding[2];\n            }\n        }\n        var defaultLineWidth = 0;\n        var useDefaultFill = false;\n        var textFill = getFill('fill' in style\n            ? style.fill\n            : (useDefaultFill = true, defaultStyle.fill));\n        var textStroke = getStroke('stroke' in style\n            ? style.stroke\n            : (!bgColorDrawn\n                && (!defaultStyle.autoStroke || useDefaultFill))\n                ? (defaultLineWidth = DEFAULT_STROKE_LINE_WIDTH, defaultStyle.stroke)\n                : null);\n        var hasShadow = style.textShadowBlur > 0;\n        var fixedBoundingRect = style.width != null\n            && (style.overflow === 'truncate' || style.overflow === 'break' || style.overflow === 'breakAll');\n        var calculatedLineHeight = contentBlock.calculatedLineHeight;\n        for (var i = 0; i < textLines.length; i++) {\n            var el = this._getOrCreateChild(TSpan);\n            var subElStyle = el.createStyle();\n            el.useStyle(subElStyle);\n            subElStyle.text = textLines[i];\n            subElStyle.x = textX;\n            subElStyle.y = textY;\n            if (textAlign) {\n                subElStyle.textAlign = textAlign;\n            }\n            subElStyle.textBaseline = 'middle';\n            subElStyle.opacity = style.opacity;\n            subElStyle.strokeFirst = true;\n            if (hasShadow) {\n                subElStyle.shadowBlur = style.textShadowBlur || 0;\n                subElStyle.shadowColor = style.textShadowColor || 'transparent';\n                subElStyle.shadowOffsetX = style.textShadowOffsetX || 0;\n                subElStyle.shadowOffsetY = style.textShadowOffsetY || 0;\n            }\n            subElStyle.stroke = textStroke;\n            subElStyle.fill = textFill;\n            if (textStroke) {\n                subElStyle.lineWidth = style.lineWidth || defaultLineWidth;\n                subElStyle.lineDash = style.lineDash;\n                subElStyle.lineDashOffset = style.lineDashOffset || 0;\n            }\n            subElStyle.font = textFont;\n            setSeparateFont(subElStyle, style);\n            textY += lineHeight;\n            if (fixedBoundingRect) {\n                el.setBoundingRect(new BoundingRect(adjustTextX(subElStyle.x, style.width, subElStyle.textAlign), adjustTextY(subElStyle.y, calculatedLineHeight, subElStyle.textBaseline), contentWidth, calculatedLineHeight));\n            }\n        }\n    };\n    ZRText.prototype._updateRichTexts = function () {\n        var style = this.style;\n        var text = getStyleText(style);\n        var contentBlock = parseRichText(text, style);\n        var contentWidth = contentBlock.width;\n        var outerWidth = contentBlock.outerWidth;\n        var outerHeight = contentBlock.outerHeight;\n        var textPadding = style.padding;\n        var baseX = style.x || 0;\n        var baseY = style.y || 0;\n        var defaultStyle = this._defaultStyle;\n        var textAlign = style.align || defaultStyle.align;\n        var verticalAlign = style.verticalAlign || defaultStyle.verticalAlign;\n        var boxX = adjustTextX(baseX, outerWidth, textAlign);\n        var boxY = adjustTextY(baseY, outerHeight, verticalAlign);\n        var xLeft = boxX;\n        var lineTop = boxY;\n        if (textPadding) {\n            xLeft += textPadding[3];\n            lineTop += textPadding[0];\n        }\n        var xRight = xLeft + contentWidth;\n        if (needDrawBackground(style)) {\n            this._renderBackground(style, style, boxX, boxY, outerWidth, outerHeight);\n        }\n        var bgColorDrawn = !!(style.backgroundColor);\n        for (var i = 0; i < contentBlock.lines.length; i++) {\n            var line = contentBlock.lines[i];\n            var tokens = line.tokens;\n            var tokenCount = tokens.length;\n            var lineHeight = line.lineHeight;\n            var remainedWidth = line.width;\n            var leftIndex = 0;\n            var lineXLeft = xLeft;\n            var lineXRight = xRight;\n            var rightIndex = tokenCount - 1;\n            var token = void 0;\n            while (leftIndex < tokenCount\n                && (token = tokens[leftIndex], !token.align || token.align === 'left')) {\n                this._placeToken(token, style, lineHeight, lineTop, lineXLeft, 'left', bgColorDrawn);\n                remainedWidth -= token.width;\n                lineXLeft += token.width;\n                leftIndex++;\n            }\n            while (rightIndex >= 0\n                && (token = tokens[rightIndex], token.align === 'right')) {\n                this._placeToken(token, style, lineHeight, lineTop, lineXRight, 'right', bgColorDrawn);\n                remainedWidth -= token.width;\n                lineXRight -= token.width;\n                rightIndex--;\n            }\n            lineXLeft += (contentWidth - (lineXLeft - xLeft) - (xRight - lineXRight) - remainedWidth) / 2;\n            while (leftIndex <= rightIndex) {\n                token = tokens[leftIndex];\n                this._placeToken(token, style, lineHeight, lineTop, lineXLeft + token.width / 2, 'center', bgColorDrawn);\n                lineXLeft += token.width;\n                leftIndex++;\n            }\n            lineTop += lineHeight;\n        }\n    };\n    ZRText.prototype._placeToken = function (token, style, lineHeight, lineTop, x, textAlign, parentBgColorDrawn) {\n        var tokenStyle = style.rich[token.styleName] || {};\n        tokenStyle.text = token.text;\n        var verticalAlign = token.verticalAlign;\n        var y = lineTop + lineHeight / 2;\n        if (verticalAlign === 'top') {\n            y = lineTop + token.height / 2;\n        }\n        else if (verticalAlign === 'bottom') {\n            y = lineTop + lineHeight - token.height / 2;\n        }\n        var needDrawBg = !token.isLineHolder && needDrawBackground(tokenStyle);\n        needDrawBg && this._renderBackground(tokenStyle, style, textAlign === 'right'\n            ? x - token.width\n            : textAlign === 'center'\n                ? x - token.width / 2\n                : x, y - token.height / 2, token.width, token.height);\n        var bgColorDrawn = !!tokenStyle.backgroundColor;\n        var textPadding = token.textPadding;\n        if (textPadding) {\n            x = getTextXForPadding(x, textAlign, textPadding);\n            y -= token.height / 2 - textPadding[0] - token.innerHeight / 2;\n        }\n        var el = this._getOrCreateChild(TSpan);\n        var subElStyle = el.createStyle();\n        el.useStyle(subElStyle);\n        var defaultStyle = this._defaultStyle;\n        var useDefaultFill = false;\n        var defaultLineWidth = 0;\n        var textFill = getFill('fill' in tokenStyle ? tokenStyle.fill\n            : 'fill' in style ? style.fill\n                : (useDefaultFill = true, defaultStyle.fill));\n        var textStroke = getStroke('stroke' in tokenStyle ? tokenStyle.stroke\n            : 'stroke' in style ? style.stroke\n                : (!bgColorDrawn\n                    && !parentBgColorDrawn\n                    && (!defaultStyle.autoStroke || useDefaultFill)) ? (defaultLineWidth = DEFAULT_STROKE_LINE_WIDTH, defaultStyle.stroke)\n                    : null);\n        var hasShadow = tokenStyle.textShadowBlur > 0\n            || style.textShadowBlur > 0;\n        subElStyle.text = token.text;\n        subElStyle.x = x;\n        subElStyle.y = y;\n        if (hasShadow) {\n            subElStyle.shadowBlur = tokenStyle.textShadowBlur || style.textShadowBlur || 0;\n            subElStyle.shadowColor = tokenStyle.textShadowColor || style.textShadowColor || 'transparent';\n            subElStyle.shadowOffsetX = tokenStyle.textShadowOffsetX || style.textShadowOffsetX || 0;\n            subElStyle.shadowOffsetY = tokenStyle.textShadowOffsetY || style.textShadowOffsetY || 0;\n        }\n        subElStyle.textAlign = textAlign;\n        subElStyle.textBaseline = 'middle';\n        subElStyle.font = token.font || DEFAULT_FONT;\n        subElStyle.opacity = retrieve3(tokenStyle.opacity, style.opacity, 1);\n        setSeparateFont(subElStyle, tokenStyle);\n        if (textStroke) {\n            subElStyle.lineWidth = retrieve3(tokenStyle.lineWidth, style.lineWidth, defaultLineWidth);\n            subElStyle.lineDash = retrieve2(tokenStyle.lineDash, style.lineDash);\n            subElStyle.lineDashOffset = style.lineDashOffset || 0;\n            subElStyle.stroke = textStroke;\n        }\n        if (textFill) {\n            subElStyle.fill = textFill;\n        }\n        var textWidth = token.contentWidth;\n        var textHeight = token.contentHeight;\n        el.setBoundingRect(new BoundingRect(adjustTextX(subElStyle.x, textWidth, subElStyle.textAlign), adjustTextY(subElStyle.y, textHeight, subElStyle.textBaseline), textWidth, textHeight));\n    };\n    ZRText.prototype._renderBackground = function (style, topStyle, x, y, width, height) {\n        var textBackgroundColor = style.backgroundColor;\n        var textBorderWidth = style.borderWidth;\n        var textBorderColor = style.borderColor;\n        var isImageBg = textBackgroundColor && textBackgroundColor.image;\n        var isPlainOrGradientBg = textBackgroundColor && !isImageBg;\n        var textBorderRadius = style.borderRadius;\n        var self = this;\n        var rectEl;\n        var imgEl;\n        if (isPlainOrGradientBg || style.lineHeight || (textBorderWidth && textBorderColor)) {\n            rectEl = this._getOrCreateChild(Rect);\n            rectEl.useStyle(rectEl.createStyle());\n            rectEl.style.fill = null;\n            var rectShape = rectEl.shape;\n            rectShape.x = x;\n            rectShape.y = y;\n            rectShape.width = width;\n            rectShape.height = height;\n            rectShape.r = textBorderRadius;\n            rectEl.dirtyShape();\n        }\n        if (isPlainOrGradientBg) {\n            var rectStyle = rectEl.style;\n            rectStyle.fill = textBackgroundColor || null;\n            rectStyle.fillOpacity = retrieve2(style.fillOpacity, 1);\n        }\n        else if (isImageBg) {\n            imgEl = this._getOrCreateChild(ZRImage);\n            imgEl.onload = function () {\n                self.dirtyStyle();\n            };\n            var imgStyle = imgEl.style;\n            imgStyle.image = textBackgroundColor.image;\n            imgStyle.x = x;\n            imgStyle.y = y;\n            imgStyle.width = width;\n            imgStyle.height = height;\n        }\n        if (textBorderWidth && textBorderColor) {\n            var rectStyle = rectEl.style;\n            rectStyle.lineWidth = textBorderWidth;\n            rectStyle.stroke = textBorderColor;\n            rectStyle.strokeOpacity = retrieve2(style.strokeOpacity, 1);\n            rectStyle.lineDash = style.borderDash;\n            rectStyle.lineDashOffset = style.borderDashOffset || 0;\n            rectEl.strokeContainThreshold = 0;\n            if (rectEl.hasFill() && rectEl.hasStroke()) {\n                rectStyle.strokeFirst = true;\n                rectStyle.lineWidth *= 2;\n            }\n        }\n        var commonStyle = (rectEl || imgEl).style;\n        commonStyle.shadowBlur = style.shadowBlur || 0;\n        commonStyle.shadowColor = style.shadowColor || 'transparent';\n        commonStyle.shadowOffsetX = style.shadowOffsetX || 0;\n        commonStyle.shadowOffsetY = style.shadowOffsetY || 0;\n        commonStyle.opacity = retrieve3(style.opacity, topStyle.opacity, 1);\n    };\n    ZRText.makeFont = function (style) {\n        var font = '';\n        if (hasSeparateFont(style)) {\n            font = [\n                style.fontStyle,\n                style.fontWeight,\n                parseFontSize(style.fontSize),\n                style.fontFamily || 'sans-serif'\n            ].join(' ');\n        }\n        return font && trim(font) || style.textFont || style.font;\n    };\n    return ZRText;\n}(Displayable));\nvar VALID_TEXT_ALIGN = { left: true, right: 1, center: 1 };\nvar VALID_TEXT_VERTICAL_ALIGN = { top: 1, bottom: 1, middle: 1 };\nvar FONT_PARTS = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily'];\nexport function parseFontSize(fontSize) {\n    if (typeof fontSize === 'string'\n        && (fontSize.indexOf('px') !== -1\n            || fontSize.indexOf('rem') !== -1\n            || fontSize.indexOf('em') !== -1)) {\n        return fontSize;\n    }\n    else if (!isNaN(+fontSize)) {\n        return fontSize + 'px';\n    }\n    else {\n        return DEFAULT_FONT_SIZE + 'px';\n    }\n}\nfunction setSeparateFont(targetStyle, sourceStyle) {\n    for (var i = 0; i < FONT_PARTS.length; i++) {\n        var fontProp = FONT_PARTS[i];\n        var val = sourceStyle[fontProp];\n        if (val != null) {\n            targetStyle[fontProp] = val;\n        }\n    }\n}\nexport function hasSeparateFont(style) {\n    return style.fontSize != null || style.fontFamily || style.fontWeight;\n}\nexport function normalizeTextStyle(style) {\n    normalizeStyle(style);\n    each(style.rich, normalizeStyle);\n    return style;\n}\nfunction normalizeStyle(style) {\n    if (style) {\n        style.font = ZRText.makeFont(style);\n        var textAlign = style.align;\n        textAlign === 'middle' && (textAlign = 'center');\n        style.align = (textAlign == null || VALID_TEXT_ALIGN[textAlign]) ? textAlign : 'left';\n        var verticalAlign = style.verticalAlign;\n        verticalAlign === 'center' && (verticalAlign = 'middle');\n        style.verticalAlign = (verticalAlign == null || VALID_TEXT_VERTICAL_ALIGN[verticalAlign]) ? verticalAlign : 'top';\n        var textPadding = style.padding;\n        if (textPadding) {\n            style.padding = normalizeCssArray(style.padding);\n        }\n    }\n}\nfunction getStroke(stroke, lineWidth) {\n    return (stroke == null || lineWidth <= 0 || stroke === 'transparent' || stroke === 'none')\n        ? null\n        : (stroke.image || stroke.colorStops)\n            ? '#000'\n            : stroke;\n}\nfunction getFill(fill) {\n    return (fill == null || fill === 'none')\n        ? null\n        : (fill.image || fill.colorStops)\n            ? '#000'\n            : fill;\n}\nfunction getTextXForPadding(x, textAlign, textPadding) {\n    return textAlign === 'right'\n        ? (x - textPadding[1])\n        : textAlign === 'center'\n            ? (x + textPadding[3] / 2 - textPadding[1] / 2)\n            : (x + textPadding[3]);\n}\nfunction getStyleText(style) {\n    var text = style.text;\n    text != null && (text += '');\n    return text;\n}\nfunction needDrawBackground(style) {\n    return !!(style.backgroundColor\n        || style.lineHeight\n        || (style.borderWidth && style.borderColor));\n}\nexport default ZRText;\n","import { RADIAN_TO_DEGREE, retrieve2, logError, isFunction } from '../core/util.js';\nimport { parse } from '../tool/color.js';\nimport env from '../core/env.js';\nvar mathRound = Math.round;\nexport function normalizeColor(color) {\n    var opacity;\n    if (!color || color === 'transparent') {\n        color = 'none';\n    }\n    else if (typeof color === 'string' && color.indexOf('rgba') > -1) {\n        var arr = parse(color);\n        if (arr) {\n            color = 'rgb(' + arr[0] + ',' + arr[1] + ',' + arr[2] + ')';\n            opacity = arr[3];\n        }\n    }\n    return {\n        color: color,\n        opacity: opacity == null ? 1 : opacity\n    };\n}\nvar EPSILON = 1e-4;\nexport function isAroundZero(transform) {\n    return transform < EPSILON && transform > -EPSILON;\n}\nexport function round3(transform) {\n    return mathRound(transform * 1e3) / 1e3;\n}\nexport function round4(transform) {\n    return mathRound(transform * 1e4) / 1e4;\n}\nexport function round1(transform) {\n    return mathRound(transform * 10) / 10;\n}\nexport function getMatrixStr(m) {\n    return 'matrix('\n        + round3(m[0]) + ','\n        + round3(m[1]) + ','\n        + round3(m[2]) + ','\n        + round3(m[3]) + ','\n        + round4(m[4]) + ','\n        + round4(m[5])\n        + ')';\n}\nexport var TEXT_ALIGN_TO_ANCHOR = {\n    left: 'start',\n    right: 'end',\n    center: 'middle',\n    middle: 'middle'\n};\nexport function adjustTextY(y, lineHeight, textBaseline) {\n    if (textBaseline === 'top') {\n        y += lineHeight / 2;\n    }\n    else if (textBaseline === 'bottom') {\n        y -= lineHeight / 2;\n    }\n    return y;\n}\nexport function hasShadow(style) {\n    return style\n        && (style.shadowBlur || style.shadowOffsetX || style.shadowOffsetY);\n}\nexport function getShadowKey(displayable) {\n    var style = displayable.style;\n    var globalScale = displayable.getGlobalScale();\n    return [\n        style.shadowColor,\n        (style.shadowBlur || 0).toFixed(2),\n        (style.shadowOffsetX || 0).toFixed(2),\n        (style.shadowOffsetY || 0).toFixed(2),\n        globalScale[0],\n        globalScale[1]\n    ].join(',');\n}\nexport function getClipPathsKey(clipPaths) {\n    var key = [];\n    if (clipPaths) {\n        for (var i = 0; i < clipPaths.length; i++) {\n            var clipPath = clipPaths[i];\n            key.push(clipPath.id);\n        }\n    }\n    return key.join(',');\n}\nexport function isImagePattern(val) {\n    return val && (!!val.image);\n}\nexport function isSVGPattern(val) {\n    return val && (!!val.svgElement);\n}\nexport function isPattern(val) {\n    return isImagePattern(val) || isSVGPattern(val);\n}\nexport function isLinearGradient(val) {\n    return val.type === 'linear';\n}\nexport function isRadialGradient(val) {\n    return val.type === 'radial';\n}\nexport function isGradient(val) {\n    return val && (val.type === 'linear'\n        || val.type === 'radial');\n}\nexport function getIdURL(id) {\n    return \"url(#\" + id + \")\";\n}\nexport function getPathPrecision(el) {\n    var scale = el.getGlobalScale();\n    var size = Math.max(scale[0], scale[1]);\n    return Math.max(Math.ceil(Math.log(size) / Math.log(10)), 1);\n}\nexport function getSRTTransformString(transform) {\n    var x = transform.x || 0;\n    var y = transform.y || 0;\n    var rotation = (transform.rotation || 0) * RADIAN_TO_DEGREE;\n    var scaleX = retrieve2(transform.scaleX, 1);\n    var scaleY = retrieve2(transform.scaleY, 1);\n    var skewX = transform.skewX || 0;\n    var skewY = transform.skewY || 0;\n    var res = [];\n    if (x || y) {\n        res.push(\"translate(\" + x + \"px,\" + y + \"px)\");\n    }\n    if (rotation) {\n        res.push(\"rotate(\" + rotation + \")\");\n    }\n    if (scaleX !== 1 || scaleY !== 1) {\n        res.push(\"scale(\" + scaleX + \",\" + scaleY + \")\");\n    }\n    if (skewX || skewY) {\n        res.push(\"skew(\" + mathRound(skewX * RADIAN_TO_DEGREE) + \"deg, \" + mathRound(skewY * RADIAN_TO_DEGREE) + \"deg)\");\n    }\n    return res.join(' ');\n}\nexport var encodeBase64 = (function () {\n    if (env.hasGlobalWindow && isFunction(window.btoa)) {\n        return function (str) {\n            return window.btoa(unescape(str));\n        };\n    }\n    if (typeof Buffer !== 'undefined') {\n        return function (str) {\n            return Buffer.from(str).toString('base64');\n        };\n    }\n    return function (str) {\n        if (process.env.NODE_ENV !== 'production') {\n            logError('Base64 isn\\'t natively supported in the current environment.');\n        }\n        return null;\n    };\n})();\n","var PI2 = Math.PI * 2;\nexport function normalizeRadian(angle) {\n    angle %= PI2;\n    if (angle < 0) {\n        angle += PI2;\n    }\n    return angle;\n}\n","import * as matrix from './matrix.js';\nimport * as vector from './vector.js';\nvar mIdentity = matrix.identity;\nvar EPSILON = 5e-5;\nfunction isNotAroundZero(val) {\n    return val > EPSILON || val < -EPSILON;\n}\nvar scaleTmp = [];\nvar tmpTransform = [];\nvar originTransform = matrix.create();\nvar abs = Math.abs;\nvar Transformable = (function () {\n    function Transformable() {\n    }\n    Transformable.prototype.getLocalTransform = function (m) {\n        return Transformable.getLocalTransform(this, m);\n    };\n    Transformable.prototype.setPosition = function (arr) {\n        this.x = arr[0];\n        this.y = arr[1];\n    };\n    Transformable.prototype.setScale = function (arr) {\n        this.scaleX = arr[0];\n        this.scaleY = arr[1];\n    };\n    Transformable.prototype.setSkew = function (arr) {\n        this.skewX = arr[0];\n        this.skewY = arr[1];\n    };\n    Transformable.prototype.setOrigin = function (arr) {\n        this.originX = arr[0];\n        this.originY = arr[1];\n    };\n    Transformable.prototype.needLocalTransform = function () {\n        return isNotAroundZero(this.rotation)\n            || isNotAroundZero(this.x)\n            || isNotAroundZero(this.y)\n            || isNotAroundZero(this.scaleX - 1)\n            || isNotAroundZero(this.scaleY - 1)\n            || isNotAroundZero(this.skewX)\n            || isNotAroundZero(this.skewY);\n    };\n    Transformable.prototype.updateTransform = function () {\n        var parentTransform = this.parent && this.parent.transform;\n        var needLocalTransform = this.needLocalTransform();\n        var m = this.transform;\n        if (!(needLocalTransform || parentTransform)) {\n            m && mIdentity(m);\n            return;\n        }\n        m = m || matrix.create();\n        if (needLocalTransform) {\n            this.getLocalTransform(m);\n        }\n        else {\n            mIdentity(m);\n        }\n        if (parentTransform) {\n            if (needLocalTransform) {\n                matrix.mul(m, parentTransform, m);\n            }\n            else {\n                matrix.copy(m, parentTransform);\n            }\n        }\n        this.transform = m;\n        this._resolveGlobalScaleRatio(m);\n    };\n    Transformable.prototype._resolveGlobalScaleRatio = function (m) {\n        var globalScaleRatio = this.globalScaleRatio;\n        if (globalScaleRatio != null && globalScaleRatio !== 1) {\n            this.getGlobalScale(scaleTmp);\n            var relX = scaleTmp[0] < 0 ? -1 : 1;\n            var relY = scaleTmp[1] < 0 ? -1 : 1;\n            var sx = ((scaleTmp[0] - relX) * globalScaleRatio + relX) / scaleTmp[0] || 0;\n            var sy = ((scaleTmp[1] - relY) * globalScaleRatio + relY) / scaleTmp[1] || 0;\n            m[0] *= sx;\n            m[1] *= sx;\n            m[2] *= sy;\n            m[3] *= sy;\n        }\n        this.invTransform = this.invTransform || matrix.create();\n        matrix.invert(this.invTransform, m);\n    };\n    Transformable.prototype.getComputedTransform = function () {\n        var transformNode = this;\n        var ancestors = [];\n        while (transformNode) {\n            ancestors.push(transformNode);\n            transformNode = transformNode.parent;\n        }\n        while (transformNode = ancestors.pop()) {\n            transformNode.updateTransform();\n        }\n        return this.transform;\n    };\n    Transformable.prototype.setLocalTransform = function (m) {\n        if (!m) {\n            return;\n        }\n        var sx = m[0] * m[0] + m[1] * m[1];\n        var sy = m[2] * m[2] + m[3] * m[3];\n        var rotation = Math.atan2(m[1], m[0]);\n        var shearX = Math.PI / 2 + rotation - Math.atan2(m[3], m[2]);\n        sy = Math.sqrt(sy) * Math.cos(shearX);\n        sx = Math.sqrt(sx);\n        this.skewX = shearX;\n        this.skewY = 0;\n        this.rotation = -rotation;\n        this.x = +m[4];\n        this.y = +m[5];\n        this.scaleX = sx;\n        this.scaleY = sy;\n        this.originX = 0;\n        this.originY = 0;\n    };\n    Transformable.prototype.decomposeTransform = function () {\n        if (!this.transform) {\n            return;\n        }\n        var parent = this.parent;\n        var m = this.transform;\n        if (parent && parent.transform) {\n            matrix.mul(tmpTransform, parent.invTransform, m);\n            m = tmpTransform;\n        }\n        var ox = this.originX;\n        var oy = this.originY;\n        if (ox || oy) {\n            originTransform[4] = ox;\n            originTransform[5] = oy;\n            matrix.mul(tmpTransform, m, originTransform);\n            tmpTransform[4] -= ox;\n            tmpTransform[5] -= oy;\n            m = tmpTransform;\n        }\n        this.setLocalTransform(m);\n    };\n    Transformable.prototype.getGlobalScale = function (out) {\n        var m = this.transform;\n        out = out || [];\n        if (!m) {\n            out[0] = 1;\n            out[1] = 1;\n            return out;\n        }\n        out[0] = Math.sqrt(m[0] * m[0] + m[1] * m[1]);\n        out[1] = Math.sqrt(m[2] * m[2] + m[3] * m[3]);\n        if (m[0] < 0) {\n            out[0] = -out[0];\n        }\n        if (m[3] < 0) {\n            out[1] = -out[1];\n        }\n        return out;\n    };\n    Transformable.prototype.transformCoordToLocal = function (x, y) {\n        var v2 = [x, y];\n        var invTransform = this.invTransform;\n        if (invTransform) {\n            vector.applyTransform(v2, v2, invTransform);\n        }\n        return v2;\n    };\n    Transformable.prototype.transformCoordToGlobal = function (x, y) {\n        var v2 = [x, y];\n        var transform = this.transform;\n        if (transform) {\n            vector.applyTransform(v2, v2, transform);\n        }\n        return v2;\n    };\n    Transformable.prototype.getLineScale = function () {\n        var m = this.transform;\n        return m && abs(m[0] - 1) > 1e-10 && abs(m[3] - 1) > 1e-10\n            ? Math.sqrt(abs(m[0] * m[3] - m[2] * m[1]))\n            : 1;\n    };\n    Transformable.prototype.copyTransform = function (source) {\n        copyTransform(this, source);\n    };\n    Transformable.getLocalTransform = function (target, m) {\n        m = m || [];\n        var ox = target.originX || 0;\n        var oy = target.originY || 0;\n        var sx = target.scaleX;\n        var sy = target.scaleY;\n        var ax = target.anchorX;\n        var ay = target.anchorY;\n        var rotation = target.rotation || 0;\n        var x = target.x;\n        var y = target.y;\n        var skewX = target.skewX ? Math.tan(target.skewX) : 0;\n        var skewY = target.skewY ? Math.tan(-target.skewY) : 0;\n        if (ox || oy || ax || ay) {\n            var dx = ox + ax;\n            var dy = oy + ay;\n            m[4] = -dx * sx - skewX * dy * sy;\n            m[5] = -dy * sy - skewY * dx * sx;\n        }\n        else {\n            m[4] = m[5] = 0;\n        }\n        m[0] = sx;\n        m[3] = sy;\n        m[1] = skewY * sx;\n        m[2] = skewX * sy;\n        rotation && matrix.rotate(m, m, rotation);\n        m[4] += ox + x;\n        m[5] += oy + y;\n        return m;\n    };\n    Transformable.initDefaultProps = (function () {\n        var proto = Transformable.prototype;\n        proto.scaleX =\n            proto.scaleY =\n                proto.globalScaleRatio = 1;\n        proto.x =\n            proto.y =\n                proto.originX =\n                    proto.originY =\n                        proto.skewX =\n                            proto.skewY =\n                                proto.rotation =\n                                    proto.anchorX =\n                                        proto.anchorY = 0;\n    })();\n    return Transformable;\n}());\n;\nexport var TRANSFORMABLE_PROPS = [\n    'x', 'y', 'originX', 'originY', 'anchorX', 'anchorY', 'rotation', 'scaleX', 'scaleY', 'skewX', 'skewY'\n];\nexport function copyTransform(target, source) {\n    for (var i = 0; i < TRANSFORMABLE_PROPS.length; i++) {\n        var propName = TRANSFORMABLE_PROPS[i];\n        target[propName] = source[propName];\n    }\n}\nexport default Transformable;\n","export default function windingLine(x0, y0, x1, y1, x, y) {\n    if ((y > y0 && y > y1) || (y < y0 && y < y1)) {\n        return 0;\n    }\n    if (y1 === y0) {\n        return 0;\n    }\n    var t = (y - y0) / (y1 - y0);\n    var dir = y1 < y0 ? 1 : -1;\n    if (t === 1 || t === 0) {\n        dir = y1 < y0 ? 0.5 : -0.5;\n    }\n    var x_ = t * (x1 - x0) + x0;\n    return x_ === x ? Infinity : x_ > x ? dir : 0;\n}\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nimport * as polyHelper from '../helper/poly.js';\nvar PolygonShape = (function () {\n    function PolygonShape() {\n        this.points = null;\n        this.smooth = 0;\n        this.smoothConstraint = null;\n    }\n    return PolygonShape;\n}());\nexport { PolygonShape };\nvar Polygon = (function (_super) {\n    __extends(Polygon, _super);\n    function Polygon(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Polygon.prototype.getDefaultShape = function () {\n        return new PolygonShape();\n    };\n    Polygon.prototype.buildPath = function (ctx, shape) {\n        polyHelper.buildPath(ctx, shape, true);\n    };\n    return Polygon;\n}(Path));\n;\nPolygon.prototype.type = 'polygon';\nexport default Polygon;\n","import { isArray, isNumber, map } from '../core/util.js';\nexport function normalizeLineDash(lineType, lineWidth) {\n    if (!lineType || lineType === 'solid' || !(lineWidth > 0)) {\n        return null;\n    }\n    return lineType === 'dashed'\n        ? [4 * lineWidth, 2 * lineWidth]\n        : lineType === 'dotted'\n            ? [lineWidth]\n            : isNumber(lineType)\n                ? [lineType] : isArray(lineType) ? lineType : null;\n}\nexport function getLineDash(el) {\n    var style = el.style;\n    var lineDash = style.lineDash && style.lineWidth > 0 && normalizeLineDash(style.lineDash, style.lineWidth);\n    var lineDashOffset = style.lineDashOffset;\n    if (lineDash) {\n        var lineScale_1 = (style.strokeNoScale && el.getLineScale) ? el.getLineScale() : 1;\n        if (lineScale_1 && lineScale_1 !== 1) {\n            lineDash = map(lineDash, function (rawVal) {\n                return rawVal / lineScale_1;\n            });\n            lineDashOffset /= lineScale_1;\n        }\n    }\n    return [lineDash, lineDashOffset];\n}\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nvar ArcShape = (function () {\n    function ArcShape() {\n        this.cx = 0;\n        this.cy = 0;\n        this.r = 0;\n        this.startAngle = 0;\n        this.endAngle = Math.PI * 2;\n        this.clockwise = true;\n    }\n    return ArcShape;\n}());\nexport { ArcShape };\nvar Arc = (function (_super) {\n    __extends(Arc, _super);\n    function Arc(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Arc.prototype.getDefaultStyle = function () {\n        return {\n            stroke: '#000',\n            fill: null\n        };\n    };\n    Arc.prototype.getDefaultShape = function () {\n        return new ArcShape();\n    };\n    Arc.prototype.buildPath = function (ctx, shape) {\n        var x = shape.cx;\n        var y = shape.cy;\n        var r = Math.max(shape.r, 0);\n        var startAngle = shape.startAngle;\n        var endAngle = shape.endAngle;\n        var clockwise = shape.clockwise;\n        var unitX = Math.cos(startAngle);\n        var unitY = Math.sin(startAngle);\n        ctx.moveTo(unitX * r + x, unitY * r + y);\n        ctx.arc(x, y, r, startAngle, endAngle, !clockwise);\n    };\n    return Arc;\n}(Path));\nArc.prototype.type = 'arc';\nexport default Arc;\n","export function containStroke(x0, y0, x1, y1, lineWidth, x, y) {\n    if (lineWidth === 0) {\n        return false;\n    }\n    var _l = lineWidth;\n    var _a = 0;\n    var _b = x0;\n    if ((y > y0 + _l && y > y1 + _l)\n        || (y < y0 - _l && y < y1 - _l)\n        || (x > x0 + _l && x > x1 + _l)\n        || (x < x0 - _l && x < x1 - _l)) {\n        return false;\n    }\n    if (x0 !== x1) {\n        _a = (y0 - y1) / (x0 - x1);\n        _b = (x0 * y1 - x1 * y0) / (x0 - x1);\n    }\n    else {\n        return Math.abs(x - x0) <= _l / 2;\n    }\n    var tmp = _a * x - y + _b;\n    var _s = tmp * tmp / (_a * _a + 1);\n    return _s <= _l / 2 * _l / 2;\n}\n","import * as matrix from './matrix.js';\nimport Point from './Point.js';\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar lt = new Point();\nvar rb = new Point();\nvar lb = new Point();\nvar rt = new Point();\nvar minTv = new Point();\nvar maxTv = new Point();\nvar BoundingRect = (function () {\n    function BoundingRect(x, y, width, height) {\n        if (width < 0) {\n            x = x + width;\n            width = -width;\n        }\n        if (height < 0) {\n            y = y + height;\n            height = -height;\n        }\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n    }\n    BoundingRect.prototype.union = function (other) {\n        var x = mathMin(other.x, this.x);\n        var y = mathMin(other.y, this.y);\n        if (isFinite(this.x) && isFinite(this.width)) {\n            this.width = mathMax(other.x + other.width, this.x + this.width) - x;\n        }\n        else {\n            this.width = other.width;\n        }\n        if (isFinite(this.y) && isFinite(this.height)) {\n            this.height = mathMax(other.y + other.height, this.y + this.height) - y;\n        }\n        else {\n            this.height = other.height;\n        }\n        this.x = x;\n        this.y = y;\n    };\n    BoundingRect.prototype.applyTransform = function (m) {\n        BoundingRect.applyTransform(this, this, m);\n    };\n    BoundingRect.prototype.calculateTransform = function (b) {\n        var a = this;\n        var sx = b.width / a.width;\n        var sy = b.height / a.height;\n        var m = matrix.create();\n        matrix.translate(m, m, [-a.x, -a.y]);\n        matrix.scale(m, m, [sx, sy]);\n        matrix.translate(m, m, [b.x, b.y]);\n        return m;\n    };\n    BoundingRect.prototype.intersect = function (b, mtv) {\n        if (!b) {\n            return false;\n        }\n        if (!(b instanceof BoundingRect)) {\n            b = BoundingRect.create(b);\n        }\n        var a = this;\n        var ax0 = a.x;\n        var ax1 = a.x + a.width;\n        var ay0 = a.y;\n        var ay1 = a.y + a.height;\n        var bx0 = b.x;\n        var bx1 = b.x + b.width;\n        var by0 = b.y;\n        var by1 = b.y + b.height;\n        var overlap = !(ax1 < bx0 || bx1 < ax0 || ay1 < by0 || by1 < ay0);\n        if (mtv) {\n            var dMin = Infinity;\n            var dMax = 0;\n            var d0 = Math.abs(ax1 - bx0);\n            var d1 = Math.abs(bx1 - ax0);\n            var d2 = Math.abs(ay1 - by0);\n            var d3 = Math.abs(by1 - ay0);\n            var dx = Math.min(d0, d1);\n            var dy = Math.min(d2, d3);\n            if (ax1 < bx0 || bx1 < ax0) {\n                if (dx > dMax) {\n                    dMax = dx;\n                    if (d0 < d1) {\n                        Point.set(maxTv, -d0, 0);\n                    }\n                    else {\n                        Point.set(maxTv, d1, 0);\n                    }\n                }\n            }\n            else {\n                if (dx < dMin) {\n                    dMin = dx;\n                    if (d0 < d1) {\n                        Point.set(minTv, d0, 0);\n                    }\n                    else {\n                        Point.set(minTv, -d1, 0);\n                    }\n                }\n            }\n            if (ay1 < by0 || by1 < ay0) {\n                if (dy > dMax) {\n                    dMax = dy;\n                    if (d2 < d3) {\n                        Point.set(maxTv, 0, -d2);\n                    }\n                    else {\n                        Point.set(maxTv, 0, d3);\n                    }\n                }\n            }\n            else {\n                if (dx < dMin) {\n                    dMin = dx;\n                    if (d2 < d3) {\n                        Point.set(minTv, 0, d2);\n                    }\n                    else {\n                        Point.set(minTv, 0, -d3);\n                    }\n                }\n            }\n        }\n        if (mtv) {\n            Point.copy(mtv, overlap ? minTv : maxTv);\n        }\n        return overlap;\n    };\n    BoundingRect.prototype.contain = function (x, y) {\n        var rect = this;\n        return x >= rect.x\n            && x <= (rect.x + rect.width)\n            && y >= rect.y\n            && y <= (rect.y + rect.height);\n    };\n    BoundingRect.prototype.clone = function () {\n        return new BoundingRect(this.x, this.y, this.width, this.height);\n    };\n    BoundingRect.prototype.copy = function (other) {\n        BoundingRect.copy(this, other);\n    };\n    BoundingRect.prototype.plain = function () {\n        return {\n            x: this.x,\n            y: this.y,\n            width: this.width,\n            height: this.height\n        };\n    };\n    BoundingRect.prototype.isFinite = function () {\n        return isFinite(this.x)\n            && isFinite(this.y)\n            && isFinite(this.width)\n            && isFinite(this.height);\n    };\n    BoundingRect.prototype.isZero = function () {\n        return this.width === 0 || this.height === 0;\n    };\n    BoundingRect.create = function (rect) {\n        return new BoundingRect(rect.x, rect.y, rect.width, rect.height);\n    };\n    BoundingRect.copy = function (target, source) {\n        target.x = source.x;\n        target.y = source.y;\n        target.width = source.width;\n        target.height = source.height;\n    };\n    BoundingRect.applyTransform = function (target, source, m) {\n        if (!m) {\n            if (target !== source) {\n                BoundingRect.copy(target, source);\n            }\n            return;\n        }\n        if (m[1] < 1e-5 && m[1] > -1e-5 && m[2] < 1e-5 && m[2] > -1e-5) {\n            var sx = m[0];\n            var sy = m[3];\n            var tx = m[4];\n            var ty = m[5];\n            target.x = source.x * sx + tx;\n            target.y = source.y * sy + ty;\n            target.width = source.width * sx;\n            target.height = source.height * sy;\n            if (target.width < 0) {\n                target.x += target.width;\n                target.width = -target.width;\n            }\n            if (target.height < 0) {\n                target.y += target.height;\n                target.height = -target.height;\n            }\n            return;\n        }\n        lt.x = lb.x = source.x;\n        lt.y = rt.y = source.y;\n        rb.x = rt.x = source.x + source.width;\n        rb.y = lb.y = source.y + source.height;\n        lt.transform(m);\n        rt.transform(m);\n        rb.transform(m);\n        lb.transform(m);\n        target.x = mathMin(lt.x, rb.x, lb.x, rt.x);\n        target.y = mathMin(lt.y, rb.y, lb.y, rt.y);\n        var maxX = mathMax(lt.x, rb.x, lb.x, rt.x);\n        var maxY = mathMax(lt.y, rb.y, lb.y, rt.y);\n        target.width = maxX - target.x;\n        target.height = maxY - target.y;\n    };\n    return BoundingRect;\n}());\nexport default BoundingRect;\n","import env from '../core/env.js';\nvar requestAnimationFrame;\nrequestAnimationFrame = (env.hasGlobalWindow\n    && ((window.requestAnimationFrame && window.requestAnimationFrame.bind(window))\n        || (window.msRequestAnimationFrame && window.msRequestAnimationFrame.bind(window))\n        || window.mozRequestAnimationFrame\n        || window.webkitRequestAnimationFrame)) || function (func) {\n    return setTimeout(func, 16);\n};\nexport default requestAnimationFrame;\n","var round = Math.round;\nexport function subPixelOptimizeLine(outputShape, inputShape, style) {\n    if (!inputShape) {\n        return;\n    }\n    var x1 = inputShape.x1;\n    var x2 = inputShape.x2;\n    var y1 = inputShape.y1;\n    var y2 = inputShape.y2;\n    outputShape.x1 = x1;\n    outputShape.x2 = x2;\n    outputShape.y1 = y1;\n    outputShape.y2 = y2;\n    var lineWidth = style && style.lineWidth;\n    if (!lineWidth) {\n        return outputShape;\n    }\n    if (round(x1 * 2) === round(x2 * 2)) {\n        outputShape.x1 = outputShape.x2 = subPixelOptimize(x1, lineWidth, true);\n    }\n    if (round(y1 * 2) === round(y2 * 2)) {\n        outputShape.y1 = outputShape.y2 = subPixelOptimize(y1, lineWidth, true);\n    }\n    return outputShape;\n}\nexport function subPixelOptimizeRect(outputShape, inputShape, style) {\n    if (!inputShape) {\n        return;\n    }\n    var originX = inputShape.x;\n    var originY = inputShape.y;\n    var originWidth = inputShape.width;\n    var originHeight = inputShape.height;\n    outputShape.x = originX;\n    outputShape.y = originY;\n    outputShape.width = originWidth;\n    outputShape.height = originHeight;\n    var lineWidth = style && style.lineWidth;\n    if (!lineWidth) {\n        return outputShape;\n    }\n    outputShape.x = subPixelOptimize(originX, lineWidth, true);\n    outputShape.y = subPixelOptimize(originY, lineWidth, true);\n    outputShape.width = Math.max(subPixelOptimize(originX + originWidth, lineWidth, false) - outputShape.x, originWidth === 0 ? 0 : 1);\n    outputShape.height = Math.max(subPixelOptimize(originY + originHeight, lineWidth, false) - outputShape.y, originHeight === 0 ? 0 : 1);\n    return outputShape;\n}\nexport function subPixelOptimize(position, lineWidth, positiveOrNegative) {\n    if (!lineWidth) {\n        return position;\n    }\n    var doubledPosition = round(position * 2);\n    return (doubledPosition + round(lineWidth)) % 2 === 0\n        ? doubledPosition / 2\n        : (doubledPosition + (positiveOrNegative ? 1 : -1)) / 2;\n}\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nimport * as vec2 from '../../core/vector.js';\nimport { quadraticSubdivide, cubicSubdivide, quadraticAt, cubicAt, quadraticDerivativeAt, cubicDerivativeAt } from '../../core/curve.js';\nvar out = [];\nvar BezierCurveShape = (function () {\n    function BezierCurveShape() {\n        this.x1 = 0;\n        this.y1 = 0;\n        this.x2 = 0;\n        this.y2 = 0;\n        this.cpx1 = 0;\n        this.cpy1 = 0;\n        this.percent = 1;\n    }\n    return BezierCurveShape;\n}());\nexport { BezierCurveShape };\nfunction someVectorAt(shape, t, isTangent) {\n    var cpx2 = shape.cpx2;\n    var cpy2 = shape.cpy2;\n    if (cpx2 != null || cpy2 != null) {\n        return [\n            (isTangent ? cubicDerivativeAt : cubicAt)(shape.x1, shape.cpx1, shape.cpx2, shape.x2, t),\n            (isTangent ? cubicDerivativeAt : cubicAt)(shape.y1, shape.cpy1, shape.cpy2, shape.y2, t)\n        ];\n    }\n    else {\n        return [\n            (isTangent ? quadraticDerivativeAt : quadraticAt)(shape.x1, shape.cpx1, shape.x2, t),\n            (isTangent ? quadraticDerivativeAt : quadraticAt)(shape.y1, shape.cpy1, shape.y2, t)\n        ];\n    }\n}\nvar BezierCurve = (function (_super) {\n    __extends(BezierCurve, _super);\n    function BezierCurve(opts) {\n        return _super.call(this, opts) || this;\n    }\n    BezierCurve.prototype.getDefaultStyle = function () {\n        return {\n            stroke: '#000',\n            fill: null\n        };\n    };\n    BezierCurve.prototype.getDefaultShape = function () {\n        return new BezierCurveShape();\n    };\n    BezierCurve.prototype.buildPath = function (ctx, shape) {\n        var x1 = shape.x1;\n        var y1 = shape.y1;\n        var x2 = shape.x2;\n        var y2 = shape.y2;\n        var cpx1 = shape.cpx1;\n        var cpy1 = shape.cpy1;\n        var cpx2 = shape.cpx2;\n        var cpy2 = shape.cpy2;\n        var percent = shape.percent;\n        if (percent === 0) {\n            return;\n        }\n        ctx.moveTo(x1, y1);\n        if (cpx2 == null || cpy2 == null) {\n            if (percent < 1) {\n                quadraticSubdivide(x1, cpx1, x2, percent, out);\n                cpx1 = out[1];\n                x2 = out[2];\n                quadraticSubdivide(y1, cpy1, y2, percent, out);\n                cpy1 = out[1];\n                y2 = out[2];\n            }\n            ctx.quadraticCurveTo(cpx1, cpy1, x2, y2);\n        }\n        else {\n            if (percent < 1) {\n                cubicSubdivide(x1, cpx1, cpx2, x2, percent, out);\n                cpx1 = out[1];\n                cpx2 = out[2];\n                x2 = out[3];\n                cubicSubdivide(y1, cpy1, cpy2, y2, percent, out);\n                cpy1 = out[1];\n                cpy2 = out[2];\n                y2 = out[3];\n            }\n            ctx.bezierCurveTo(cpx1, cpy1, cpx2, cpy2, x2, y2);\n        }\n    };\n    BezierCurve.prototype.pointAt = function (t) {\n        return someVectorAt(this.shape, t, false);\n    };\n    BezierCurve.prototype.tangentAt = function (t) {\n        var p = someVectorAt(this.shape, t, true);\n        return vec2.normalize(p, p);\n    };\n    return BezierCurve;\n}(Path));\n;\nBezierCurve.prototype.type = 'bezier-curve';\nexport default BezierCurve;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nvar EllipseShape = (function () {\n    function EllipseShape() {\n        this.cx = 0;\n        this.cy = 0;\n        this.rx = 0;\n        this.ry = 0;\n    }\n    return EllipseShape;\n}());\nexport { EllipseShape };\nvar Ellipse = (function (_super) {\n    __extends(Ellipse, _super);\n    function Ellipse(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Ellipse.prototype.getDefaultShape = function () {\n        return new EllipseShape();\n    };\n    Ellipse.prototype.buildPath = function (ctx, shape) {\n        var k = 0.5522848;\n        var x = shape.cx;\n        var y = shape.cy;\n        var a = shape.rx;\n        var b = shape.ry;\n        var ox = a * k;\n        var oy = b * k;\n        ctx.moveTo(x - a, y);\n        ctx.bezierCurveTo(x - a, y - oy, x - ox, y - b, x, y - b);\n        ctx.bezierCurveTo(x + ox, y - b, x + a, y - oy, x + a, y);\n        ctx.bezierCurveTo(x + a, y + oy, x + ox, y + b, x, y + b);\n        ctx.bezierCurveTo(x - ox, y + b, x - a, y + oy, x - a, y);\n        ctx.closePath();\n    };\n    return Ellipse;\n}(Path));\nEllipse.prototype.type = 'ellipse';\nexport default Ellipse;\n","import { cubicAt, cubicRootAt } from '../core/curve.js';\nimport { trim } from '../core/util.js';\nvar regexp = /cubic-bezier\\(([0-9,\\.e ]+)\\)/;\nexport function createCubicEasingFunc(cubicEasingStr) {\n    var cubic = cubicEasingStr && regexp.exec(cubicEasingStr);\n    if (cubic) {\n        var points = cubic[1].split(',');\n        var a_1 = +trim(points[0]);\n        var b_1 = +trim(points[1]);\n        var c_1 = +trim(points[2]);\n        var d_1 = +trim(points[3]);\n        if (isNaN(a_1 + b_1 + c_1 + d_1)) {\n            return;\n        }\n        var roots_1 = [];\n        return function (p) {\n            return p <= 0\n                ? 0 : p >= 1\n                ? 1\n                : cubicRootAt(0, a_1, c_1, 1, p, roots_1) && cubicAt(0, b_1, d_1, 1, roots_1[0]);\n        };\n    }\n}\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nimport * as roundRectHelper from '../helper/roundRect.js';\nimport { subPixelOptimizeRect } from '../helper/subPixelOptimize.js';\nvar RectShape = (function () {\n    function RectShape() {\n        this.x = 0;\n        this.y = 0;\n        this.width = 0;\n        this.height = 0;\n    }\n    return RectShape;\n}());\nexport { RectShape };\nvar subPixelOptimizeOutputShape = {};\nvar Rect = (function (_super) {\n    __extends(Rect, _super);\n    function Rect(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Rect.prototype.getDefaultShape = function () {\n        return new RectShape();\n    };\n    Rect.prototype.buildPath = function (ctx, shape) {\n        var x;\n        var y;\n        var width;\n        var height;\n        if (this.subPixelOptimize) {\n            var optimizedShape = subPixelOptimizeRect(subPixelOptimizeOutputShape, shape, this.style);\n            x = optimizedShape.x;\n            y = optimizedShape.y;\n            width = optimizedShape.width;\n            height = optimizedShape.height;\n            optimizedShape.r = shape.r;\n            shape = optimizedShape;\n        }\n        else {\n            x = shape.x;\n            y = shape.y;\n            width = shape.width;\n            height = shape.height;\n        }\n        if (!shape.r) {\n            ctx.rect(x, y, width, height);\n        }\n        else {\n            roundRectHelper.buildPath(ctx, shape);\n        }\n    };\n    Rect.prototype.isZeroArea = function () {\n        return !this.shape.width || !this.shape.height;\n    };\n    return Rect;\n}(Path));\nRect.prototype.type = 'rect';\nexport default Rect;\n","export function buildPath(ctx, shape) {\n    var x = shape.x;\n    var y = shape.y;\n    var width = shape.width;\n    var height = shape.height;\n    var r = shape.r;\n    var r1;\n    var r2;\n    var r3;\n    var r4;\n    if (width < 0) {\n        x = x + width;\n        width = -width;\n    }\n    if (height < 0) {\n        y = y + height;\n        height = -height;\n    }\n    if (typeof r === 'number') {\n        r1 = r2 = r3 = r4 = r;\n    }\n    else if (r instanceof Array) {\n        if (r.length === 1) {\n            r1 = r2 = r3 = r4 = r[0];\n        }\n        else if (r.length === 2) {\n            r1 = r3 = r[0];\n            r2 = r4 = r[1];\n        }\n        else if (r.length === 3) {\n            r1 = r[0];\n            r2 = r4 = r[1];\n            r3 = r[2];\n        }\n        else {\n            r1 = r[0];\n            r2 = r[1];\n            r3 = r[2];\n            r4 = r[3];\n        }\n    }\n    else {\n        r1 = r2 = r3 = r4 = 0;\n    }\n    var total;\n    if (r1 + r2 > width) {\n        total = r1 + r2;\n        r1 *= width / total;\n        r2 *= width / total;\n    }\n    if (r3 + r4 > width) {\n        total = r3 + r4;\n        r3 *= width / total;\n        r4 *= width / total;\n    }\n    if (r2 + r3 > height) {\n        total = r2 + r3;\n        r2 *= height / total;\n        r3 *= height / total;\n    }\n    if (r1 + r4 > height) {\n        total = r1 + r4;\n        r1 *= height / total;\n        r4 *= height / total;\n    }\n    ctx.moveTo(x + r1, y);\n    ctx.lineTo(x + width - r2, y);\n    r2 !== 0 && ctx.arc(x + width - r2, y + r2, r2, -Math.PI / 2, 0);\n    ctx.lineTo(x + width, y + height - r3);\n    r3 !== 0 && ctx.arc(x + width - r3, y + height - r3, r3, 0, Math.PI / 2);\n    ctx.lineTo(x + r4, y + height);\n    r4 !== 0 && ctx.arc(x + r4, y + height - r4, r4, Math.PI / 2, Math.PI);\n    ctx.lineTo(x, y + r1);\n    r1 !== 0 && ctx.arc(x + r1, y + r1, r1, Math.PI, Math.PI * 1.5);\n}\n","import Point from './Point.js';\nvar extent = [0, 0];\nvar extent2 = [0, 0];\nvar minTv = new Point();\nvar maxTv = new Point();\nvar OrientedBoundingRect = (function () {\n    function OrientedBoundingRect(rect, transform) {\n        this._corners = [];\n        this._axes = [];\n        this._origin = [0, 0];\n        for (var i = 0; i < 4; i++) {\n            this._corners[i] = new Point();\n        }\n        for (var i = 0; i < 2; i++) {\n            this._axes[i] = new Point();\n        }\n        if (rect) {\n            this.fromBoundingRect(rect, transform);\n        }\n    }\n    OrientedBoundingRect.prototype.fromBoundingRect = function (rect, transform) {\n        var corners = this._corners;\n        var axes = this._axes;\n        var x = rect.x;\n        var y = rect.y;\n        var x2 = x + rect.width;\n        var y2 = y + rect.height;\n        corners[0].set(x, y);\n        corners[1].set(x2, y);\n        corners[2].set(x2, y2);\n        corners[3].set(x, y2);\n        if (transform) {\n            for (var i = 0; i < 4; i++) {\n                corners[i].transform(transform);\n            }\n        }\n        Point.sub(axes[0], corners[1], corners[0]);\n        Point.sub(axes[1], corners[3], corners[0]);\n        axes[0].normalize();\n        axes[1].normalize();\n        for (var i = 0; i < 2; i++) {\n            this._origin[i] = axes[i].dot(corners[0]);\n        }\n    };\n    OrientedBoundingRect.prototype.intersect = function (other, mtv) {\n        var overlapped = true;\n        var noMtv = !mtv;\n        minTv.set(Infinity, Infinity);\n        maxTv.set(0, 0);\n        if (!this._intersectCheckOneSide(this, other, minTv, maxTv, noMtv, 1)) {\n            overlapped = false;\n            if (noMtv) {\n                return overlapped;\n            }\n        }\n        if (!this._intersectCheckOneSide(other, this, minTv, maxTv, noMtv, -1)) {\n            overlapped = false;\n            if (noMtv) {\n                return overlapped;\n            }\n        }\n        if (!noMtv) {\n            Point.copy(mtv, overlapped ? minTv : maxTv);\n        }\n        return overlapped;\n    };\n    OrientedBoundingRect.prototype._intersectCheckOneSide = function (self, other, minTv, maxTv, noMtv, inverse) {\n        var overlapped = true;\n        for (var i = 0; i < 2; i++) {\n            var axis = this._axes[i];\n            this._getProjMinMaxOnAxis(i, self._corners, extent);\n            this._getProjMinMaxOnAxis(i, other._corners, extent2);\n            if (extent[1] < extent2[0] || extent[0] > extent2[1]) {\n                overlapped = false;\n                if (noMtv) {\n                    return overlapped;\n                }\n                var dist0 = Math.abs(extent2[0] - extent[1]);\n                var dist1 = Math.abs(extent[0] - extent2[1]);\n                if (Math.min(dist0, dist1) > maxTv.len()) {\n                    if (dist0 < dist1) {\n                        Point.scale(maxTv, axis, -dist0 * inverse);\n                    }\n                    else {\n                        Point.scale(maxTv, axis, dist1 * inverse);\n                    }\n                }\n            }\n            else if (minTv) {\n                var dist0 = Math.abs(extent2[0] - extent[1]);\n                var dist1 = Math.abs(extent[0] - extent2[1]);\n                if (Math.min(dist0, dist1) < minTv.len()) {\n                    if (dist0 < dist1) {\n                        Point.scale(minTv, axis, dist0 * inverse);\n                    }\n                    else {\n                        Point.scale(minTv, axis, -dist1 * inverse);\n                    }\n                }\n            }\n        }\n        return overlapped;\n    };\n    OrientedBoundingRect.prototype._getProjMinMaxOnAxis = function (dim, corners, out) {\n        var axis = this._axes[dim];\n        var origin = this._origin;\n        var proj = corners[0].dot(axis) + origin[dim];\n        var min = proj;\n        var max = proj;\n        for (var i = 1; i < corners.length; i++) {\n            var proj_1 = corners[i].dot(axis) + origin[dim];\n            min = Math.min(proj_1, min);\n            max = Math.max(proj_1, max);\n        }\n        out[0] = min;\n        out[1] = max;\n    };\n    return OrientedBoundingRect;\n}());\nexport default OrientedBoundingRect;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nimport { subPixelOptimizeLine } from '../helper/subPixelOptimize.js';\nvar subPixelOptimizeOutputShape = {};\nvar LineShape = (function () {\n    function LineShape() {\n        this.x1 = 0;\n        this.y1 = 0;\n        this.x2 = 0;\n        this.y2 = 0;\n        this.percent = 1;\n    }\n    return LineShape;\n}());\nexport { LineShape };\nvar Line = (function (_super) {\n    __extends(Line, _super);\n    function Line(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Line.prototype.getDefaultStyle = function () {\n        return {\n            stroke: '#000',\n            fill: null\n        };\n    };\n    Line.prototype.getDefaultShape = function () {\n        return new LineShape();\n    };\n    Line.prototype.buildPath = function (ctx, shape) {\n        var x1;\n        var y1;\n        var x2;\n        var y2;\n        if (this.subPixelOptimize) {\n            var optimizedShape = subPixelOptimizeLine(subPixelOptimizeOutputShape, shape, this.style);\n            x1 = optimizedShape.x1;\n            y1 = optimizedShape.y1;\n            x2 = optimizedShape.x2;\n            y2 = optimizedShape.y2;\n        }\n        else {\n            x1 = shape.x1;\n            y1 = shape.y1;\n            x2 = shape.x2;\n            y2 = shape.y2;\n        }\n        var percent = shape.percent;\n        if (percent === 0) {\n            return;\n        }\n        ctx.moveTo(x1, y1);\n        if (percent < 1) {\n            x2 = x1 * (1 - percent) + x2 * percent;\n            y2 = y1 * (1 - percent) + y2 * percent;\n        }\n        ctx.lineTo(x2, y2);\n    };\n    Line.prototype.pointAt = function (p) {\n        var shape = this.shape;\n        return [\n            shape.x1 * (1 - p) + shape.x2 * p,\n            shape.y1 * (1 - p) + shape.y2 * p\n        ];\n    };\n    return Line;\n}(Path));\nLine.prototype.type = 'line';\nexport default Line;\n","import * as curve from '../core/curve.js';\nexport function containStroke(x0, y0, x1, y1, x2, y2, x3, y3, lineWidth, x, y) {\n    if (lineWidth === 0) {\n        return false;\n    }\n    var _l = lineWidth;\n    if ((y > y0 + _l && y > y1 + _l && y > y2 + _l && y > y3 + _l)\n        || (y < y0 - _l && y < y1 - _l && y < y2 - _l && y < y3 - _l)\n        || (x > x0 + _l && x > x1 + _l && x > x2 + _l && x > x3 + _l)\n        || (x < x0 - _l && x < x1 - _l && x < x2 - _l && x < x3 - _l)) {\n        return false;\n    }\n    var d = curve.cubicProjectPoint(x0, y0, x1, y1, x2, y2, x3, y3, x, y, null);\n    return d <= _l / 2;\n}\n","import { normalizeRadian } from './util.js';\nvar PI2 = Math.PI * 2;\nexport function containStroke(cx, cy, r, startAngle, endAngle, anticlockwise, lineWidth, x, y) {\n    if (lineWidth === 0) {\n        return false;\n    }\n    var _l = lineWidth;\n    x -= cx;\n    y -= cy;\n    var d = Math.sqrt(x * x + y * y);\n    if ((d - _l > r) || (d + _l < r)) {\n        return false;\n    }\n    if (Math.abs(startAngle - endAngle) % PI2 < 1e-4) {\n        return true;\n    }\n    if (anticlockwise) {\n        var tmp = startAngle;\n        startAngle = normalizeRadian(endAngle);\n        endAngle = normalizeRadian(tmp);\n    }\n    else {\n        startAngle = normalizeRadian(startAngle);\n        endAngle = normalizeRadian(endAngle);\n    }\n    if (startAngle > endAngle) {\n        endAngle += PI2;\n    }\n    var angle = Math.atan2(y, x);\n    if (angle < 0) {\n        angle += PI2;\n    }\n    return (angle >= startAngle && angle <= endAngle)\n        || (angle + PI2 >= startAngle && angle + PI2 <= endAngle);\n}\n","import PathProxy from '../core/PathProxy.js';\nimport * as line from './line.js';\nimport * as cubic from './cubic.js';\nimport * as quadratic from './quadratic.js';\nimport * as arc from './arc.js';\nimport * as curve from '../core/curve.js';\nimport windingLine from './windingLine.js';\nvar CMD = PathProxy.CMD;\nvar PI2 = Math.PI * 2;\nvar EPSILON = 1e-4;\nfunction isAroundEqual(a, b) {\n    return Math.abs(a - b) < EPSILON;\n}\nvar roots = [-1, -1, -1];\nvar extrema = [-1, -1];\nfunction swapExtrema() {\n    var tmp = extrema[0];\n    extrema[0] = extrema[1];\n    extrema[1] = tmp;\n}\nfunction windingCubic(x0, y0, x1, y1, x2, y2, x3, y3, x, y) {\n    if ((y > y0 && y > y1 && y > y2 && y > y3)\n        || (y < y0 && y < y1 && y < y2 && y < y3)) {\n        return 0;\n    }\n    var nRoots = curve.cubicRootAt(y0, y1, y2, y3, y, roots);\n    if (nRoots === 0) {\n        return 0;\n    }\n    else {\n        var w = 0;\n        var nExtrema = -1;\n        var y0_ = void 0;\n        var y1_ = void 0;\n        for (var i = 0; i < nRoots; i++) {\n            var t = roots[i];\n            var unit = (t === 0 || t === 1) ? 0.5 : 1;\n            var x_ = curve.cubicAt(x0, x1, x2, x3, t);\n            if (x_ < x) {\n                continue;\n            }\n            if (nExtrema < 0) {\n                nExtrema = curve.cubicExtrema(y0, y1, y2, y3, extrema);\n                if (extrema[1] < extrema[0] && nExtrema > 1) {\n                    swapExtrema();\n                }\n                y0_ = curve.cubicAt(y0, y1, y2, y3, extrema[0]);\n                if (nExtrema > 1) {\n                    y1_ = curve.cubicAt(y0, y1, y2, y3, extrema[1]);\n                }\n            }\n            if (nExtrema === 2) {\n                if (t < extrema[0]) {\n                    w += y0_ < y0 ? unit : -unit;\n                }\n                else if (t < extrema[1]) {\n                    w += y1_ < y0_ ? unit : -unit;\n                }\n                else {\n                    w += y3 < y1_ ? unit : -unit;\n                }\n            }\n            else {\n                if (t < extrema[0]) {\n                    w += y0_ < y0 ? unit : -unit;\n                }\n                else {\n                    w += y3 < y0_ ? unit : -unit;\n                }\n            }\n        }\n        return w;\n    }\n}\nfunction windingQuadratic(x0, y0, x1, y1, x2, y2, x, y) {\n    if ((y > y0 && y > y1 && y > y2)\n        || (y < y0 && y < y1 && y < y2)) {\n        return 0;\n    }\n    var nRoots = curve.quadraticRootAt(y0, y1, y2, y, roots);\n    if (nRoots === 0) {\n        return 0;\n    }\n    else {\n        var t = curve.quadraticExtremum(y0, y1, y2);\n        if (t >= 0 && t <= 1) {\n            var w = 0;\n            var y_ = curve.quadraticAt(y0, y1, y2, t);\n            for (var i = 0; i < nRoots; i++) {\n                var unit = (roots[i] === 0 || roots[i] === 1) ? 0.5 : 1;\n                var x_ = curve.quadraticAt(x0, x1, x2, roots[i]);\n                if (x_ < x) {\n                    continue;\n                }\n                if (roots[i] < t) {\n                    w += y_ < y0 ? unit : -unit;\n                }\n                else {\n                    w += y2 < y_ ? unit : -unit;\n                }\n            }\n            return w;\n        }\n        else {\n            var unit = (roots[0] === 0 || roots[0] === 1) ? 0.5 : 1;\n            var x_ = curve.quadraticAt(x0, x1, x2, roots[0]);\n            if (x_ < x) {\n                return 0;\n            }\n            return y2 < y0 ? unit : -unit;\n        }\n    }\n}\nfunction windingArc(cx, cy, r, startAngle, endAngle, anticlockwise, x, y) {\n    y -= cy;\n    if (y > r || y < -r) {\n        return 0;\n    }\n    var tmp = Math.sqrt(r * r - y * y);\n    roots[0] = -tmp;\n    roots[1] = tmp;\n    var dTheta = Math.abs(startAngle - endAngle);\n    if (dTheta < 1e-4) {\n        return 0;\n    }\n    if (dTheta >= PI2 - 1e-4) {\n        startAngle = 0;\n        endAngle = PI2;\n        var dir = anticlockwise ? 1 : -1;\n        if (x >= roots[0] + cx && x <= roots[1] + cx) {\n            return dir;\n        }\n        else {\n            return 0;\n        }\n    }\n    if (startAngle > endAngle) {\n        var tmp_1 = startAngle;\n        startAngle = endAngle;\n        endAngle = tmp_1;\n    }\n    if (startAngle < 0) {\n        startAngle += PI2;\n        endAngle += PI2;\n    }\n    var w = 0;\n    for (var i = 0; i < 2; i++) {\n        var x_ = roots[i];\n        if (x_ + cx > x) {\n            var angle = Math.atan2(y, x_);\n            var dir = anticlockwise ? 1 : -1;\n            if (angle < 0) {\n                angle = PI2 + angle;\n            }\n            if ((angle >= startAngle && angle <= endAngle)\n                || (angle + PI2 >= startAngle && angle + PI2 <= endAngle)) {\n                if (angle > Math.PI / 2 && angle < Math.PI * 1.5) {\n                    dir = -dir;\n                }\n                w += dir;\n            }\n        }\n    }\n    return w;\n}\nfunction containPath(path, lineWidth, isStroke, x, y) {\n    var data = path.data;\n    var len = path.len();\n    var w = 0;\n    var xi = 0;\n    var yi = 0;\n    var x0 = 0;\n    var y0 = 0;\n    var x1;\n    var y1;\n    for (var i = 0; i < len;) {\n        var cmd = data[i++];\n        var isFirst = i === 1;\n        if (cmd === CMD.M && i > 1) {\n            if (!isStroke) {\n                w += windingLine(xi, yi, x0, y0, x, y);\n            }\n        }\n        if (isFirst) {\n            xi = data[i];\n            yi = data[i + 1];\n            x0 = xi;\n            y0 = yi;\n        }\n        switch (cmd) {\n            case CMD.M:\n                x0 = data[i++];\n                y0 = data[i++];\n                xi = x0;\n                yi = y0;\n                break;\n            case CMD.L:\n                if (isStroke) {\n                    if (line.containStroke(xi, yi, data[i], data[i + 1], lineWidth, x, y)) {\n                        return true;\n                    }\n                }\n                else {\n                    w += windingLine(xi, yi, data[i], data[i + 1], x, y) || 0;\n                }\n                xi = data[i++];\n                yi = data[i++];\n                break;\n            case CMD.C:\n                if (isStroke) {\n                    if (cubic.containStroke(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], lineWidth, x, y)) {\n                        return true;\n                    }\n                }\n                else {\n                    w += windingCubic(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], x, y) || 0;\n                }\n                xi = data[i++];\n                yi = data[i++];\n                break;\n            case CMD.Q:\n                if (isStroke) {\n                    if (quadratic.containStroke(xi, yi, data[i++], data[i++], data[i], data[i + 1], lineWidth, x, y)) {\n                        return true;\n                    }\n                }\n                else {\n                    w += windingQuadratic(xi, yi, data[i++], data[i++], data[i], data[i + 1], x, y) || 0;\n                }\n                xi = data[i++];\n                yi = data[i++];\n                break;\n            case CMD.A:\n                var cx = data[i++];\n                var cy = data[i++];\n                var rx = data[i++];\n                var ry = data[i++];\n                var theta = data[i++];\n                var dTheta = data[i++];\n                i += 1;\n                var anticlockwise = !!(1 - data[i++]);\n                x1 = Math.cos(theta) * rx + cx;\n                y1 = Math.sin(theta) * ry + cy;\n                if (!isFirst) {\n                    w += windingLine(xi, yi, x1, y1, x, y);\n                }\n                else {\n                    x0 = x1;\n                    y0 = y1;\n                }\n                var _x = (x - cx) * ry / rx + cx;\n                if (isStroke) {\n                    if (arc.containStroke(cx, cy, ry, theta, theta + dTheta, anticlockwise, lineWidth, _x, y)) {\n                        return true;\n                    }\n                }\n                else {\n                    w += windingArc(cx, cy, ry, theta, theta + dTheta, anticlockwise, _x, y);\n                }\n                xi = Math.cos(theta + dTheta) * rx + cx;\n                yi = Math.sin(theta + dTheta) * ry + cy;\n                break;\n            case CMD.R:\n                x0 = xi = data[i++];\n                y0 = yi = data[i++];\n                var width = data[i++];\n                var height = data[i++];\n                x1 = x0 + width;\n                y1 = y0 + height;\n                if (isStroke) {\n                    if (line.containStroke(x0, y0, x1, y0, lineWidth, x, y)\n                        || line.containStroke(x1, y0, x1, y1, lineWidth, x, y)\n                        || line.containStroke(x1, y1, x0, y1, lineWidth, x, y)\n                        || line.containStroke(x0, y1, x0, y0, lineWidth, x, y)) {\n                        return true;\n                    }\n                }\n                else {\n                    w += windingLine(x1, y0, x1, y1, x, y);\n                    w += windingLine(x0, y1, x0, y0, x, y);\n                }\n                break;\n            case CMD.Z:\n                if (isStroke) {\n                    if (line.containStroke(xi, yi, x0, y0, lineWidth, x, y)) {\n                        return true;\n                    }\n                }\n                else {\n                    w += windingLine(xi, yi, x0, y0, x, y);\n                }\n                xi = x0;\n                yi = y0;\n                break;\n        }\n    }\n    if (!isStroke && !isAroundEqual(yi, y0)) {\n        w += windingLine(xi, yi, x0, y0, x, y) || 0;\n    }\n    return w !== 0;\n}\nexport function contain(pathProxy, x, y) {\n    return containPath(pathProxy, 0, false, x, y);\n}\nexport function containStroke(pathProxy, lineWidth, x, y) {\n    return containPath(pathProxy, lineWidth, true, x, y);\n}\n","import { __extends } from \"tslib\";\nimport Displayable, { DEFAULT_COMMON_STYLE, DEFAULT_COMMON_ANIMATION_PROPS } from './Displayable.js';\nimport PathProxy from '../core/PathProxy.js';\nimport * as pathContain from '../contain/path.js';\nimport { defaults, keys, extend, clone, isString, createObject } from '../core/util.js';\nimport { lum } from '../tool/color.js';\nimport { DARK_LABEL_COLOR, LIGHT_LABEL_COLOR, DARK_MODE_THRESHOLD, LIGHTER_LABEL_COLOR } from '../config.js';\nimport { REDRAW_BIT, SHAPE_CHANGED_BIT, STYLE_CHANGED_BIT } from './constants.js';\nimport { TRANSFORMABLE_PROPS } from '../core/Transformable.js';\nexport var DEFAULT_PATH_STYLE = defaults({\n    fill: '#000',\n    stroke: null,\n    strokePercent: 1,\n    fillOpacity: 1,\n    strokeOpacity: 1,\n    lineDashOffset: 0,\n    lineWidth: 1,\n    lineCap: 'butt',\n    miterLimit: 10,\n    strokeNoScale: false,\n    strokeFirst: false\n}, DEFAULT_COMMON_STYLE);\nexport var DEFAULT_PATH_ANIMATION_PROPS = {\n    style: defaults({\n        fill: true,\n        stroke: true,\n        strokePercent: true,\n        fillOpacity: true,\n        strokeOpacity: true,\n        lineDashOffset: true,\n        lineWidth: true,\n        miterLimit: true\n    }, DEFAULT_COMMON_ANIMATION_PROPS.style)\n};\nvar pathCopyParams = TRANSFORMABLE_PROPS.concat(['invisible',\n    'culling', 'z', 'z2', 'zlevel', 'parent'\n]);\nvar Path = (function (_super) {\n    __extends(Path, _super);\n    function Path(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Path.prototype.update = function () {\n        var _this = this;\n        _super.prototype.update.call(this);\n        var style = this.style;\n        if (style.decal) {\n            var decalEl = this._decalEl = this._decalEl || new Path();\n            if (decalEl.buildPath === Path.prototype.buildPath) {\n                decalEl.buildPath = function (ctx) {\n                    _this.buildPath(ctx, _this.shape);\n                };\n            }\n            decalEl.silent = true;\n            var decalElStyle = decalEl.style;\n            for (var key in style) {\n                if (decalElStyle[key] !== style[key]) {\n                    decalElStyle[key] = style[key];\n                }\n            }\n            decalElStyle.fill = style.fill ? style.decal : null;\n            decalElStyle.decal = null;\n            decalElStyle.shadowColor = null;\n            style.strokeFirst && (decalElStyle.stroke = null);\n            for (var i = 0; i < pathCopyParams.length; ++i) {\n                decalEl[pathCopyParams[i]] = this[pathCopyParams[i]];\n            }\n            decalEl.__dirty |= REDRAW_BIT;\n        }\n        else if (this._decalEl) {\n            this._decalEl = null;\n        }\n    };\n    Path.prototype.getDecalElement = function () {\n        return this._decalEl;\n    };\n    Path.prototype._init = function (props) {\n        var keysArr = keys(props);\n        this.shape = this.getDefaultShape();\n        var defaultStyle = this.getDefaultStyle();\n        if (defaultStyle) {\n            this.useStyle(defaultStyle);\n        }\n        for (var i = 0; i < keysArr.length; i++) {\n            var key = keysArr[i];\n            var value = props[key];\n            if (key === 'style') {\n                if (!this.style) {\n                    this.useStyle(value);\n                }\n                else {\n                    extend(this.style, value);\n                }\n            }\n            else if (key === 'shape') {\n                extend(this.shape, value);\n            }\n            else {\n                _super.prototype.attrKV.call(this, key, value);\n            }\n        }\n        if (!this.style) {\n            this.useStyle({});\n        }\n    };\n    Path.prototype.getDefaultStyle = function () {\n        return null;\n    };\n    Path.prototype.getDefaultShape = function () {\n        return {};\n    };\n    Path.prototype.canBeInsideText = function () {\n        return this.hasFill();\n    };\n    Path.prototype.getInsideTextFill = function () {\n        var pathFill = this.style.fill;\n        if (pathFill !== 'none') {\n            if (isString(pathFill)) {\n                var fillLum = lum(pathFill, 0);\n                if (fillLum > 0.5) {\n                    return DARK_LABEL_COLOR;\n                }\n                else if (fillLum > 0.2) {\n                    return LIGHTER_LABEL_COLOR;\n                }\n                return LIGHT_LABEL_COLOR;\n            }\n            else if (pathFill) {\n                return LIGHT_LABEL_COLOR;\n            }\n        }\n        return DARK_LABEL_COLOR;\n    };\n    Path.prototype.getInsideTextStroke = function (textFill) {\n        var pathFill = this.style.fill;\n        if (isString(pathFill)) {\n            var zr = this.__zr;\n            var isDarkMode = !!(zr && zr.isDarkMode());\n            var isDarkLabel = lum(textFill, 0) < DARK_MODE_THRESHOLD;\n            if (isDarkMode === isDarkLabel) {\n                return pathFill;\n            }\n        }\n    };\n    Path.prototype.buildPath = function (ctx, shapeCfg, inBatch) { };\n    Path.prototype.pathUpdated = function () {\n        this.__dirty &= ~SHAPE_CHANGED_BIT;\n    };\n    Path.prototype.getUpdatedPathProxy = function (inBatch) {\n        !this.path && this.createPathProxy();\n        this.path.beginPath();\n        this.buildPath(this.path, this.shape, inBatch);\n        return this.path;\n    };\n    Path.prototype.createPathProxy = function () {\n        this.path = new PathProxy(false);\n    };\n    Path.prototype.hasStroke = function () {\n        var style = this.style;\n        var stroke = style.stroke;\n        return !(stroke == null || stroke === 'none' || !(style.lineWidth > 0));\n    };\n    Path.prototype.hasFill = function () {\n        var style = this.style;\n        var fill = style.fill;\n        return fill != null && fill !== 'none';\n    };\n    Path.prototype.getBoundingRect = function () {\n        var rect = this._rect;\n        var style = this.style;\n        var needsUpdateRect = !rect;\n        if (needsUpdateRect) {\n            var firstInvoke = false;\n            if (!this.path) {\n                firstInvoke = true;\n                this.createPathProxy();\n            }\n            var path = this.path;\n            if (firstInvoke || (this.__dirty & SHAPE_CHANGED_BIT)) {\n                path.beginPath();\n                this.buildPath(path, this.shape, false);\n                this.pathUpdated();\n            }\n            rect = path.getBoundingRect();\n        }\n        this._rect = rect;\n        if (this.hasStroke() && this.path && this.path.len() > 0) {\n            var rectStroke = this._rectStroke || (this._rectStroke = rect.clone());\n            if (this.__dirty || needsUpdateRect) {\n                rectStroke.copy(rect);\n                var lineScale = style.strokeNoScale ? this.getLineScale() : 1;\n                var w = style.lineWidth;\n                if (!this.hasFill()) {\n                    var strokeContainThreshold = this.strokeContainThreshold;\n                    w = Math.max(w, strokeContainThreshold == null ? 4 : strokeContainThreshold);\n                }\n                if (lineScale > 1e-10) {\n                    rectStroke.width += w / lineScale;\n                    rectStroke.height += w / lineScale;\n                    rectStroke.x -= w / lineScale / 2;\n                    rectStroke.y -= w / lineScale / 2;\n                }\n            }\n            return rectStroke;\n        }\n        return rect;\n    };\n    Path.prototype.contain = function (x, y) {\n        var localPos = this.transformCoordToLocal(x, y);\n        var rect = this.getBoundingRect();\n        var style = this.style;\n        x = localPos[0];\n        y = localPos[1];\n        if (rect.contain(x, y)) {\n            var pathProxy = this.path;\n            if (this.hasStroke()) {\n                var lineWidth = style.lineWidth;\n                var lineScale = style.strokeNoScale ? this.getLineScale() : 1;\n                if (lineScale > 1e-10) {\n                    if (!this.hasFill()) {\n                        lineWidth = Math.max(lineWidth, this.strokeContainThreshold);\n                    }\n                    if (pathContain.containStroke(pathProxy, lineWidth / lineScale, x, y)) {\n                        return true;\n                    }\n                }\n            }\n            if (this.hasFill()) {\n                return pathContain.contain(pathProxy, x, y);\n            }\n        }\n        return false;\n    };\n    Path.prototype.dirtyShape = function () {\n        this.__dirty |= SHAPE_CHANGED_BIT;\n        if (this._rect) {\n            this._rect = null;\n        }\n        if (this._decalEl) {\n            this._decalEl.dirtyShape();\n        }\n        this.markRedraw();\n    };\n    Path.prototype.dirty = function () {\n        this.dirtyStyle();\n        this.dirtyShape();\n    };\n    Path.prototype.animateShape = function (loop) {\n        return this.animate('shape', loop);\n    };\n    Path.prototype.updateDuringAnimation = function (targetKey) {\n        if (targetKey === 'style') {\n            this.dirtyStyle();\n        }\n        else if (targetKey === 'shape') {\n            this.dirtyShape();\n        }\n        else {\n            this.markRedraw();\n        }\n    };\n    Path.prototype.attrKV = function (key, value) {\n        if (key === 'shape') {\n            this.setShape(value);\n        }\n        else {\n            _super.prototype.attrKV.call(this, key, value);\n        }\n    };\n    Path.prototype.setShape = function (keyOrObj, value) {\n        var shape = this.shape;\n        if (!shape) {\n            shape = this.shape = {};\n        }\n        if (typeof keyOrObj === 'string') {\n            shape[keyOrObj] = value;\n        }\n        else {\n            extend(shape, keyOrObj);\n        }\n        this.dirtyShape();\n        return this;\n    };\n    Path.prototype.shapeChanged = function () {\n        return !!(this.__dirty & SHAPE_CHANGED_BIT);\n    };\n    Path.prototype.createStyle = function (obj) {\n        return createObject(DEFAULT_PATH_STYLE, obj);\n    };\n    Path.prototype._innerSaveToNormal = function (toState) {\n        _super.prototype._innerSaveToNormal.call(this, toState);\n        var normalState = this._normalState;\n        if (toState.shape && !normalState.shape) {\n            normalState.shape = extend({}, this.shape);\n        }\n    };\n    Path.prototype._applyStateObj = function (stateName, state, normalState, keepCurrentStates, transition, animationCfg) {\n        _super.prototype._applyStateObj.call(this, stateName, state, normalState, keepCurrentStates, transition, animationCfg);\n        var needsRestoreToNormal = !(state && keepCurrentStates);\n        var targetShape;\n        if (state && state.shape) {\n            if (transition) {\n                if (keepCurrentStates) {\n                    targetShape = state.shape;\n                }\n                else {\n                    targetShape = extend({}, normalState.shape);\n                    extend(targetShape, state.shape);\n                }\n            }\n            else {\n                targetShape = extend({}, keepCurrentStates ? this.shape : normalState.shape);\n                extend(targetShape, state.shape);\n            }\n        }\n        else if (needsRestoreToNormal) {\n            targetShape = normalState.shape;\n        }\n        if (targetShape) {\n            if (transition) {\n                this.shape = extend({}, this.shape);\n                var targetShapePrimaryProps = {};\n                var shapeKeys = keys(targetShape);\n                for (var i = 0; i < shapeKeys.length; i++) {\n                    var key = shapeKeys[i];\n                    if (typeof targetShape[key] === 'object') {\n                        this.shape[key] = targetShape[key];\n                    }\n                    else {\n                        targetShapePrimaryProps[key] = targetShape[key];\n                    }\n                }\n                this._transitionState(stateName, {\n                    shape: targetShapePrimaryProps\n                }, animationCfg);\n            }\n            else {\n                this.shape = targetShape;\n                this.dirtyShape();\n            }\n        }\n    };\n    Path.prototype._mergeStates = function (states) {\n        var mergedState = _super.prototype._mergeStates.call(this, states);\n        var mergedShape;\n        for (var i = 0; i < states.length; i++) {\n            var state = states[i];\n            if (state.shape) {\n                mergedShape = mergedShape || {};\n                this._mergeStyle(mergedShape, state.shape);\n            }\n        }\n        if (mergedShape) {\n            mergedState.shape = mergedShape;\n        }\n        return mergedState;\n    };\n    Path.prototype.getAnimationStyleProps = function () {\n        return DEFAULT_PATH_ANIMATION_PROPS;\n    };\n    Path.prototype.isZeroArea = function () {\n        return false;\n    };\n    Path.extend = function (defaultProps) {\n        var Sub = (function (_super) {\n            __extends(Sub, _super);\n            function Sub(opts) {\n                var _this = _super.call(this, opts) || this;\n                defaultProps.init && defaultProps.init.call(_this, opts);\n                return _this;\n            }\n            Sub.prototype.getDefaultStyle = function () {\n                return clone(defaultProps.style);\n            };\n            Sub.prototype.getDefaultShape = function () {\n                return clone(defaultProps.shape);\n            };\n            return Sub;\n        }(Path));\n        for (var key in defaultProps) {\n            if (typeof defaultProps[key] === 'function') {\n                Sub.prototype[key] = defaultProps[key];\n            }\n        }\n        return Sub;\n    };\n    Path.initDefaultProps = (function () {\n        var pathProto = Path.prototype;\n        pathProto.type = 'path';\n        pathProto.strokeContainThreshold = 5;\n        pathProto.segmentIgnoreThreshold = 0;\n        pathProto.subPixelOptimize = false;\n        pathProto.autoBatch = false;\n        pathProto.__dirty = REDRAW_BIT | STYLE_CHANGED_BIT | SHAPE_CHANGED_BIT;\n    })();\n    return Path;\n}(Displayable));\nexport default Path;\n","import * as imageHelper from '../helper/image.js';\nimport { extend, retrieve2, retrieve3, reduce } from '../../core/util.js';\nimport { getLineHeight, getWidth, parsePercent } from '../../contain/text.js';\nvar STYLE_REG = /\\{([a-zA-Z0-9_]+)\\|([^}]*)\\}/g;\nexport function truncateText(text, containerWidth, font, ellipsis, options) {\n    if (!containerWidth) {\n        return '';\n    }\n    var textLines = (text + '').split('\\n');\n    options = prepareTruncateOptions(containerWidth, font, ellipsis, options);\n    for (var i = 0, len = textLines.length; i < len; i++) {\n        textLines[i] = truncateSingleLine(textLines[i], options);\n    }\n    return textLines.join('\\n');\n}\nfunction prepareTruncateOptions(containerWidth, font, ellipsis, options) {\n    options = options || {};\n    var preparedOpts = extend({}, options);\n    preparedOpts.font = font;\n    ellipsis = retrieve2(ellipsis, '...');\n    preparedOpts.maxIterations = retrieve2(options.maxIterations, 2);\n    var minChar = preparedOpts.minChar = retrieve2(options.minChar, 0);\n    preparedOpts.cnCharWidth = getWidth('国', font);\n    var ascCharWidth = preparedOpts.ascCharWidth = getWidth('a', font);\n    preparedOpts.placeholder = retrieve2(options.placeholder, '');\n    var contentWidth = containerWidth = Math.max(0, containerWidth - 1);\n    for (var i = 0; i < minChar && contentWidth >= ascCharWidth; i++) {\n        contentWidth -= ascCharWidth;\n    }\n    var ellipsisWidth = getWidth(ellipsis, font);\n    if (ellipsisWidth > contentWidth) {\n        ellipsis = '';\n        ellipsisWidth = 0;\n    }\n    contentWidth = containerWidth - ellipsisWidth;\n    preparedOpts.ellipsis = ellipsis;\n    preparedOpts.ellipsisWidth = ellipsisWidth;\n    preparedOpts.contentWidth = contentWidth;\n    preparedOpts.containerWidth = containerWidth;\n    return preparedOpts;\n}\nfunction truncateSingleLine(textLine, options) {\n    var containerWidth = options.containerWidth;\n    var font = options.font;\n    var contentWidth = options.contentWidth;\n    if (!containerWidth) {\n        return '';\n    }\n    var lineWidth = getWidth(textLine, font);\n    if (lineWidth <= containerWidth) {\n        return textLine;\n    }\n    for (var j = 0;; j++) {\n        if (lineWidth <= contentWidth || j >= options.maxIterations) {\n            textLine += options.ellipsis;\n            break;\n        }\n        var subLength = j === 0\n            ? estimateLength(textLine, contentWidth, options.ascCharWidth, options.cnCharWidth)\n            : lineWidth > 0\n                ? Math.floor(textLine.length * contentWidth / lineWidth)\n                : 0;\n        textLine = textLine.substr(0, subLength);\n        lineWidth = getWidth(textLine, font);\n    }\n    if (textLine === '') {\n        textLine = options.placeholder;\n    }\n    return textLine;\n}\nfunction estimateLength(text, contentWidth, ascCharWidth, cnCharWidth) {\n    var width = 0;\n    var i = 0;\n    for (var len = text.length; i < len && width < contentWidth; i++) {\n        var charCode = text.charCodeAt(i);\n        width += (0 <= charCode && charCode <= 127) ? ascCharWidth : cnCharWidth;\n    }\n    return i;\n}\nexport function parsePlainText(text, style) {\n    text != null && (text += '');\n    var overflow = style.overflow;\n    var padding = style.padding;\n    var font = style.font;\n    var truncate = overflow === 'truncate';\n    var calculatedLineHeight = getLineHeight(font);\n    var lineHeight = retrieve2(style.lineHeight, calculatedLineHeight);\n    var bgColorDrawn = !!(style.backgroundColor);\n    var truncateLineOverflow = style.lineOverflow === 'truncate';\n    var width = style.width;\n    var lines;\n    if (width != null && (overflow === 'break' || overflow === 'breakAll')) {\n        lines = text ? wrapText(text, style.font, width, overflow === 'breakAll', 0).lines : [];\n    }\n    else {\n        lines = text ? text.split('\\n') : [];\n    }\n    var contentHeight = lines.length * lineHeight;\n    var height = retrieve2(style.height, contentHeight);\n    if (contentHeight > height && truncateLineOverflow) {\n        var lineCount = Math.floor(height / lineHeight);\n        lines = lines.slice(0, lineCount);\n    }\n    if (text && truncate && width != null) {\n        var options = prepareTruncateOptions(width, font, style.ellipsis, {\n            minChar: style.truncateMinChar,\n            placeholder: style.placeholder\n        });\n        for (var i = 0; i < lines.length; i++) {\n            lines[i] = truncateSingleLine(lines[i], options);\n        }\n    }\n    var outerHeight = height;\n    var contentWidth = 0;\n    for (var i = 0; i < lines.length; i++) {\n        contentWidth = Math.max(getWidth(lines[i], font), contentWidth);\n    }\n    if (width == null) {\n        width = contentWidth;\n    }\n    var outerWidth = contentWidth;\n    if (padding) {\n        outerHeight += padding[0] + padding[2];\n        outerWidth += padding[1] + padding[3];\n        width += padding[1] + padding[3];\n    }\n    if (bgColorDrawn) {\n        outerWidth = width;\n    }\n    return {\n        lines: lines,\n        height: height,\n        outerWidth: outerWidth,\n        outerHeight: outerHeight,\n        lineHeight: lineHeight,\n        calculatedLineHeight: calculatedLineHeight,\n        contentWidth: contentWidth,\n        contentHeight: contentHeight,\n        width: width\n    };\n}\nvar RichTextToken = (function () {\n    function RichTextToken() {\n    }\n    return RichTextToken;\n}());\nvar RichTextLine = (function () {\n    function RichTextLine(tokens) {\n        this.tokens = [];\n        if (tokens) {\n            this.tokens = tokens;\n        }\n    }\n    return RichTextLine;\n}());\nvar RichTextContentBlock = (function () {\n    function RichTextContentBlock() {\n        this.width = 0;\n        this.height = 0;\n        this.contentWidth = 0;\n        this.contentHeight = 0;\n        this.outerWidth = 0;\n        this.outerHeight = 0;\n        this.lines = [];\n    }\n    return RichTextContentBlock;\n}());\nexport { RichTextContentBlock };\nexport function parseRichText(text, style) {\n    var contentBlock = new RichTextContentBlock();\n    text != null && (text += '');\n    if (!text) {\n        return contentBlock;\n    }\n    var topWidth = style.width;\n    var topHeight = style.height;\n    var overflow = style.overflow;\n    var wrapInfo = (overflow === 'break' || overflow === 'breakAll') && topWidth != null\n        ? { width: topWidth, accumWidth: 0, breakAll: overflow === 'breakAll' }\n        : null;\n    var lastIndex = STYLE_REG.lastIndex = 0;\n    var result;\n    while ((result = STYLE_REG.exec(text)) != null) {\n        var matchedIndex = result.index;\n        if (matchedIndex > lastIndex) {\n            pushTokens(contentBlock, text.substring(lastIndex, matchedIndex), style, wrapInfo);\n        }\n        pushTokens(contentBlock, result[2], style, wrapInfo, result[1]);\n        lastIndex = STYLE_REG.lastIndex;\n    }\n    if (lastIndex < text.length) {\n        pushTokens(contentBlock, text.substring(lastIndex, text.length), style, wrapInfo);\n    }\n    var pendingList = [];\n    var calculatedHeight = 0;\n    var calculatedWidth = 0;\n    var stlPadding = style.padding;\n    var truncate = overflow === 'truncate';\n    var truncateLine = style.lineOverflow === 'truncate';\n    function finishLine(line, lineWidth, lineHeight) {\n        line.width = lineWidth;\n        line.lineHeight = lineHeight;\n        calculatedHeight += lineHeight;\n        calculatedWidth = Math.max(calculatedWidth, lineWidth);\n    }\n    outer: for (var i = 0; i < contentBlock.lines.length; i++) {\n        var line = contentBlock.lines[i];\n        var lineHeight = 0;\n        var lineWidth = 0;\n        for (var j = 0; j < line.tokens.length; j++) {\n            var token = line.tokens[j];\n            var tokenStyle = token.styleName && style.rich[token.styleName] || {};\n            var textPadding = token.textPadding = tokenStyle.padding;\n            var paddingH = textPadding ? textPadding[1] + textPadding[3] : 0;\n            var font = token.font = tokenStyle.font || style.font;\n            token.contentHeight = getLineHeight(font);\n            var tokenHeight = retrieve2(tokenStyle.height, token.contentHeight);\n            token.innerHeight = tokenHeight;\n            textPadding && (tokenHeight += textPadding[0] + textPadding[2]);\n            token.height = tokenHeight;\n            token.lineHeight = retrieve3(tokenStyle.lineHeight, style.lineHeight, tokenHeight);\n            token.align = tokenStyle && tokenStyle.align || style.align;\n            token.verticalAlign = tokenStyle && tokenStyle.verticalAlign || 'middle';\n            if (truncateLine && topHeight != null && calculatedHeight + token.lineHeight > topHeight) {\n                if (j > 0) {\n                    line.tokens = line.tokens.slice(0, j);\n                    finishLine(line, lineWidth, lineHeight);\n                    contentBlock.lines = contentBlock.lines.slice(0, i + 1);\n                }\n                else {\n                    contentBlock.lines = contentBlock.lines.slice(0, i);\n                }\n                break outer;\n            }\n            var styleTokenWidth = tokenStyle.width;\n            var tokenWidthNotSpecified = styleTokenWidth == null || styleTokenWidth === 'auto';\n            if (typeof styleTokenWidth === 'string' && styleTokenWidth.charAt(styleTokenWidth.length - 1) === '%') {\n                token.percentWidth = styleTokenWidth;\n                pendingList.push(token);\n                token.contentWidth = getWidth(token.text, font);\n            }\n            else {\n                if (tokenWidthNotSpecified) {\n                    var textBackgroundColor = tokenStyle.backgroundColor;\n                    var bgImg = textBackgroundColor && textBackgroundColor.image;\n                    if (bgImg) {\n                        bgImg = imageHelper.findExistImage(bgImg);\n                        if (imageHelper.isImageReady(bgImg)) {\n                            token.width = Math.max(token.width, bgImg.width * tokenHeight / bgImg.height);\n                        }\n                    }\n                }\n                var remainTruncWidth = truncate && topWidth != null\n                    ? topWidth - lineWidth : null;\n                if (remainTruncWidth != null && remainTruncWidth < token.width) {\n                    if (!tokenWidthNotSpecified || remainTruncWidth < paddingH) {\n                        token.text = '';\n                        token.width = token.contentWidth = 0;\n                    }\n                    else {\n                        token.text = truncateText(token.text, remainTruncWidth - paddingH, font, style.ellipsis, { minChar: style.truncateMinChar });\n                        token.width = token.contentWidth = getWidth(token.text, font);\n                    }\n                }\n                else {\n                    token.contentWidth = getWidth(token.text, font);\n                }\n            }\n            token.width += paddingH;\n            lineWidth += token.width;\n            tokenStyle && (lineHeight = Math.max(lineHeight, token.lineHeight));\n        }\n        finishLine(line, lineWidth, lineHeight);\n    }\n    contentBlock.outerWidth = contentBlock.width = retrieve2(topWidth, calculatedWidth);\n    contentBlock.outerHeight = contentBlock.height = retrieve2(topHeight, calculatedHeight);\n    contentBlock.contentHeight = calculatedHeight;\n    contentBlock.contentWidth = calculatedWidth;\n    if (stlPadding) {\n        contentBlock.outerWidth += stlPadding[1] + stlPadding[3];\n        contentBlock.outerHeight += stlPadding[0] + stlPadding[2];\n    }\n    for (var i = 0; i < pendingList.length; i++) {\n        var token = pendingList[i];\n        var percentWidth = token.percentWidth;\n        token.width = parseInt(percentWidth, 10) / 100 * contentBlock.width;\n    }\n    return contentBlock;\n}\nfunction pushTokens(block, str, style, wrapInfo, styleName) {\n    var isEmptyStr = str === '';\n    var tokenStyle = styleName && style.rich[styleName] || {};\n    var lines = block.lines;\n    var font = tokenStyle.font || style.font;\n    var newLine = false;\n    var strLines;\n    var linesWidths;\n    if (wrapInfo) {\n        var tokenPadding = tokenStyle.padding;\n        var tokenPaddingH = tokenPadding ? tokenPadding[1] + tokenPadding[3] : 0;\n        if (tokenStyle.width != null && tokenStyle.width !== 'auto') {\n            var outerWidth_1 = parsePercent(tokenStyle.width, wrapInfo.width) + tokenPaddingH;\n            if (lines.length > 0) {\n                if (outerWidth_1 + wrapInfo.accumWidth > wrapInfo.width) {\n                    strLines = str.split('\\n');\n                    newLine = true;\n                }\n            }\n            wrapInfo.accumWidth = outerWidth_1;\n        }\n        else {\n            var res = wrapText(str, font, wrapInfo.width, wrapInfo.breakAll, wrapInfo.accumWidth);\n            wrapInfo.accumWidth = res.accumWidth + tokenPaddingH;\n            linesWidths = res.linesWidths;\n            strLines = res.lines;\n        }\n    }\n    else {\n        strLines = str.split('\\n');\n    }\n    for (var i = 0; i < strLines.length; i++) {\n        var text = strLines[i];\n        var token = new RichTextToken();\n        token.styleName = styleName;\n        token.text = text;\n        token.isLineHolder = !text && !isEmptyStr;\n        if (typeof tokenStyle.width === 'number') {\n            token.width = tokenStyle.width;\n        }\n        else {\n            token.width = linesWidths\n                ? linesWidths[i]\n                : getWidth(text, font);\n        }\n        if (!i && !newLine) {\n            var tokens = (lines[lines.length - 1] || (lines[0] = new RichTextLine())).tokens;\n            var tokensLen = tokens.length;\n            (tokensLen === 1 && tokens[0].isLineHolder)\n                ? (tokens[0] = token)\n                : ((text || !tokensLen || isEmptyStr) && tokens.push(token));\n        }\n        else {\n            lines.push(new RichTextLine([token]));\n        }\n    }\n}\nfunction isLatin(ch) {\n    var code = ch.charCodeAt(0);\n    return code >= 0x21 && code <= 0x17F;\n}\nvar breakCharMap = reduce(',&?/;] '.split(''), function (obj, ch) {\n    obj[ch] = true;\n    return obj;\n}, {});\nfunction isWordBreakChar(ch) {\n    if (isLatin(ch)) {\n        if (breakCharMap[ch]) {\n            return true;\n        }\n        return false;\n    }\n    return true;\n}\nfunction wrapText(text, font, lineWidth, isBreakAll, lastAccumWidth) {\n    var lines = [];\n    var linesWidths = [];\n    var line = '';\n    var currentWord = '';\n    var currentWordWidth = 0;\n    var accumWidth = 0;\n    for (var i = 0; i < text.length; i++) {\n        var ch = text.charAt(i);\n        if (ch === '\\n') {\n            if (currentWord) {\n                line += currentWord;\n                accumWidth += currentWordWidth;\n            }\n            lines.push(line);\n            linesWidths.push(accumWidth);\n            line = '';\n            currentWord = '';\n            currentWordWidth = 0;\n            accumWidth = 0;\n            continue;\n        }\n        var chWidth = getWidth(ch, font);\n        var inWord = isBreakAll ? false : !isWordBreakChar(ch);\n        if (!lines.length\n            ? lastAccumWidth + accumWidth + chWidth > lineWidth\n            : accumWidth + chWidth > lineWidth) {\n            if (!accumWidth) {\n                if (inWord) {\n                    lines.push(currentWord);\n                    linesWidths.push(currentWordWidth);\n                    currentWord = ch;\n                    currentWordWidth = chWidth;\n                }\n                else {\n                    lines.push(ch);\n                    linesWidths.push(chWidth);\n                }\n            }\n            else if (line || currentWord) {\n                if (inWord) {\n                    if (!line) {\n                        line = currentWord;\n                        currentWord = '';\n                        currentWordWidth = 0;\n                        accumWidth = currentWordWidth;\n                    }\n                    lines.push(line);\n                    linesWidths.push(accumWidth - currentWordWidth);\n                    currentWord += ch;\n                    currentWordWidth += chWidth;\n                    line = '';\n                    accumWidth = currentWordWidth;\n                }\n                else {\n                    if (currentWord) {\n                        line += currentWord;\n                        currentWord = '';\n                        currentWordWidth = 0;\n                    }\n                    lines.push(line);\n                    linesWidths.push(accumWidth);\n                    line = ch;\n                    accumWidth = chWidth;\n                }\n            }\n            continue;\n        }\n        accumWidth += chWidth;\n        if (inWord) {\n            currentWord += ch;\n            currentWordWidth += chWidth;\n        }\n        else {\n            if (currentWord) {\n                line += currentWord;\n                currentWord = '';\n                currentWordWidth = 0;\n            }\n            line += ch;\n        }\n    }\n    if (!lines.length && !line) {\n        line = text;\n        currentWord = '';\n        currentWordWidth = 0;\n    }\n    if (currentWord) {\n        line += currentWord;\n    }\n    if (line) {\n        lines.push(line);\n        linesWidths.push(accumWidth);\n    }\n    if (lines.length === 1) {\n        accumWidth += lastAccumWidth;\n    }\n    return {\n        accumWidth: accumWidth,\n        lines: lines,\n        linesWidths: linesWidths\n    };\n}\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nimport * as polyHelper from '../helper/poly.js';\nvar PolylineShape = (function () {\n    function PolylineShape() {\n        this.points = null;\n        this.percent = 1;\n        this.smooth = 0;\n        this.smoothConstraint = null;\n    }\n    return PolylineShape;\n}());\nexport { PolylineShape };\nvar Polyline = (function (_super) {\n    __extends(Polyline, _super);\n    function Polyline(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Polyline.prototype.getDefaultStyle = function () {\n        return {\n            stroke: '#000',\n            fill: null\n        };\n    };\n    Polyline.prototype.getDefaultShape = function () {\n        return new PolylineShape();\n    };\n    Polyline.prototype.buildPath = function (ctx, shape) {\n        polyHelper.buildPath(ctx, shape, false);\n    };\n    return Polyline;\n}(Path));\nPolyline.prototype.type = 'polyline';\nexport default Polyline;\n","import { __extends } from \"tslib\";\nimport Path from './Path.js';\nvar CompoundPath = (function (_super) {\n    __extends(CompoundPath, _super);\n    function CompoundPath() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'compound';\n        return _this;\n    }\n    CompoundPath.prototype._updatePathDirty = function () {\n        var paths = this.shape.paths;\n        var dirtyPath = this.shapeChanged();\n        for (var i = 0; i < paths.length; i++) {\n            dirtyPath = dirtyPath || paths[i].shapeChanged();\n        }\n        if (dirtyPath) {\n            this.dirtyShape();\n        }\n    };\n    CompoundPath.prototype.beforeBrush = function () {\n        this._updatePathDirty();\n        var paths = this.shape.paths || [];\n        var scale = this.getGlobalScale();\n        for (var i = 0; i < paths.length; i++) {\n            if (!paths[i].path) {\n                paths[i].createPathProxy();\n            }\n            paths[i].path.setScale(scale[0], scale[1], paths[i].segmentIgnoreThreshold);\n        }\n    };\n    CompoundPath.prototype.buildPath = function (ctx, shape) {\n        var paths = shape.paths || [];\n        for (var i = 0; i < paths.length; i++) {\n            paths[i].buildPath(ctx, paths[i].shape, true);\n        }\n    };\n    CompoundPath.prototype.afterBrush = function () {\n        var paths = this.shape.paths || [];\n        for (var i = 0; i < paths.length; i++) {\n            paths[i].pathUpdated();\n        }\n    };\n    CompoundPath.prototype.getBoundingRect = function () {\n        this._updatePathDirty.call(this);\n        return Path.prototype.getBoundingRect.call(this);\n    };\n    return CompoundPath;\n}(Path));\nexport default CompoundPath;\n","var Entry = (function () {\n    function Entry(val) {\n        this.value = val;\n    }\n    return Entry;\n}());\nexport { Entry };\nvar LinkedList = (function () {\n    function LinkedList() {\n        this._len = 0;\n    }\n    LinkedList.prototype.insert = function (val) {\n        var entry = new Entry(val);\n        this.insertEntry(entry);\n        return entry;\n    };\n    LinkedList.prototype.insertEntry = function (entry) {\n        if (!this.head) {\n            this.head = this.tail = entry;\n        }\n        else {\n            this.tail.next = entry;\n            entry.prev = this.tail;\n            entry.next = null;\n            this.tail = entry;\n        }\n        this._len++;\n    };\n    LinkedList.prototype.remove = function (entry) {\n        var prev = entry.prev;\n        var next = entry.next;\n        if (prev) {\n            prev.next = next;\n        }\n        else {\n            this.head = next;\n        }\n        if (next) {\n            next.prev = prev;\n        }\n        else {\n            this.tail = prev;\n        }\n        entry.next = entry.prev = null;\n        this._len--;\n    };\n    LinkedList.prototype.len = function () {\n        return this._len;\n    };\n    LinkedList.prototype.clear = function () {\n        this.head = this.tail = null;\n        this._len = 0;\n    };\n    return LinkedList;\n}());\nexport { LinkedList };\nvar LRU = (function () {\n    function LRU(maxSize) {\n        this._list = new LinkedList();\n        this._maxSize = 10;\n        this._map = {};\n        this._maxSize = maxSize;\n    }\n    LRU.prototype.put = function (key, value) {\n        var list = this._list;\n        var map = this._map;\n        var removed = null;\n        if (map[key] == null) {\n            var len = list.len();\n            var entry = this._lastRemovedEntry;\n            if (len >= this._maxSize && len > 0) {\n                var leastUsedEntry = list.head;\n                list.remove(leastUsedEntry);\n                delete map[leastUsedEntry.key];\n                removed = leastUsedEntry.value;\n                this._lastRemovedEntry = leastUsedEntry;\n            }\n            if (entry) {\n                entry.value = value;\n            }\n            else {\n                entry = new Entry(value);\n            }\n            entry.key = key;\n            list.insertEntry(entry);\n            map[key] = entry;\n        }\n        return removed;\n    };\n    LRU.prototype.get = function (key) {\n        var entry = this._map[key];\n        var list = this._list;\n        if (entry != null) {\n            if (entry !== list.tail) {\n                list.remove(entry);\n                list.insertEntry(entry);\n            }\n            return entry.value;\n        }\n    };\n    LRU.prototype.clear = function () {\n        this._list.clear();\n        this._map = {};\n    };\n    LRU.prototype.len = function () {\n        return this._list.len();\n    };\n    return LRU;\n}());\nexport default LRU;\n","import Transformable, { TRANSFORMABLE_PROPS } from './core/Transformable.js';\nimport Animator, { cloneValue } from './animation/Animator.js';\nimport BoundingRect from './core/BoundingRect.js';\nimport Eventful from './core/Eventful.js';\nimport { calculateTextPosition, parsePercent } from './contain/text.js';\nimport { guid, isObject, keys, extend, indexOf, logError, mixin, isArrayLike, isTypedArray, isGradientObject, filter, reduce } from './core/util.js';\nimport { LIGHT_LABEL_COLOR, DARK_LABEL_COLOR } from './config.js';\nimport { parse, stringify } from './tool/color.js';\nimport { REDRAW_BIT } from './graphic/constants.js';\nexport var PRESERVED_NORMAL_STATE = '__zr_normal__';\nvar PRIMARY_STATES_KEYS = TRANSFORMABLE_PROPS.concat(['ignore']);\nvar DEFAULT_ANIMATABLE_MAP = reduce(TRANSFORMABLE_PROPS, function (obj, key) {\n    obj[key] = true;\n    return obj;\n}, { ignore: false });\nvar tmpTextPosCalcRes = {};\nvar tmpBoundingRect = new BoundingRect(0, 0, 0, 0);\nvar Element = (function () {\n    function Element(props) {\n        this.id = guid();\n        this.animators = [];\n        this.currentStates = [];\n        this.states = {};\n        this._init(props);\n    }\n    Element.prototype._init = function (props) {\n        this.attr(props);\n    };\n    Element.prototype.drift = function (dx, dy, e) {\n        switch (this.draggable) {\n            case 'horizontal':\n                dy = 0;\n                break;\n            case 'vertical':\n                dx = 0;\n                break;\n        }\n        var m = this.transform;\n        if (!m) {\n            m = this.transform = [1, 0, 0, 1, 0, 0];\n        }\n        m[4] += dx;\n        m[5] += dy;\n        this.decomposeTransform();\n        this.markRedraw();\n    };\n    Element.prototype.beforeUpdate = function () { };\n    Element.prototype.afterUpdate = function () { };\n    Element.prototype.update = function () {\n        this.updateTransform();\n        if (this.__dirty) {\n            this.updateInnerText();\n        }\n    };\n    Element.prototype.updateInnerText = function (forceUpdate) {\n        var textEl = this._textContent;\n        if (textEl && (!textEl.ignore || forceUpdate)) {\n            if (!this.textConfig) {\n                this.textConfig = {};\n            }\n            var textConfig = this.textConfig;\n            var isLocal = textConfig.local;\n            var innerTransformable = textEl.innerTransformable;\n            var textAlign = void 0;\n            var textVerticalAlign = void 0;\n            var textStyleChanged = false;\n            innerTransformable.parent = isLocal ? this : null;\n            var innerOrigin = false;\n            innerTransformable.copyTransform(textEl);\n            if (textConfig.position != null) {\n                var layoutRect = tmpBoundingRect;\n                if (textConfig.layoutRect) {\n                    layoutRect.copy(textConfig.layoutRect);\n                }\n                else {\n                    layoutRect.copy(this.getBoundingRect());\n                }\n                if (!isLocal) {\n                    layoutRect.applyTransform(this.transform);\n                }\n                if (this.calculateTextPosition) {\n                    this.calculateTextPosition(tmpTextPosCalcRes, textConfig, layoutRect);\n                }\n                else {\n                    calculateTextPosition(tmpTextPosCalcRes, textConfig, layoutRect);\n                }\n                innerTransformable.x = tmpTextPosCalcRes.x;\n                innerTransformable.y = tmpTextPosCalcRes.y;\n                textAlign = tmpTextPosCalcRes.align;\n                textVerticalAlign = tmpTextPosCalcRes.verticalAlign;\n                var textOrigin = textConfig.origin;\n                if (textOrigin && textConfig.rotation != null) {\n                    var relOriginX = void 0;\n                    var relOriginY = void 0;\n                    if (textOrigin === 'center') {\n                        relOriginX = layoutRect.width * 0.5;\n                        relOriginY = layoutRect.height * 0.5;\n                    }\n                    else {\n                        relOriginX = parsePercent(textOrigin[0], layoutRect.width);\n                        relOriginY = parsePercent(textOrigin[1], layoutRect.height);\n                    }\n                    innerOrigin = true;\n                    innerTransformable.originX = -innerTransformable.x + relOriginX + (isLocal ? 0 : layoutRect.x);\n                    innerTransformable.originY = -innerTransformable.y + relOriginY + (isLocal ? 0 : layoutRect.y);\n                }\n            }\n            if (textConfig.rotation != null) {\n                innerTransformable.rotation = textConfig.rotation;\n            }\n            var textOffset = textConfig.offset;\n            if (textOffset) {\n                innerTransformable.x += textOffset[0];\n                innerTransformable.y += textOffset[1];\n                if (!innerOrigin) {\n                    innerTransformable.originX = -textOffset[0];\n                    innerTransformable.originY = -textOffset[1];\n                }\n            }\n            var isInside = textConfig.inside == null\n                ? (typeof textConfig.position === 'string' && textConfig.position.indexOf('inside') >= 0)\n                : textConfig.inside;\n            var innerTextDefaultStyle = this._innerTextDefaultStyle || (this._innerTextDefaultStyle = {});\n            var textFill = void 0;\n            var textStroke = void 0;\n            var autoStroke = void 0;\n            if (isInside && this.canBeInsideText()) {\n                textFill = textConfig.insideFill;\n                textStroke = textConfig.insideStroke;\n                if (textFill == null || textFill === 'auto') {\n                    textFill = this.getInsideTextFill();\n                }\n                if (textStroke == null || textStroke === 'auto') {\n                    textStroke = this.getInsideTextStroke(textFill);\n                    autoStroke = true;\n                }\n            }\n            else {\n                textFill = textConfig.outsideFill;\n                textStroke = textConfig.outsideStroke;\n                if (textFill == null || textFill === 'auto') {\n                    textFill = this.getOutsideFill();\n                }\n                if (textStroke == null || textStroke === 'auto') {\n                    textStroke = this.getOutsideStroke(textFill);\n                    autoStroke = true;\n                }\n            }\n            textFill = textFill || '#000';\n            if (textFill !== innerTextDefaultStyle.fill\n                || textStroke !== innerTextDefaultStyle.stroke\n                || autoStroke !== innerTextDefaultStyle.autoStroke\n                || textAlign !== innerTextDefaultStyle.align\n                || textVerticalAlign !== innerTextDefaultStyle.verticalAlign) {\n                textStyleChanged = true;\n                innerTextDefaultStyle.fill = textFill;\n                innerTextDefaultStyle.stroke = textStroke;\n                innerTextDefaultStyle.autoStroke = autoStroke;\n                innerTextDefaultStyle.align = textAlign;\n                innerTextDefaultStyle.verticalAlign = textVerticalAlign;\n                textEl.setDefaultTextStyle(innerTextDefaultStyle);\n            }\n            textEl.__dirty |= REDRAW_BIT;\n            if (textStyleChanged) {\n                textEl.dirtyStyle(true);\n            }\n        }\n    };\n    Element.prototype.canBeInsideText = function () {\n        return true;\n    };\n    Element.prototype.getInsideTextFill = function () {\n        return '#fff';\n    };\n    Element.prototype.getInsideTextStroke = function (textFill) {\n        return '#000';\n    };\n    Element.prototype.getOutsideFill = function () {\n        return this.__zr && this.__zr.isDarkMode() ? LIGHT_LABEL_COLOR : DARK_LABEL_COLOR;\n    };\n    Element.prototype.getOutsideStroke = function (textFill) {\n        var backgroundColor = this.__zr && this.__zr.getBackgroundColor();\n        var colorArr = typeof backgroundColor === 'string' && parse(backgroundColor);\n        if (!colorArr) {\n            colorArr = [255, 255, 255, 1];\n        }\n        var alpha = colorArr[3];\n        var isDark = this.__zr.isDarkMode();\n        for (var i = 0; i < 3; i++) {\n            colorArr[i] = colorArr[i] * alpha + (isDark ? 0 : 255) * (1 - alpha);\n        }\n        colorArr[3] = 1;\n        return stringify(colorArr, 'rgba');\n    };\n    Element.prototype.traverse = function (cb, context) { };\n    Element.prototype.attrKV = function (key, value) {\n        if (key === 'textConfig') {\n            this.setTextConfig(value);\n        }\n        else if (key === 'textContent') {\n            this.setTextContent(value);\n        }\n        else if (key === 'clipPath') {\n            this.setClipPath(value);\n        }\n        else if (key === 'extra') {\n            this.extra = this.extra || {};\n            extend(this.extra, value);\n        }\n        else {\n            this[key] = value;\n        }\n    };\n    Element.prototype.hide = function () {\n        this.ignore = true;\n        this.markRedraw();\n    };\n    Element.prototype.show = function () {\n        this.ignore = false;\n        this.markRedraw();\n    };\n    Element.prototype.attr = function (keyOrObj, value) {\n        if (typeof keyOrObj === 'string') {\n            this.attrKV(keyOrObj, value);\n        }\n        else if (isObject(keyOrObj)) {\n            var obj = keyOrObj;\n            var keysArr = keys(obj);\n            for (var i = 0; i < keysArr.length; i++) {\n                var key = keysArr[i];\n                this.attrKV(key, keyOrObj[key]);\n            }\n        }\n        this.markRedraw();\n        return this;\n    };\n    Element.prototype.saveCurrentToNormalState = function (toState) {\n        this._innerSaveToNormal(toState);\n        var normalState = this._normalState;\n        for (var i = 0; i < this.animators.length; i++) {\n            var animator = this.animators[i];\n            var fromStateTransition = animator.__fromStateTransition;\n            if (animator.getLoop() || fromStateTransition && fromStateTransition !== PRESERVED_NORMAL_STATE) {\n                continue;\n            }\n            var targetName = animator.targetName;\n            var target = targetName\n                ? normalState[targetName] : normalState;\n            animator.saveTo(target);\n        }\n    };\n    Element.prototype._innerSaveToNormal = function (toState) {\n        var normalState = this._normalState;\n        if (!normalState) {\n            normalState = this._normalState = {};\n        }\n        if (toState.textConfig && !normalState.textConfig) {\n            normalState.textConfig = this.textConfig;\n        }\n        this._savePrimaryToNormal(toState, normalState, PRIMARY_STATES_KEYS);\n    };\n    Element.prototype._savePrimaryToNormal = function (toState, normalState, primaryKeys) {\n        for (var i = 0; i < primaryKeys.length; i++) {\n            var key = primaryKeys[i];\n            if (toState[key] != null && !(key in normalState)) {\n                normalState[key] = this[key];\n            }\n        }\n    };\n    Element.prototype.hasState = function () {\n        return this.currentStates.length > 0;\n    };\n    Element.prototype.getState = function (name) {\n        return this.states[name];\n    };\n    Element.prototype.ensureState = function (name) {\n        var states = this.states;\n        if (!states[name]) {\n            states[name] = {};\n        }\n        return states[name];\n    };\n    Element.prototype.clearStates = function (noAnimation) {\n        this.useState(PRESERVED_NORMAL_STATE, false, noAnimation);\n    };\n    Element.prototype.useState = function (stateName, keepCurrentStates, noAnimation, forceUseHoverLayer) {\n        var toNormalState = stateName === PRESERVED_NORMAL_STATE;\n        var hasStates = this.hasState();\n        if (!hasStates && toNormalState) {\n            return;\n        }\n        var currentStates = this.currentStates;\n        var animationCfg = this.stateTransition;\n        if (indexOf(currentStates, stateName) >= 0 && (keepCurrentStates || currentStates.length === 1)) {\n            return;\n        }\n        var state;\n        if (this.stateProxy && !toNormalState) {\n            state = this.stateProxy(stateName);\n        }\n        if (!state) {\n            state = (this.states && this.states[stateName]);\n        }\n        if (!state && !toNormalState) {\n            logError(\"State \" + stateName + \" not exists.\");\n            return;\n        }\n        if (!toNormalState) {\n            this.saveCurrentToNormalState(state);\n        }\n        var useHoverLayer = !!((state && state.hoverLayer) || forceUseHoverLayer);\n        if (useHoverLayer) {\n            this._toggleHoverLayerFlag(true);\n        }\n        this._applyStateObj(stateName, state, this._normalState, keepCurrentStates, !noAnimation && !this.__inHover && animationCfg && animationCfg.duration > 0, animationCfg);\n        var textContent = this._textContent;\n        var textGuide = this._textGuide;\n        if (textContent) {\n            textContent.useState(stateName, keepCurrentStates, noAnimation, useHoverLayer);\n        }\n        if (textGuide) {\n            textGuide.useState(stateName, keepCurrentStates, noAnimation, useHoverLayer);\n        }\n        if (toNormalState) {\n            this.currentStates = [];\n            this._normalState = {};\n        }\n        else {\n            if (!keepCurrentStates) {\n                this.currentStates = [stateName];\n            }\n            else {\n                this.currentStates.push(stateName);\n            }\n        }\n        this._updateAnimationTargets();\n        this.markRedraw();\n        if (!useHoverLayer && this.__inHover) {\n            this._toggleHoverLayerFlag(false);\n            this.__dirty &= ~REDRAW_BIT;\n        }\n        return state;\n    };\n    Element.prototype.useStates = function (states, noAnimation, forceUseHoverLayer) {\n        if (!states.length) {\n            this.clearStates();\n        }\n        else {\n            var stateObjects = [];\n            var currentStates = this.currentStates;\n            var len = states.length;\n            var notChange = len === currentStates.length;\n            if (notChange) {\n                for (var i = 0; i < len; i++) {\n                    if (states[i] !== currentStates[i]) {\n                        notChange = false;\n                        break;\n                    }\n                }\n            }\n            if (notChange) {\n                return;\n            }\n            for (var i = 0; i < len; i++) {\n                var stateName = states[i];\n                var stateObj = void 0;\n                if (this.stateProxy) {\n                    stateObj = this.stateProxy(stateName, states);\n                }\n                if (!stateObj) {\n                    stateObj = this.states[stateName];\n                }\n                if (stateObj) {\n                    stateObjects.push(stateObj);\n                }\n            }\n            var lastStateObj = stateObjects[len - 1];\n            var useHoverLayer = !!((lastStateObj && lastStateObj.hoverLayer) || forceUseHoverLayer);\n            if (useHoverLayer) {\n                this._toggleHoverLayerFlag(true);\n            }\n            var mergedState = this._mergeStates(stateObjects);\n            var animationCfg = this.stateTransition;\n            this.saveCurrentToNormalState(mergedState);\n            this._applyStateObj(states.join(','), mergedState, this._normalState, false, !noAnimation && !this.__inHover && animationCfg && animationCfg.duration > 0, animationCfg);\n            var textContent = this._textContent;\n            var textGuide = this._textGuide;\n            if (textContent) {\n                textContent.useStates(states, noAnimation, useHoverLayer);\n            }\n            if (textGuide) {\n                textGuide.useStates(states, noAnimation, useHoverLayer);\n            }\n            this._updateAnimationTargets();\n            this.currentStates = states.slice();\n            this.markRedraw();\n            if (!useHoverLayer && this.__inHover) {\n                this._toggleHoverLayerFlag(false);\n                this.__dirty &= ~REDRAW_BIT;\n            }\n        }\n    };\n    Element.prototype._updateAnimationTargets = function () {\n        for (var i = 0; i < this.animators.length; i++) {\n            var animator = this.animators[i];\n            if (animator.targetName) {\n                animator.changeTarget(this[animator.targetName]);\n            }\n        }\n    };\n    Element.prototype.removeState = function (state) {\n        var idx = indexOf(this.currentStates, state);\n        if (idx >= 0) {\n            var currentStates = this.currentStates.slice();\n            currentStates.splice(idx, 1);\n            this.useStates(currentStates);\n        }\n    };\n    Element.prototype.replaceState = function (oldState, newState, forceAdd) {\n        var currentStates = this.currentStates.slice();\n        var idx = indexOf(currentStates, oldState);\n        var newStateExists = indexOf(currentStates, newState) >= 0;\n        if (idx >= 0) {\n            if (!newStateExists) {\n                currentStates[idx] = newState;\n            }\n            else {\n                currentStates.splice(idx, 1);\n            }\n        }\n        else if (forceAdd && !newStateExists) {\n            currentStates.push(newState);\n        }\n        this.useStates(currentStates);\n    };\n    Element.prototype.toggleState = function (state, enable) {\n        if (enable) {\n            this.useState(state, true);\n        }\n        else {\n            this.removeState(state);\n        }\n    };\n    Element.prototype._mergeStates = function (states) {\n        var mergedState = {};\n        var mergedTextConfig;\n        for (var i = 0; i < states.length; i++) {\n            var state = states[i];\n            extend(mergedState, state);\n            if (state.textConfig) {\n                mergedTextConfig = mergedTextConfig || {};\n                extend(mergedTextConfig, state.textConfig);\n            }\n        }\n        if (mergedTextConfig) {\n            mergedState.textConfig = mergedTextConfig;\n        }\n        return mergedState;\n    };\n    Element.prototype._applyStateObj = function (stateName, state, normalState, keepCurrentStates, transition, animationCfg) {\n        var needsRestoreToNormal = !(state && keepCurrentStates);\n        if (state && state.textConfig) {\n            this.textConfig = extend({}, keepCurrentStates ? this.textConfig : normalState.textConfig);\n            extend(this.textConfig, state.textConfig);\n        }\n        else if (needsRestoreToNormal) {\n            if (normalState.textConfig) {\n                this.textConfig = normalState.textConfig;\n            }\n        }\n        var transitionTarget = {};\n        var hasTransition = false;\n        for (var i = 0; i < PRIMARY_STATES_KEYS.length; i++) {\n            var key = PRIMARY_STATES_KEYS[i];\n            var propNeedsTransition = transition && DEFAULT_ANIMATABLE_MAP[key];\n            if (state && state[key] != null) {\n                if (propNeedsTransition) {\n                    hasTransition = true;\n                    transitionTarget[key] = state[key];\n                }\n                else {\n                    this[key] = state[key];\n                }\n            }\n            else if (needsRestoreToNormal) {\n                if (normalState[key] != null) {\n                    if (propNeedsTransition) {\n                        hasTransition = true;\n                        transitionTarget[key] = normalState[key];\n                    }\n                    else {\n                        this[key] = normalState[key];\n                    }\n                }\n            }\n        }\n        if (!transition) {\n            for (var i = 0; i < this.animators.length; i++) {\n                var animator = this.animators[i];\n                var targetName = animator.targetName;\n                if (!animator.getLoop()) {\n                    animator.__changeFinalValue(targetName\n                        ? (state || normalState)[targetName]\n                        : (state || normalState));\n                }\n            }\n        }\n        if (hasTransition) {\n            this._transitionState(stateName, transitionTarget, animationCfg);\n        }\n    };\n    Element.prototype._attachComponent = function (componentEl) {\n        if (componentEl.__zr && !componentEl.__hostTarget) {\n            if (process.env.NODE_ENV !== 'production') {\n                throw new Error('Text element has been added to zrender.');\n            }\n            return;\n        }\n        if (componentEl === this) {\n            if (process.env.NODE_ENV !== 'production') {\n                throw new Error('Recursive component attachment.');\n            }\n            return;\n        }\n        var zr = this.__zr;\n        if (zr) {\n            componentEl.addSelfToZr(zr);\n        }\n        componentEl.__zr = zr;\n        componentEl.__hostTarget = this;\n    };\n    Element.prototype._detachComponent = function (componentEl) {\n        if (componentEl.__zr) {\n            componentEl.removeSelfFromZr(componentEl.__zr);\n        }\n        componentEl.__zr = null;\n        componentEl.__hostTarget = null;\n    };\n    Element.prototype.getClipPath = function () {\n        return this._clipPath;\n    };\n    Element.prototype.setClipPath = function (clipPath) {\n        if (this._clipPath && this._clipPath !== clipPath) {\n            this.removeClipPath();\n        }\n        this._attachComponent(clipPath);\n        this._clipPath = clipPath;\n        this.markRedraw();\n    };\n    Element.prototype.removeClipPath = function () {\n        var clipPath = this._clipPath;\n        if (clipPath) {\n            this._detachComponent(clipPath);\n            this._clipPath = null;\n            this.markRedraw();\n        }\n    };\n    Element.prototype.getTextContent = function () {\n        return this._textContent;\n    };\n    Element.prototype.setTextContent = function (textEl) {\n        var previousTextContent = this._textContent;\n        if (previousTextContent === textEl) {\n            return;\n        }\n        if (previousTextContent && previousTextContent !== textEl) {\n            this.removeTextContent();\n        }\n        if (process.env.NODE_ENV !== 'production') {\n            if (textEl.__zr && !textEl.__hostTarget) {\n                throw new Error('Text element has been added to zrender.');\n            }\n        }\n        textEl.innerTransformable = new Transformable();\n        this._attachComponent(textEl);\n        this._textContent = textEl;\n        this.markRedraw();\n    };\n    Element.prototype.setTextConfig = function (cfg) {\n        if (!this.textConfig) {\n            this.textConfig = {};\n        }\n        extend(this.textConfig, cfg);\n        this.markRedraw();\n    };\n    Element.prototype.removeTextConfig = function () {\n        this.textConfig = null;\n        this.markRedraw();\n    };\n    Element.prototype.removeTextContent = function () {\n        var textEl = this._textContent;\n        if (textEl) {\n            textEl.innerTransformable = null;\n            this._detachComponent(textEl);\n            this._textContent = null;\n            this._innerTextDefaultStyle = null;\n            this.markRedraw();\n        }\n    };\n    Element.prototype.getTextGuideLine = function () {\n        return this._textGuide;\n    };\n    Element.prototype.setTextGuideLine = function (guideLine) {\n        if (this._textGuide && this._textGuide !== guideLine) {\n            this.removeTextGuideLine();\n        }\n        this._attachComponent(guideLine);\n        this._textGuide = guideLine;\n        this.markRedraw();\n    };\n    Element.prototype.removeTextGuideLine = function () {\n        var textGuide = this._textGuide;\n        if (textGuide) {\n            this._detachComponent(textGuide);\n            this._textGuide = null;\n            this.markRedraw();\n        }\n    };\n    Element.prototype.markRedraw = function () {\n        this.__dirty |= REDRAW_BIT;\n        var zr = this.__zr;\n        if (zr) {\n            if (this.__inHover) {\n                zr.refreshHover();\n            }\n            else {\n                zr.refresh();\n            }\n        }\n        if (this.__hostTarget) {\n            this.__hostTarget.markRedraw();\n        }\n    };\n    Element.prototype.dirty = function () {\n        this.markRedraw();\n    };\n    Element.prototype._toggleHoverLayerFlag = function (inHover) {\n        this.__inHover = inHover;\n        var textContent = this._textContent;\n        var textGuide = this._textGuide;\n        if (textContent) {\n            textContent.__inHover = inHover;\n        }\n        if (textGuide) {\n            textGuide.__inHover = inHover;\n        }\n    };\n    Element.prototype.addSelfToZr = function (zr) {\n        if (this.__zr === zr) {\n            return;\n        }\n        this.__zr = zr;\n        var animators = this.animators;\n        if (animators) {\n            for (var i = 0; i < animators.length; i++) {\n                zr.animation.addAnimator(animators[i]);\n            }\n        }\n        if (this._clipPath) {\n            this._clipPath.addSelfToZr(zr);\n        }\n        if (this._textContent) {\n            this._textContent.addSelfToZr(zr);\n        }\n        if (this._textGuide) {\n            this._textGuide.addSelfToZr(zr);\n        }\n    };\n    Element.prototype.removeSelfFromZr = function (zr) {\n        if (!this.__zr) {\n            return;\n        }\n        this.__zr = null;\n        var animators = this.animators;\n        if (animators) {\n            for (var i = 0; i < animators.length; i++) {\n                zr.animation.removeAnimator(animators[i]);\n            }\n        }\n        if (this._clipPath) {\n            this._clipPath.removeSelfFromZr(zr);\n        }\n        if (this._textContent) {\n            this._textContent.removeSelfFromZr(zr);\n        }\n        if (this._textGuide) {\n            this._textGuide.removeSelfFromZr(zr);\n        }\n    };\n    Element.prototype.animate = function (key, loop, allowDiscreteAnimation) {\n        var target = key ? this[key] : this;\n        if (process.env.NODE_ENV !== 'production') {\n            if (!target) {\n                logError('Property \"'\n                    + key\n                    + '\" is not existed in element '\n                    + this.id);\n                return;\n            }\n        }\n        var animator = new Animator(target, loop, allowDiscreteAnimation);\n        key && (animator.targetName = key);\n        this.addAnimator(animator, key);\n        return animator;\n    };\n    Element.prototype.addAnimator = function (animator, key) {\n        var zr = this.__zr;\n        var el = this;\n        animator.during(function () {\n            el.updateDuringAnimation(key);\n        }).done(function () {\n            var animators = el.animators;\n            var idx = indexOf(animators, animator);\n            if (idx >= 0) {\n                animators.splice(idx, 1);\n            }\n        });\n        this.animators.push(animator);\n        if (zr) {\n            zr.animation.addAnimator(animator);\n        }\n        zr && zr.wakeUp();\n    };\n    Element.prototype.updateDuringAnimation = function (key) {\n        this.markRedraw();\n    };\n    Element.prototype.stopAnimation = function (scope, forwardToLast) {\n        var animators = this.animators;\n        var len = animators.length;\n        var leftAnimators = [];\n        for (var i = 0; i < len; i++) {\n            var animator = animators[i];\n            if (!scope || scope === animator.scope) {\n                animator.stop(forwardToLast);\n            }\n            else {\n                leftAnimators.push(animator);\n            }\n        }\n        this.animators = leftAnimators;\n        return this;\n    };\n    Element.prototype.animateTo = function (target, cfg, animationProps) {\n        animateTo(this, target, cfg, animationProps);\n    };\n    Element.prototype.animateFrom = function (target, cfg, animationProps) {\n        animateTo(this, target, cfg, animationProps, true);\n    };\n    Element.prototype._transitionState = function (stateName, target, cfg, animationProps) {\n        var animators = animateTo(this, target, cfg, animationProps);\n        for (var i = 0; i < animators.length; i++) {\n            animators[i].__fromStateTransition = stateName;\n        }\n    };\n    Element.prototype.getBoundingRect = function () {\n        return null;\n    };\n    Element.prototype.getPaintRect = function () {\n        return null;\n    };\n    Element.initDefaultProps = (function () {\n        var elProto = Element.prototype;\n        elProto.type = 'element';\n        elProto.name = '';\n        elProto.ignore =\n            elProto.silent =\n                elProto.isGroup =\n                    elProto.draggable =\n                        elProto.dragging =\n                            elProto.ignoreClip =\n                                elProto.__inHover = false;\n        elProto.__dirty = REDRAW_BIT;\n        var logs = {};\n        function logDeprecatedError(key, xKey, yKey) {\n            if (!logs[key + xKey + yKey]) {\n                console.warn(\"DEPRECATED: '\" + key + \"' has been deprecated. use '\" + xKey + \"', '\" + yKey + \"' instead\");\n                logs[key + xKey + yKey] = true;\n            }\n        }\n        function createLegacyProperty(key, privateKey, xKey, yKey) {\n            Object.defineProperty(elProto, key, {\n                get: function () {\n                    if (process.env.NODE_ENV !== 'production') {\n                        logDeprecatedError(key, xKey, yKey);\n                    }\n                    if (!this[privateKey]) {\n                        var pos = this[privateKey] = [];\n                        enhanceArray(this, pos);\n                    }\n                    return this[privateKey];\n                },\n                set: function (pos) {\n                    if (process.env.NODE_ENV !== 'production') {\n                        logDeprecatedError(key, xKey, yKey);\n                    }\n                    this[xKey] = pos[0];\n                    this[yKey] = pos[1];\n                    this[privateKey] = pos;\n                    enhanceArray(this, pos);\n                }\n            });\n            function enhanceArray(self, pos) {\n                Object.defineProperty(pos, 0, {\n                    get: function () {\n                        return self[xKey];\n                    },\n                    set: function (val) {\n                        self[xKey] = val;\n                    }\n                });\n                Object.defineProperty(pos, 1, {\n                    get: function () {\n                        return self[yKey];\n                    },\n                    set: function (val) {\n                        self[yKey] = val;\n                    }\n                });\n            }\n        }\n        if (Object.defineProperty) {\n            createLegacyProperty('position', '_legacyPos', 'x', 'y');\n            createLegacyProperty('scale', '_legacyScale', 'scaleX', 'scaleY');\n            createLegacyProperty('origin', '_legacyOrigin', 'originX', 'originY');\n        }\n    })();\n    return Element;\n}());\nmixin(Element, Eventful);\nmixin(Element, Transformable);\nfunction animateTo(animatable, target, cfg, animationProps, reverse) {\n    cfg = cfg || {};\n    var animators = [];\n    animateToShallow(animatable, '', animatable, target, cfg, animationProps, animators, reverse);\n    var finishCount = animators.length;\n    var doneHappened = false;\n    var cfgDone = cfg.done;\n    var cfgAborted = cfg.aborted;\n    var doneCb = function () {\n        doneHappened = true;\n        finishCount--;\n        if (finishCount <= 0) {\n            doneHappened\n                ? (cfgDone && cfgDone())\n                : (cfgAborted && cfgAborted());\n        }\n    };\n    var abortedCb = function () {\n        finishCount--;\n        if (finishCount <= 0) {\n            doneHappened\n                ? (cfgDone && cfgDone())\n                : (cfgAborted && cfgAborted());\n        }\n    };\n    if (!finishCount) {\n        cfgDone && cfgDone();\n    }\n    if (animators.length > 0 && cfg.during) {\n        animators[0].during(function (target, percent) {\n            cfg.during(percent);\n        });\n    }\n    for (var i = 0; i < animators.length; i++) {\n        var animator = animators[i];\n        if (doneCb) {\n            animator.done(doneCb);\n        }\n        if (abortedCb) {\n            animator.aborted(abortedCb);\n        }\n        if (cfg.force) {\n            animator.duration(cfg.duration);\n        }\n        animator.start(cfg.easing);\n    }\n    return animators;\n}\nfunction copyArrShallow(source, target, len) {\n    for (var i = 0; i < len; i++) {\n        source[i] = target[i];\n    }\n}\nfunction is2DArray(value) {\n    return isArrayLike(value[0]);\n}\nfunction copyValue(target, source, key) {\n    if (isArrayLike(source[key])) {\n        if (!isArrayLike(target[key])) {\n            target[key] = [];\n        }\n        if (isTypedArray(source[key])) {\n            var len = source[key].length;\n            if (target[key].length !== len) {\n                target[key] = new (source[key].constructor)(len);\n                copyArrShallow(target[key], source[key], len);\n            }\n        }\n        else {\n            var sourceArr = source[key];\n            var targetArr = target[key];\n            var len0 = sourceArr.length;\n            if (is2DArray(sourceArr)) {\n                var len1 = sourceArr[0].length;\n                for (var i = 0; i < len0; i++) {\n                    if (!targetArr[i]) {\n                        targetArr[i] = Array.prototype.slice.call(sourceArr[i]);\n                    }\n                    else {\n                        copyArrShallow(targetArr[i], sourceArr[i], len1);\n                    }\n                }\n            }\n            else {\n                copyArrShallow(targetArr, sourceArr, len0);\n            }\n            targetArr.length = sourceArr.length;\n        }\n    }\n    else {\n        target[key] = source[key];\n    }\n}\nfunction isValueSame(val1, val2) {\n    return val1 === val2\n        || isArrayLike(val1) && isArrayLike(val2) && is1DArraySame(val1, val2);\n}\nfunction is1DArraySame(arr0, arr1) {\n    var len = arr0.length;\n    if (len !== arr1.length) {\n        return false;\n    }\n    for (var i = 0; i < len; i++) {\n        if (arr0[i] !== arr1[i]) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction animateToShallow(animatable, topKey, animateObj, target, cfg, animationProps, animators, reverse) {\n    var targetKeys = keys(target);\n    var duration = cfg.duration;\n    var delay = cfg.delay;\n    var additive = cfg.additive;\n    var setToFinal = cfg.setToFinal;\n    var animateAll = !isObject(animationProps);\n    var existsAnimators = animatable.animators;\n    var animationKeys = [];\n    for (var k = 0; k < targetKeys.length; k++) {\n        var innerKey = targetKeys[k];\n        var targetVal = target[innerKey];\n        if (targetVal != null && animateObj[innerKey] != null\n            && (animateAll || animationProps[innerKey])) {\n            if (isObject(targetVal)\n                && !isArrayLike(targetVal)\n                && !isGradientObject(targetVal)) {\n                if (topKey) {\n                    if (!reverse) {\n                        animateObj[innerKey] = targetVal;\n                        animatable.updateDuringAnimation(topKey);\n                    }\n                    continue;\n                }\n                animateToShallow(animatable, innerKey, animateObj[innerKey], targetVal, cfg, animationProps && animationProps[innerKey], animators, reverse);\n            }\n            else {\n                animationKeys.push(innerKey);\n            }\n        }\n        else if (!reverse) {\n            animateObj[innerKey] = targetVal;\n            animatable.updateDuringAnimation(topKey);\n            animationKeys.push(innerKey);\n        }\n    }\n    var keyLen = animationKeys.length;\n    if (!additive && keyLen) {\n        for (var i = 0; i < existsAnimators.length; i++) {\n            var animator = existsAnimators[i];\n            if (animator.targetName === topKey) {\n                var allAborted = animator.stopTracks(animationKeys);\n                if (allAborted) {\n                    var idx = indexOf(existsAnimators, animator);\n                    existsAnimators.splice(idx, 1);\n                }\n            }\n        }\n    }\n    if (!cfg.force) {\n        animationKeys = filter(animationKeys, function (key) { return !isValueSame(target[key], animateObj[key]); });\n        keyLen = animationKeys.length;\n    }\n    if (keyLen > 0\n        || (cfg.force && !animators.length)) {\n        var revertedSource = void 0;\n        var reversedTarget = void 0;\n        var sourceClone = void 0;\n        if (reverse) {\n            reversedTarget = {};\n            if (setToFinal) {\n                revertedSource = {};\n            }\n            for (var i = 0; i < keyLen; i++) {\n                var innerKey = animationKeys[i];\n                reversedTarget[innerKey] = animateObj[innerKey];\n                if (setToFinal) {\n                    revertedSource[innerKey] = target[innerKey];\n                }\n                else {\n                    animateObj[innerKey] = target[innerKey];\n                }\n            }\n        }\n        else if (setToFinal) {\n            sourceClone = {};\n            for (var i = 0; i < keyLen; i++) {\n                var innerKey = animationKeys[i];\n                sourceClone[innerKey] = cloneValue(animateObj[innerKey]);\n                copyValue(animateObj, target, innerKey);\n            }\n        }\n        var animator = new Animator(animateObj, false, false, additive ? filter(existsAnimators, function (animator) { return animator.targetName === topKey; }) : null);\n        animator.targetName = topKey;\n        if (cfg.scope) {\n            animator.scope = cfg.scope;\n        }\n        if (setToFinal && revertedSource) {\n            animator.whenWithKeys(0, revertedSource, animationKeys);\n        }\n        if (sourceClone) {\n            animator.whenWithKeys(0, sourceClone, animationKeys);\n        }\n        animator.whenWithKeys(duration == null ? 500 : duration, reverse ? reversedTarget : target, animationKeys).delay(delay || 0);\n        animatable.addAnimator(animator, topKey);\n        animators.push(animator);\n    }\n}\nexport default Element;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nvar CircleShape = (function () {\n    function CircleShape() {\n        this.cx = 0;\n        this.cy = 0;\n        this.r = 0;\n    }\n    return CircleShape;\n}());\nexport { CircleShape };\nvar Circle = (function (_super) {\n    __extends(Circle, _super);\n    function Circle(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Circle.prototype.getDefaultShape = function () {\n        return new CircleShape();\n    };\n    Circle.prototype.buildPath = function (ctx, shape) {\n        ctx.moveTo(shape.cx + shape.r, shape.cy);\n        ctx.arc(shape.cx, shape.cy, shape.r, 0, Math.PI * 2);\n    };\n    return Circle;\n}(Path));\n;\nCircle.prototype.type = 'circle';\nexport default Circle;\n","import { isAroundZero } from './helper.js';\nvar mathSin = Math.sin;\nvar mathCos = Math.cos;\nvar PI = Math.PI;\nvar PI2 = Math.PI * 2;\nvar degree = 180 / PI;\nvar SVGPathRebuilder = (function () {\n    function SVGPathRebuilder() {\n    }\n    SVGPathRebuilder.prototype.reset = function (precision) {\n        this._start = true;\n        this._d = [];\n        this._str = '';\n        this._p = Math.pow(10, precision || 4);\n    };\n    SVGPathRebuilder.prototype.moveTo = function (x, y) {\n        this._add('M', x, y);\n    };\n    SVGPathRebuilder.prototype.lineTo = function (x, y) {\n        this._add('L', x, y);\n    };\n    SVGPathRebuilder.prototype.bezierCurveTo = function (x, y, x2, y2, x3, y3) {\n        this._add('C', x, y, x2, y2, x3, y3);\n    };\n    SVGPathRebuilder.prototype.quadraticCurveTo = function (x, y, x2, y2) {\n        this._add('Q', x, y, x2, y2);\n    };\n    SVGPathRebuilder.prototype.arc = function (cx, cy, r, startAngle, endAngle, anticlockwise) {\n        this.ellipse(cx, cy, r, r, 0, startAngle, endAngle, anticlockwise);\n    };\n    SVGPathRebuilder.prototype.ellipse = function (cx, cy, rx, ry, psi, startAngle, endAngle, anticlockwise) {\n        var dTheta = endAngle - startAngle;\n        var clockwise = !anticlockwise;\n        var dThetaPositive = Math.abs(dTheta);\n        var isCircle = isAroundZero(dThetaPositive - PI2)\n            || (clockwise ? dTheta >= PI2 : -dTheta >= PI2);\n        var unifiedTheta = dTheta > 0 ? dTheta % PI2 : (dTheta % PI2 + PI2);\n        var large = false;\n        if (isCircle) {\n            large = true;\n        }\n        else if (isAroundZero(dThetaPositive)) {\n            large = false;\n        }\n        else {\n            large = (unifiedTheta >= PI) === !!clockwise;\n        }\n        var x0 = cx + rx * mathCos(startAngle);\n        var y0 = cy + ry * mathSin(startAngle);\n        if (this._start) {\n            this._add('M', x0, y0);\n        }\n        var xRot = Math.round(psi * degree);\n        if (isCircle) {\n            var p = 1 / this._p;\n            var dTheta_1 = (clockwise ? 1 : -1) * (PI2 - p);\n            this._add('A', rx, ry, xRot, 1, +clockwise, cx + rx * mathCos(startAngle + dTheta_1), cy + ry * mathSin(startAngle + dTheta_1));\n            if (p > 1e-2) {\n                this._add('A', rx, ry, xRot, 0, +clockwise, x0, y0);\n            }\n        }\n        else {\n            var x = cx + rx * mathCos(endAngle);\n            var y = cy + ry * mathSin(endAngle);\n            this._add('A', rx, ry, xRot, +large, +clockwise, x, y);\n        }\n    };\n    SVGPathRebuilder.prototype.rect = function (x, y, w, h) {\n        this._add('M', x, y);\n        this._add('l', w, 0);\n        this._add('l', 0, h);\n        this._add('l', -w, 0);\n        this._add('Z');\n    };\n    SVGPathRebuilder.prototype.closePath = function () {\n        if (this._d.length > 0) {\n            this._add('Z');\n        }\n    };\n    SVGPathRebuilder.prototype._add = function (cmd, a, b, c, d, e, f, g, h) {\n        var vals = [];\n        var p = this._p;\n        for (var i = 1; i < arguments.length; i++) {\n            var val = arguments[i];\n            if (isNaN(val)) {\n                this._invalid = true;\n                return;\n            }\n            vals.push(Math.round(val * p) / p);\n        }\n        this._d.push(cmd + vals.join(' '));\n        this._start = cmd === 'Z';\n    };\n    SVGPathRebuilder.prototype.generateStr = function () {\n        this._str = this._invalid ? '' : this._d.join('');\n        this._d = [];\n    };\n    SVGPathRebuilder.prototype.getStr = function () {\n        return this._str;\n    };\n    return SVGPathRebuilder;\n}());\nexport default SVGPathRebuilder;\n","import { DEFAULT_PATH_STYLE } from '../graphic/Path.js';\nimport ZRImage from '../graphic/Image.js';\nimport { getLineDash } from '../canvas/dashStyle.js';\nimport { map } from '../core/util.js';\nimport { normalizeColor } from './helper.js';\nvar NONE = 'none';\nvar mathRound = Math.round;\nfunction pathHasFill(style) {\n    var fill = style.fill;\n    return fill != null && fill !== NONE;\n}\nfunction pathHasStroke(style) {\n    var stroke = style.stroke;\n    return stroke != null && stroke !== NONE;\n}\nvar strokeProps = ['lineCap', 'miterLimit', 'lineJoin'];\nvar svgStrokeProps = map(strokeProps, function (prop) { return \"stroke-\" + prop.toLowerCase(); });\nexport default function mapStyleToAttrs(updateAttr, style, el, forceUpdate) {\n    var opacity = style.opacity == null ? 1 : style.opacity;\n    if (el instanceof ZRImage) {\n        updateAttr('opacity', opacity);\n        return;\n    }\n    if (pathHasFill(style)) {\n        var fill = normalizeColor(style.fill);\n        updateAttr('fill', fill.color);\n        var fillOpacity = style.fillOpacity != null\n            ? style.fillOpacity * fill.opacity * opacity\n            : fill.opacity * opacity;\n        if (forceUpdate || fillOpacity < 1) {\n            updateAttr('fill-opacity', fillOpacity);\n        }\n    }\n    else {\n        updateAttr('fill', NONE);\n    }\n    if (pathHasStroke(style)) {\n        var stroke = normalizeColor(style.stroke);\n        updateAttr('stroke', stroke.color);\n        var strokeScale = style.strokeNoScale\n            ? el.getLineScale()\n            : 1;\n        var strokeWidth = (strokeScale ? (style.lineWidth || 0) / strokeScale : 0);\n        var strokeOpacity = style.strokeOpacity != null\n            ? style.strokeOpacity * stroke.opacity * opacity\n            : stroke.opacity * opacity;\n        var strokeFirst = style.strokeFirst;\n        if (forceUpdate || strokeWidth !== 1) {\n            updateAttr('stroke-width', strokeWidth);\n        }\n        if (forceUpdate || strokeFirst) {\n            updateAttr('paint-order', strokeFirst ? 'stroke' : 'fill');\n        }\n        if (forceUpdate || strokeOpacity < 1) {\n            updateAttr('stroke-opacity', strokeOpacity);\n        }\n        if (style.lineDash) {\n            var _a = getLineDash(el), lineDash = _a[0], lineDashOffset = _a[1];\n            if (lineDash) {\n                lineDashOffset = mathRound(lineDashOffset || 0);\n                updateAttr('stroke-dasharray', lineDash.join(','));\n                if (lineDashOffset || forceUpdate) {\n                    updateAttr('stroke-dashoffset', lineDashOffset);\n                }\n            }\n        }\n        else if (forceUpdate) {\n            updateAttr('stroke-dasharray', NONE);\n        }\n        for (var i = 0; i < strokeProps.length; i++) {\n            var propName = strokeProps[i];\n            if (forceUpdate || style[propName] !== DEFAULT_PATH_STYLE[propName]) {\n                var val = style[propName] || DEFAULT_PATH_STYLE[propName];\n                val && updateAttr(svgStrokeProps[i], val);\n            }\n        }\n    }\n    else if (forceUpdate) {\n        updateAttr('stroke', NONE);\n    }\n}\n","import { keys, map } from '../core/util.js';\nexport var SVGNS = 'http://www.w3.org/2000/svg';\nexport var XLINKNS = 'http://www.w3.org/1999/xlink';\nexport var XMLNS = 'http://www.w3.org/2000/xmlns/';\nexport var XML_NAMESPACE = 'http://www.w3.org/XML/1998/namespace';\nexport function createElement(name) {\n    return document.createElementNS(SVGNS, name);\n}\n;\nexport function createVNode(tag, key, attrs, children, text) {\n    return {\n        tag: tag,\n        attrs: attrs || {},\n        children: children,\n        text: text,\n        key: key\n    };\n}\nfunction createElementOpen(name, attrs) {\n    var attrsStr = [];\n    if (attrs) {\n        for (var key in attrs) {\n            var val = attrs[key];\n            var part = key;\n            if (val === false) {\n                continue;\n            }\n            else if (val !== true && val != null) {\n                part += \"=\\\"\" + val + \"\\\"\";\n            }\n            attrsStr.push(part);\n        }\n    }\n    return \"<\" + name + \" \" + attrsStr.join(' ') + \">\";\n}\nfunction createElementClose(name) {\n    return \"</\" + name + \">\";\n}\nexport function vNodeToString(el, opts) {\n    opts = opts || {};\n    var S = opts.newline ? '\\n' : '';\n    function convertElToString(el) {\n        var children = el.children, tag = el.tag, attrs = el.attrs;\n        return createElementOpen(tag, attrs)\n            + (el.text || '')\n            + (children ? \"\" + S + map(children, function (child) { return convertElToString(child); }).join(S) + S : '')\n            + createElementClose(tag);\n    }\n    return convertElToString(el);\n}\nexport function getCssString(selectorNodes, animationNodes, opts) {\n    opts = opts || {};\n    var S = opts.newline ? '\\n' : '';\n    var bracketBegin = \" {\" + S;\n    var bracketEnd = S + \"}\";\n    var selectors = map(keys(selectorNodes), function (className) {\n        return className + bracketBegin + map(keys(selectorNodes[className]), function (attrName) {\n            return attrName + \":\" + selectorNodes[className][attrName] + \";\";\n        }).join(S) + bracketEnd;\n    }).join(S);\n    var animations = map(keys(animationNodes), function (animationName) {\n        return \"@keyframes \" + animationName + bracketBegin + map(keys(animationNodes[animationName]), function (percent) {\n            return percent + bracketBegin + map(keys(animationNodes[animationName][percent]), function (attrName) {\n                var val = animationNodes[animationName][percent][attrName];\n                if (attrName === 'd') {\n                    val = \"path(\\\"\" + val + \"\\\")\";\n                }\n                return attrName + \":\" + val + \";\";\n            }).join(S) + bracketEnd;\n        }).join(S) + bracketEnd;\n    }).join(S);\n    if (!selectors && !animations) {\n        return '';\n    }\n    return ['<![CDATA[', selectors, animations, ']]>'].join(S);\n}\nexport function createBrushScope(zrId) {\n    return {\n        zrId: zrId,\n        shadowCache: {},\n        patternCache: {},\n        gradientCache: {},\n        clipPathCache: {},\n        defs: {},\n        cssNodes: {},\n        cssAnims: {},\n        cssClassIdx: 0,\n        cssAnimIdx: 0,\n        shadowIdx: 0,\n        gradientIdx: 0,\n        patternIdx: 0,\n        clipPathIdx: 0\n    };\n}\nexport function createSVGVNode(width, height, children, useViewBox) {\n    return createVNode('svg', 'root', {\n        'width': width,\n        'height': height,\n        'xmlns': SVGNS,\n        'xmlns:xlink': XLINKNS,\n        'version': '1.1',\n        'baseProfile': 'full',\n        'viewBox': useViewBox ? \"0 0 \" + width + \" \" + height : false\n    }, children);\n}\n","import { copyTransform } from '../core/Transformable.js';\nimport { createBrushScope } from './core.js';\nimport SVGPathRebuilder from './SVGPathRebuilder.js';\nimport PathProxy from '../core/PathProxy.js';\nimport { getPathPrecision, getSRTTransformString } from './helper.js';\nimport { each, extend, filter, isNumber, isString, keys } from '../core/util.js';\nimport CompoundPath from '../graphic/CompoundPath.js';\nimport { createCubicEasingFunc } from '../animation/cubicEasing.js';\nexport var EASING_MAP = {\n    cubicIn: '0.32,0,0.67,0',\n    cubicOut: '0.33,1,0.68,1',\n    cubicInOut: '0.65,0,0.35,1',\n    quadraticIn: '0.11,0,0.5,0',\n    quadraticOut: '0.5,1,0.89,1',\n    quadraticInOut: '0.45,0,0.55,1',\n    quarticIn: '0.5,0,0.75,0',\n    quarticOut: '0.25,1,0.5,1',\n    quarticInOut: '0.76,0,0.24,1',\n    quinticIn: '0.64,0,0.78,0',\n    quinticOut: '0.22,1,0.36,1',\n    quinticInOut: '0.83,0,0.17,1',\n    sinusoidalIn: '0.12,0,0.39,0',\n    sinusoidalOut: '0.61,1,0.88,1',\n    sinusoidalInOut: '0.37,0,0.63,1',\n    exponentialIn: '0.7,0,0.84,0',\n    exponentialOut: '0.16,1,0.3,1',\n    exponentialInOut: '0.87,0,0.13,1',\n    circularIn: '0.55,0,1,0.45',\n    circularOut: '0,0.55,0.45,1',\n    circularInOut: '0.85,0,0.15,1'\n};\nvar transformOriginKey = 'transform-origin';\nfunction buildPathString(el, kfShape, path) {\n    var shape = extend({}, el.shape);\n    extend(shape, kfShape);\n    el.buildPath(path, shape);\n    var svgPathBuilder = new SVGPathRebuilder();\n    svgPathBuilder.reset(getPathPrecision(el));\n    path.rebuildPath(svgPathBuilder, 1);\n    svgPathBuilder.generateStr();\n    return svgPathBuilder.getStr();\n}\nfunction setTransformOrigin(target, transform) {\n    var originX = transform.originX, originY = transform.originY;\n    if (originX || originY) {\n        target[transformOriginKey] = originX + \"px \" + originY + \"px\";\n    }\n}\nexport var ANIMATE_STYLE_MAP = {\n    fill: 'fill',\n    opacity: 'opacity',\n    lineWidth: 'stroke-width',\n    lineDashOffset: 'stroke-dashoffset'\n};\nfunction addAnimation(cssAnim, scope) {\n    var animationName = scope.zrId + '-ani-' + scope.cssAnimIdx++;\n    scope.cssAnims[animationName] = cssAnim;\n    return animationName;\n}\nfunction createCompoundPathCSSAnimation(el, attrs, scope) {\n    var paths = el.shape.paths;\n    var composedAnim = {};\n    var cssAnimationCfg;\n    var cssAnimationName;\n    each(paths, function (path) {\n        var subScope = createBrushScope(scope.zrId);\n        subScope.animation = true;\n        createCSSAnimation(path, {}, subScope, true);\n        var cssAnims = subScope.cssAnims;\n        var cssNodes = subScope.cssNodes;\n        var animNames = keys(cssAnims);\n        var len = animNames.length;\n        if (!len) {\n            return;\n        }\n        cssAnimationName = animNames[len - 1];\n        var lastAnim = cssAnims[cssAnimationName];\n        for (var percent in lastAnim) {\n            var kf = lastAnim[percent];\n            composedAnim[percent] = composedAnim[percent] || { d: '' };\n            composedAnim[percent].d += kf.d || '';\n        }\n        for (var className in cssNodes) {\n            var val = cssNodes[className].animation;\n            if (val.indexOf(cssAnimationName) >= 0) {\n                cssAnimationCfg = val;\n            }\n        }\n    });\n    if (!cssAnimationCfg) {\n        return;\n    }\n    attrs.d = false;\n    var animationName = addAnimation(composedAnim, scope);\n    return cssAnimationCfg.replace(cssAnimationName, animationName);\n}\nfunction getEasingFunc(easing) {\n    return isString(easing)\n        ? EASING_MAP[easing]\n            ? \"cubic-bezier(\" + EASING_MAP[easing] + \")\"\n            : createCubicEasingFunc(easing) ? easing : ''\n        : '';\n}\nexport function createCSSAnimation(el, attrs, scope, onlyShape) {\n    var animators = el.animators;\n    var len = animators.length;\n    var cssAnimations = [];\n    if (el instanceof CompoundPath) {\n        var animationCfg = createCompoundPathCSSAnimation(el, attrs, scope);\n        if (animationCfg) {\n            cssAnimations.push(animationCfg);\n        }\n        else if (!len) {\n            return;\n        }\n    }\n    else if (!len) {\n        return;\n    }\n    var groupAnimators = {};\n    for (var i = 0; i < len; i++) {\n        var animator = animators[i];\n        var cfgArr = [animator.getMaxTime() / 1000 + 's'];\n        var easing = getEasingFunc(animator.getClip().easing);\n        var delay = animator.getDelay();\n        if (easing) {\n            cfgArr.push(easing);\n        }\n        else {\n            cfgArr.push('linear');\n        }\n        if (delay) {\n            cfgArr.push(delay / 1000 + 's');\n        }\n        if (animator.getLoop()) {\n            cfgArr.push('infinite');\n        }\n        var cfg = cfgArr.join(' ');\n        groupAnimators[cfg] = groupAnimators[cfg] || [cfg, []];\n        groupAnimators[cfg][1].push(animator);\n    }\n    function createSingleCSSAnimation(groupAnimator) {\n        var animators = groupAnimator[1];\n        var len = animators.length;\n        var transformKfs = {};\n        var shapeKfs = {};\n        var finalKfs = {};\n        var animationTimingFunctionAttrName = 'animation-timing-function';\n        function saveAnimatorTrackToCssKfs(animator, cssKfs, toCssAttrName) {\n            var tracks = animator.getTracks();\n            var maxTime = animator.getMaxTime();\n            for (var k = 0; k < tracks.length; k++) {\n                var track = tracks[k];\n                if (track.needsAnimate()) {\n                    var kfs = track.keyframes;\n                    var attrName = track.propName;\n                    toCssAttrName && (attrName = toCssAttrName(attrName));\n                    if (attrName) {\n                        for (var i = 0; i < kfs.length; i++) {\n                            var kf = kfs[i];\n                            var percent = Math.round(kf.time / maxTime * 100) + '%';\n                            var kfEasing = getEasingFunc(kf.easing);\n                            var rawValue = kf.rawValue;\n                            if (isString(rawValue) || isNumber(rawValue)) {\n                                cssKfs[percent] = cssKfs[percent] || {};\n                                cssKfs[percent][attrName] = kf.rawValue;\n                                if (kfEasing) {\n                                    cssKfs[percent][animationTimingFunctionAttrName] = kfEasing;\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        for (var i = 0; i < len; i++) {\n            var animator = animators[i];\n            var targetProp = animator.targetName;\n            if (!targetProp) {\n                !onlyShape && saveAnimatorTrackToCssKfs(animator, transformKfs);\n            }\n            else if (targetProp === 'shape') {\n                saveAnimatorTrackToCssKfs(animator, shapeKfs);\n            }\n        }\n        for (var percent in transformKfs) {\n            var transform = {};\n            copyTransform(transform, el);\n            extend(transform, transformKfs[percent]);\n            var str = getSRTTransformString(transform);\n            var timingFunction = transformKfs[percent][animationTimingFunctionAttrName];\n            finalKfs[percent] = str ? {\n                transform: str\n            } : {};\n            setTransformOrigin(finalKfs[percent], transform);\n            if (timingFunction) {\n                finalKfs[percent][animationTimingFunctionAttrName] = timingFunction;\n            }\n        }\n        ;\n        var path;\n        var canAnimateShape = true;\n        for (var percent in shapeKfs) {\n            finalKfs[percent] = finalKfs[percent] || {};\n            var isFirst = !path;\n            var timingFunction = shapeKfs[percent][animationTimingFunctionAttrName];\n            if (isFirst) {\n                path = new PathProxy();\n            }\n            var len_1 = path.len();\n            path.reset();\n            finalKfs[percent].d = buildPathString(el, shapeKfs[percent], path);\n            var newLen = path.len();\n            if (!isFirst && len_1 !== newLen) {\n                canAnimateShape = false;\n                break;\n            }\n            if (timingFunction) {\n                finalKfs[percent][animationTimingFunctionAttrName] = timingFunction;\n            }\n        }\n        ;\n        if (!canAnimateShape) {\n            for (var percent in finalKfs) {\n                delete finalKfs[percent].d;\n            }\n        }\n        if (!onlyShape) {\n            for (var i = 0; i < len; i++) {\n                var animator = animators[i];\n                var targetProp = animator.targetName;\n                if (targetProp === 'style') {\n                    saveAnimatorTrackToCssKfs(animator, finalKfs, function (propName) { return ANIMATE_STYLE_MAP[propName]; });\n                }\n            }\n        }\n        var percents = keys(finalKfs);\n        var allTransformOriginSame = true;\n        var transformOrigin;\n        for (var i = 1; i < percents.length; i++) {\n            var p0 = percents[i - 1];\n            var p1 = percents[i];\n            if (finalKfs[p0][transformOriginKey] !== finalKfs[p1][transformOriginKey]) {\n                allTransformOriginSame = false;\n                break;\n            }\n            transformOrigin = finalKfs[p0][transformOriginKey];\n        }\n        if (allTransformOriginSame && transformOrigin) {\n            for (var percent in finalKfs) {\n                if (finalKfs[percent][transformOriginKey]) {\n                    delete finalKfs[percent][transformOriginKey];\n                }\n            }\n            attrs[transformOriginKey] = transformOrigin;\n        }\n        if (filter(percents, function (percent) { return keys(finalKfs[percent]).length > 0; }).length) {\n            var animationName = addAnimation(finalKfs, scope);\n            return animationName + \" \" + groupAnimator[0] + \" both\";\n        }\n    }\n    for (var key in groupAnimators) {\n        var animationCfg = createSingleCSSAnimation(groupAnimators[key]);\n        if (animationCfg) {\n            cssAnimations.push(animationCfg);\n        }\n    }\n    if (cssAnimations.length) {\n        var className = scope.zrId + '-cls-' + scope.cssClassIdx++;\n        scope.cssNodes['.' + className] = {\n            animation: cssAnimations.join(',')\n        };\n        attrs[\"class\"] = className;\n    }\n}\n","import { adjustTextY, getIdURL, getMatrixStr, getPathPrecision, getShadowKey, getSRTTransformString, hasShadow, isAroundZero, isGradient, isImagePattern, isLinearGradient, isPattern, isRadialGradient, normalizeColor, round4, TEXT_ALIGN_TO_ANCHOR } from './helper.js';\nimport Path from '../graphic/Path.js';\nimport ZRImage from '../graphic/Image.js';\nimport { getLineHeight } from '../contain/text.js';\nimport TSpan from '../graphic/TSpan.js';\nimport SVGPathRebuilder from './SVGPathRebuilder.js';\nimport mapStyleToAttrs from './mapStyleToAttrs.js';\nimport { createVNode, vNodeToString } from './core.js';\nimport { assert, clone, isFunction, isString, logError, map, retrieve2 } from '../core/util.js';\nimport { createOrUpdateImage } from '../graphic/helper/image.js';\nimport { createCSSAnimation } from './cssAnimation.js';\nimport { hasSeparateFont, parseFontSize } from '../graphic/Text.js';\nimport { DEFAULT_FONT, DEFAULT_FONT_FAMILY } from '../core/platform.js';\nvar round = Math.round;\nfunction isImageLike(val) {\n    return val && isString(val.src);\n}\nfunction isCanvasLike(val) {\n    return val && isFunction(val.toDataURL);\n}\nfunction setStyleAttrs(attrs, style, el, scope) {\n    mapStyleToAttrs(function (key, val) {\n        var isFillStroke = key === 'fill' || key === 'stroke';\n        if (isFillStroke && isGradient(val)) {\n            setGradient(style, attrs, key, scope);\n        }\n        else if (isFillStroke && isPattern(val)) {\n            setPattern(el, attrs, key, scope);\n        }\n        else {\n            attrs[key] = val;\n        }\n    }, style, el, false);\n    setShadow(el, attrs, scope);\n}\nfunction noRotateScale(m) {\n    return isAroundZero(m[0] - 1)\n        && isAroundZero(m[1])\n        && isAroundZero(m[2])\n        && isAroundZero(m[3] - 1);\n}\nfunction noTranslate(m) {\n    return isAroundZero(m[4]) && isAroundZero(m[5]);\n}\nfunction setTransform(attrs, m, compress) {\n    if (m && !(noTranslate(m) && noRotateScale(m))) {\n        var mul = compress ? 10 : 1e4;\n        attrs.transform = noRotateScale(m)\n            ? \"translate(\" + round(m[4] * mul) / mul + \" \" + round(m[5] * mul) / mul + \")\" : getMatrixStr(m);\n    }\n}\nfunction convertPolyShape(shape, attrs, mul) {\n    var points = shape.points;\n    var strArr = [];\n    for (var i = 0; i < points.length; i++) {\n        strArr.push(round(points[i][0] * mul) / mul);\n        strArr.push(round(points[i][1] * mul) / mul);\n    }\n    attrs.points = strArr.join(' ');\n}\nfunction validatePolyShape(shape) {\n    return !shape.smooth;\n}\nfunction createAttrsConvert(desc) {\n    var normalizedDesc = map(desc, function (item) {\n        return (typeof item === 'string' ? [item, item] : item);\n    });\n    return function (shape, attrs, mul) {\n        for (var i = 0; i < normalizedDesc.length; i++) {\n            var item = normalizedDesc[i];\n            var val = shape[item[0]];\n            if (val != null) {\n                attrs[item[1]] = round(val * mul) / mul;\n            }\n        }\n    };\n}\nvar buitinShapesDef = {\n    circle: [createAttrsConvert(['cx', 'cy', 'r'])],\n    polyline: [convertPolyShape, validatePolyShape],\n    polygon: [convertPolyShape, validatePolyShape]\n};\nfunction hasShapeAnimation(el) {\n    var animators = el.animators;\n    for (var i = 0; i < animators.length; i++) {\n        if (animators[i].targetName === 'shape') {\n            return true;\n        }\n    }\n    return false;\n}\nexport function brushSVGPath(el, scope) {\n    var style = el.style;\n    var shape = el.shape;\n    var builtinShpDef = buitinShapesDef[el.type];\n    var attrs = {};\n    var needsAnimate = scope.animation;\n    var svgElType = 'path';\n    var strokePercent = el.style.strokePercent;\n    var precision = (scope.compress && getPathPrecision(el)) || 4;\n    if (builtinShpDef\n        && !scope.willUpdate\n        && !(builtinShpDef[1] && !builtinShpDef[1](shape))\n        && !(needsAnimate && hasShapeAnimation(el))\n        && !(strokePercent < 1)) {\n        svgElType = el.type;\n        var mul = Math.pow(10, precision);\n        builtinShpDef[0](shape, attrs, mul);\n    }\n    else {\n        if (!el.path) {\n            el.createPathProxy();\n        }\n        var path = el.path;\n        if (el.shapeChanged()) {\n            path.beginPath();\n            el.buildPath(path, el.shape);\n            el.pathUpdated();\n        }\n        var pathVersion = path.getVersion();\n        var elExt = el;\n        var svgPathBuilder = elExt.__svgPathBuilder;\n        if (elExt.__svgPathVersion !== pathVersion\n            || !svgPathBuilder\n            || strokePercent !== elExt.__svgPathStrokePercent) {\n            if (!svgPathBuilder) {\n                svgPathBuilder = elExt.__svgPathBuilder = new SVGPathRebuilder();\n            }\n            svgPathBuilder.reset(precision);\n            path.rebuildPath(svgPathBuilder, strokePercent);\n            svgPathBuilder.generateStr();\n            elExt.__svgPathVersion = pathVersion;\n            elExt.__svgPathStrokePercent = strokePercent;\n        }\n        attrs.d = svgPathBuilder.getStr();\n    }\n    setTransform(attrs, el.transform);\n    setStyleAttrs(attrs, style, el, scope);\n    scope.animation && createCSSAnimation(el, attrs, scope);\n    return createVNode(svgElType, el.id + '', attrs);\n}\nexport function brushSVGImage(el, scope) {\n    var style = el.style;\n    var image = style.image;\n    if (image && !isString(image)) {\n        if (isImageLike(image)) {\n            image = image.src;\n        }\n        else if (isCanvasLike(image)) {\n            image = image.toDataURL();\n        }\n    }\n    if (!image) {\n        return;\n    }\n    var x = style.x || 0;\n    var y = style.y || 0;\n    var dw = style.width;\n    var dh = style.height;\n    var attrs = {\n        href: image,\n        width: dw,\n        height: dh\n    };\n    if (x) {\n        attrs.x = x;\n    }\n    if (y) {\n        attrs.y = y;\n    }\n    setTransform(attrs, el.transform);\n    setStyleAttrs(attrs, style, el, scope);\n    scope.animation && createCSSAnimation(el, attrs, scope);\n    return createVNode('image', el.id + '', attrs);\n}\n;\nexport function brushSVGTSpan(el, scope) {\n    var style = el.style;\n    var text = style.text;\n    text != null && (text += '');\n    if (!text || isNaN(style.x) || isNaN(style.y)) {\n        return;\n    }\n    var font = style.font || DEFAULT_FONT;\n    var x = style.x || 0;\n    var y = adjustTextY(style.y || 0, getLineHeight(font), style.textBaseline);\n    var textAlign = TEXT_ALIGN_TO_ANCHOR[style.textAlign]\n        || style.textAlign;\n    var attrs = {\n        'dominant-baseline': 'central',\n        'text-anchor': textAlign\n    };\n    if (hasSeparateFont(style)) {\n        var separatedFontStr = '';\n        var fontStyle = style.fontStyle;\n        var fontSize = parseFontSize(style.fontSize);\n        if (!parseFloat(fontSize)) {\n            return;\n        }\n        var fontFamily = style.fontFamily || DEFAULT_FONT_FAMILY;\n        var fontWeight = style.fontWeight;\n        separatedFontStr += \"font-size:\" + fontSize + \";font-family:\" + fontFamily + \";\";\n        if (fontStyle && fontStyle !== 'normal') {\n            separatedFontStr += \"font-style:\" + fontStyle + \";\";\n        }\n        if (fontWeight && fontWeight !== 'normal') {\n            separatedFontStr += \"font-weight:\" + fontWeight + \";\";\n        }\n        attrs.style = separatedFontStr;\n    }\n    else {\n        attrs.style = \"font: \" + font;\n    }\n    if (text.match(/\\s/)) {\n        attrs['xml:space'] = 'preserve';\n    }\n    if (x) {\n        attrs.x = x;\n    }\n    if (y) {\n        attrs.y = y;\n    }\n    setTransform(attrs, el.transform);\n    setStyleAttrs(attrs, style, el, scope);\n    scope.animation && createCSSAnimation(el, attrs, scope);\n    return createVNode('text', el.id + '', attrs, undefined, text);\n}\nexport function brush(el, scope) {\n    if (el instanceof Path) {\n        return brushSVGPath(el, scope);\n    }\n    else if (el instanceof ZRImage) {\n        return brushSVGImage(el, scope);\n    }\n    else if (el instanceof TSpan) {\n        return brushSVGTSpan(el, scope);\n    }\n}\nfunction setShadow(el, attrs, scope) {\n    var style = el.style;\n    if (hasShadow(style)) {\n        var shadowKey = getShadowKey(el);\n        var shadowCache = scope.shadowCache;\n        var shadowId = shadowCache[shadowKey];\n        if (!shadowId) {\n            var globalScale = el.getGlobalScale();\n            var scaleX = globalScale[0];\n            var scaleY = globalScale[1];\n            if (!scaleX || !scaleY) {\n                return;\n            }\n            var offsetX = style.shadowOffsetX || 0;\n            var offsetY = style.shadowOffsetY || 0;\n            var blur_1 = style.shadowBlur;\n            var _a = normalizeColor(style.shadowColor), opacity = _a.opacity, color = _a.color;\n            var stdDx = blur_1 / 2 / scaleX;\n            var stdDy = blur_1 / 2 / scaleY;\n            var stdDeviation = stdDx + ' ' + stdDy;\n            shadowId = scope.zrId + '-s' + scope.shadowIdx++;\n            scope.defs[shadowId] = createVNode('filter', shadowId, {\n                'id': shadowId,\n                'x': '-100%',\n                'y': '-100%',\n                'width': '300%',\n                'height': '300%'\n            }, [\n                createVNode('feDropShadow', '', {\n                    'dx': offsetX / scaleX,\n                    'dy': offsetY / scaleY,\n                    'stdDeviation': stdDeviation,\n                    'flood-color': color,\n                    'flood-opacity': opacity\n                })\n            ]);\n            shadowCache[shadowKey] = shadowId;\n        }\n        attrs.filter = getIdURL(shadowId);\n    }\n}\nfunction setGradient(style, attrs, target, scope) {\n    var val = style[target];\n    var gradientTag;\n    var gradientAttrs = {\n        'gradientUnits': val.global\n            ? 'userSpaceOnUse'\n            : 'objectBoundingBox'\n    };\n    if (isLinearGradient(val)) {\n        gradientTag = 'linearGradient';\n        gradientAttrs.x1 = val.x;\n        gradientAttrs.y1 = val.y;\n        gradientAttrs.x2 = val.x2;\n        gradientAttrs.y2 = val.y2;\n    }\n    else if (isRadialGradient(val)) {\n        gradientTag = 'radialGradient';\n        gradientAttrs.cx = retrieve2(val.x, 0.5);\n        gradientAttrs.cy = retrieve2(val.y, 0.5);\n        gradientAttrs.r = retrieve2(val.r, 0.5);\n    }\n    else {\n        if (process.env.NODE_ENV !== 'production') {\n            logError('Illegal gradient type.');\n        }\n        return;\n    }\n    var colors = val.colorStops;\n    var colorStops = [];\n    for (var i = 0, len = colors.length; i < len; ++i) {\n        var offset = round4(colors[i].offset) * 100 + '%';\n        var stopColor = colors[i].color;\n        var _a = normalizeColor(stopColor), color = _a.color, opacity = _a.opacity;\n        var stopsAttrs = {\n            'offset': offset\n        };\n        stopsAttrs['stop-color'] = color;\n        if (opacity < 1) {\n            stopsAttrs['stop-opacity'] = opacity;\n        }\n        colorStops.push(createVNode('stop', i + '', stopsAttrs));\n    }\n    var gradientVNode = createVNode(gradientTag, '', gradientAttrs, colorStops);\n    var gradientKey = vNodeToString(gradientVNode);\n    var gradientCache = scope.gradientCache;\n    var gradientId = gradientCache[gradientKey];\n    if (!gradientId) {\n        gradientId = scope.zrId + '-g' + scope.gradientIdx++;\n        gradientCache[gradientKey] = gradientId;\n        gradientAttrs.id = gradientId;\n        scope.defs[gradientId] = createVNode(gradientTag, gradientId, gradientAttrs, colorStops);\n    }\n    attrs[target] = getIdURL(gradientId);\n}\nfunction setPattern(el, attrs, target, scope) {\n    var val = el.style[target];\n    var patternAttrs = {\n        'patternUnits': 'userSpaceOnUse'\n    };\n    var child;\n    if (isImagePattern(val)) {\n        var imageWidth_1 = val.imageWidth;\n        var imageHeight_1 = val.imageHeight;\n        var imageSrc = void 0;\n        var patternImage = val.image;\n        if (isString(patternImage)) {\n            imageSrc = patternImage;\n        }\n        else if (isImageLike(patternImage)) {\n            imageSrc = patternImage.src;\n        }\n        else if (isCanvasLike(patternImage)) {\n            imageSrc = patternImage.toDataURL();\n        }\n        if (typeof Image === 'undefined') {\n            var errMsg = 'Image width/height must been given explictly in svg-ssr renderer.';\n            assert(imageWidth_1, errMsg);\n            assert(imageHeight_1, errMsg);\n        }\n        else if (imageWidth_1 == null || imageHeight_1 == null) {\n            var setSizeToVNode_1 = function (vNode, img) {\n                if (vNode) {\n                    var svgEl = vNode.elm;\n                    var width = (vNode.attrs.width = imageWidth_1 || img.width);\n                    var height = (vNode.attrs.height = imageHeight_1 || img.height);\n                    if (svgEl) {\n                        svgEl.setAttribute('width', width);\n                        svgEl.setAttribute('height', height);\n                    }\n                }\n            };\n            var createdImage = createOrUpdateImage(imageSrc, null, el, function (img) {\n                setSizeToVNode_1(patternVNode, img);\n                setSizeToVNode_1(child, img);\n            });\n            if (createdImage && createdImage.width && createdImage.height) {\n                imageWidth_1 = imageWidth_1 || createdImage.width;\n                imageHeight_1 = imageHeight_1 || createdImage.height;\n            }\n        }\n        child = createVNode('image', 'img', {\n            href: imageSrc,\n            width: imageWidth_1,\n            height: imageHeight_1\n        });\n        patternAttrs.width = imageWidth_1;\n        patternAttrs.height = imageHeight_1;\n    }\n    else if (val.svgElement) {\n        child = clone(val.svgElement);\n        patternAttrs.width = val.svgWidth;\n        patternAttrs.height = val.svgHeight;\n    }\n    if (!child) {\n        return;\n    }\n    patternAttrs.patternTransform = getSRTTransformString(val);\n    var patternVNode = createVNode('pattern', '', patternAttrs, [child]);\n    var patternKey = vNodeToString(patternVNode);\n    var patternCache = scope.patternCache;\n    var patternId = patternCache[patternKey];\n    if (!patternId) {\n        patternId = scope.zrId + '-p' + scope.patternIdx++;\n        patternCache[patternKey] = patternId;\n        patternAttrs.id = patternId;\n        patternVNode = scope.defs[patternId] = createVNode('pattern', patternId, patternAttrs, [child]);\n    }\n    attrs[target] = getIdURL(patternId);\n}\nexport function setClipPath(clipPath, attrs, scope) {\n    var clipPathCache = scope.clipPathCache, defs = scope.defs;\n    var clipPathId = clipPathCache[clipPath.id];\n    if (!clipPathId) {\n        clipPathId = scope.zrId + '-c' + scope.clipPathIdx++;\n        var clipPathAttrs = {\n            id: clipPathId\n        };\n        clipPathCache[clipPath.id] = clipPathId;\n        defs[clipPathId] = createVNode('clipPath', clipPathId, clipPathAttrs, [brushSVGPath(clipPath, scope)]);\n    }\n    attrs['clip-path'] = getIdURL(clipPathId);\n}\n","export function createTextNode(text) {\n    return document.createTextNode(text);\n}\nexport function createComment(text) {\n    return document.createComment(text);\n}\nexport function insertBefore(parentNode, newNode, referenceNode) {\n    parentNode.insertBefore(newNode, referenceNode);\n}\nexport function removeChild(node, child) {\n    node.removeChild(child);\n}\nexport function appendChild(node, child) {\n    node.appendChild(child);\n}\nexport function parentNode(node) {\n    return node.parentNode;\n}\nexport function nextSibling(node) {\n    return node.nextSibling;\n}\nexport function tagName(elm) {\n    return elm.tagName;\n}\nexport function setTextContent(node, text) {\n    node.textContent = text;\n}\nexport function getTextContent(node) {\n    return node.textContent;\n}\nexport function isElement(node) {\n    return node.nodeType === 1;\n}\nexport function isText(node) {\n    return node.nodeType === 3;\n}\nexport function isComment(node) {\n    return node.nodeType === 8;\n}\n","import { isArray, isObject } from '../core/util.js';\nimport { createElement, createVNode, XMLNS, XML_NAMESPACE, XLINKNS } from './core.js';\nimport * as api from './domapi.js';\nvar colonChar = 58;\nvar xChar = 120;\nvar emptyNode = createVNode('', '');\nfunction isUndef(s) {\n    return s === undefined;\n}\nfunction isDef(s) {\n    return s !== undefined;\n}\nfunction createKeyToOldIdx(children, beginIdx, endIdx) {\n    var map = {};\n    for (var i = beginIdx; i <= endIdx; ++i) {\n        var key = children[i].key;\n        if (key !== undefined) {\n            if (process.env.NODE_ENV !== 'production') {\n                if (map[key] != null) {\n                    console.error(\"Duplicate key \" + key);\n                }\n            }\n            map[key] = i;\n        }\n    }\n    return map;\n}\nfunction sameVnode(vnode1, vnode2) {\n    var isSameKey = vnode1.key === vnode2.key;\n    var isSameTag = vnode1.tag === vnode2.tag;\n    return isSameTag && isSameKey;\n}\nfunction createElm(vnode) {\n    var i;\n    var children = vnode.children;\n    var tag = vnode.tag;\n    if (isDef(tag)) {\n        var elm = (vnode.elm = createElement(tag));\n        updateAttrs(emptyNode, vnode);\n        if (isArray(children)) {\n            for (i = 0; i < children.length; ++i) {\n                var ch = children[i];\n                if (ch != null) {\n                    api.appendChild(elm, createElm(ch));\n                }\n            }\n        }\n        else if (isDef(vnode.text) && !isObject(vnode.text)) {\n            api.appendChild(elm, api.createTextNode(vnode.text));\n        }\n    }\n    else {\n        vnode.elm = api.createTextNode(vnode.text);\n    }\n    return vnode.elm;\n}\nfunction addVnodes(parentElm, before, vnodes, startIdx, endIdx) {\n    for (; startIdx <= endIdx; ++startIdx) {\n        var ch = vnodes[startIdx];\n        if (ch != null) {\n            api.insertBefore(parentElm, createElm(ch), before);\n        }\n    }\n}\nfunction removeVnodes(parentElm, vnodes, startIdx, endIdx) {\n    for (; startIdx <= endIdx; ++startIdx) {\n        var ch = vnodes[startIdx];\n        if (ch != null) {\n            if (isDef(ch.tag)) {\n                var parent_1 = api.parentNode(ch.elm);\n                api.removeChild(parent_1, ch.elm);\n            }\n            else {\n                api.removeChild(parentElm, ch.elm);\n            }\n        }\n    }\n}\nexport function updateAttrs(oldVnode, vnode) {\n    var key;\n    var elm = vnode.elm;\n    var oldAttrs = oldVnode && oldVnode.attrs || {};\n    var attrs = vnode.attrs || {};\n    if (oldAttrs === attrs) {\n        return;\n    }\n    for (key in attrs) {\n        var cur = attrs[key];\n        var old = oldAttrs[key];\n        if (old !== cur) {\n            if (cur === true) {\n                elm.setAttribute(key, '');\n            }\n            else if (cur === false) {\n                elm.removeAttribute(key);\n            }\n            else {\n                if (key.charCodeAt(0) !== xChar) {\n                    elm.setAttribute(key, cur);\n                }\n                else if (key === 'xmlns:xlink' || key === 'xmlns') {\n                    elm.setAttributeNS(XMLNS, key, cur);\n                }\n                else if (key.charCodeAt(3) === colonChar) {\n                    elm.setAttributeNS(XML_NAMESPACE, key, cur);\n                }\n                else if (key.charCodeAt(5) === colonChar) {\n                    elm.setAttributeNS(XLINKNS, key, cur);\n                }\n                else {\n                    elm.setAttribute(key, cur);\n                }\n            }\n        }\n    }\n    for (key in oldAttrs) {\n        if (!(key in attrs)) {\n            elm.removeAttribute(key);\n        }\n    }\n}\nfunction updateChildren(parentElm, oldCh, newCh) {\n    var oldStartIdx = 0;\n    var newStartIdx = 0;\n    var oldEndIdx = oldCh.length - 1;\n    var oldStartVnode = oldCh[0];\n    var oldEndVnode = oldCh[oldEndIdx];\n    var newEndIdx = newCh.length - 1;\n    var newStartVnode = newCh[0];\n    var newEndVnode = newCh[newEndIdx];\n    var oldKeyToIdx;\n    var idxInOld;\n    var elmToMove;\n    var before;\n    while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {\n        if (oldStartVnode == null) {\n            oldStartVnode = oldCh[++oldStartIdx];\n        }\n        else if (oldEndVnode == null) {\n            oldEndVnode = oldCh[--oldEndIdx];\n        }\n        else if (newStartVnode == null) {\n            newStartVnode = newCh[++newStartIdx];\n        }\n        else if (newEndVnode == null) {\n            newEndVnode = newCh[--newEndIdx];\n        }\n        else if (sameVnode(oldStartVnode, newStartVnode)) {\n            patchVnode(oldStartVnode, newStartVnode);\n            oldStartVnode = oldCh[++oldStartIdx];\n            newStartVnode = newCh[++newStartIdx];\n        }\n        else if (sameVnode(oldEndVnode, newEndVnode)) {\n            patchVnode(oldEndVnode, newEndVnode);\n            oldEndVnode = oldCh[--oldEndIdx];\n            newEndVnode = newCh[--newEndIdx];\n        }\n        else if (sameVnode(oldStartVnode, newEndVnode)) {\n            patchVnode(oldStartVnode, newEndVnode);\n            api.insertBefore(parentElm, oldStartVnode.elm, api.nextSibling(oldEndVnode.elm));\n            oldStartVnode = oldCh[++oldStartIdx];\n            newEndVnode = newCh[--newEndIdx];\n        }\n        else if (sameVnode(oldEndVnode, newStartVnode)) {\n            patchVnode(oldEndVnode, newStartVnode);\n            api.insertBefore(parentElm, oldEndVnode.elm, oldStartVnode.elm);\n            oldEndVnode = oldCh[--oldEndIdx];\n            newStartVnode = newCh[++newStartIdx];\n        }\n        else {\n            if (isUndef(oldKeyToIdx)) {\n                oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx);\n            }\n            idxInOld = oldKeyToIdx[newStartVnode.key];\n            if (isUndef(idxInOld)) {\n                api.insertBefore(parentElm, createElm(newStartVnode), oldStartVnode.elm);\n            }\n            else {\n                elmToMove = oldCh[idxInOld];\n                if (elmToMove.tag !== newStartVnode.tag) {\n                    api.insertBefore(parentElm, createElm(newStartVnode), oldStartVnode.elm);\n                }\n                else {\n                    patchVnode(elmToMove, newStartVnode);\n                    oldCh[idxInOld] = undefined;\n                    api.insertBefore(parentElm, elmToMove.elm, oldStartVnode.elm);\n                }\n            }\n            newStartVnode = newCh[++newStartIdx];\n        }\n    }\n    if (oldStartIdx <= oldEndIdx || newStartIdx <= newEndIdx) {\n        if (oldStartIdx > oldEndIdx) {\n            before = newCh[newEndIdx + 1] == null ? null : newCh[newEndIdx + 1].elm;\n            addVnodes(parentElm, before, newCh, newStartIdx, newEndIdx);\n        }\n        else {\n            removeVnodes(parentElm, oldCh, oldStartIdx, oldEndIdx);\n        }\n    }\n}\nfunction patchVnode(oldVnode, vnode) {\n    var elm = (vnode.elm = oldVnode.elm);\n    var oldCh = oldVnode.children;\n    var ch = vnode.children;\n    if (oldVnode === vnode) {\n        return;\n    }\n    updateAttrs(oldVnode, vnode);\n    if (isUndef(vnode.text)) {\n        if (isDef(oldCh) && isDef(ch)) {\n            if (oldCh !== ch) {\n                updateChildren(elm, oldCh, ch);\n            }\n        }\n        else if (isDef(ch)) {\n            if (isDef(oldVnode.text)) {\n                api.setTextContent(elm, '');\n            }\n            addVnodes(elm, null, ch, 0, ch.length - 1);\n        }\n        else if (isDef(oldCh)) {\n            removeVnodes(elm, oldCh, 0, oldCh.length - 1);\n        }\n        else if (isDef(oldVnode.text)) {\n            api.setTextContent(elm, '');\n        }\n    }\n    else if (oldVnode.text !== vnode.text) {\n        if (isDef(oldCh)) {\n            removeVnodes(elm, oldCh, 0, oldCh.length - 1);\n        }\n        api.setTextContent(elm, vnode.text);\n    }\n}\nexport default function patch(oldVnode, vnode) {\n    if (sameVnode(oldVnode, vnode)) {\n        patchVnode(oldVnode, vnode);\n    }\n    else {\n        var elm = oldVnode.elm;\n        var parent_2 = api.parentNode(elm);\n        createElm(vnode);\n        if (parent_2 !== null) {\n            api.insertBefore(parent_2, vnode.elm, api.nextSibling(elm));\n            removeVnodes(parent_2, [oldVnode], 0, 0);\n        }\n    }\n    return vnode;\n}\n","import { brush, setClipPath } from './graphic.js';\nimport { createElement, createVNode, vNodeToString, getCssString, createBrushScope, createSVGVNode } from './core.js';\nimport { normalizeColor, encodeBase64 } from './helper.js';\nimport { extend, keys, logError, map, retrieve2 } from '../core/util.js';\nimport patch, { updateAttrs } from './patch.js';\nimport { getSize } from '../canvas/helper.js';\nvar svgId = 0;\nvar SVGPainter = (function () {\n    function SVGPainter(root, storage, opts) {\n        this.type = 'svg';\n        this.refreshHover = createMethodNotSupport('refreshHover');\n        this.configLayer = createMethodNotSupport('configLayer');\n        this.storage = storage;\n        this._opts = opts = extend({}, opts);\n        this.root = root;\n        this._id = 'zr' + svgId++;\n        this._oldVNode = createSVGVNode(opts.width, opts.height);\n        if (root && !opts.ssr) {\n            var viewport = this._viewport = document.createElement('div');\n            viewport.style.cssText = 'position:relative;overflow:hidden';\n            var svgDom = this._svgDom = this._oldVNode.elm = createElement('svg');\n            updateAttrs(null, this._oldVNode);\n            viewport.appendChild(svgDom);\n            root.appendChild(viewport);\n        }\n        this.resize(opts.width, opts.height);\n    }\n    SVGPainter.prototype.getType = function () {\n        return this.type;\n    };\n    SVGPainter.prototype.getViewportRoot = function () {\n        return this._viewport;\n    };\n    SVGPainter.prototype.getViewportRootOffset = function () {\n        var viewportRoot = this.getViewportRoot();\n        if (viewportRoot) {\n            return {\n                offsetLeft: viewportRoot.offsetLeft || 0,\n                offsetTop: viewportRoot.offsetTop || 0\n            };\n        }\n    };\n    SVGPainter.prototype.getSvgDom = function () {\n        return this._svgDom;\n    };\n    SVGPainter.prototype.refresh = function () {\n        if (this.root) {\n            var vnode = this.renderToVNode({\n                willUpdate: true\n            });\n            vnode.attrs.style = 'position:absolute;left:0;top:0;user-select:none';\n            patch(this._oldVNode, vnode);\n            this._oldVNode = vnode;\n        }\n    };\n    SVGPainter.prototype.renderOneToVNode = function (el) {\n        return brush(el, createBrushScope(this._id));\n    };\n    SVGPainter.prototype.renderToVNode = function (opts) {\n        opts = opts || {};\n        var list = this.storage.getDisplayList(true);\n        var bgColor = this._backgroundColor;\n        var width = this._width;\n        var height = this._height;\n        var scope = createBrushScope(this._id);\n        scope.animation = opts.animation;\n        scope.willUpdate = opts.willUpdate;\n        scope.compress = opts.compress;\n        var children = [];\n        if (bgColor && bgColor !== 'none') {\n            var _a = normalizeColor(bgColor), color = _a.color, opacity = _a.opacity;\n            this._bgVNode = createVNode('rect', 'bg', {\n                width: width,\n                height: height,\n                x: '0',\n                y: '0',\n                id: '0',\n                fill: color,\n                'fill-opacity': opacity\n            });\n            children.push(this._bgVNode);\n        }\n        else {\n            this._bgVNode = null;\n        }\n        var mainVNode = !opts.compress\n            ? (this._mainVNode = createVNode('g', 'main', {}, [])) : null;\n        this._paintList(list, scope, mainVNode ? mainVNode.children : children);\n        mainVNode && children.push(mainVNode);\n        var defs = map(keys(scope.defs), function (id) { return scope.defs[id]; });\n        if (defs.length) {\n            children.push(createVNode('defs', 'defs', {}, defs));\n        }\n        if (opts.animation) {\n            var animationCssStr = getCssString(scope.cssNodes, scope.cssAnims, { newline: true });\n            if (animationCssStr) {\n                var styleNode = createVNode('style', 'stl', {}, [], animationCssStr);\n                children.push(styleNode);\n            }\n        }\n        return createSVGVNode(width, height, children, opts.useViewBox);\n    };\n    SVGPainter.prototype.renderToString = function (opts) {\n        opts = opts || {};\n        return vNodeToString(this.renderToVNode({\n            animation: retrieve2(opts.cssAnimation, true),\n            willUpdate: false,\n            compress: true,\n            useViewBox: retrieve2(opts.useViewBox, true)\n        }), { newline: true });\n    };\n    SVGPainter.prototype.setBackgroundColor = function (backgroundColor) {\n        this._backgroundColor = backgroundColor;\n        var bgVNode = this._bgVNode;\n        if (bgVNode && bgVNode.elm) {\n            var _a = normalizeColor(backgroundColor), color = _a.color, opacity = _a.opacity;\n            bgVNode.elm.setAttribute('fill', color);\n            if (opacity < 1) {\n                bgVNode.elm.setAttribute('fill-opacity', opacity);\n            }\n        }\n    };\n    SVGPainter.prototype.getSvgRoot = function () {\n        return this._mainVNode && this._mainVNode.elm;\n    };\n    SVGPainter.prototype._paintList = function (list, scope, out) {\n        var listLen = list.length;\n        var clipPathsGroupsStack = [];\n        var clipPathsGroupsStackDepth = 0;\n        var currentClipPathGroup;\n        var prevClipPaths;\n        var clipGroupNodeIdx = 0;\n        for (var i = 0; i < listLen; i++) {\n            var displayable = list[i];\n            if (!displayable.invisible) {\n                var clipPaths = displayable.__clipPaths;\n                var len = clipPaths && clipPaths.length || 0;\n                var prevLen = prevClipPaths && prevClipPaths.length || 0;\n                var lca = void 0;\n                for (lca = Math.max(len - 1, prevLen - 1); lca >= 0; lca--) {\n                    if (clipPaths && prevClipPaths\n                        && clipPaths[lca] === prevClipPaths[lca]) {\n                        break;\n                    }\n                }\n                for (var i_1 = prevLen - 1; i_1 > lca; i_1--) {\n                    clipPathsGroupsStackDepth--;\n                    currentClipPathGroup = clipPathsGroupsStack[clipPathsGroupsStackDepth - 1];\n                }\n                for (var i_2 = lca + 1; i_2 < len; i_2++) {\n                    var groupAttrs = {};\n                    setClipPath(clipPaths[i_2], groupAttrs, scope);\n                    var g = createVNode('g', 'clip-g-' + clipGroupNodeIdx++, groupAttrs, []);\n                    (currentClipPathGroup ? currentClipPathGroup.children : out).push(g);\n                    clipPathsGroupsStack[clipPathsGroupsStackDepth++] = g;\n                    currentClipPathGroup = g;\n                }\n                prevClipPaths = clipPaths;\n                var ret = brush(displayable, scope);\n                if (ret) {\n                    (currentClipPathGroup ? currentClipPathGroup.children : out).push(ret);\n                }\n            }\n        }\n    };\n    SVGPainter.prototype.resize = function (width, height) {\n        var opts = this._opts;\n        var root = this.root;\n        var viewport = this._viewport;\n        width != null && (opts.width = width);\n        height != null && (opts.height = height);\n        if (root && viewport) {\n            viewport.style.display = 'none';\n            width = getSize(root, 0, opts);\n            height = getSize(root, 1, opts);\n            viewport.style.display = '';\n        }\n        if (this._width !== width || this._height !== height) {\n            this._width = width;\n            this._height = height;\n            if (viewport) {\n                var viewportStyle = viewport.style;\n                viewportStyle.width = width + 'px';\n                viewportStyle.height = height + 'px';\n            }\n            var svgDom = this._svgDom;\n            if (svgDom) {\n                svgDom.setAttribute('width', width);\n                svgDom.setAttribute('height', height);\n            }\n        }\n    };\n    SVGPainter.prototype.getWidth = function () {\n        return this._width;\n    };\n    SVGPainter.prototype.getHeight = function () {\n        return this._height;\n    };\n    SVGPainter.prototype.dispose = function () {\n        if (this.root) {\n            this.root.innerHTML = '';\n        }\n        this._svgDom =\n            this._viewport =\n                this.storage =\n                    this._oldVNode =\n                        this._bgVNode =\n                            this._mainVNode = null;\n    };\n    SVGPainter.prototype.clear = function () {\n        if (this._svgDom) {\n            this._svgDom.innerHTML = null;\n        }\n        this._oldVNode = null;\n    };\n    SVGPainter.prototype.toDataURL = function (base64) {\n        var str = encodeURIComponent(this.renderToString());\n        var prefix = 'data:image/svg+xml;';\n        if (base64) {\n            str = encodeBase64(str);\n            return str && prefix + 'base64,' + str;\n        }\n        return prefix + 'charset=UTF-8,' + str;\n    };\n    return SVGPainter;\n}());\nfunction createMethodNotSupport(method) {\n    return function () {\n        if (process.env.NODE_ENV !== 'production') {\n            logError('In SVG mode painter not support method \"' + method + '\"');\n        }\n    };\n}\nexport default SVGPainter;\n","var Point = (function () {\n    function Point(x, y) {\n        this.x = x || 0;\n        this.y = y || 0;\n    }\n    Point.prototype.copy = function (other) {\n        this.x = other.x;\n        this.y = other.y;\n        return this;\n    };\n    Point.prototype.clone = function () {\n        return new Point(this.x, this.y);\n    };\n    Point.prototype.set = function (x, y) {\n        this.x = x;\n        this.y = y;\n        return this;\n    };\n    Point.prototype.equal = function (other) {\n        return other.x === this.x && other.y === this.y;\n    };\n    Point.prototype.add = function (other) {\n        this.x += other.x;\n        this.y += other.y;\n        return this;\n    };\n    Point.prototype.scale = function (scalar) {\n        this.x *= scalar;\n        this.y *= scalar;\n    };\n    Point.prototype.scaleAndAdd = function (other, scalar) {\n        this.x += other.x * scalar;\n        this.y += other.y * scalar;\n    };\n    Point.prototype.sub = function (other) {\n        this.x -= other.x;\n        this.y -= other.y;\n        return this;\n    };\n    Point.prototype.dot = function (other) {\n        return this.x * other.x + this.y * other.y;\n    };\n    Point.prototype.len = function () {\n        return Math.sqrt(this.x * this.x + this.y * this.y);\n    };\n    Point.prototype.lenSquare = function () {\n        return this.x * this.x + this.y * this.y;\n    };\n    Point.prototype.normalize = function () {\n        var len = this.len();\n        this.x /= len;\n        this.y /= len;\n        return this;\n    };\n    Point.prototype.distance = function (other) {\n        var dx = this.x - other.x;\n        var dy = this.y - other.y;\n        return Math.sqrt(dx * dx + dy * dy);\n    };\n    Point.prototype.distanceSquare = function (other) {\n        var dx = this.x - other.x;\n        var dy = this.y - other.y;\n        return dx * dx + dy * dy;\n    };\n    Point.prototype.negate = function () {\n        this.x = -this.x;\n        this.y = -this.y;\n        return this;\n    };\n    Point.prototype.transform = function (m) {\n        if (!m) {\n            return;\n        }\n        var x = this.x;\n        var y = this.y;\n        this.x = m[0] * x + m[2] * y + m[4];\n        this.y = m[1] * x + m[3] * y + m[5];\n        return this;\n    };\n    Point.prototype.toArray = function (out) {\n        out[0] = this.x;\n        out[1] = this.y;\n        return out;\n    };\n    Point.prototype.fromArray = function (input) {\n        this.x = input[0];\n        this.y = input[1];\n    };\n    Point.set = function (p, x, y) {\n        p.x = x;\n        p.y = y;\n    };\n    Point.copy = function (p, p2) {\n        p.x = p2.x;\n        p.y = p2.y;\n    };\n    Point.len = function (p) {\n        return Math.sqrt(p.x * p.x + p.y * p.y);\n    };\n    Point.lenSquare = function (p) {\n        return p.x * p.x + p.y * p.y;\n    };\n    Point.dot = function (p0, p1) {\n        return p0.x * p1.x + p0.y * p1.y;\n    };\n    Point.add = function (out, p0, p1) {\n        out.x = p0.x + p1.x;\n        out.y = p0.y + p1.y;\n    };\n    Point.sub = function (out, p0, p1) {\n        out.x = p0.x - p1.x;\n        out.y = p0.y - p1.y;\n    };\n    Point.scale = function (out, p0, scalar) {\n        out.x = p0.x * scalar;\n        out.y = p0.y * scalar;\n    };\n    Point.scaleAndAdd = function (out, p0, p1, scalar) {\n        out.x = p0.x + p1.x * scalar;\n        out.y = p0.y + p1.y * scalar;\n    };\n    Point.lerp = function (out, p0, p1, t) {\n        var onet = 1 - t;\n        out.x = onet * p0.x + t * p1.x;\n        out.y = onet * p0.y + t * p1.y;\n    };\n    return Point;\n}());\nexport default Point;\n","import { __extends } from \"tslib\";\nimport Displayable from './Displayable.js';\nimport { getBoundingRect } from '../contain/text.js';\nimport { DEFAULT_PATH_STYLE } from './Path.js';\nimport { createObject, defaults } from '../core/util.js';\nimport { DEFAULT_FONT } from '../core/platform.js';\nexport var DEFAULT_TSPAN_STYLE = defaults({\n    strokeFirst: true,\n    font: DEFAULT_FONT,\n    x: 0,\n    y: 0,\n    textAlign: 'left',\n    textBaseline: 'top',\n    miterLimit: 2\n}, DEFAULT_PATH_STYLE);\nvar TSpan = (function (_super) {\n    __extends(TSpan, _super);\n    function TSpan() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TSpan.prototype.hasStroke = function () {\n        var style = this.style;\n        var stroke = style.stroke;\n        return stroke != null && stroke !== 'none' && style.lineWidth > 0;\n    };\n    TSpan.prototype.hasFill = function () {\n        var style = this.style;\n        var fill = style.fill;\n        return fill != null && fill !== 'none';\n    };\n    TSpan.prototype.createStyle = function (obj) {\n        return createObject(DEFAULT_TSPAN_STYLE, obj);\n    };\n    TSpan.prototype.setBoundingRect = function (rect) {\n        this._rect = rect;\n    };\n    TSpan.prototype.getBoundingRect = function () {\n        var style = this.style;\n        if (!this._rect) {\n            var text = style.text;\n            text != null ? (text += '') : (text = '');\n            var rect = getBoundingRect(text, style.font, style.textAlign, style.textBaseline);\n            rect.x += style.x || 0;\n            rect.y += style.y || 0;\n            if (this.hasStroke()) {\n                var w = style.lineWidth;\n                rect.x -= w / 2;\n                rect.y -= w / 2;\n                rect.width += w;\n                rect.height += w;\n            }\n            this._rect = rect;\n        }\n        return this._rect;\n    };\n    TSpan.initDefaultProps = (function () {\n        var tspanProto = TSpan.prototype;\n        tspanProto.dirtyRectTolerance = 10;\n    })();\n    return TSpan;\n}(Displayable));\nTSpan.prototype.type = 'tspan';\nexport default TSpan;\n","import { __extends } from \"tslib\";\nimport Gradient from './Gradient.js';\nvar RadialGradient = (function (_super) {\n    __extends(RadialGradient, _super);\n    function RadialGradient(x, y, r, colorStops, globalCoord) {\n        var _this = _super.call(this, colorStops) || this;\n        _this.x = x == null ? 0.5 : x;\n        _this.y = y == null ? 0.5 : y;\n        _this.r = r == null ? 0.5 : r;\n        _this.type = 'radial';\n        _this.global = globalCoord || false;\n        return _this;\n    }\n    return RadialGradient;\n}(Gradient));\nexport default RadialGradient;\n","import * as vec2 from './vector.js';\nimport * as curve from './curve.js';\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathSin = Math.sin;\nvar mathCos = Math.cos;\nvar PI2 = Math.PI * 2;\nvar start = vec2.create();\nvar end = vec2.create();\nvar extremity = vec2.create();\nexport function fromPoints(points, min, max) {\n    if (points.length === 0) {\n        return;\n    }\n    var p = points[0];\n    var left = p[0];\n    var right = p[0];\n    var top = p[1];\n    var bottom = p[1];\n    for (var i = 1; i < points.length; i++) {\n        p = points[i];\n        left = mathMin(left, p[0]);\n        right = mathMax(right, p[0]);\n        top = mathMin(top, p[1]);\n        bottom = mathMax(bottom, p[1]);\n    }\n    min[0] = left;\n    min[1] = top;\n    max[0] = right;\n    max[1] = bottom;\n}\nexport function fromLine(x0, y0, x1, y1, min, max) {\n    min[0] = mathMin(x0, x1);\n    min[1] = mathMin(y0, y1);\n    max[0] = mathMax(x0, x1);\n    max[1] = mathMax(y0, y1);\n}\nvar xDim = [];\nvar yDim = [];\nexport function fromCubic(x0, y0, x1, y1, x2, y2, x3, y3, min, max) {\n    var cubicExtrema = curve.cubicExtrema;\n    var cubicAt = curve.cubicAt;\n    var n = cubicExtrema(x0, x1, x2, x3, xDim);\n    min[0] = Infinity;\n    min[1] = Infinity;\n    max[0] = -Infinity;\n    max[1] = -Infinity;\n    for (var i = 0; i < n; i++) {\n        var x = cubicAt(x0, x1, x2, x3, xDim[i]);\n        min[0] = mathMin(x, min[0]);\n        max[0] = mathMax(x, max[0]);\n    }\n    n = cubicExtrema(y0, y1, y2, y3, yDim);\n    for (var i = 0; i < n; i++) {\n        var y = cubicAt(y0, y1, y2, y3, yDim[i]);\n        min[1] = mathMin(y, min[1]);\n        max[1] = mathMax(y, max[1]);\n    }\n    min[0] = mathMin(x0, min[0]);\n    max[0] = mathMax(x0, max[0]);\n    min[0] = mathMin(x3, min[0]);\n    max[0] = mathMax(x3, max[0]);\n    min[1] = mathMin(y0, min[1]);\n    max[1] = mathMax(y0, max[1]);\n    min[1] = mathMin(y3, min[1]);\n    max[1] = mathMax(y3, max[1]);\n}\nexport function fromQuadratic(x0, y0, x1, y1, x2, y2, min, max) {\n    var quadraticExtremum = curve.quadraticExtremum;\n    var quadraticAt = curve.quadraticAt;\n    var tx = mathMax(mathMin(quadraticExtremum(x0, x1, x2), 1), 0);\n    var ty = mathMax(mathMin(quadraticExtremum(y0, y1, y2), 1), 0);\n    var x = quadraticAt(x0, x1, x2, tx);\n    var y = quadraticAt(y0, y1, y2, ty);\n    min[0] = mathMin(x0, x2, x);\n    min[1] = mathMin(y0, y2, y);\n    max[0] = mathMax(x0, x2, x);\n    max[1] = mathMax(y0, y2, y);\n}\nexport function fromArc(x, y, rx, ry, startAngle, endAngle, anticlockwise, min, max) {\n    var vec2Min = vec2.min;\n    var vec2Max = vec2.max;\n    var diff = Math.abs(startAngle - endAngle);\n    if (diff % PI2 < 1e-4 && diff > 1e-4) {\n        min[0] = x - rx;\n        min[1] = y - ry;\n        max[0] = x + rx;\n        max[1] = y + ry;\n        return;\n    }\n    start[0] = mathCos(startAngle) * rx + x;\n    start[1] = mathSin(startAngle) * ry + y;\n    end[0] = mathCos(endAngle) * rx + x;\n    end[1] = mathSin(endAngle) * ry + y;\n    vec2Min(min, start, end);\n    vec2Max(max, start, end);\n    startAngle = startAngle % (PI2);\n    if (startAngle < 0) {\n        startAngle = startAngle + PI2;\n    }\n    endAngle = endAngle % (PI2);\n    if (endAngle < 0) {\n        endAngle = endAngle + PI2;\n    }\n    if (startAngle > endAngle && !anticlockwise) {\n        endAngle += PI2;\n    }\n    else if (startAngle < endAngle && anticlockwise) {\n        startAngle += PI2;\n    }\n    if (anticlockwise) {\n        var tmp = endAngle;\n        endAngle = startAngle;\n        startAngle = tmp;\n    }\n    for (var angle = 0; angle < endAngle; angle += Math.PI / 2) {\n        if (angle > startAngle) {\n            extremity[0] = mathCos(angle) * rx + x;\n            extremity[1] = mathSin(angle) * ry + y;\n            vec2Min(min, extremity, min);\n            vec2Max(max, extremity, max);\n        }\n    }\n}\n","import BoundingRect from '../core/BoundingRect.js';\nimport LRU from '../core/LRU.js';\nimport { DEFAULT_FONT, platformApi } from '../core/platform.js';\nvar textWidthCache = {};\nexport function getWidth(text, font) {\n    font = font || DEFAULT_FONT;\n    var cacheOfFont = textWidthCache[font];\n    if (!cacheOfFont) {\n        cacheOfFont = textWidthCache[font] = new LRU(500);\n    }\n    var width = cacheOfFont.get(text);\n    if (width == null) {\n        width = platformApi.measureText(text, font).width;\n        cacheOfFont.put(text, width);\n    }\n    return width;\n}\nexport function innerGetBoundingRect(text, font, textAlign, textBaseline) {\n    var width = getWidth(text, font);\n    var height = getLineHeight(font);\n    var x = adjustTextX(0, width, textAlign);\n    var y = adjustTextY(0, height, textBaseline);\n    var rect = new BoundingRect(x, y, width, height);\n    return rect;\n}\nexport function getBoundingRect(text, font, textAlign, textBaseline) {\n    var textLines = ((text || '') + '').split('\\n');\n    var len = textLines.length;\n    if (len === 1) {\n        return innerGetBoundingRect(textLines[0], font, textAlign, textBaseline);\n    }\n    else {\n        var uniondRect = new BoundingRect(0, 0, 0, 0);\n        for (var i = 0; i < textLines.length; i++) {\n            var rect = innerGetBoundingRect(textLines[i], font, textAlign, textBaseline);\n            i === 0 ? uniondRect.copy(rect) : uniondRect.union(rect);\n        }\n        return uniondRect;\n    }\n}\nexport function adjustTextX(x, width, textAlign) {\n    if (textAlign === 'right') {\n        x -= width;\n    }\n    else if (textAlign === 'center') {\n        x -= width / 2;\n    }\n    return x;\n}\nexport function adjustTextY(y, height, verticalAlign) {\n    if (verticalAlign === 'middle') {\n        y -= height / 2;\n    }\n    else if (verticalAlign === 'bottom') {\n        y -= height;\n    }\n    return y;\n}\nexport function getLineHeight(font) {\n    return getWidth('国', font);\n}\nexport function measureText(text, font) {\n    return platformApi.measureText(text, font);\n}\nexport function parsePercent(value, maxValue) {\n    if (typeof value === 'string') {\n        if (value.lastIndexOf('%') >= 0) {\n            return parseFloat(value) / 100 * maxValue;\n        }\n        return parseFloat(value);\n    }\n    return value;\n}\nexport function calculateTextPosition(out, opts, rect) {\n    var textPosition = opts.position || 'inside';\n    var distance = opts.distance != null ? opts.distance : 5;\n    var height = rect.height;\n    var width = rect.width;\n    var halfHeight = height / 2;\n    var x = rect.x;\n    var y = rect.y;\n    var textAlign = 'left';\n    var textVerticalAlign = 'top';\n    if (textPosition instanceof Array) {\n        x += parsePercent(textPosition[0], rect.width);\n        y += parsePercent(textPosition[1], rect.height);\n        textAlign = null;\n        textVerticalAlign = null;\n    }\n    else {\n        switch (textPosition) {\n            case 'left':\n                x -= distance;\n                y += halfHeight;\n                textAlign = 'right';\n                textVerticalAlign = 'middle';\n                break;\n            case 'right':\n                x += distance + width;\n                y += halfHeight;\n                textVerticalAlign = 'middle';\n                break;\n            case 'top':\n                x += width / 2;\n                y -= distance;\n                textAlign = 'center';\n                textVerticalAlign = 'bottom';\n                break;\n            case 'bottom':\n                x += width / 2;\n                y += height + distance;\n                textAlign = 'center';\n                break;\n            case 'inside':\n                x += width / 2;\n                y += halfHeight;\n                textAlign = 'center';\n                textVerticalAlign = 'middle';\n                break;\n            case 'insideLeft':\n                x += distance;\n                y += halfHeight;\n                textVerticalAlign = 'middle';\n                break;\n            case 'insideRight':\n                x += width - distance;\n                y += halfHeight;\n                textAlign = 'right';\n                textVerticalAlign = 'middle';\n                break;\n            case 'insideTop':\n                x += width / 2;\n                y += distance;\n                textAlign = 'center';\n                break;\n            case 'insideBottom':\n                x += width / 2;\n                y += height - distance;\n                textAlign = 'center';\n                textVerticalAlign = 'bottom';\n                break;\n            case 'insideTopLeft':\n                x += distance;\n                y += distance;\n                break;\n            case 'insideTopRight':\n                x += width - distance;\n                y += distance;\n                textAlign = 'right';\n                break;\n            case 'insideBottomLeft':\n                x += distance;\n                y += height - distance;\n                textVerticalAlign = 'bottom';\n                break;\n            case 'insideBottomRight':\n                x += width - distance;\n                y += height - distance;\n                textAlign = 'right';\n                textVerticalAlign = 'bottom';\n                break;\n        }\n    }\n    out = out || {};\n    out.x = x;\n    out.y = y;\n    out.align = textAlign;\n    out.verticalAlign = textVerticalAlign;\n    return out;\n}\n"],"sourceRoot":""}